parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"vFY1":[function(require,module,exports) {

},{}],"M1Cf":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"===t(r)?r:String(r)}function i(e,r){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.preventDefault=f,exports.stopPropagation=a;var u=function(){function t(r){e(this,t),this.propagationStopped,this.defaultPrevented,this.type=r,this.target=null}return o(t,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),t}();function a(t){t.stopPropagation()}function f(t){t.preventDefault()}var p=u;exports.default=p;
},{}],"cEhm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PROPERTYCHANGE:"propertychange"};exports.default=e;
},{}],"jZkk":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var r=i(e,"string");return"symbol"===t(r)?r:String(r)}function i(e,r){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=function(){function t(){e(this,t),this.disposed=!1}return o(t,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}]),t}(),s=u;exports.default=s;
},{}],"o0G8":[function(require,module,exports) {
"use strict";function r(r,n,t){var u,f;t=t||e;for(var i=0,o=r.length,a=!1;i<o;)(f=+t(r[u=i+(o-i>>1)],n))<0?i=u+1:(o=u,a=!f);return a?i:~i}function e(r,e){return r>e?1:r<e?-1:0}function n(r,e,n){if(r[0]<=e)return 0;var t=r.length;if(e<=r[t-1])return t-1;if("function"==typeof n){for(var u=1;u<t;++u){var f=r[u];if(f===e)return u;if(f<e)return n(e,r[u-1],f)>0?u-1:u}return t-1}if(n>0){for(var i=1;i<t;++i)if(r[i]<e)return i-1;return t-1}if(n<0){for(var o=1;o<t;++o)if(r[o]<=e)return o;return t-1}for(var a=1;a<t;++a){if(r[a]==e)return a;if(r[a]<e)return r[a-1]-e<e-r[a]?a-1:a}return t-1}function t(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function u(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,u=0;u<t;u++)r[r.length]=n[u]}function f(r,e){var n=r.indexOf(e),t=n>-1;return t&&r.splice(n,1),t}function i(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}function o(r,e){var n,t=r.length,u=Array(r.length);for(n=0;n<t;n++)u[n]={index:n,value:r[n]};for(u.sort(function(r,n){return e(r.value,n.value)||r.index-n.index}),n=0;n<r.length;n++)r[n]=u[n].value}function a(r,n,t){var u=n||e;return r.every(function(e,n){if(0===n)return!0;var f=u(r[n-1],e);return!(f>0||t&&0===f)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ascending=e,exports.binarySearch=r,exports.equals=i,exports.extend=u,exports.isSorted=a,exports.linearFindNearest=n,exports.remove=f,exports.reverseSubArray=t,exports.stableSort=o;
},{}],"pDAE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FALSE=t,exports.TRUE=e,exports.VOID=n,exports.memoizeOne=o,exports.toPromise=s;var r=require("./array.js");function e(){return!0}function t(){return!1}function n(){}function o(e){var t,n,o,s=!1;return function(){var i=Array.prototype.slice.call(arguments);return s&&this===o&&(0,r.equals)(i,n)||(s=!0,o=this,n=i,t=e.apply(this,arguments)),t}}function s(r){return function(){var e;try{e=r()}catch(t){return Promise.reject(t)}return e instanceof Promise?e:Promise.resolve(e)}()}
},{"./array.js":"o0G8"}],"SLsU":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)delete e[r]}function r(e){var r;for(r in e)return!1;return!r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=e,exports.isEmpty=r;
},{}],"KnPA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../Disposable.js")),t=i(require("./Event.js")),n=require("../functions.js"),r=require("../obj.js");function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=c(e,"string");return"symbol"===o(t)?t:String(t)}function c(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=d();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(i){f(u,e.default);var o=v(u);function u(e){var t;return s(this,u),(t=o.call(this)).eventTarget_=e,t.pendingRemovals_=null,t.dispatching_=null,t.listeners_=null,t}return l(u,[{key:"addEventListener",value:function(e,t){if(e&&t){var n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(t)||r.push(t)}}},{key:"dispatchEvent",value:function(e){var r="string"==typeof e,i=r?e:e.type,o=this.listeners_&&this.listeners_[i];if(o){var s=r?new t.default(e):e;s.target||(s.target=this.eventTarget_||this);var u,l=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in l||(l[i]=0,a[i]=0),++l[i];for(var c=0,f=o.length;c<f;++c)if(!1===(u="handleEvent"in o[c]?o[c].handleEvent(s):o[c].call(this,s))||s.propagationStopped){u=!1;break}if(0==--l[i]){var p=a[i];for(delete a[i];p--;)this.removeEventListener(i,n.VOID);delete l[i]}return u}}},{key:"disposeInternal",value:function(){this.listeners_&&(0,r.clear)(this.listeners_)}},{key:"getListeners",value:function(e){return this.listeners_&&this.listeners_[e]||void 0}},{key:"hasListener",value:function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}},{key:"removeEventListener",value:function(e,t){var r=this.listeners_&&this.listeners_[e];if(r){var i=r.indexOf(t);-1!==i&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=n.VOID,++this.pendingRemovals_[e]):(r.splice(i,1),0===r.length&&delete this.listeners_[e]))}}}]),u}(),g=_;exports.default=g;
},{"../Disposable.js":"jZkk","./Event.js":"M1Cf","../functions.js":"pDAE","../obj.js":"SLsU"}],"GUXn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};exports.default=e;
},{}],"MGag":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listen=t,exports.listenOnce=r,exports.unlistenByKey=n;var e=require("./obj.js");function t(e,t,r,n,i){if(n&&n!==e&&(r=r.bind(n)),i){var s=r;r=function(){e.removeEventListener(t,r),s.apply(this,arguments)}}var o={target:e,type:t,listener:r};return e.addEventListener(t,r),o}function r(e,r,n,i){return t(e,r,n,i,!0)}function n(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,e.clear)(t))}
},{"./obj.js":"SLsU"}],"TW86":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.unByKey=m;var e=n(require("./events/Target.js")),t=n(require("./events/EventType.js")),r=require("./events.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function f(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=a(e,"string");return"symbol"===o(t)?t:String(t)}function a(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=b();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(n){l(u,e.default);var o=y(u);function u(){var e;return i(this,u),(e=o.call(this)).on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return f(u,[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(t.default.CHANGE)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(e,t){if(Array.isArray(e)){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=(0,r.listen)(this,e[i],t);return o}return(0,r.listen)(this,e,t)}},{key:"onceInternal",value:function(e,t){var n;if(Array.isArray(e)){var o=e.length;n=new Array(o);for(var i=0;i<o;++i)n[i]=(0,r.listenOnce)(this,e[i],t)}else n=(0,r.listenOnce)(this,e,t);return t.ol_key=n,n}},{key:"unInternal",value:function(e,t){var r=t.ol_key;if(r)m(r);else if(Array.isArray(e))for(var n=0,o=e.length;n<o;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)}}]),u}();function m(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;++t)(0,r.unlistenByKey)(e[t]);else(0,r.unlistenByKey)(e)}d.prototype.on,d.prototype.once,d.prototype.un;var O=d;exports.default=O;
},{"./events/Target.js":"KnPA","./events/EventType.js":"GUXn","./events.js":"MGag"}],"KA50":[function(require,module,exports) {
"use strict";function t(){throw new Error("Unimplemented abstract method.")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.VERSION=void 0,exports.abstract=t,exports.getUid=r;var e=0;function r(t){return t.ol_uid||(t.ol_uid=String(++e))}var o="7.4.0";exports.VERSION=o;
},{}],"fB8e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ObjectEvent=void 0;var e=i(require("./events/Event.js")),t=i(require("./ObjectEventType.js")),r=i(require("./Observable.js")),n=require("./util.js"),o=require("./obj.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=l(e,"string");return"symbol"===u(t)?t:String(t)}function l(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=d();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(t){v(n,e.default);var r=p(n);function n(e,t,o){var i;return f(this,n),(i=r.call(this,e)).key=t,i.oldValue=o,i}return a(n)}();exports.ObjectEvent=j;var O=function(e){v(u,r.default);var i=p(u);function u(e){var t;return f(this,u),(t=i.call(this)).on,t.once,t.un,(0,n.getUid)(b(t)),t.values_=null,void 0!==e&&t.setProperties(e),t}return a(u,[{key:"get",value:function(e){var t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}},{key:"getKeys",value:function(){return this.values_&&Object.keys(this.values_)||[]}},{key:"getProperties",value:function(){return this.values_&&Object.assign({},this.values_)||{}}},{key:"hasProperties",value:function(){return!!this.values_}},{key:"notify",value:function(e,r){var n;n="change:".concat(e),this.hasListener(n)&&this.dispatchEvent(new j(n,e,r)),n=t.default.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new j(n,e,r))}},{key:"addChangeListener",value:function(e,t){this.addEventListener("change:".concat(e),t)}},{key:"removeChangeListener",value:function(e,t){this.removeEventListener("change:".concat(e),t)}},{key:"set",value:function(e,t,r){var n=this.values_||(this.values_={});if(r)n[e]=t;else{var o=n[e];n[e]=t,o!==t&&this.notify(e,o)}}},{key:"setProperties",value:function(e,t){for(var r in e)this.set(r,e[r],t)}},{key:"applyProperties",value:function(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}},{key:"unset",value:function(e,t){if(this.values_&&e in this.values_){var r=this.values_[e];delete this.values_[e],(0,o.isEmpty)(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}]),u}(),m=O;exports.default=m;
},{"./events/Event.js":"M1Cf","./ObjectEventType.js":"cEhm","./Observable.js":"TW86","./util.js":"KA50","./obj.js":"SLsU"}],"ZRwq":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(t){var r=o(t,"string");return"symbol"===e(r)?r:String(r)}function o(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function u(e){var t=f();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||!p(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,e)})(e)}function d(e,t,r){return(d=f()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&y(o,r.prototype),o}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function p(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var h={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"},m=function(e){a(n,l(Error));var t=u(n);function n(e){var r;i(this,n);var o=h[e];return(r=t.call(this,o)).code=e,r.name="AssertionError",r.message=o,r}return r(n)}(),v=m;exports.default=v;
},{}],"f4vV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADD:"add",REMOVE:"remove"};exports.default=e;
},{}],"Kjrg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CollectionEvent=void 0;var t=i(require("./AssertionError.js")),e=i(require("./Object.js")),r=i(require("./CollectionEventType.js")),n=i(require("./events/Event.js"));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function a(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=f(t,"string");return"symbol"===o(e)?e:String(e)}function f(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=d();return function(){var r,n=_(t);if(e){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b={LENGTH:"length"},g=function(t){l(r,n.default);var e=y(r);function r(t,n,i){var o;return c(this,r),(o=e.call(this,t)).element=n,o.index=i,o}return a(r)}();exports.CollectionEvent=g;var m=function(n){l(o,e.default);var i=y(o);function o(t,e){var r;if(c(this,o),(r=i.call(this)).on,r.once,r.un,e=e||{},r.unique_=!!e.unique,r.array_=t||[],r.unique_)for(var n=0,u=r.array_.length;n<u;++n)r.assertUnique_(r.array_[n],n);return r.updateLength_(),r}return a(o,[{key:"clear",value:function(){for(;this.getLength()>0;)this.pop()}},{key:"extend",value:function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this}},{key:"forEach",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)}},{key:"getArray",value:function(){return this.array_}},{key:"item",value:function(t){return this.array_[t]}},{key:"getLength",value:function(){return this.get(b.LENGTH)}},{key:"insertAt",value:function(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new g(r.default.ADD,e,t))}},{key:"pop",value:function(){return this.removeAt(this.getLength()-1)}},{key:"push",value:function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()}},{key:"remove",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)}},{key:"removeAt",value:function(t){if(!(t<0||t>=this.getLength())){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new g(r.default.REMOVE,e,t)),e}}},{key:"setAt",value:function(t,e){if(t>=this.getLength())this.insertAt(t,e);else{if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new g(r.default.REMOVE,n,t)),this.dispatchEvent(new g(r.default.ADD,e,t))}}},{key:"updateLength_",value:function(){this.set(b.LENGTH,this.array_.length)}},{key:"assertUnique_",value:function(e,r){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==r)throw new t.default(58)}}]),o}(),w=m;exports.default=w;
},{"./AssertionError.js":"ZRwq","./Object.js":"fB8e","./CollectionEventType.js":"f4vV","./events/Event.js":"M1Cf"}],"mpkP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WORKER_OFFSCREEN_CANVAS=exports.WEBKIT=exports.SAFARI_BUG_237906=exports.SAFARI=exports.PASSIVE_EVENT_LISTENERS=exports.MAC=exports.IMAGE_DECODE=exports.FIREFOX=exports.DEVICE_PIXEL_RATIO=void 0;var e="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",o=e.includes("firefox");exports.FIREFOX=o;var r=e.includes("safari")&&!e.includes("chrom");exports.SAFARI=r;var t=r&&(e.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(e));exports.SAFARI_BUG_237906=t;var s=e.includes("webkit")&&!e.includes("edge");exports.WEBKIT=s;var n=e.includes("macintosh");exports.MAC=n;var i="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;exports.DEVICE_PIXEL_RATIO=i;var a="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope;exports.WORKER_OFFSCREEN_CANVAS=a;var E="undefined"!=typeof Image&&Image.prototype.decode;exports.IMAGE_DECODE=E;var p=function(){var e=!1;try{var o=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,o),window.removeEventListener("_",null,o)}catch(r){}return e}();exports.PASSIVE_EVENT_LISTENERS=p;
},{}],"DVOE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t;var e=r(require("./AssertionError.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(!r)throw new e.default(t)}
},{"./AssertionError.js":"ZRwq"}],"Ln8D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.apply=c,exports.compose=v,exports.composeCssTransform=l,exports.create=o,exports.determinant=h,exports.invert=y,exports.makeInverse=d,exports.makeScale=x,exports.multiply=u,exports.reset=s,exports.rotate=p,exports.scale=f,exports.set=a,exports.setFromArray=i,exports.toString=M,exports.translate=m;var r,t=require("./has.js"),e=require("./asserts.js"),n=new Array(6);function o(){return[1,0,0,1,0,0]}function s(r){return a(r,1,0,0,1,0,0)}function u(r,t){var e=r[0],n=r[1],o=r[2],s=r[3],u=r[4],a=r[5],i=t[0],c=t[1],p=t[2],f=t[3],x=t[4],m=t[5];return r[0]=e*i+o*c,r[1]=n*i+s*c,r[2]=e*p+o*f,r[3]=n*p+s*f,r[4]=e*x+o*m+u,r[5]=n*x+s*m+a,r}function a(r,t,e,n,o,s,u){return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r[4]=s,r[5]=u,r}function i(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function c(r,t){var e=t[0],n=t[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t}function p(r,t){var e=Math.cos(t),o=Math.sin(t);return u(r,a(n,e,o,-o,e,0,0))}function f(r,t,e){return u(r,a(n,t,0,0,e,0,0))}function x(r,t,e){return a(r,t,0,0,e,0,0)}function m(r,t,e){return u(r,a(n,1,0,0,1,t,e))}function v(r,t,e,n,o,s,u,a){var i=Math.sin(s),c=Math.cos(s);return r[0]=n*c,r[1]=o*i,r[2]=-n*i,r[3]=o*c,r[4]=u*n*c-a*n*i+t,r[5]=u*o*i+a*o*c+e,r}function l(r,t,e,n,s,u,a){return M(v(o(),r,t,e,n,s,u,a))}function y(r){return d(r,r)}function d(r,t){var n=h(t);(0,e.assert)(0!==n,32);var o=t[0],s=t[1],u=t[2],a=t[3],i=t[4],c=t[5];return r[0]=a/n,r[1]=-s/n,r[2]=-u/n,r[3]=o/n,r[4]=(u*c-a*i)/n,r[5]=-(o*c-s*i)/n,r}function h(r){return r[0]*r[3]-r[1]*r[2]}function M(e){var n="matrix("+e.join(", ")+")";if(t.WORKER_OFFSCREEN_CANVAS)return n;var o=r||(r=document.createElement("div"));return o.style.transform=n,o.style.transform}
},{"./has.js":"mpkP","./asserts.js":"DVOE"}],"kQlD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};exports.default=e;
},{}],"L0Vw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyTransform=rt,exports.approximatelyEquals=A,exports.boundingExtent=s,exports.buffer=p,exports.clone=l,exports.closestSquaredDistanceXY=x,exports.containsCoordinate=d,exports.containsExtent=h,exports.containsXY=m,exports.coordinateRelationship=g,exports.createEmpty=v,exports.createOrUpdate=y,exports.createOrUpdateEmpty=M,exports.createOrUpdateFromCoordinate=E,exports.createOrUpdateFromCoordinates=b,exports.createOrUpdateFromFlatCoordinates=O,exports.createOrUpdateFromRings=T,exports.equals=C,exports.extend=I,exports.extendCoordinate=F,exports.extendCoordinates=R,exports.extendFlatCoordinates=S,exports.extendRings=N,exports.extendXY=U,exports.forEachCorner=j,exports.getArea=w,exports.getBottomLeft=B,exports.getBottomRight=L,exports.getCenter=W,exports.getCorner=X,exports.getEnlargedArea=G,exports.getForViewAndSize=q,exports.getHeight=H,exports.getIntersection=Y,exports.getIntersectionArea=_,exports.getMargin=z,exports.getRotatedViewport=V,exports.getSize=K,exports.getTopLeft=D,exports.getTopRight=P,exports.getWidth=$,exports.intersects=k,exports.intersectsSegment=tt,exports.isEmpty=J,exports.returnOrUpdate=Q,exports.scaleFromCenter=Z,exports.wrapAndSliceX=nt,exports.wrapX=et;var t=e(require("./extent/Relationship.js")),r=require("./asserts.js");function e(t){return t&&t.__esModule?t:{default:t}}function n(t,r){return f(t)||i(t,r)||u(t,r)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,r){if(t){if("string"==typeof t)return a(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,r):void 0}}function a(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function i(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,u,a,i=[],f=!0,s=!1;try{if(u=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;f=!1}else for(;!(f=(n=u.call(e)).done)&&(i.push(n.value),i.length!==r);f=!0);}catch(c){s=!0,o=c}finally{try{if(!f&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(s)throw o}}return i}}function f(t){if(Array.isArray(t))return t}function s(t){for(var r=v(),e=0,n=t.length;e<n;++e)F(r,t[e]);return r}function c(t,r,e){return y(Math.min.apply(null,t),Math.min.apply(null,r),Math.max.apply(null,t),Math.max.apply(null,r),e)}function p(t,r,e){return e?(e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]+r,e[3]=t[3]+r,e):[t[0]-r,t[1]-r,t[2]+r,t[3]+r]}function l(t,r){return r?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r):t.slice()}function x(t,r,e){var n,o;return(n=r<t[0]?t[0]-r:t[2]<r?r-t[2]:0)*n+(o=e<t[1]?t[1]-e:t[3]<e?e-t[3]:0)*o}function d(t,r){return m(t,r[0],r[1])}function h(t,r){return t[0]<=r[0]&&r[2]<=t[2]&&t[1]<=r[1]&&r[3]<=t[3]}function m(t,r,e){return t[0]<=r&&r<=t[2]&&t[1]<=e&&e<=t[3]}function g(r,e){var n=r[0],o=r[1],u=r[2],a=r[3],i=e[0],f=e[1],s=t.default.UNKNOWN;return i<n?s|=t.default.LEFT:i>u&&(s|=t.default.RIGHT),f<o?s|=t.default.BELOW:f>a&&(s|=t.default.ABOVE),s===t.default.UNKNOWN&&(s=t.default.INTERSECTING),s}function v(){return[1/0,1/0,-1/0,-1/0]}function y(t,r,e,n,o){return o?(o[0]=t,o[1]=r,o[2]=e,o[3]=n,o):[t,r,e,n]}function M(t){return y(1/0,1/0,-1/0,-1/0,t)}function E(t,r){var e=t[0],n=t[1];return y(e,n,e,n,r)}function b(t,r){return R(M(r),t)}function O(t,r,e,n,o){return S(M(o),t,r,e,n)}function T(t,r){return N(M(r),t)}function C(t,r){return t[0]==r[0]&&t[2]==r[2]&&t[1]==r[1]&&t[3]==r[3]}function A(t,r,e){return Math.abs(t[0]-r[0])<e&&Math.abs(t[2]-r[2])<e&&Math.abs(t[1]-r[1])<e&&Math.abs(t[3]-r[3])<e}function I(t,r){return r[0]<t[0]&&(t[0]=r[0]),r[2]>t[2]&&(t[2]=r[2]),r[1]<t[1]&&(t[1]=r[1]),r[3]>t[3]&&(t[3]=r[3]),t}function F(t,r){r[0]<t[0]&&(t[0]=r[0]),r[0]>t[2]&&(t[2]=r[0]),r[1]<t[1]&&(t[1]=r[1]),r[1]>t[3]&&(t[3]=r[1])}function R(t,r){for(var e=0,n=r.length;e<n;++e)F(t,r[e]);return t}function S(t,r,e,n,o){for(;e<n;e+=o)U(t,r[e],r[e+1]);return t}function N(t,r){for(var e=0,n=r.length;e<n;++e)R(t,r[e]);return t}function U(t,r,e){t[0]=Math.min(t[0],r),t[1]=Math.min(t[1],e),t[2]=Math.max(t[2],r),t[3]=Math.max(t[3],e)}function j(t,r){var e;return(e=r(B(t)))?e:(e=r(L(t)))?e:(e=r(P(t)))?e:(e=r(D(t)))||!1}function w(t){var r=0;return J(t)||(r=$(t)*H(t)),r}function B(t){return[t[0],t[1]]}function L(t){return[t[2],t[1]]}function W(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function X(t,e){var n;return"bottom-left"===e?n=B(t):"bottom-right"===e?n=L(t):"top-left"===e?n=D(t):"top-right"===e?n=P(t):(0,r.assert)(!1,13),n}function G(t,r){var e=Math.min(t[0],r[0]),n=Math.min(t[1],r[1]);return(Math.max(t[2],r[2])-e)*(Math.max(t[3],r[3])-n)}function q(t,r,e,o,u){var a=n(V(t,r,e,o),8),i=a[0],f=a[1],s=a[2],c=a[3],p=a[4],l=a[5],x=a[6],d=a[7];return y(Math.min(i,s,p,x),Math.min(f,c,l,d),Math.max(i,s,p,x),Math.max(f,c,l,d),u)}function V(t,r,e,n){var o=r*n[0]/2,u=r*n[1]/2,a=Math.cos(e),i=Math.sin(e),f=o*a,s=o*i,c=u*a,p=u*i,l=t[0],x=t[1];return[l-f+p,x-s-c,l-f-p,x-s+c,l+f-p,x+s+c,l+f+p,x+s-c,l-f+p,x-s-c]}function H(t){return t[3]-t[1]}function _(t,r){return w(Y(t,r))}function Y(t,r,e){var n=e||v();return k(t,r)?(t[0]>r[0]?n[0]=t[0]:n[0]=r[0],t[1]>r[1]?n[1]=t[1]:n[1]=r[1],t[2]<r[2]?n[2]=t[2]:n[2]=r[2],t[3]<r[3]?n[3]=t[3]:n[3]=r[3]):M(n),n}function z(t){return $(t)+H(t)}function K(t){return[t[2]-t[0],t[3]-t[1]]}function D(t){return[t[0],t[3]]}function P(t){return[t[2],t[3]]}function $(t){return t[2]-t[0]}function k(t,r){return t[0]<=r[2]&&t[2]>=r[0]&&t[1]<=r[3]&&t[3]>=r[1]}function J(t){return t[2]<t[0]||t[3]<t[1]}function Q(t,r){return r?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r):t}function Z(t,r){var e=(t[2]-t[0])/2*(r-1),n=(t[3]-t[1])/2*(r-1);t[0]-=e,t[2]+=e,t[1]-=n,t[3]+=n}function tt(r,e,n){var o=!1,u=g(r,e),a=g(r,n);if(u===t.default.INTERSECTING||a===t.default.INTERSECTING)o=!0;else{var i,f,s=r[0],c=r[1],p=r[2],l=r[3],x=e[0],d=e[1],h=n[0],m=n[1],v=(m-d)/(h-x);a&t.default.ABOVE&&!(u&t.default.ABOVE)&&(o=(i=h-(m-l)/v)>=s&&i<=p),o||!(a&t.default.RIGHT)||u&t.default.RIGHT||(o=(f=m-(h-p)*v)>=c&&f<=l),o||!(a&t.default.BELOW)||u&t.default.BELOW||(o=(i=h-(m-c)/v)>=s&&i<=p),o||!(a&t.default.LEFT)||u&t.default.LEFT||(o=(f=m-(h-s)*v)>=c&&f<=l)}return o}function rt(t,r,e,n){if(J(t))return M(e);var o=[];if(n>1)for(var u=t[2]-t[0],a=t[3]-t[1],i=0;i<n;++i)o.push(t[0]+u*i/n,t[1],t[2],t[1]+a*i/n,t[2]-u*i/n,t[3],t[0],t[3]-a*i/n);else o=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];r(o,o,2);for(var f=[],s=[],p=0,l=o.length;p<l;p+=2)f.push(o[p]),s.push(o[p+1]);return c(f,s,e)}function et(t,r){var e=r.getExtent(),n=W(t);if(r.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){var o=$(e),u=Math.floor((n[0]-e[0])/o)*o;t[0]-=u,t[2]-=u}return t}function nt(t,r){if(r.canWrapX()){var e=r.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[e[0],t[1],e[2],t[3]]];et(t,r);var n=$(e);if($(t)>n)return[[e[0],t[1],e[2],t[3]]];if(t[0]<e[0])return[[t[0]+n,t[1],e[2],t[3]],[e[0],t[1],t[2],t[3]]];if(t[2]>e[2])return[[t[0],t[1],e[2],t[3]],[e[0],t[1],t[2]-n,t[3]]]}return[t]}
},{"./extent/Relationship.js":"kQlD","./asserts.js":"DVOE"}],"qAK2":[function(require,module,exports) {
"use strict";function r(r,t,e){return Math.min(Math.max(r,t),e)}function t(r,t,n,o,a,u){var s=a-n,i=u-o;if(0!==s||0!==i){var f=((r-n)*s+(t-o)*i)/(s*s+i*i);f>1?(n=a,o=u):f>0&&(n+=s*f,o+=i*f)}return e(r,t,n,o)}function e(r,t,e,n){var o=e-r,a=n-t;return o*o+a*a}function n(r){for(var t=r.length,e=0;e<t;e++){for(var n=e,o=Math.abs(r[e][e]),a=e+1;a<t;a++){var u=Math.abs(r[a][e]);u>o&&(o=u,n=a)}if(0===o)return null;var s=r[n];r[n]=r[e],r[e]=s;for(var i=e+1;i<t;i++)for(var f=-r[i][e]/r[e][e],c=e;c<t+1;c++)e==c?r[i][c]=0:r[i][c]+=f*r[e][c]}for(var p=new Array(t),v=t-1;v>=0;v--){p[v]=r[v][t]/r[v][v];for(var x=v-1;x>=0;x--)r[x][t]-=r[x][v]*p[v]}return p}function o(r){return 180*r/Math.PI}function a(r){return r*Math.PI/180}function u(r,t){var e=r%t;return e*t<0?e+t:e}function s(r,t,e){return r+e*(t-r)}function i(r,t){var e=Math.pow(10,t);return Math.round(r*e)/e}function f(r,t){return Math.round(i(r,t))}function c(r,t){return Math.floor(i(r,t))}function p(r,t){return Math.ceil(i(r,t))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceil=p,exports.clamp=r,exports.floor=c,exports.lerp=s,exports.modulo=u,exports.round=f,exports.solveLinearSystem=n,exports.squaredDistance=e,exports.squaredSegmentDistance=t,exports.toDegrees=o,exports.toFixed=i,exports.toRadians=a;
},{}],"XaHX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asArray=i,exports.asString=a,exports.fromString=void 0,exports.isStringColor=l,exports.normalize=p,exports.toString=c;var r=require("./asserts.js"),t=require("./math.js"),e=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,s=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(r){return"string"==typeof r?r:c(r)}function n(r){var t=document.createElement("div");if(t.style.color=r,""!==t.style.color){document.body.appendChild(t);var e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}var o=function(){var r={},t=0;return function(e){var s;if(r.hasOwnProperty(e))s=r[e];else{if(t>=1024){var a=0;for(var n in r)0==(3&a++)&&(delete r[n],--t)}s=u(e),r[e]=s,++t}return s}}();function i(r){return Array.isArray(r)?r:o(r)}function u(t){var a,o,i,u,c;if(s.exec(t)&&(t=n(t)),e.exec(t)){var l,f=t.length-1;l=f<=4?1:2;var v=4===f||8===f;a=parseInt(t.substr(1+0*l,l),16),o=parseInt(t.substr(1+1*l,l),16),i=parseInt(t.substr(1+2*l,l),16),u=v?parseInt(t.substr(1+3*l,l),16):255,1==l&&(a=(a<<4)+a,o=(o<<4)+o,i=(i<<4)+i,v&&(u=(u<<4)+u)),c=[a,o,i,u/255]}else t.startsWith("rgba(")?p(c=t.slice(5,-1).split(",").map(Number)):t.startsWith("rgb(")?((c=t.slice(4,-1).split(",").map(Number)).push(1),p(c)):(0,r.assert)(!1,14);return c}function p(r){return r[0]=(0,t.clamp)(r[0]+.5|0,0,255),r[1]=(0,t.clamp)(r[1]+.5|0,0,255),r[2]=(0,t.clamp)(r[2]+.5|0,0,255),r[3]=(0,t.clamp)(r[3],0,1),r}function c(r){var t=r[0];t!=(0|t)&&(t=t+.5|0);var e=r[1];e!=(0|e)&&(e=e+.5|0);var s=r[2];return s!=(0|s)&&(s=s+.5|0),"rgba("+t+","+e+","+s+","+(void 0===r[3]?1:Math.round(100*r[3])/100)+")"}function l(r){return s.test(r)&&(r=n(r)),e.test(r)||r.startsWith("rgba(")||r.startsWith("rgb(")}exports.fromString=o;
},{"./asserts.js":"DVOE","./math.js":"qAK2"}],"V9TC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shared=exports.default=void 0;var e=require("../color.js");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function n(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var r=o(e,"string");return"symbol"===t(r)?r:String(r)}function o(e,r){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,r||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}var c=function(){function e(){r(this,e),this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return n(e,[{key:"clear",value:function(){this.cache_={},this.cacheSize_=0}},{key:"canExpireCache",value:function(){return this.cacheSize_>this.maxCacheSize_}},{key:"expire",value:function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var r=this.cache_[t];0!=(3&e++)||r.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}}},{key:"get",value:function(e,t,r){var i=u(e,t,r);return i in this.cache_?this.cache_[i]:null}},{key:"set",value:function(e,t,r,i){var n=u(e,t,r);this.cache_[n]=i,++this.cacheSize_}},{key:"setSize",value:function(e){this.maxCacheSize_=e,this.expire()}}]),e}();function u(t,r,i){return r+":"+t+":"+(i?(0,e.asString)(i):"null")}var s=c;exports.default=s;var h=new c;exports.shared=h;
},{"../color.js":"XaHX"}],"yK6k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};exports.default=e;
},{}],"o2hU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../Object.js")),e=i(require("./Property.js")),n=require("../util.js"),r=require("../asserts.js"),o=require("../math.js");function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===u(e)?e:String(e)}function f(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=d(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function d(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=m();return function(){var n,r=O(t);if(e){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(i){p(c,t.default);var s=h(c);function c(t){var n;a(this,c),(n=s.call(this)).on,n.once,n.un,n.background_=t.background;var o=Object.assign({},t);return"object"===u(t.properties)&&(delete o.properties,Object.assign(o,t.properties)),o[e.default.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,r.assert)("number"==typeof o[e.default.OPACITY],64),o[e.default.VISIBLE]=void 0===t.visible||t.visible,o[e.default.Z_INDEX]=t.zIndex,o[e.default.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,o[e.default.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,o[e.default.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,o[e.default.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,n.className_=void 0!==o.className?o.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return l(c,[{key:"getBackground",value:function(){return this.background_}},{key:"getClassName",value:function(){return this.className_}},{key:"getLayerState",value:function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=(0,o.clamp)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}},{key:"getLayersArray",value:function(t){return(0,n.abstract)()}},{key:"getLayerStatesArray",value:function(t){return(0,n.abstract)()}},{key:"getExtent",value:function(){return this.get(e.default.EXTENT)}},{key:"getMaxResolution",value:function(){return this.get(e.default.MAX_RESOLUTION)}},{key:"getMinResolution",value:function(){return this.get(e.default.MIN_RESOLUTION)}},{key:"getMinZoom",value:function(){return this.get(e.default.MIN_ZOOM)}},{key:"getMaxZoom",value:function(){return this.get(e.default.MAX_ZOOM)}},{key:"getOpacity",value:function(){return this.get(e.default.OPACITY)}},{key:"getSourceState",value:function(){return(0,n.abstract)()}},{key:"getVisible",value:function(){return this.get(e.default.VISIBLE)}},{key:"getZIndex",value:function(){return this.get(e.default.Z_INDEX)}},{key:"setBackground",value:function(t){this.background_=t,this.changed()}},{key:"setExtent",value:function(t){this.set(e.default.EXTENT,t)}},{key:"setMaxResolution",value:function(t){this.set(e.default.MAX_RESOLUTION,t)}},{key:"setMinResolution",value:function(t){this.set(e.default.MIN_RESOLUTION,t)}},{key:"setMaxZoom",value:function(t){this.set(e.default.MAX_ZOOM,t)}},{key:"setMinZoom",value:function(t){this.set(e.default.MIN_ZOOM,t)}},{key:"setOpacity",value:function(t){(0,r.assert)("number"==typeof t,64),this.set(e.default.OPACITY,t)}},{key:"setVisible",value:function(t){this.set(e.default.VISIBLE,t)}},{key:"setZIndex",value:function(t){this.set(e.default.Z_INDEX,t)}},{key:"disposeInternal",value:function(){this.state_&&(this.state_.layer=null,this.state_=null),y(O(c.prototype),"disposeInternal",this).call(this)}}]),c}(),M=_;exports.default=M;
},{"../Object.js":"fB8e","./Property.js":"yK6k","../util.js":"KA50","../asserts.js":"DVOE","../math.js":"qAK2"}],"JwZs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};exports.default=e;
},{}],"DfOy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ANIMATING:0,INTERACTING:1};exports.default=e;
},{}],"t10A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};exports.default=e;
},{}],"exM9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_TILE_SIZE=exports.DEFAULT_MAX_ZOOM=void 0;var e=42;exports.DEFAULT_MAX_ZOOM=e;var r=256;exports.DEFAULT_TILE_SIZE=r;
},{}],"TVqV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.METERS_PER_UNIT=void 0,exports.fromCode=r;var e={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function r(r){return e[r]}var t={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};exports.METERS_PER_UNIT=t;
},{}],"wxkT":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Units.js");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,u(i.key),i)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=l(t,"string");return"symbol"===n(e)?e:String(e)}function l(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var a=function(){function t(e){i(this,t),this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return r(t,[{key:"canWrapX",value:function(){return this.canWrapX_}},{key:"getCode",value:function(){return this.code_}},{key:"getExtent",value:function(){return this.extent_}},{key:"getUnits",value:function(){return this.units_}},{key:"getMetersPerUnit",value:function(){return this.metersPerUnit_||e.METERS_PER_UNIT[this.units_]}},{key:"getWorldExtent",value:function(){return this.worldExtent_}},{key:"getAxisOrientation",value:function(){return this.axisOrientation_}},{key:"isGlobal",value:function(){return this.global_}},{key:"setGlobal",value:function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}},{key:"getDefaultTileGrid",value:function(){return this.defaultTileGrid_}},{key:"setDefaultTileGrid",value:function(t){this.defaultTileGrid_=t}},{key:"setExtent",value:function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}},{key:"setWorldExtent",value:function(t){this.worldExtent_=t}},{key:"setGetPointResolution",value:function(t){this.getPointResolutionFunc_=t}},{key:"getPointResolutionFunc",value:function(){return this.getPointResolutionFunc_}}]),t}(),s=a;exports.default=s;
},{"./Units.js":"TVqV"}],"Znm6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WORLD_EXTENT=exports.RADIUS=exports.PROJECTIONS=exports.MAX_SAFE_Y=exports.HALF_SIZE=exports.EXTENT=void 0,exports.fromEPSG4326=m,exports.toEPSG4326=O;var t=e(require("./Projection.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=u(t,"string");return"symbol"===r(e)?e:String(e)}function u(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=6378137;exports.RADIUS=v;var h=Math.PI*v;exports.HALF_SIZE=h;var w=[-h,-h,h,h];exports.EXTENT=w;var d=[-180,-85,180,85];exports.WORLD_EXTENT=d;var E=v*Math.log(Math.tan(Math.PI/2));exports.MAX_SAFE_Y=E;var P=function(e){f(n,t.default);var r=l(n);function n(t){return c(this,n),r.call(this,{code:t,units:"m",extent:w,global:!0,worldExtent:d,getPointResolution:function(t,e){return t/Math.cosh(e[1]/v)}})}return o(n)}(),S=[new P("EPSG:3857"),new P("EPSG:102100"),new P("EPSG:102113"),new P("EPSG:900913"),new P("http://www.opengis.net/def/crs/EPSG/0/3857"),new P("http://www.opengis.net/gml/srs/epsg.xml#3857")];function m(t,e,r){var n=t.length;r=r>1?r:2,void 0===e&&(e=r>2?t.slice():new Array(n));for(var o=0;o<n;o+=r){e[o]=h*t[o]/180;var i=v*Math.log(Math.tan(Math.PI*(+t[o+1]+90)/360));i>E?i=E:i<-E&&(i=-E),e[o+1]=i}return e}function O(t,e,r){var n=t.length;r=r>1?r:2,void 0===e&&(e=r>2?t.slice():new Array(n));for(var o=0;o<n;o+=r)e[o]=180*t[o]/h,e[o+1]=360*Math.atan(Math.exp(t[o+1]/v))/Math.PI-90;return e}exports.PROJECTIONS=S;
},{"./Projection.js":"wxkT"}],"ztm5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RADIUS=exports.PROJECTIONS=exports.METERS_PER_UNIT=exports.EXTENT=void 0;var t=e(require("./Projection.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=u(t,"string");return"symbol"===r(e)?e:String(e)}function u(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=6378137;exports.RADIUS=w;var d=[-180,-90,180,90];exports.EXTENT=d;var v=Math.PI*w/180;exports.METERS_PER_UNIT=v;var O=function(e){f(n,t.default);var r=l(n);function n(t,e){return c(this,n),r.call(this,{code:t,units:"degrees",extent:d,axisOrientation:e,global:!0,metersPerUnit:v,worldExtent:d})}return o(n)}(),m=[new O("CRS:84"),new O("EPSG:4326","neu"),new O("urn:ogc:def:crs:OGC:1.3:CRS84"),new O("urn:ogc:def:crs:OGC:2:84"),new O("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new O("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new O("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];exports.PROJECTIONS=m;
},{"./Projection.js":"wxkT"}],"pht6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=n,exports.clear=r,exports.get=t;var e={};function r(){e={}}function t(r){return e[r]||e[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function n(r,t){e[r]=t}
},{}],"w9tV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=o,exports.clear=r,exports.get=i,exports.remove=n;var e=require("../obj.js"),t={};function r(){t={}}function o(e,r,o){var n=e.getCode(),i=r.getCode();n in t||(t[n]={}),t[n][i]=o}function n(r,o){var n=r.getCode(),i=o.getCode(),d=t[n][i];return delete t[n][i],(0,e.isEmpty)(t[n])&&delete t[n],d}function i(e,r){var o;return e in t&&r in t[e]&&(o=t[e][r]),o}
},{"../obj.js":"SLsU"}],"nqHs":[function(require,module,exports) {
"use strict";function e(e,r,t){var n=void 0!==t?e.toFixed(t):""+e,i=n.indexOf(".");return(i=-1===i?n.length:i)>r?n:new Array(1+r-i).join("0")+n}function r(e,r){for(var t=(""+e).split("."),n=(""+r).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),s=parseInt(n[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compareVersions=r,exports.padNumber=e;
},{}],"CMtO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=n,exports.closestOnCircle=o,exports.closestOnSegment=u,exports.createStringXY=a,exports.degreesToStringHDMS=s,exports.distance=d,exports.equals=c,exports.format=i,exports.getWorldsAway=M,exports.rotate=f,exports.scale=p,exports.squaredDistance=x,exports.squaredDistanceToSegment=g,exports.toStringHDMS=l,exports.toStringXY=h,exports.wrapX=v;var t=require("./extent.js"),r=require("./math.js"),e=require("./string.js");function n(t,r){return t[0]+=+r[0],t[1]+=+r[1],t}function o(t,r){var e=r.getRadius(),n=r.getCenter(),o=n[0],u=n[1],a=t[0]-o,s=t[1]-u;0===a&&0===s&&(a=1);var i=Math.sqrt(a*a+s*s);return[o+e*a/i,u+e*s/i]}function u(t,r){var e,n,o=t[0],u=t[1],a=r[0],s=r[1],i=a[0],c=a[1],f=s[0],p=s[1],x=f-i,d=p-c,g=0===x&&0===d?0:(x*(o-i)+d*(u-c))/(x*x+d*d||0);return g<=0?(e=i,n=c):g>=1?(e=f,n=p):(e=i+g*x,n=c+g*d),[e,n]}function a(t){return function(r){return h(r,t)}}function s(t,n,o){var u=(0,r.modulo)(n+180,360)-180,a=Math.abs(3600*u),s=o||0,i=Math.floor(a/3600),c=Math.floor((a-3600*i)/60),f=(0,r.toFixed)(a-3600*i-60*c,s);f>=60&&(f=0,c+=1),c>=60&&(c=0,i+=1);var p=i+"";return 0===c&&0===f||(p+=" "+(0,e.padNumber)(c,2)+""),0!==f&&(p+=" "+(0,e.padNumber)(f,2,s)+""),0!==u&&(p+=" "+t.charAt(u<0?1:0)),p}function i(t,r,e){return t?r.replace("{x}",t[0].toFixed(e)).replace("{y}",t[1].toFixed(e)):""}function c(t,r){for(var e=!0,n=t.length-1;n>=0;--n)if(t[n]!=r[n]){e=!1;break}return e}function f(t,r){var e=Math.cos(r),n=Math.sin(r),o=t[0]*e-t[1]*n,u=t[1]*e+t[0]*n;return t[0]=o,t[1]=u,t}function p(t,r){return t[0]*=r,t[1]*=r,t}function x(t,r){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function d(t,r){return Math.sqrt(x(t,r))}function g(t,r){return x(t,u(t,r))}function l(t,r){return t?s("NS",t[1],r)+" "+s("EW",t[0],r):""}function h(t,r){return i(t,"{x}, {y}",r)}function v(r,e){if(e.canWrapX()){var n=(0,t.getWidth)(e.getExtent()),o=M(r,e,n);o&&(r[0]-=o*n)}return r}function M(r,e,n){var o=e.getExtent(),u=0;return e.canWrapX()&&(r[0]<o[0]||r[0]>o[2])&&(n=n||(0,t.getWidth)(o),u=Math.floor((r[0]-o[0])/n)),u}
},{"./extent.js":"L0Vw","./math.js":"qAK2","./string.js":"nqHs"}],"TxdA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_RADIUS=void 0,exports.getArea=s,exports.getDistance=a,exports.getLength=o,exports.offset=i;var t=require("./math.js"),e=6371008.8;function a(a,r,o){o=o||e;var n=(0,t.toRadians)(a[1]),s=(0,t.toRadians)(r[1]),i=(s-n)/2,h=(0,t.toRadians)(r[0]-a[0])/2,c=Math.sin(i)*Math.sin(i)+Math.sin(h)*Math.sin(h)*Math.cos(n)*Math.cos(s);return 2*o*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function r(t,e){for(var r=0,o=0,n=t.length;o<n-1;++o)r+=a(t[o],t[o+1],e);return r}function o(t,a){var n=(a=a||{}).radius||e,s=a.projection||"EPSG:3857",i=t.getType();"GeometryCollection"!==i&&(t=t.clone().transform(s,"EPSG:4326"));var h,c,g,M,l,u,f=0;switch(i){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":f=r(h=t.getCoordinates(),n);break;case"MultiLineString":case"Polygon":for(g=0,M=(h=t.getCoordinates()).length;g<M;++g)f+=r(h[g],n);break;case"MultiPolygon":for(g=0,M=(h=t.getCoordinates()).length;g<M;++g)for(l=0,u=(c=h[g]).length;l<u;++l)f+=r(c[l],n);break;case"GeometryCollection":var d=t.getGeometries();for(g=0,M=d.length;g<M;++g)f+=o(d[g],a);break;default:throw new Error("Unsupported geometry type: "+i)}return f}function n(e,a){for(var r=0,o=e.length,n=e[o-1][0],s=e[o-1][1],i=0;i<o;i++){var h=e[i][0],c=e[i][1];r+=(0,t.toRadians)(h-n)*(2+Math.sin((0,t.toRadians)(s))+Math.sin((0,t.toRadians)(c))),n=h,s=c}return r*a*a/2}function s(t,a){var r=(a=a||{}).radius||e,o=a.projection||"EPSG:3857",i=t.getType();"GeometryCollection"!==i&&(t=t.clone().transform(o,"EPSG:4326"));var h,c,g,M,l,u,f=0;switch(i){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(h=t.getCoordinates(),f=Math.abs(n(h[0],r)),g=1,M=h.length;g<M;++g)f-=Math.abs(n(h[g],r));break;case"MultiPolygon":for(g=0,M=(h=t.getCoordinates()).length;g<M;++g)for(c=h[g],f+=Math.abs(n(c[0],r)),l=1,u=c.length;l<u;++l)f-=Math.abs(n(c[l],r));break;case"GeometryCollection":var d=t.getGeometries();for(g=0,M=d.length;g<M;++g)f+=s(d[g],a);break;default:throw new Error("Unsupported geometry type: "+i)}return f}function i(a,r,o,n){n=n||e;var s=(0,t.toRadians)(a[1]),i=(0,t.toRadians)(a[0]),h=r/n,c=Math.asin(Math.sin(s)*Math.cos(h)+Math.cos(s)*Math.sin(h)*Math.cos(o)),g=i+Math.atan2(Math.sin(o)*Math.sin(h)*Math.cos(s),Math.cos(h)-Math.sin(s)*Math.sin(c));return[(0,t.toDegrees)(g),(0,t.toDegrees)(c)]}exports.DEFAULT_RADIUS=e;
},{"./math.js":"qAK2"}],"xtlK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.error=a,exports.log=n,exports.setLevel=e,exports.warn=t;var r={info:1,warn:2,error:3,none:4},o=r.info;function e(e){o=r[e]}function n(...e){var n;o>r.info||(n=console).log.apply(n,e)}function t(...e){var n;o>r.warn||(n=console).warn.apply(n,e)}function a(...e){var n;o>r.error||(n=console).error.apply(n,e)}
},{}],"VAQc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"METERS_PER_UNIT",{enumerable:!0,get:function(){return o.METERS_PER_UNIT}}),Object.defineProperty(exports,"Projection",{enumerable:!0,get:function(){return e.default}}),exports.addCommon=B,exports.addCoordinateTransforms=_,exports.addEquivalentProjections=m,exports.addEquivalentTransforms=T,exports.addProjection=x,exports.addProjections=P,exports.clearAllProjections=U,exports.clearUserProjection=b,exports.cloneTransform=g,exports.createProjection=R,exports.createSafeCoordinateTransform=z,exports.createTransformFromCoordinateTransform=S,exports.disableCoordinateWarning=l,exports.equivalent=q,exports.fromLonLat=h,exports.fromUserCoordinate=A,exports.fromUserExtent=D,exports.fromUserResolution=k,exports.get=v,exports.getPointResolution=j,exports.getTransform=I,exports.getTransformFromProjections=M,exports.getUserProjection=w,exports.identityTransform=E,exports.setUserProjection=W,exports.toLonLat=C,exports.toUserCoordinate=L,exports.toUserExtent=F,exports.toUserResolution=X,exports.transform=N,exports.transformExtent=O,exports.transformWithProjections=G,exports.useGeographic=J;var e=d(require("./proj/Projection.js")),r=require("./proj/epsg3857.js"),t=require("./proj/epsg4326.js"),o=require("./proj/Units.js"),n=require("./proj/projections.js"),i=require("./proj/transforms.js"),s=require("./extent.js"),u=require("./math.js"),a=require("./coordinate.js"),c=require("./sphere.js"),f=require("./console.js");function d(e){return e&&e.__esModule?e:{default:e}}var p=!0;function l(e){p=!(void 0===e||e)}function g(e,r){if(void 0!==r){for(var t=0,o=e.length;t<o;++t)r[t]=e[t];r=r}else r=e.slice();return r}function E(e,r){if(void 0!==r&&e!==r){for(var t=0,o=e.length;t<o;++t)r[t]=e[t];e=r}return e}function x(e){(0,n.add)(e.getCode(),e),(0,i.add)(e,e,g)}function P(e){e.forEach(x)}function v(e){return"string"==typeof e?(0,n.get)(e):e||null}function j(e,r,t,n){var i,s=(e=v(e)).getPointResolutionFunc();if(s){if(i=s(r,t),n&&n!==e.getUnits()){var u=e.getMetersPerUnit();u&&(i=i*u/o.METERS_PER_UNIT[n])}}else{var a=e.getUnits();if("degrees"==a&&!n||"degrees"==n)i=r;else{var f=M(e,v("EPSG:4326"));if(f===E&&"degrees"!==a)i=r*e.getMetersPerUnit();else{var d=[t[0]-r/2,t[1],t[0]+r/2,t[1],t[0],t[1]-r/2,t[0],t[1]+r/2];d=f(d,d,2),i=((0,c.getDistance)(d.slice(0,2),d.slice(2,4))+(0,c.getDistance)(d.slice(4,6),d.slice(6,8)))/2}var p=n?o.METERS_PER_UNIT[n]:e.getMetersPerUnit();void 0!==p&&(i/=p)}}return i}function m(e){P(e),e.forEach(function(r){e.forEach(function(e){r!==e&&(0,i.add)(r,e,g)})})}function T(e,r,t,o){e.forEach(function(e){r.forEach(function(r){(0,i.add)(e,r,t),(0,i.add)(r,e,o)})})}function U(){(0,n.clear)(),(0,i.clear)()}function R(e,r){return e?"string"==typeof e?v(e):e:v(r)}function S(e){return function(r,t,o){var n=r.length;o=void 0!==o?o:2,t=void 0!==t?t:new Array(n);for(var i=0;i<n;i+=o)for(var s=e(r.slice(i,i+o)),u=s.length,a=0,c=o;a<c;++a)t[i+a]=a>=u?r[i+a]:s[a];return t}}function _(e,r,t,o){var n=v(e),s=v(r);(0,i.add)(n,s,S(t)),(0,i.add)(s,n,S(o))}function h(e,r){return l(),N(e,"EPSG:4326",void 0!==r?r:"EPSG:3857")}function C(e,r){var t=N(e,void 0!==r?r:"EPSG:3857","EPSG:4326"),o=t[0];return(o<-180||o>180)&&(t[0]=(0,u.modulo)(o+180,360)-180),t}function q(e,r){if(e===r)return!0;var t=e.getUnits()===r.getUnits();return e.getCode()===r.getCode()?t:M(e,r)===g&&t}function M(e,r){var t=e.getCode(),o=r.getCode(),n=(0,i.get)(t,o);return n||(n=E),n}function I(e,r){return M(v(e),v(r))}function N(e,r,t){return I(r,t)(e,void 0,e.length)}function O(e,r,t,o){var n=I(r,t);return(0,s.applyTransform)(e,n,void 0,o)}function G(e,r,t){return M(r,t)(e)}var y=null;function W(e){y=v(e)}function b(){y=null}function w(){return y}function J(){W("EPSG:4326")}function L(e,r){return y?N(e,r,y):e}function A(e,r){return y?N(e,y,r):(p&&!(0,a.equals)(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(p=!1,(0,f.warn)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function F(e,r){return y?O(e,r,y):e}function D(e,r){return y?O(e,y,r):e}function X(e,r){if(!y)return e;var t=v(r).getUnits(),n=y.getUnits();return t&&n?e*o.METERS_PER_UNIT[t]/o.METERS_PER_UNIT[n]:e}function k(e,r){if(!y)return e;var t=v(r).getUnits(),n=y.getUnits();return t&&n?e*o.METERS_PER_UNIT[n]/o.METERS_PER_UNIT[t]:e}function z(e,r,t){return function(o){var n,i;if(e.canWrapX()){var c=e.getExtent(),f=(0,s.getWidth)(c);o=o.slice(0),(i=(0,a.getWorldsAway)(o,e,f))&&(o[0]=o[0]-i*f),o[0]=(0,u.clamp)(o[0],c[0],c[2]),o[1]=(0,u.clamp)(o[1],c[1],c[3]),n=t(o)}else n=t(o);return i&&r.canWrapX()&&(n[0]+=i*(0,s.getWidth)(r.getExtent())),n}}function B(){m(r.PROJECTIONS),m(t.PROJECTIONS),T(t.PROJECTIONS,r.PROJECTIONS,r.fromEPSG4326,r.toEPSG4326)}B();
},{"./proj/Projection.js":"wxkT","./proj/epsg3857.js":"Znm6","./proj/epsg4326.js":"ztm5","./proj/Units.js":"TVqV","./proj/projections.js":"pht6","./proj/transforms.js":"w9tV","./extent.js":"L0Vw","./math.js":"qAK2","./coordinate.js":"CMtO","./sphere.js":"TxdA","./console.js":"xtlK"}],"fPEB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExtent=a,exports.none=e;var t=require("./math.js");function a(a,e,r){return function(n,o,u,h,i){if(n){if(!o&&!e)return n;var M=e?0:u[0]*o,c=e?0:u[1]*o,l=i?i[0]:0,x=i?i[1]:0,f=a[0]+M/2+l,m=a[2]-M/2+l,s=a[1]+c/2+x,p=a[3]-c/2+x;f>m&&(m=f=(m+f)/2),s>p&&(p=s=(p+s)/2);var v=(0,t.clamp)(n[0],f,m),g=(0,t.clamp)(n[1],s,p);if(h&&r&&o){var d=30*o;v+=-d*Math.log(1+Math.max(0,f-n[0])/d)+d*Math.log(1+Math.max(0,n[0]-m)/d),g+=-d*Math.log(1+Math.max(0,s-n[1])/d)+d*Math.log(1+Math.max(0,n[1]-p)/d)}return[v,g]}}}function e(t){return t}
},{"./math.js":"qAK2"}],"x1Ou":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMinMaxResolution=h,exports.createSnapToPower=o,exports.createSnapToResolutions=i;var t=require("./math.js"),a=require("./extent.js"),r=require("./array.js");function e(t,r,e,n){var i=(0,a.getWidth)(r)/e[0],o=(0,a.getHeight)(r)/e[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function n(a,r,e){var n=Math.min(a,r);return n*=Math.log(1+50*Math.max(0,a/r-1))/50+1,e&&(n=Math.max(n,e),n/=Math.log(1+50*Math.max(0,e/a-1))/50+1),(0,t.clamp)(n,e/2,2*r)}function i(a,i,o,h){return i=void 0===i||i,function(u,M,l,c){if(void 0!==u){var m=a[0],f=a[a.length-1],v=o?e(m,o,l,h):m;if(c)return i?n(u,v,f):(0,t.clamp)(u,f,v);var s=Math.min(v,u),p=Math.floor((0,r.linearFindNearest)(a,s,M));return a[p]>v&&p<a.length-1?a[p+1]:a[p]}}}function o(a,r,i,o,h,u){return o=void 0===o||o,i=void 0!==i?i:0,function(M,l,c,m){if(void 0!==M){var f=h?e(r,h,c,u):r;if(m)return o?n(M,f,i):(0,t.clamp)(M,i,f);var v=Math.ceil(Math.log(r/f)/Math.log(a)-1e-9),s=-l*(.5-1e-9)+.5,p=Math.min(f,M),d=Math.floor(Math.log(r/p)/Math.log(a)+s),g=Math.max(v,d),x=r/Math.pow(a,g);return(0,t.clamp)(x,i,f)}}}function h(a,r,i,o,h){return i=void 0===i||i,function(u,M,l,c){if(void 0!==u){var m=o?e(a,o,l,h):a;return i&&c?n(u,m,r):(0,t.clamp)(u,r,m)}}}
},{"./math.js":"qAK2","./extent.js":"L0Vw","./array.js":"o0G8"}],"E0bT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSnapToN=o,exports.createSnapToZero=n,exports.disable=r,exports.none=t;var e=require("./math.js");function r(e){if(void 0!==e)return 0}function t(e){if(void 0!==e)return e}function o(e){var r=2*Math.PI/e;return function(e,t){return t?e:void 0!==e?e=Math.floor(e/r+.5)*r:void 0}}function n(r){return r=r||(0,e.toRadians)(5),function(e,t){return t?e:void 0!==e?Math.abs(e)<=r?0:e:void 0}}
},{"./math.js":"qAK2"}],"k82w":[function(require,module,exports) {
"use strict";function e(e){return Math.pow(e,3)}function t(t){return 1-e(1-t)}function n(e){return 3*e*e-2*e*e*e}function r(e){return e}function u(e){return e<.5?n(2*e):1-n(2*(e-.5))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeIn=e,exports.easeOut=t,exports.inAndOut=n,exports.linear=r,exports.upAndDown=u;
},{}],"v1jb":[function(require,module,exports) {
"use strict";function r(r,t,e,n,o,a){a=a||[];for(var f=0,s=t;s<e;s+=n){var l=r[s],u=r[s+1];a[f++]=o[0]*l+o[2]*u+o[4],a[f++]=o[1]*l+o[3]*u+o[5]}return a&&a.length!=f&&(a.length=f),a}function t(r,t,e,n,o,a,f){f=f||[];for(var s=Math.cos(o),l=Math.sin(o),u=a[0],v=a[1],h=0,c=t;c<e;c+=n){var g=r[c]-u,i=r[c+1]-v;f[h++]=u+g*s-i*l,f[h++]=v+g*l+i*s;for(var p=c+2;p<c+n;++p)f[h++]=r[p]}return f&&f.length!=h&&(f.length=h),f}function e(r,t,e,n,o,a,f,s){s=s||[];for(var l=f[0],u=f[1],v=0,h=t;h<e;h+=n){var c=r[h]-l,g=r[h+1]-u;s[v++]=l+o*c,s[v++]=u+a*g;for(var i=h+2;i<h+n;++i)s[v++]=r[i]}return s&&s.length!=v&&(s.length=v),s}function n(r,t,e,n,o,a,f){f=f||[];for(var s=0,l=t;l<e;l+=n){f[s++]=r[l]+o,f[s++]=r[l+1]+a;for(var u=l+2;u<l+n;++u)f[s++]=r[u]}return f&&f.length!=s&&(f.length=s),f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotate=t,exports.scale=e,exports.transform2D=r,exports.translate=n;
},{}],"AhnV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../Object.js")),e=require("../util.js"),r=require("../transform.js"),n=require("../extent.js"),o=require("../proj.js"),i=require("../functions.js"),u=require("./flat/transform.js");function a(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function l(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=p(t,"string");return"symbol"===c(e)?e:String(e)}function p(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=g();return function(){var r,n=j(t);if(e){var o=j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=(0,r.create)(),O=function(a){m(f,t.default);var c=b(f);function f(){var t;return s(this,f),(t=c.call(this)).extent_=(0,n.createEmpty)(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=(0,i.memoizeOne)(function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)}),t}return l(f,[{key:"simplifyTransformed",value:function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}},{key:"clone",value:function(){return(0,e.abstract)()}},{key:"closestPointXY",value:function(t,r,n,o){return(0,e.abstract)()}},{key:"containsXY",value:function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e}},{key:"getClosestPoint",value:function(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}},{key:"intersectsCoordinate",value:function(t){return this.containsXY(t[0],t[1])}},{key:"computeExtent",value:function(t){return(0,e.abstract)()}},{key:"getExtent",value:function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&(0,n.createOrUpdateEmpty)(e),this.extentRevision_=this.getRevision()}return(0,n.returnOrUpdate)(this.extent_,t)}},{key:"rotate",value:function(t,r){(0,e.abstract)()}},{key:"scale",value:function(t,r,n){(0,e.abstract)()}},{key:"simplify",value:function(t){return this.getSimplifiedGeometry(t*t)}},{key:"getSimplifiedGeometry",value:function(t){return(0,e.abstract)()}},{key:"getType",value:function(){return(0,e.abstract)()}},{key:"applyTransform",value:function(t){(0,e.abstract)()}},{key:"intersectsExtent",value:function(t){return(0,e.abstract)()}},{key:"translate",value:function(t,r){(0,e.abstract)()}},{key:"transform",value:function(t,e){var i=(0,o.get)(t),a="tile-pixels"==i.getUnits()?function(t,a,c){var s=i.getExtent(),f=i.getWorldExtent(),l=(0,n.getHeight)(f)/(0,n.getHeight)(s);return(0,r.compose)(x,f[0],f[3],l,-l,0,0,0),(0,u.transform2D)(t,0,t.length,c,x,a),(0,o.getTransform)(i,e)(t,a,c)}:(0,o.getTransform)(i,e);return this.applyTransform(a),this}}]),f}(),k=O;exports.default=k;
},{"../Object.js":"fB8e","../util.js":"KA50","../transform.js":"Ln8D","../extent.js":"L0Vw","../proj.js":"VAQc","../functions.js":"pDAE","./flat/transform.js":"v1jb"}],"JVJN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getStrideForLayout=C,exports.transformGeom2D=S;var t=i(require("./Geometry.js")),e=require("../util.js"),r=require("../extent.js"),n=require("./flat/transform.js");function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function s(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=f(t,"string");return"symbol"===o(e)?e:String(e)}function f(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var r,n=g(t);if(e){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return h(this,r)}}function h(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(i){c(u,t.default);var o=y(u);function u(){var t;return a(this,u),(t=o.call(this)).layout="XY",t.stride=2,t.flatCoordinates=null,t}return s(u,[{key:"computeExtent",value:function(t){return(0,r.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinates",value:function(){return(0,e.abstract)()}},{key:"getFirstCoordinate",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"getFlatCoordinates",value:function(){return this.flatCoordinates}},{key:"getLastCoordinate",value:function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}},{key:"getLayout",value:function(){return this.layout}},{key:"getSimplifiedGeometry",value:function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},{key:"getSimplifiedGeometryInternal",value:function(t){return this}},{key:"getStride",value:function(){return this.stride}},{key:"setFlatCoordinates",value:function(t,e){this.stride=C(t),this.layout=t,this.flatCoordinates=e}},{key:"setCoordinates",value:function(t,r){(0,e.abstract)()}},{key:"setLayout",value:function(t,e,r){var n;if(t)n=C(t);else{for(var i=0;i<r;++i){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}t=b(n=e.length)}this.layout=t,this.stride=n}},{key:"applyTransform",value:function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}},{key:"rotate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,n.rotate)(r,0,r.length,i,t,e,r),this.changed()}}},{key:"scale",value:function(t,e,i){void 0===e&&(e=t),i||(i=(0,r.getCenter)(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();(0,n.scale)(o,0,o.length,a,t,e,i,o),this.changed()}}},{key:"translate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,n.translate)(r,0,r.length,i,t,e,r),this.changed()}}}]),u}();function b(t){var e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function C(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function S(t,e,r){var i=t.getFlatCoordinates();if(!i)return null;var o=t.getStride();return(0,n.transform2D)(i,0,i.length,o,e,r)}var j=m;exports.default=j;
},{"./Geometry.js":"AhnV","../util.js":"KA50","../extent.js":"L0Vw","./flat/transform.js":"v1jb"}],"Bhwh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayMaxSquaredDelta=a,exports.assignClosestArrayPoint=o,exports.assignClosestMultiArrayPoint=i,exports.assignClosestPoint=s,exports.maxSquaredDelta=t,exports.multiArrayMaxSquaredDelta=n;var r=require("../../math.js");function e(e,t,a,n,s,o,i){var u,f=e[t],l=e[t+1],v=e[a]-f,h=e[a+1]-l;if(0===v&&0===h)u=t;else{var g=((s-f)*v+(o-l)*h)/(v*v+h*h);if(g>1)u=a;else{if(g>0){for(var c=0;c<n;++c)i[c]=(0,r.lerp)(e[t+c],e[a+c],g);return void(i.length=n)}u=t}}for(var N=0;N<n;++N)i[N]=e[u+N];i.length=n}function t(e,t,a,n,s){var o=e[t],i=e[t+1];for(t+=n;t<a;t+=n){var u=e[t],f=e[t+1],l=(0,r.squaredDistance)(o,i,u,f);l>s&&(s=l),o=u,i=f}return s}function a(r,e,a,n,s){for(var o=0,i=a.length;o<i;++o){var u=a[o];s=t(r,e,u,n,s),e=u}return s}function n(r,e,t,n,s){for(var o=0,i=t.length;o<i;++o){var u=t[o];s=a(r,e,u,n,s),e=u[u.length-1]}return s}function s(t,a,n,s,o,i,u,f,l,v,h){if(a==n)return v;var g,c;if(0===o){if((c=(0,r.squaredDistance)(u,f,t[a],t[a+1]))<v){for(g=0;g<s;++g)l[g]=t[a+g];return l.length=s,c}return v}h=h||[NaN,NaN];for(var N=a+s;N<n;)if(e(t,N-s,N,s,u,f,h),(c=(0,r.squaredDistance)(u,f,h[0],h[1]))<v){for(v=c,g=0;g<s;++g)l[g]=h[g];l.length=s,N+=s}else N+=s*Math.max((Math.sqrt(c)-Math.sqrt(v))/o|0,1);if(i&&(e(t,n-s,a,s,u,f,h),(c=(0,r.squaredDistance)(u,f,h[0],h[1]))<v)){for(v=c,g=0;g<s;++g)l[g]=h[g];l.length=s}return v}function o(r,e,t,a,n,o,i,u,f,l,v){v=v||[NaN,NaN];for(var h=0,g=t.length;h<g;++h){var c=t[h];l=s(r,e,c,a,n,o,i,u,f,l,v),e=c}return l}function i(r,e,t,a,n,s,i,u,f,l,v){v=v||[NaN,NaN];for(var h=0,g=t.length;h<g;++h){var c=t[h];l=o(r,e,c,a,n,s,i,u,f,l,v),e=c[c.length-1]}return l}
},{"../../math.js":"qAK2"}],"wnue":[function(require,module,exports) {
"use strict";function e(e,r,t,n){for(var o=0,a=t.length;o<a;++o)e[r++]=t[o];return r}function r(e,r,t,n){for(var o=0,a=t.length;o<a;++o)for(var l=t[o],f=0;f<n;++f)e[r++]=l[f];return r}function t(e,t,n,o,a){a=a||[];for(var l=0,f=0,u=n.length;f<u;++f){var i=r(e,t,n[f],o);a[l++]=i,t=i}return a.length=l,a}function n(e,r,n,o,a){a=a||[];for(var l=0,f=0,u=n.length;f<u;++f){var i=t(e,r,n[f],o,a[l]);0===i.length&&(i[0]=r),a[l++]=i,r=i[i.length-1]}return a.length=l,a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deflateCoordinate=e,exports.deflateCoordinates=r,exports.deflateCoordinatesArray=t,exports.deflateMultiCoordinatesArray=n;
},{}],"wmMI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.douglasPeucker=t,exports.douglasPeuckerArray=n,exports.douglasPeuckerMultiArray=u,exports.quantize=i,exports.quantizeArray=s,exports.quantizeMultiArray=f,exports.radialDistance=a,exports.simplifyLineString=e,exports.snap=o;var r=require("../../math.js");function e(r,e,n,u,o,i,s){return s=void 0!==s?s:[],i||(n=a(r,e,n,u,o,s,0),r=s,e=0,u=2),s.length=t(r,e,n,u,o,s,0),s}function t(e,t,n,u,a,o,i){var s=(n-t)/u;if(s<3){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var f=new Array(s);f[0]=1,f[s-1]=1;for(var p=[t,n-u],v=0;p.length>0;){for(var l=p.pop(),c=p.pop(),h=0,g=e[c],d=e[c+1],x=e[l],y=e[l+1],q=c+u;q<l;q+=u){var A=e[q],M=e[q+1],P=(0,r.squaredSegmentDistance)(A,M,g,d,x,y);P>h&&(v=q,h=P)}h>a&&(f[(v-t)/u]=1,c+u<v&&p.push(c,v),v+u<l&&p.push(v,l))}for(var k=0;k<s;++k)f[k]&&(o[i++]=e[t+k*u],o[i++]=e[t+k*u+1]);return i}function n(r,e,n,u,a,o,i,s){for(var f=0,p=n.length;f<p;++f){var v=n[f];i=t(r,e,v,u,a,o,i),s.push(i),e=v}return i}function u(r,e,t,u,a,o,i,s){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];i=n(r,e,v,u,a,o,i,l),s.push(l),e=v[v.length-1]}return i}function a(e,t,n,u,a,o,i){if(n<=t+u){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var s=e[t],f=e[t+1];o[i++]=s,o[i++]=f;var p=s,v=f;for(t+=u;t<n;t+=u)p=e[t],v=e[t+1],(0,r.squaredDistance)(s,f,p,v)>a&&(o[i++]=p,o[i++]=v,s=p,f=v);return p==s&&v==f||(o[i++]=p,o[i++]=v),i}function o(r,e){return e*Math.round(r/e)}function i(r,e,t,n,u,a,i){if(e==t)return i;var s,f,p=o(r[e],u),v=o(r[e+1],u);e+=n,a[i++]=p,a[i++]=v;do{if(s=o(r[e],u),f=o(r[e+1],u),(e+=n)==t)return a[i++]=s,a[i++]=f,i}while(s==p&&f==v);for(;e<t;){var l=o(r[e],u),c=o(r[e+1],u);if(e+=n,l!=s||c!=f){var h=s-p,g=f-v,d=l-p,x=c-v;h*x==g*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(g<0&&x<g||g==x||g>0&&x>g)?(s=l,f=c):(a[i++]=s,a[i++]=f,p=s,v=f,s=l,f=c)}}return a[i++]=s,a[i++]=f,i}function s(r,e,t,n,u,a,o,s){for(var f=0,p=t.length;f<p;++f){var v=t[f];o=i(r,e,v,n,u,a,o),s.push(o),e=v}return o}function f(r,e,t,n,u,a,o,i){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];o=s(r,e,v,n,u,a,o,l),i.push(l),e=v[v.length-1]}return o}
},{"../../math.js":"qAK2"}],"HSYb":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){o=void 0!==o?o:[];for(var i=0,a=r;a<t;a+=n)o[i++]=e.slice(a,a+n);return o.length=i,o}function r(r,t,n,o,i){i=void 0!==i?i:[];for(var a=0,l=0,s=n.length;l<s;++l){var f=n[l];i[a++]=e(r,t,f,o,i[a]),t=f}return i.length=a,i}function t(e,t,n,o,i){i=void 0!==i?i:[];for(var a=0,l=0,s=n.length;l<s;++l){var f=n[l];i[a++]=1===f.length&&f[0]===t?[]:r(e,t,f,o,i[a]),t=f[f.length-1]}return i.length=a,i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateCoordinates=e,exports.inflateCoordinatesArray=r,exports.inflateMultiCoordinatesArray=t;
},{}],"weGW":[function(require,module,exports) {
"use strict";function r(r,e,n,t){for(var o=0,i=r[n-t],a=r[n-t+1];e<n;e+=t){var s=r[e],u=r[e+1];o+=a*s-i*u,i=s,a=u}return o/2}function e(e,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=r(e,n,u,o),n=u}return i}function n(r,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=e(r,n,u,o),n=u[u.length-1]}return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRing=r,exports.linearRings=e,exports.linearRingss=n;
},{}],"AX8o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./SimpleGeometry.js")),e=require("./flat/closest.js"),r=require("../extent.js"),n=require("./flat/deflate.js"),o=require("./flat/simplify.js"),i=require("./flat/inflate.js"),a=require("./flat/area.js");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function c(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=d(t,"string");return"symbol"===u(e)?e:String(e)}function d(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=g();return function(){var r,n=C(t);if(e){var o=C(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(s){h(f,t.default);var u=v(f);function f(t,e){var r;return l(this,f),(r=u.call(this)).maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?r.setCoordinates(t,e):r.setFlatCoordinates(e,t),r}return c(f,[{key:"clone",value:function(){return new f(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(t,n,o,i){return i<(0,r.closestSquaredDistanceXY)(this.getExtent(),t,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,e.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,e.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,o,i))}},{key:"getArea",value:function(){return(0,a.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinates",value:function(){return(0,i.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[];return e.length=(0,o.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new f(e,"XY")}},{key:"getType",value:function(){return"LinearRing"}},{key:"intersectsExtent",value:function(t){return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),f}(),_=j;exports.default=_;
},{"./SimpleGeometry.js":"JVJN","./flat/closest.js":"Bhwh","../extent.js":"L0Vw","./flat/deflate.js":"wnue","./flat/simplify.js":"wmMI","./flat/inflate.js":"HSYb","./flat/area.js":"weGW"}],"IIKA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./SimpleGeometry.js")),e=require("../extent.js"),r=require("./flat/deflate.js"),n=require("../math.js");function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function f(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=s(t,"string");return"symbol"===i(e)?e:String(e)}function s(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=b();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(o){l(a,t.default);var i=p(a);function a(t,e){var r;return u(this,a),(r=i.call(this)).setCoordinates(t,e),r}return f(a,[{key:"clone",value:function(){var t=new a(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,o){var i=this.flatCoordinates,u=(0,n.squaredDistance)(t,e,i[0],i[1]);if(u<o){for(var a=this.stride,f=0;f<a;++f)r[f]=i[f];return r.length=a,u}return o}},{key:"getCoordinates",value:function(){return this.flatCoordinates?this.flatCoordinates.slice():[]}},{key:"computeExtent",value:function(t){return(0,e.createOrUpdateFromCoordinate)(this.flatCoordinates,t)}},{key:"getType",value:function(){return"Point"}},{key:"intersectsExtent",value:function(t){return(0,e.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,r.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),a}(),j=m;exports.default=j;
},{"./SimpleGeometry.js":"JVJN","../extent.js":"L0Vw","./flat/deflate.js":"wnue","../math.js":"qAK2"}],"PaNT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingContainsExtent=n,exports.linearRingContainsXY=e,exports.linearRingsContainsXY=t,exports.linearRingssContainsXY=i;var r=require("../../extent.js");function n(n,t,i,o,u){return!(0,r.forEachCorner)(u,function(r){return!e(n,t,i,o,r[0],r[1])})}function e(r,n,e,t,i,o){for(var u=0,a=r[e-t],s=r[e-t+1];n<e;n+=t){var f=r[n],l=r[n+1];s<=o?l>o&&(f-a)*(o-s)-(i-a)*(l-s)>0&&u++:l<=o&&(f-a)*(o-s)-(i-a)*(l-s)<0&&u--,a=f,s=l}return 0!==u}function t(r,n,t,i,o,u){if(0===t.length)return!1;if(!e(r,n,t[0],i,o,u))return!1;for(var a=1,s=t.length;a<s;++a)if(e(r,t[a-1],t[a],i,o,u))return!1;return!0}function i(r,n,e,i,o,u){if(0===e.length)return!1;for(var a=0,s=e.length;a<s;++a){var f=e[a];if(t(r,n,f,i,o,u))return!0;n=f[f.length-1]}return!1}
},{"../../extent.js":"L0Vw"}],"amVp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteriorPointOfArray=t,exports.getInteriorPointsOfMultiArray=n;var r=require("../../array.js"),e=require("./contains.js");function t(t,n,a,o,s,i,u){for(var f,g,l,v,h,c,p,y=s[i+1],N=[],d=0,j=a.length;d<j;++d){var x=a[d];for(v=t[x-o],c=t[x-o+1],f=n;f<x;f+=o)h=t[f],p=t[f+1],(y<=c&&p<=y||c<=y&&y<=p)&&(l=(y-c)/(p-c)*(h-v)+v,N.push(l)),v=h,c=p}var M=NaN,O=-1/0;for(N.sort(r.ascending),v=N[0],f=1,g=N.length;f<g;++f){h=N[f];var P=Math.abs(h-v);P>O&&(l=(v+h)/2,(0,e.linearRingsContainsXY)(t,n,a,o,l,y)&&(M=l,O=P)),v=h}return isNaN(M)&&(M=s[i]),u?(u.push(M,y,O),u):[M,y,O]}function n(r,e,n,a,o){for(var s=[],i=0,u=n.length;i<u;++i){var f=n[i];s=t(r,e,f,a,o,2*i,s),e=f[f.length-1]}return s}
},{"../../array.js":"o0G8","./contains.js":"PaNT"}],"ps7C":[function(require,module,exports) {
"use strict";function e(e,r,t,o,s){var c;for(r+=o;r<t;r+=o)if(c=s(e.slice(r-o,r),e.slice(r,r+o)))return c;return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=e;
},{}],"aXDF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectsLineString=t,exports.intersectsLineStringArray=i,exports.intersectsLinearRing=s,exports.intersectsLinearRingArray=a,exports.intersectsLinearRingMultiArray=o;var n=require("../../extent.js"),e=require("./segments.js"),r=require("./contains.js");function t(r,t,i,s,a){var o=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),r,t,i,s);return!!(0,n.intersects)(a,o)&&(!!(0,n.containsExtent)(a,o)||(o[0]>=a[0]&&o[2]<=a[2]||(o[1]>=a[1]&&o[3]<=a[3]||(0,e.forEach)(r,t,i,s,function(e,r){return(0,n.intersectsSegment)(a,e,r)}))))}function i(n,e,r,i,s){for(var a=0,o=r.length;a<o;++a){if(t(n,e,r[a],i,s))return!0;e=r[a]}return!1}function s(n,e,i,s,a){return!!t(n,e,i,s,a)||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[0],a[1])||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[0],a[3])||(!!(0,r.linearRingContainsXY)(n,e,i,s,a[2],a[1])||!!(0,r.linearRingContainsXY)(n,e,i,s,a[2],a[3]))))}function a(n,e,i,a,o){if(!s(n,e,i[0],a,o))return!1;if(1===i.length)return!0;for(var u=1,c=i.length;u<c;++u)if((0,r.linearRingContainsExtent)(n,i[u-1],i[u],a,o)&&!t(n,i[u-1],i[u],a,o))return!1;return!0}function o(n,e,r,t,i){for(var s=0,o=r.length;s<o;++s){var u=r[s];if(a(n,e,u,t,i))return!0;e=u[u.length-1]}return!1}
},{"../../extent.js":"L0Vw","./segments.js":"ps7C","./contains.js":"PaNT"}],"kFey":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(;r<o-t;){for(var s=0;s<t;++s){var a=e[r+s];e[r+s]=e[o-t+s],e[o-t+s]=a}r+=t,o-=t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinates=e;
},{}],"pxk9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateEnds=s,exports.linearRingIsClockwise=e,exports.linearRingsAreOriented=n,exports.linearRingssAreOriented=t,exports.orientLinearRings=i,exports.orientLinearRingsArray=o;var r=require("./reverse.js");function e(r,e,n,t){for(var i=0,o=r[n-t],s=r[n-t+1];e<n;e+=t){var u=r[e],a=r[e+1];i+=(u-o)*(a+s),o=u,s=a}return 0===i?void 0:i>0}function n(r,n,t,i,o){o=void 0!==o&&o;for(var s=0,u=t.length;s<u;++s){var a=t[s],f=e(r,n,a,i);if(0===s){if(o&&f||!o&&!f)return!1}else if(o&&!f||!o&&f)return!1;n=a}return!0}function t(r,e,t,i,o){for(var s=0,u=t.length;s<u;++s){var a=t[s];if(!n(r,e,a,i,o))return!1;a.length&&(e=a[a.length-1])}return!0}function i(n,t,i,o,s){s=void 0!==s&&s;for(var u=0,a=i.length;u<a;++u){var f=i[u],l=e(n,t,f,o);(0===u?s&&l||!s&&!l:s&&!l||!s&&l)&&(0,r.coordinates)(n,t,f,o),t=f}return t}function o(r,e,n,t,o){for(var s=0,u=n.length;s<u;++s)e=i(r,e,n[s],t,o);return e}function s(r,n){for(var t=[],i=0,o=0,s=0,u=n.length;s<u;++s){var a=n[s];if(e(r,i,a,2)){if(0===t.length)continue;t[t.length-1].push(n[o])}else t.push(n.slice(o,s+1));o=s+1,i=a}return t}
},{"./reverse.js":"kFey"}],"DTlF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circular=I,exports.default=void 0,exports.fromCircle=L,exports.fromExtent=E,exports.makeRegular=M;var t=v(require("./LinearRing.js")),e=v(require("./Point.js")),n=v(require("./SimpleGeometry.js")),i=require("./flat/closest.js"),r=require("../extent.js"),o=require("./flat/deflate.js"),s=require("../array.js"),a=require("./flat/interiorpoint.js"),l=require("./flat/inflate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/orient.js"),d=require("./flat/area.js"),h=require("./flat/contains.js"),c=require("../math.js"),y=require("./flat/simplify.js"),g=require("../sphere.js");function v(t){return t&&t.__esModule?t:{default:t}}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function b(t,e,n){return e&&C(t.prototype,e),n&&C(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=R(t,"string");return"symbol"===p(e)?e:String(e)}function R(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}function P(t,e){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function x(t){var e=q();return function(){var n,i=k(t);if(e){var r=k(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return O(this,n)}}function O(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(c){j(v,n.default);var g=x(v);function v(t,e,n){var i;return _(this,v),(i=g.call(this)).ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==e&&n?(i.setFlatCoordinates(e,t),i.ends_=n):i.setCoordinates(t,e),i}return b(v,[{key:"appendLinearRing",value:function(t){this.flatCoordinates?(0,s.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new v(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,o){return o<(0,r.closestSquaredDistanceXY)(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,i.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,i.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,o))}},{key:"containsXY",value:function(t,e){return(0,h.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}},{key:"getArea",value:function(){return(0,d.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,f.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,l.inflateCoordinatesArray)(e,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getFlatInteriorPoint",value:function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,r.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,a.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}},{key:"getInteriorPoint",value:function(){return new e.default(this.getFlatInteriorPoint(),"XYM")}},{key:"getLinearRingCount",value:function(){return this.ends_.length}},{key:"getLinearRing",value:function(e){return e<0||this.ends_.length<=e?null:new t.default(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}},{key:"getLinearRings",value:function(){for(var e=this.layout,n=this.flatCoordinates,i=this.ends_,r=[],o=0,s=0,a=i.length;s<a;++s){var l=i[s],u=new t.default(n.slice(o,l),e);r.push(u),o=l}return r}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,f.linearRingsAreOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,f.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],n=[];return e.length=(0,y.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new v(e,"XY",n)}},{key:"getType",value:function(){return"Polygon"}},{key:"intersectsExtent",value:function(t){return(0,u.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=(0,o.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}]),v}(),S=F;function I(t,e,n,i){n=n||32;for(var r=[],o=0;o<n;++o)(0,s.extend)(r,(0,g.offset)(t,e,2*Math.PI*o/n,i));return r.push(r[0],r[1]),new F(r,"XY",[r.length])}function E(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n];return new F(o,"XY",[o.length])}function L(t,e,n){e=e||32;for(var i=t.getStride(),r=t.getLayout(),o=t.getCenter(),s=i*(e+1),a=new Array(s),l=0;l<s;l+=i){a[l]=0,a[l+1]=0;for(var u=2;u<i;u++)a[l+u]=o[u]}var f=[a.length],d=new F(a,r,f);return M(d,o,t.getRadius(),n),d}function M(t,e,n,i){for(var r=t.getFlatCoordinates(),o=t.getStride(),s=r.length/o-1,a=i||0,l=0;l<=s;++l){var u=l*o,f=a+2*(0,c.modulo)(l,s)*Math.PI/s;r[u]=e[0]+n*Math.cos(f),r[u+1]=e[1]+n*Math.sin(f)}t.changed()}exports.default=S;
},{"./LinearRing.js":"AX8o","./Point.js":"IIKA","./SimpleGeometry.js":"JVJN","./flat/closest.js":"Bhwh","../extent.js":"L0Vw","./flat/deflate.js":"wnue","../array.js":"o0G8","./flat/interiorpoint.js":"amVp","./flat/inflate.js":"HSYb","./flat/intersectsextent.js":"aXDF","./flat/orient.js":"pxk9","./flat/area.js":"weGW","./flat/contains.js":"PaNT","../math.js":"qAK2","./flat/simplify.js":"wmMI","../sphere.js":"TxdA"}],"rXL1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCenterConstraint=O,exports.createResolutionConstraint=T,exports.createRotationConstraint=Z,exports.default=void 0,exports.isNoopAnimation=N;var t=m(require("./Object.js")),e=m(require("./ViewHint.js")),n=m(require("./ViewProperty.js")),o=require("./tilegrid/common.js"),i=require("./proj.js"),r=require("./functions.js"),a=require("./coordinate.js"),s=require("./asserts.js"),u=require("./centerconstraint.js"),l=require("./math.js"),h=require("./resolutionconstraint.js"),c=require("./rotationconstraint.js"),g=require("./easing.js"),f=require("./extent.js"),v=require("./array.js"),d=require("./geom/Polygon.js");function m(t){return t&&t.__esModule?t:{default:t}}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,C(o.key),o)}}function y(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function C(t){var e=x(t,"string");return"symbol"===_(e)?e:String(e)}function x(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==_(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function I(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}function k(t,e){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function j(t){var e=S();return function(){var n,o=A(t);if(e){var i=A(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return M(this,n)}}function M(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=0,w=function(o){I(h,t.default);var u=j(h);function h(t){var e;return R(this,h),(e=u.call(this)).on,e.once,e.un,t=Object.assign({},t),e.hints_=[0,0],e.animations_=[],e.updateAnimationKey_,e.projection_=(0,i.createProjection)(t.projection,"EPSG:3857"),e.viewportSize_=[100,100],e.targetCenter_=null,e.targetResolution_,e.targetRotation_,e.nextCenter_=null,e.nextResolution_,e.nextRotation_,e.cancelAnchor_=void 0,t.projection&&(0,i.disableCoordinateWarning)(),t.center&&(t.center=(0,i.fromUserCoordinate)(t.center,e.projection_)),t.extent&&(t.extent=(0,i.fromUserExtent)(t.extent,e.projection_)),e.applyOptions_(t),e}return y(h,[{key:"applyOptions_",value:function(t){var e=Object.assign({},t);for(var o in n.default)delete e[o];this.setProperties(e,!0);var i=T(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;var r=O(t),a=i.constraint,s=Z(t);this.constraints_={center:r,resolution:a,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}},{key:"padding",get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenterInternal();if(n){var o=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),r=i/2*(o[3]-e[3]+e[1]-o[1]),a=i/2*(o[0]-e[0]+e[2]-o[2]);this.setCenterInternal([n[0]+r,n[1]-a])}}},{key:"getUpdatedOptions_",value:function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}},{key:"animate",value:function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var o=arguments[n];o.center&&((o=Object.assign({},o)).center=(0,i.fromUserCoordinate)(o.center,this.getProjection())),o.anchor&&((o=Object.assign({},o)).anchor=(0,i.fromUserCoordinate)(o.anchor,this.getProjection())),e[n]=o}this.animateInternal.apply(this,e)}},{key:"animateInternal",value:function(t){var n,o=arguments.length;o>1&&"function"==typeof arguments[o-1]&&(n=arguments[o-1],--o);for(var i=0;i<o&&!this.isDef();++i){var r=arguments[i];r.center&&this.setCenterInternal(r.center),void 0!==r.zoom?this.setZoom(r.zoom):r.resolution&&this.setResolution(r.resolution),void 0!==r.rotation&&this.setRotation(r.rotation)}if(i!==o){for(var a=Date.now(),s=this.targetCenter_.slice(),u=this.targetResolution_,h=this.targetRotation_,c=[];i<o;++i){var f=arguments[i],v={start:a,complete:!1,anchor:f.anchor,duration:void 0!==f.duration?f.duration:1e3,easing:f.easing||g.inAndOut,callback:n};if(f.center&&(v.sourceCenter=s,v.targetCenter=f.center.slice(),s=v.targetCenter),void 0!==f.zoom?(v.sourceResolution=u,v.targetResolution=this.getResolutionForZoom(f.zoom),u=v.targetResolution):f.resolution&&(v.sourceResolution=u,v.targetResolution=f.resolution,u=v.targetResolution),void 0!==f.rotation){v.sourceRotation=h;var d=(0,l.modulo)(f.rotation-h+Math.PI,2*Math.PI)-Math.PI;v.targetRotation=h+d,h=v.targetRotation}N(v)?v.complete=!0:a+=v.duration,c.push(v)}this.animations_.push(c),this.setHint(e.default.ANIMATING,1),this.updateAnimations_()}else n&&P(n,!0)}},{key:"getAnimating",value:function(){return this.hints_[e.default.ANIMATING]>0}},{key:"getInteracting",value:function(){return this.hints_[e.default.INTERACTING]>0}},{key:"cancelAnimations",value:function(){var t;this.setHint(e.default.ANIMATING,-this.hints_[e.default.ANIMATING]);for(var n=0,o=this.animations_.length;n<o;++n){var i=this.animations_[n];if(i[0].callback&&P(i[0].callback,!1),!t)for(var r=0,a=i.length;r<a;++r){var s=i[r];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}},{key:"updateAnimations_",value:function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),n=!1,o=this.animations_.length-1;o>=0;--o){for(var i=this.animations_[o],r=!0,a=0,s=i.length;a<s;++a){var u=i[a];if(!u.complete){var h=t-u.start,c=u.duration>0?h/u.duration:1;c>=1?(u.complete=!0,c=1):r=!1;var g=u.easing(c);if(u.sourceCenter){var f=u.sourceCenter[0],v=u.sourceCenter[1],d=u.targetCenter[0],m=u.targetCenter[1];this.nextCenter_=u.targetCenter;var _=f+g*(d-f),R=v+g*(m-v);this.targetCenter_=[_,R]}if(u.sourceResolution&&u.targetResolution){var p=1===g?u.targetResolution:u.sourceResolution+g*(u.targetResolution-u.sourceResolution);if(u.anchor){var y=this.getViewportSize_(this.getRotation()),C=this.constraints_.resolution(p,0,y,!0);this.targetCenter_=this.calculateCenterZoom(C,u.anchor)}this.nextResolution_=u.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var x=1===g?(0,l.modulo)(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+g*(u.targetRotation-u.sourceRotation);if(u.anchor){var I=this.constraints_.rotation(x,!0);this.targetCenter_=this.calculateCenterRotate(I,u.anchor)}this.nextRotation_=u.targetRotation,this.targetRotation_=x}if(this.applyTargetState_(!0),n=!0,!u.complete)break}}if(r){this.animations_[o]=null,this.setHint(e.default.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var k=i[0].callback;k&&P(k,!0)}}this.animations_=this.animations_.filter(Boolean),n&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}}},{key:"calculateCenterRotate",value:function(t,e){var n,o=this.getCenterInternal();return void 0!==o&&(n=[o[0]-e[0],o[1]-e[1]],(0,a.rotate)(n,t-this.getRotation()),(0,a.add)(n,e)),n}},{key:"calculateCenterZoom",value:function(t,e){var n,o=this.getCenterInternal(),i=this.getResolution();void 0!==o&&void 0!==i&&(n=[e[0]-t*(e[0]-o[0])/i,e[1]-t*(e[1]-o[1])/i]);return n}},{key:"getViewportSize_",value:function(t){var e=this.viewportSize_;if(t){var n=e[0],o=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e}},{key:"setViewportSize",value:function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}},{key:"getCenter",value:function(){var t=this.getCenterInternal();return t?(0,i.toUserCoordinate)(t,this.getProjection()):t}},{key:"getCenterInternal",value:function(){return this.get(n.default.CENTER)}},{key:"getConstraints",value:function(){return this.constraints_}},{key:"getConstrainResolution",value:function(){return this.get("constrainResolution")}},{key:"getHints",value:function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}},{key:"calculateExtent",value:function(t){var e=this.calculateExtentInternal(t);return(0,i.toUserExtent)(e,this.getProjection())}},{key:"calculateExtentInternal",value:function(t){t=t||this.getViewportSizeMinusPadding_();var e=this.getCenterInternal();(0,s.assert)(e,1);var n=this.getResolution();(0,s.assert)(void 0!==n,2);var o=this.getRotation();return(0,s.assert)(void 0!==o,3),(0,f.getForViewAndSize)(e,n,o,t)}},{key:"getMaxResolution",value:function(){return this.maxResolution_}},{key:"getMinResolution",value:function(){return this.minResolution_}},{key:"getMaxZoom",value:function(){return this.getZoomForResolution(this.minResolution_)}},{key:"setMaxZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}},{key:"getMinZoom",value:function(){return this.getZoomForResolution(this.maxResolution_)}},{key:"setMinZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}},{key:"setConstrainResolution",value:function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolution",value:function(){return this.get(n.default.RESOLUTION)}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getResolutionForExtent",value:function(t,e){return this.getResolutionForExtentInternal((0,i.fromUserExtent)(t,this.getProjection()),e)}},{key:"getResolutionForExtentInternal",value:function(t,e){e=e||this.getViewportSizeMinusPadding_();var n=(0,f.getWidth)(t)/e[0],o=(0,f.getHeight)(t)/e[1];return Math.max(n,o)}},{key:"getResolutionForValueFunction",value:function(t){t=t||2;var e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,o=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*o)}}},{key:"getRotation",value:function(){return this.get(n.default.ROTATION)}},{key:"getValueForResolutionFunction",value:function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/e;return function(t){return Math.log(n/t)/e/i}}},{key:"getViewportSizeMinusPadding_",value:function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}},{key:"getState",value:function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),o=this.getCenterInternal(),i=this.padding_;if(i){var r=this.getViewportSizeMinusPadding_();o=z(o,this.getViewportSize_(),[r[0]/2+i[3],r[1]/2+i[0]],e,n)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}},{key:"getViewStateAndExtent",value:function(){return{viewState:this.getState(),extent:this.calculateExtent()}}},{key:"getZoom",value:function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}},{key:"getZoomForResolution",value:function(t){var e,n,o=this.minZoom_||0;if(this.resolutions_){var i=(0,v.linearFindNearest)(this.resolutions_,t,1);o=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return o+Math.log(e/t)/Math.log(n)}},{key:"getResolutionForZoom",value:function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=(0,l.clamp)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,(0,l.clamp)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}},{key:"fit",value:function(t,e){var n;if((0,s.assert)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,s.assert)(!(0,f.isEmpty)(t),25);var o=(0,i.fromUserExtent)(t,this.getProjection());n=(0,d.fromExtent)(o)}else if("Circle"===t.getType()){var r=(0,i.fromUserExtent)(t.getExtent(),this.getProjection());(n=(0,d.fromExtent)(r)).rotate(this.getRotation(),(0,f.getCenter)(r))}else{var a=(0,i.getUserProjection)();n=a?t.clone().transform(a,this.getProjection()):t}this.fitInternal(n,e)}},{key:"rotatedExtentForGeometry",value:function(t){for(var e=this.getRotation(),n=Math.cos(e),o=Math.sin(-e),i=t.getFlatCoordinates(),r=t.getStride(),a=1/0,s=1/0,u=-1/0,l=-1/0,h=0,c=i.length;h<c;h+=r){var g=i[h]*n-i[h+1]*o,f=i[h]*o+i[h+1]*n;a=Math.min(a,g),s=Math.min(s,f),u=Math.max(u,g),l=Math.max(l,f)}return[a,s,u,l]}},{key:"fitInternal",value:function(t,e){var n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());var o,i=void 0!==e.padding?e.padding:[0,0,0,0],a=void 0!==e.nearest&&e.nearest;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;var s=this.rotatedExtentForGeometry(t),u=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);u=isNaN(u)?o:Math.max(u,o),u=this.getConstrainedResolution(u,a?0:1);var l=this.getRotation(),h=Math.sin(l),c=Math.cos(l),g=(0,f.getCenter)(s);g[0]+=(i[1]-i[3])/2*u,g[1]+=(i[0]-i[2])/2*u;var v=g[0]*c-g[1]*h,d=g[1]*c+g[0]*h,m=this.getConstrainedCenter([v,d],u),_=e.callback?e.callback:r.VOID;void 0!==e.duration?this.animateInternal({resolution:u,center:m,duration:e.duration,easing:e.easing},_):(this.targetResolution_=u,this.targetCenter_=m,this.applyTargetState_(!1,!0),P(_,!0))}},{key:"centerOn",value:function(t,e,n){this.centerOnInternal((0,i.fromUserCoordinate)(t,this.getProjection()),e,n)}},{key:"centerOnInternal",value:function(t,e,n){this.setCenterInternal(z(t,e,n,this.getResolution(),this.getRotation()))}},{key:"calculateCenterShift",value:function(t,e,n,o){var i,r=this.padding_;if(r&&t){var a=this.getViewportSizeMinusPadding_(-n),s=z(t,o,[a[0]/2+r[3],a[1]/2+r[0]],e,n);i=[t[0]-s[0],t[1]-s[1]]}return i}},{key:"isDef",value:function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}},{key:"adjustCenter",value:function(t){var e=(0,i.toUserCoordinate)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}},{key:"adjustCenterInternal",value:function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}},{key:"adjustResolution",value:function(t,e){e=e&&(0,i.fromUserCoordinate)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}},{key:"adjustResolutionInternal",value:function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,o,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()}},{key:"adjustZoom",value:function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}},{key:"adjustRotation",value:function(t,e){e&&(e=(0,i.fromUserCoordinate)(e,this.getProjection())),this.adjustRotationInternal(t,e)}},{key:"adjustRotationInternal",value:function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()}},{key:"setCenter",value:function(t){this.setCenterInternal(t?(0,i.fromUserCoordinate)(t,this.getProjection()):t)}},{key:"setCenterInternal",value:function(t){this.targetCenter_=t,this.applyTargetState_()}},{key:"setHint",value:function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}},{key:"setResolution",value:function(t){this.targetResolution_=t,this.applyTargetState_()}},{key:"setRotation",value:function(t){this.targetRotation_=t,this.applyTargetState_()}},{key:"setZoom",value:function(t){this.setResolution(this.getResolutionForZoom(t))}},{key:"applyTargetState_",value:function(t,e){var o=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,o),r=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,r,o),u=this.constraints_.center(this.targetCenter_,s,r,o,this.calculateCenterShift(this.targetCenter_,s,i,r));this.get(n.default.ROTATION)!==i&&this.set(n.default.ROTATION,i),this.get(n.default.RESOLUTION)!==s&&(this.set(n.default.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),u&&this.get(n.default.CENTER)&&(0,a.equals)(this.get(n.default.CENTER),u)||this.set(n.default.CENTER,u),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}},{key:"resolveConstraints",value:function(t,e,n){t=void 0!==t?t:200;var o=e||0,i=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,o,r),u=this.constraints_.center(this.targetCenter_,s,r,!1,this.calculateCenterShift(this.targetCenter_,s,i,r));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=i,this.targetCenter_=u,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===i&&this.getCenterInternal()&&(0,a.equals)(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:i,center:u,resolution:s,duration:t,easing:g.easeOut,anchor:n}))}},{key:"beginInteraction",value:function(){this.resolveConstraints(0),this.setHint(e.default.INTERACTING,1)}},{key:"endInteraction",value:function(t,e,n){n=n&&(0,i.fromUserCoordinate)(n,this.getProjection()),this.endInteractionInternal(t,e,n)}},{key:"endInteractionInternal",value:function(t,n,o){this.getInteracting()&&(this.setHint(e.default.INTERACTING,-1),this.resolveConstraints(t,n,o))}},{key:"getConstrainedCenter",value:function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}},{key:"getConstrainedZoom",value:function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}},{key:"getConstrainedResolution",value:function(t,e){e=e||0;var n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}]),h}();function P(t,e){setTimeout(function(){t(e)},0)}function O(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return(0,u.createExtent)(t.extent,t.constrainOnlyCenter,e)}var n=(0,i.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var o=n.getExtent().slice();return o[0]=-1/0,o[2]=1/0,(0,u.createExtent)(o,!1,!1)}return u.none}function T(t){var e,n,r,a=void 0!==t.minZoom?t.minZoom:E,s=void 0!==t.maxZoom?t.maxZoom:28,u=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,g=void 0!==t.showFullExtent&&t.showFullExtent,v=(0,i.createProjection)(t.projection,"EPSG:3857"),d=v.getExtent(),m=t.constrainOnlyCenter,_=t.extent;if(l||_||!v.isGlobal()||(m=!1,_=d),void 0!==t.resolutions){var R=t.resolutions;n=R[a],r=void 0!==R[s]?R[s]:R[R.length-1],e=t.constrainResolution?(0,h.createSnapToResolutions)(R,c,!m&&_,g):(0,h.createMinMaxResolution)(n,r,c,!m&&_,g)}else{var p=(d?Math.max((0,f.getWidth)(d),(0,f.getHeight)(d)):360*i.METERS_PER_UNIT.degrees/v.getMetersPerUnit())/o.DEFAULT_TILE_SIZE/Math.pow(2,E),y=p/Math.pow(2,28-E);void 0!==(n=t.maxResolution)?a=0:n=p/Math.pow(u,a),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(u,s):p/Math.pow(u,s):y),s=a+Math.floor(Math.log(n/r)/Math.log(u)),r=n/Math.pow(u,s-a),e=t.constrainResolution?(0,h.createSnapToPower)(u,n,r,c,!m&&_,g):(0,h.createMinMaxResolution)(n,r,c,!m&&_,g)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:a,zoomFactor:u}}function Z(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(0,c.createSnapToZero)():!1===e?c.none:"number"==typeof e?(0,c.createSnapToN)(e):c.none}return c.disable}function N(t){return!(t.sourceCenter&&t.targetCenter&&!(0,a.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function z(t,e,n,o,i){var r=Math.cos(-i),a=Math.sin(-i),s=t[0]*r-t[1]*a,u=t[1]*r+t[0]*a;return[(s+=(e[0]/2-n[0])*o)*r-(u+=(n[1]-e[1]/2)*o)*(a=-a),u*r+s*a]}var F=w;exports.default=F;
},{"./Object.js":"fB8e","./ViewHint.js":"DfOy","./ViewProperty.js":"t10A","./tilegrid/common.js":"exM9","./proj.js":"VAQc","./functions.js":"pDAE","./coordinate.js":"CMtO","./asserts.js":"DVOE","./centerconstraint.js":"fPEB","./math.js":"qAK2","./resolutionconstraint.js":"x1Ou","./rotationconstraint.js":"E0bT","./easing.js":"k82w","./extent.js":"L0Vw","./array.js":"o0G8","./geom/Polygon.js":"DTlF"}],"Ee0U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.inView=j;var e=s(require("./Base.js")),t=s(require("../events/EventType.js")),r=s(require("./Property.js")),n=s(require("../render/EventType.js")),u=s(require("../View.js")),i=require("../asserts.js"),o=require("../extent.js"),a=require("../events.js");function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function y(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=h(e,"string");return"symbol"===c(t)?t:String(t)}function h(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=v(e,t);if(n){var u=Object.getOwnPropertyDescriptor(n,t);return u.get?u.get.call(arguments.length<3?e:r):u.value}}).apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=R();return function(){var r,n=P(e);if(t){var u=P(this).constructor;r=Reflect.construct(n,arguments,u)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(s){g(f,e.default);var c=_(f);function f(e){var t;l(this,f);var n=Object.assign({},e);delete n.source,(t=c.call(this,n)).on,t.once,t.un,t.mapPrecomposeKey_=null,t.mapRenderKey_=null,t.sourceChangeKey_=null,t.renderer_=null,t.sourceReady_=!1,t.rendered=!1,e.render&&(t.render=e.render),e.map&&t.setMap(e.map),t.addChangeListener(r.default.SOURCE,t.handleSourcePropertyChange_);var u=e.source?e.source:null;return t.setSource(u),t}return y(f,[{key:"getLayersArray",value:function(e){return(e=e||[]).push(this),e}},{key:"getLayerStatesArray",value:function(e){return(e=e||[]).push(this.getLayerState()),e}},{key:"getSource",value:function(){return this.get(r.default.SOURCE)||null}},{key:"getRenderSource",value:function(){return this.getSource()}},{key:"getSourceState",value:function(){var e=this.getSource();return e?e.getState():"undefined"}},{key:"handleSourceChange_",value:function(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}},{key:"handleSourcePropertyChange_",value:function(){var e=this;this.sourceChangeKey_&&((0,a.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;var r=this.getSource();r&&(this.sourceChangeKey_=(0,a.listen)(r,t.default.CHANGE,this.handleSourceChange_,this),"ready"===r.getState()&&(this.sourceReady_=!0,setTimeout(function(){e.dispatchEvent("sourceready")},0))),this.changed()}},{key:"getFeatures",value:function(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}},{key:"getData",value:function(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}},{key:"isVisible",value:function(e){var t,r,n=this,i=this.getMapInternal();!e&&i&&(e=i.getView()),!(t=e instanceof u.default?{viewState:e.getState(),extent:e.calculateExtent()}:e).layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),r=t.layerStatesArray?t.layerStatesArray.find(function(e){return e.layer===n}):this.getLayerState();var a=this.getExtent();return j(r,t.viewState)&&(!a||(0,o.intersects)(a,t.extent))}},{key:"getAttributions",value:function(e){if(!this.isVisible(e))return[];var t,r=this.getSource();if(r&&(t=r.getAttributions()),!t)return[];var n=t(e instanceof u.default?e.getViewStateAndExtent():e);return Array.isArray(n)||(n=[n]),n}},{key:"render",value:function(e,t){var r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}},{key:"unrender",value:function(){this.rendered=!1}},{key:"setMapInternal",value:function(e){e||this.unrender(),this.set(r.default.MAP,e)}},{key:"getMapInternal",value:function(){return this.get(r.default.MAP)}},{key:"setMap",value:function(e){this.mapPrecomposeKey_&&((0,a.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&((0,a.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=(0,a.listen)(e,n.default.PRECOMPOSE,function(e){var t=e.frameState.layerStatesArray,r=this.getLayerState(!1);(0,i.assert)(!t.some(function(e){return e.layer===r.layer}),67),t.push(r)},this),this.mapRenderKey_=(0,a.listen)(this,t.default.CHANGE,e.render,e),this.changed())}},{key:"setSource",value:function(e){this.set(r.default.SOURCE,e)}},{key:"getRenderer",value:function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}},{key:"hasRenderer",value:function(){return!!this.renderer_}},{key:"createRenderer",value:function(){return null}},{key:"disposeInternal",value:function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),p(P(f.prototype),"disposeInternal",this).call(this)}}]),f}();function j(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var k=O;exports.default=k;
},{"./Base.js":"o2hU","../events/EventType.js":"GUXn","./Property.js":"yK6k","../render/EventType.js":"JwZs","../View.js":"rXL1","../asserts.js":"DVOE","../extent.js":"L0Vw","../events.js":"MGag"}],"bfRC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("../Disposable.js")),t=require("../functions.js"),r=require("../util.js"),n=require("../transform.js"),o=require("../extent.js"),i=require("../style/IconImageCache.js"),u=require("../layer/Layer.js"),a=require("../coordinate.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function p(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=v(e,"string");return"symbol"===f(t)?t:String(t)}function v(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=g();return function(){var r,n=w(e);if(t){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(c){d(s,e.default);var f=h(s);function s(e){var t;return l(this,s),(t=f.call(this)).map_=e,t}return p(s,[{key:"dispatchRenderEvent",value:function(e,t){(0,r.abstract)()}},{key:"calculateMatrices2D",value:function(e){var t=e.viewState,r=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;(0,n.compose)(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),(0,n.makeInverse)(o,r)}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i,c,f,l){var s,p=t.viewState;function y(e,t,r,n){return i.call(c,t,e?r:null,n)}var v=p.projection,d=(0,a.wrapX)(e.slice(),v),b=[[0,0]];if(v.canWrapX()&&n){var h=v.getExtent(),m=(0,o.getWidth)(h);b.push([-m,0],[m,0])}for(var j=t.layerStatesArray,g=j.length,w=[],O=[],S=0;S<b.length;S++)for(var E=g-1;E>=0;--E){var _=j[E],P=_.layer;if(P.hasRenderer()&&(0,u.inView)(_,p)&&f.call(l,P)){var x=P.getRenderer(),q=P.getSource();if(x&&q){var R=q.getWrapX()?d:e,k=y.bind(null,_.managed);O[0]=R[0]+b[S][0],O[1]=R[1]+b[S][1],s=x.forEachFeatureAtCoordinate(O,t,r,k,w)}if(s)return s}}if(0!==w.length){var C=1/w.length;return w.forEach(function(e,t){return e.distanceSq+=t*C}),w.sort(function(e,t){return e.distanceSq-t.distanceSq}),w.some(function(e){return s=e.callback(e.feature,e.layer,e.geometry)}),s}}},{key:"hasFeatureAtCoordinate",value:function(e,r,n,o,i,u){return void 0!==this.forEachFeatureAtCoordinate(e,r,n,o,t.TRUE,this,i,u)}},{key:"getMap",value:function(){return this.map_}},{key:"renderFrame",value:function(e){(0,r.abstract)()}},{key:"scheduleExpireIconCache",value:function(e){i.shared.canExpireCache()&&e.postRenderFunctions.push(S)}}]),s}();function S(e,t){i.shared.expire()}var E=O;exports.default=E;
},{"../Disposable.js":"jZkk","../functions.js":"pDAE","../util.js":"KA50","../transform.js":"Ln8D","../extent.js":"L0Vw","../style/IconImageCache.js":"V9TC","../layer/Layer.js":"Ee0U","../coordinate.js":"CMtO"}],"UvWG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=u(t,"string");return"symbol"===r(e)?e:String(e)}function u(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(e){f(n,t.default);var r=a(n);function n(t,e,o,i){var u;return c(this,n),(u=r.call(this,t)).inversePixelTransform=e,u.frameState=o,u.context=i,u}return o(n)}(),d=v;exports.default=d;
},{"../events/Event.js":"M1Cf"}],"MuPn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontParameters=exports.CLASS_UNSUPPORTED=exports.CLASS_UNSELECTABLE=exports.CLASS_SELECTABLE=exports.CLASS_HIDDEN=exports.CLASS_CONTROL=exports.CLASS_COLLAPSED=void 0;var e="ol-hidden";exports.CLASS_HIDDEN=e;var r="ol-selectable";exports.CLASS_SELECTABLE=r;var t="ol-unselectable";exports.CLASS_UNSELECTABLE=t;var s="ol-unsupported";exports.CLASS_UNSUPPORTED=s;var l="ol-control";exports.CLASS_CONTROL=l;var a="ol-collapsed";exports.CLASS_COLLAPSED=a;var o=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),S=["style","variant","weight","size","lineHeight","family"],i=function(e){var r=e.match(o);if(!r)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},s=0,l=S.length;s<l;++s){var a=r[s+1];void 0!==a&&(t[S[s]]=a)}return t.families=t.family.split(/,\s?/),t};exports.getFontParameters=i;
},{}],"FYLQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=t,exports.outerHeight=o,exports.outerWidth=n,exports.releaseCanvas=r,exports.removeChildren=s,exports.removeNode=i,exports.replaceChildren=d,exports.replaceNode=a;var e=require("./has.js");function t(t,r,n,o){var a;return a=n&&n.length?n.shift():e.WORKER_OFFSCREEN_CANVAS?new OffscreenCanvas(t||300,r||300):document.createElement("canvas"),t&&(a.width=t),r&&(a.height=r),a.getContext("2d",o)}function r(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function n(e){var t=e.offsetWidth,r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function o(e){var t=e.offsetHeight,r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function a(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function i(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function s(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function d(e,t){for(var r=e.childNodes,n=0;;++n){var o=r[n],a=t[n];if(!o&&!a)break;o!==a&&(o?a?e.insertBefore(a,o):(e.removeChild(o),--n):e.appendChild(a))}}
},{"./has.js":"mpkP"}],"RKIq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultTextBaseline=exports.defaultTextAlign=exports.defaultStrokeStyle=exports.defaultPadding=exports.defaultMiterLimit=exports.defaultLineWidth=exports.defaultLineJoin=exports.defaultLineDashOffset=exports.defaultLineDash=exports.defaultLineCap=exports.defaultFont=exports.defaultFillStyle=exports.checkedFonts=void 0,exports.drawImageOrLabel=j,exports.getTextDimensions=M,exports.measureAndCacheTextWidth=H,exports.measureTextHeight=void 0,exports.measureTextWidth=A,exports.registerFont=void 0,exports.rotateAtOffset=C,exports.textHeights=void 0;var e=s(require("../Object.js")),t=require("../has.js"),r=require("../obj.js"),a=require("../dom.js"),n=require("../css.js");function s(e){return e&&e.__esModule?e:{default:e}}var o="10px sans-serif";exports.defaultFont=o;var i="#000";exports.defaultFillStyle=i;var l="round";exports.defaultLineCap=l;var u=[];exports.defaultLineDash=u;var d=0;exports.defaultLineDashOffset=d;var f="round";exports.defaultLineJoin=f;var p=10;exports.defaultMiterLimit=p;var x="#000";exports.defaultStrokeStyle=x;var v="center";exports.defaultTextAlign=v;var h="middle";exports.defaultTextBaseline=h;var c=[0,0,0,0];exports.defaultPadding=c;var g=1;exports.defaultLineWidth=g;var m=new e.default;exports.checkedFonts=m;var y,L=null,T={};exports.textHeights=T;var b=function(){var e,t,a=100,s="32px ",o=["monospace","serif"],i=o.length,l="wmytzilWMYTZIL@#/&?$%10";function u(e,r,a){for(var n=!0,u=0;u<i;++u){var d=o[u];if(t=A(e+" "+r+" "+s+d,l),a!=d){var f=A(e+" "+r+" "+s+a+","+d,l);n=n&&f!=t}}return!!n}function d(){for(var t=!0,n=m.getKeys(),s=0,o=n.length;s<o;++s){var i=n[s];m.get(i)<a&&(u.apply(this,i.split("\n"))?((0,r.clear)(T),L=null,y=void 0,m.set(i,a)):(m.set(i,m.get(i)+1,!0),t=!1))}t&&(clearInterval(e),e=void 0)}return function(t){var r=(0,n.getFontParameters)(t);if(r)for(var s=r.families,o=0,i=s.length;o<i;++o){var l=s[o],f=r.style+"\n"+r.weight+"\n"+l;void 0===m.get(f)&&(m.set(f,a,!0),u(r.style,r.weight,l)||(m.set(f,0,!0),void 0===e&&(e=setInterval(d,32))))}}}();exports.registerFont=b;var F=function(){var e;return function(r){var a=T[r];if(null==a){if(t.WORKER_OFFSCREEN_CANVAS){var s=(0,n.getFontParameters)(r),o=w(r,"g");a=(isNaN(Number(s.lineHeight))?1.2:Number(s.lineHeight))*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=r,document.body.appendChild(e),a=e.offsetHeight,document.body.removeChild(e);T[r]=a}return a}}();function w(e,t){return L||(L=(0,a.createCanvasContext2D)(1,1)),e!=y&&(L.font=e,y=L.font),L.measureText(t)}function A(e,t){return w(e,t).width}function H(e,t,r){if(t in r)return r[t];var a=t.split("\n").reduce(function(t,r){return Math.max(t,A(e,r))},0);return r[t]=a,a}function M(e,t){for(var r=[],a=[],n=[],s=0,o=0,i=0,l=0,u=0,d=t.length;u<=d;u+=2){var f=t[u];if("\n"!==f&&u!==d){var p=t[u+1]||e.font,x=A(p,f);r.push(x),o+=x;var v=F(p);a.push(v),l=Math.max(l,v)}else s=Math.max(s,o),n.push(o),o=0,i+=l}return{width:s,height:i,widths:r,heights:a,lineWidths:n}}function C(e,t,r,a){0!==t&&(e.translate(r,a),e.rotate(t),e.translate(-r,-a))}function j(e,t,r,a,n,s,o,i,l,u,d){e.save(),1!==r&&(e.globalAlpha*=r),t&&e.setTransform.apply(e,t),a.contextInstructions?(e.translate(l,u),e.scale(d[0],d[1]),I(a,e)):d[0]<0||d[1]<0?(e.translate(l,u),e.scale(d[0],d[1]),e.drawImage(a,n,s,o,i,0,0,o,i)):e.drawImage(a,n,s,o,i,l,u,o*d[0],i*d[1]),e.restore()}function I(e,t){for(var r=e.contextInstructions,a=0,n=r.length;a<n;a+=2)Array.isArray(r[a+1])?t[r[a]].apply(t,r[a+1]):t[r[a]]=r[a+1]}exports.measureTextHeight=F;
},{"../Object.js":"fB8e","../has.js":"mpkP","../obj.js":"SLsU","../dom.js":"FYLQ","../css.js":"MuPn"}],"UhNT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./Map.js")),t=s(require("../ObjectEventType.js")),r=s(require("../render/Event.js")),n=s(require("../render/EventType.js")),i=require("../css.js"),o=require("../render/canvas.js"),u=require("../layer/Layer.js"),l=require("../events.js"),c=require("../dom.js");function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function p(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=h(e,"string");return"symbol"===a(t)?t:String(t)}function h(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=b(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=w();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(s){m(d,e.default);var a=O(d);function d(e){var r;f(this,d),(r=a.call(this,e)).fontChangeListenerKey_=(0,l.listen)(o.checkedFonts,t.default.PROPERTYCHANGE,e.redrawText.bind(e)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className=i.CLASS_UNSELECTABLE+" ol-layers";var u=e.getViewport();return u.insertBefore(r.element_,u.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return p(d,[{key:"dispatchRenderEvent",value:function(e,t){var n=this.getMap();if(n.hasListener(e)){var i=new r.default(e,void 0,t);n.dispatchEvent(i)}}},{key:"disposeInternal",value:function(){(0,l.unlistenByKey)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),v(E(d.prototype),"disposeInternal",this).call(this)}},{key:"renderFrame",value:function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(n.default.PRECOMPOSE,e);var t=e.layerStatesArray.sort(function(e,t){return e.zIndex-t.zIndex}),r=e.viewState;this.children_.length=0;for(var i=[],o=null,l=0,s=t.length;l<s;++l){var a=t[l];e.layerIndex=l;var f=a.layer,d=f.getSourceState();if(!(0,u.inView)(a,r)||"ready"!=d&&"undefined"!=d)f.unrender();else{var p=f.render(e,o);p&&(p!==o&&(this.children_.push(p),o=p),"getDeclutter"in f&&i.push(f))}}for(var y=i.length-1;y>=0;--y)i[y].renderDeclutter(e);(0,c.replaceChildren)(this.element_,this.children_),this.dispatchRenderEvent(n.default.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)}}]),d}(),S=P;exports.default=S;
},{"./Map.js":"bfRC","../ObjectEventType.js":"cEhm","../render/Event.js":"UvWG","../render/EventType.js":"JwZs","../css.js":"MuPn","../render/canvas.js":"RKIq","../layer/Layer.js":"Ee0U","../events.js":"MGag","../dom.js":"FYLQ"}],"MeSs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.GroupEvent=void 0;var e=c(require("./Base.js")),t=c(require("../Collection.js")),r=c(require("../CollectionEventType.js")),n=c(require("../events/Event.js")),i=c(require("../events/EventType.js")),o=c(require("../ObjectEventType.js")),a=require("../asserts.js"),s=require("../obj.js"),u=require("../extent.js"),l=require("../util.js"),y=require("../events.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function d(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=p(e,"string");return"symbol"===f(t)?t:String(t)}function p(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=j();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){g(r,n.default);var t=L(r);function r(e,n){var i;return m(this,r),(i=t.call(this,e)).layer=n,i}return d(r)}();exports.GroupEvent=R;var w={LAYERS:"layers"},A=function(n){g(f,e.default);var c=L(f);function f(e){var r;m(this,f),e=e||{};var n=Object.assign({},e);delete n.layers;var i=e.layers;return(r=c.call(this,n)).on,r.once,r.un,r.layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener(w.LAYERS,r.handleLayersChanged_),i?Array.isArray(i)?i=new t.default(i.slice(),{unique:!0}):(0,a.assert)("function"==typeof i.getArray,43):i=new t.default(void 0,{unique:!0}),r.setLayers(i),r}return d(f,[{key:"handleLayerChange_",value:function(){this.changed()}},{key:"handleLayersChanged_",value:function(){this.layersListenerKeys_.forEach(y.unlistenByKey),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var t in this.layersListenerKeys_.push((0,y.listen)(e,r.default.ADD,this.handleLayersAdd_,this),(0,y.listen)(e,r.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(y.unlistenByKey);(0,s.clear)(this.listenerKeys_);for(var n=e.getArray(),i=0,o=n.length;i<o;i++){var a=n[i];this.registerLayerListeners_(a),this.dispatchEvent(new R("addlayer",a))}this.changed()}},{key:"registerLayerListeners_",value:function(e){var t=[(0,y.listen)(e,o.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,y.listen)(e,i.default.CHANGE,this.handleLayerChange_,this)];e instanceof f&&t.push((0,y.listen)(e,"addlayer",this.handleLayerGroupAdd_,this),(0,y.listen)(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,l.getUid)(e)]=t}},{key:"handleLayerGroupAdd_",value:function(e){this.dispatchEvent(new R("addlayer",e.layer))}},{key:"handleLayerGroupRemove_",value:function(e){this.dispatchEvent(new R("removelayer",e.layer))}},{key:"handleLayersAdd_",value:function(e){var t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new R("addlayer",t)),this.changed()}},{key:"handleLayersRemove_",value:function(e){var t=e.element,r=(0,l.getUid)(t);this.listenerKeys_[r].forEach(y.unlistenByKey),delete this.listenerKeys_[r],this.dispatchEvent(new R("removelayer",t)),this.changed()}},{key:"getLayers",value:function(){return this.get(w.LAYERS)}},{key:"setLayers",value:function(e){var t=this.getLayers();if(t)for(var r=t.getArray(),n=0,i=r.length;n<i;++n)this.dispatchEvent(new R("removelayer",r[n]));this.set(w.LAYERS,e)}},{key:"getLayersArray",value:function(e){return e=void 0!==e?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}},{key:"getLayerStatesArray",value:function(e){var t=void 0!==e?e:[],r=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});var n=this.getLayerState(),i=n.zIndex;e||void 0!==n.zIndex||(i=0);for(var o=r,a=t.length;o<a;o++){var s=t[o];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=(0,u.getIntersection)(s.extent,n.extent):s.extent=n.extent),void 0===s.zIndex&&(s.zIndex=i)}return t}},{key:"getSourceState",value:function(){return"ready"}}]),f}(),O=A;exports.default=O;
},{"./Base.js":"o2hU","../Collection.js":"Kjrg","../CollectionEventType.js":"f4vV","../events/Event.js":"M1Cf","../events/EventType.js":"GUXn","../ObjectEventType.js":"cEhm","../asserts.js":"DVOE","../obj.js":"SLsU","../extent.js":"L0Vw","../util.js":"KA50","../events.js":"MGag"}],"umZa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)}function i(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(e){f(n,t.default);var r=a(n);function n(t,e,o){var u;return c(this,n),(u=r.call(this,t)).map=e,u.frameState=void 0!==o?o:null,u}return o(n)}(),d=v;exports.default=d;
},{"./events/Event.js":"M1Cf"}],"XTM4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=c(t,"string");return"symbol"===r(e)?e:String(e)}function c(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=f(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){a(o,t.default);var r=s(o);function o(t,e,i,u,c,l){var f;return n(this,o),(f=r.call(this,t,e,c)).originalEvent=i,f.pixel_=null,f.coordinate_=null,f.dragging=void 0!==u&&u,f.activePointers=l,f}return i(o,[{key:"pixel",get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t}},{key:"coordinate",get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t}},{key:"preventDefault",value:function(){l(h(o.prototype),"preventDefault",this).call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){l(h(o.prototype),"stopPropagation",this).call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}]),o}(),g=d;exports.default=g;
},{"./MapEvent.js":"umZa"}],"LFOz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/EventType.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r={SINGLECLICK:"singleclick",CLICK:e.default.CLICK,DBLCLICK:e.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=r;
},{"./events/EventType.js":"GUXn"}],"Jr4C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=e;
},{}],"iEtH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./events/EventType.js")),t=a(require("./MapBrowserEvent.js")),n=a(require("./MapBrowserEventType.js")),i=a(require("./pointer/EventType.js")),r=a(require("./events/Target.js")),o=require("./has.js"),s=require("./events.js");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,h(i.key),i)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=f(e,"string");return"symbol"===u(t)?t:String(t)}function f(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _(){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=v(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=b();return function(){var n,i=E(e);if(t){var r=E(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return P(this,n)}}function P(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(a){p(c,r.default);var u=g(c);function c(t,n){var r;l(this,c),(r=u.call(this,t)).map_=t,r.clickTimeoutId_,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=void 0===n?1:n,r.down_=null;var a=r.map_.getViewport();return r.activePointers_=[],r.trackedTouches_={},r.element_=a,r.pointerdownListenerKey_=(0,s.listen)(a,i.default.POINTERDOWN,r.handlePointerDown_,m(r)),r.originalPointerMoveEvent_,r.relayedListenerKey_=(0,s.listen)(a,i.default.POINTERMOVE,r.relayMoveEvent_,m(r)),r.boundHandleTouchMove_=r.handleTouchMove_.bind(m(r)),r.element_.addEventListener(e.default.TOUCHMOVE,r.boundHandleTouchMove_,!!o.PASSIVE_EVENT_LISTENERS&&{passive:!1}),r}return d(c,[{key:"emulateClick_",value:function(e){var i=this,r=new t.default(n.default.CLICK,this.map_,e);this.dispatchEvent(r),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,r=new t.default(n.default.DBLCLICK,this.map_,e),this.dispatchEvent(r)):this.clickTimeoutId_=setTimeout(function(){i.clickTimeoutId_=void 0;var r=new t.default(n.default.SINGLECLICK,i.map_,e);i.dispatchEvent(r)},250)}},{key:"updateActivePointers_",value:function(e){var t=e,i=t.pointerId;if(t.type==n.default.POINTERUP||t.type==n.default.POINTERCANCEL){for(var r in delete this.trackedTouches_[i],this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else t.type!=n.default.POINTERDOWN&&t.type!=n.default.POINTERMOVE||(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}},{key:"handlePointerUp_",value:function(e){this.updateActivePointers_(e);var i=new t.default(n.default.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}},{key:"isMouseActionButton_",value:function(e){return 0===e.button}},{key:"handlePointerDown_",value:function(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);var i=new t.default(n.default.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),0===this.dragListenerKeys_.length){var r=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,s.listen)(r,n.default.POINTERMOVE,this.handlePointerMove_,this),(0,s.listen)(r,n.default.POINTERUP,this.handlePointerUp_,this),(0,s.listen)(this.element_,n.default.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push((0,s.listen)(this.element_.getRootNode(),n.default.POINTERUP,this.handlePointerUp_,this))}}},{key:"handlePointerMove_",value:function(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;var i=new t.default(n.default.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}},{key:"relayMoveEvent_",value:function(e){this.originalPointerMoveEvent_=e;var i=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new t.default(n.default.POINTERMOVE,this.map_,e,i))}},{key:"handleTouchMove_",value:function(e){var t=this.originalPointerMoveEvent_;t&&!t.defaultPrevented||"boolean"==typeof e.cancelable&&!0!==e.cancelable||e.preventDefault()}},{key:"isMoving_",value:function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}},{key:"disposeInternal",value:function(){this.relayedListenerKey_&&((0,s.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(e.default.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,s.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,_(E(c.prototype),"disposeInternal",this).call(this)}}]),c}(),O=T;exports.default=O;
},{"./events/EventType.js":"GUXn","./MapBrowserEvent.js":"XTM4","./MapBrowserEventType.js":"LFOz","./pointer/EventType.js":"Jr4C","./events/Target.js":"KnPA","./has.js":"mpkP","./events.js":"MGag"}],"o4sL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};exports.default=e;
},{}],"XrJm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};exports.default=e;
},{}],"XG8w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DROP=void 0;var e=require("../asserts.js"),t=require("../obj.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function u(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=o(e,"string");return"symbol"===i(t)?t:String(t)}function o(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var l=1/0;exports.DROP=l;var h=function(){function i(e,t){n(this,i),this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return u(i,[{key:"clear",value:function(){this.elements_.length=0,this.priorities_.length=0,(0,t.clear)(this.queuedElements_)}},{key:"dequeue",value:function(){var e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i}},{key:"enqueue",value:function(t){(0,e.assert)(!(this.keyFunction_(t)in this.queuedElements_),31);var i=this.priorityFunction_(t);return i!=l&&(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}},{key:"getCount",value:function(){return this.elements_.length}},{key:"getLeftChildIndex_",value:function(e){return 2*e+1}},{key:"getRightChildIndex_",value:function(e){return 2*e+2}},{key:"getParentIndex_",value:function(e){return e-1>>1}},{key:"heapify_",value:function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}},{key:"isEmpty",value:function(){return 0===this.elements_.length}},{key:"isKeyQueued",value:function(e){return e in this.queuedElements_}},{key:"isQueued",value:function(e){return this.isKeyQueued(this.keyFunction_(e))}},{key:"siftUp_",value:function(e){for(var t=this.elements_,i=this.priorities_,n=t.length,r=t[e],u=i[e],s=e;e<n>>1;){var o=this.getLeftChildIndex_(e),l=this.getRightChildIndex_(e),h=l<n&&i[l]<i[o]?l:o;t[e]=t[h],i[e]=i[h],e=h}t[e]=r,i[e]=u,this.siftDown_(s,e)}},{key:"siftDown_",value:function(e,t){for(var i=this.elements_,n=this.priorities_,r=i[t],u=n[t];t>e;){var s=this.getParentIndex_(t);if(!(n[s]>u))break;i[t]=i[s],n[t]=n[s],t=s}i[t]=r,n[t]=u}},{key:"reprioritize",value:function(){var e,t,i,n=this.priorityFunction_,r=this.elements_,u=this.priorities_,s=0,o=r.length;for(t=0;t<o;++t)(i=n(e=r[t]))==l?delete this.queuedElements_[this.keyFunction_(e)]:(u[s]=i,r[s++]=e);r.length=s,u.length=s,this.heapify_()}}]),i}(),a=h;exports.default=a;
},{"../asserts.js":"DVOE","../obj.js":"SLsU"}],"FoaO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};exports.default=e;
},{}],"mzg7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getTilePriority=P;var e=i(require("./events/EventType.js")),t=o(require("./structs/PriorityQueue.js")),r=i(require("./TileState.js"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=i?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=s(e,"string");return"symbol"===u(t)?t:String(t)}function s(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=y(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=O();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(n){d(i,t.default);var o=g(i);function i(e,t){var r;return a(this,i),(r=o.call(this,function(t){return e.apply(null,t)},function(e){return e[0].getKey()})).boundHandleTileChange_=r.handleTileChange.bind(v(r)),r.tileChangeCallback_=t,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return f(i,[{key:"enqueue",value:function(t){var r=p(_(i.prototype),"enqueue",this).call(this,t);r&&t[0].addEventListener(e.default.CHANGE,this.boundHandleTileChange_);return r}},{key:"getTilesLoading",value:function(){return this.tilesLoading_}},{key:"handleTileChange",value:function(t){var n=t.target,o=n.getState();if(o===r.default.LOADED||o===r.default.ERROR||o===r.default.EMPTY){o!==r.default.ERROR&&n.removeEventListener(e.default.CHANGE,this.boundHandleTileChange_);var i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}},{key:"loadMoreTiles",value:function(e,t){for(var n,o,i=0;this.tilesLoading_<e&&i<t&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),n.getState()!==r.default.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,n.load())}}]),i}(),w=j;function P(e,r,n,o,i){if(!(e&&n in e.wantedTiles))return t.DROP;if(!e.wantedTiles[n][r.getKey()])return t.DROP;var u=e.viewState.center,a=o[0]-u[0],l=o[1]-u[1];return 65536*Math.log(i)+Math.sqrt(a*a+l*l)/i}exports.default=w;
},{"./events/EventType.js":"GUXn","./structs/PriorityQueue.js":"XG8w","./TileState.js":"FoaO"}],"KrL1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../Object.js")),t=i(require("../MapEventType.js")),r=require("../functions.js"),n=require("../events.js"),o=require("../dom.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function s(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=a(e,"string");return"symbol"===u(t)?t:String(t)}function a(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=y(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=g();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(i){d(c,e.default);var u=h(c);function c(e){var t;l(this,c),t=u.call(this);var r=e.element;return!r||e.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),t.element=r||null,t.target_=null,t.map_=null,t.listenerKeys=[],e.render&&(t.render=e.render),e.target&&t.setTarget(e.target),t}return s(c,[{key:"disposeInternal",value:function(){(0,o.removeNode)(this.element),p(O(c.prototype),"disposeInternal",this).call(this)}},{key:"getMap",value:function(){return this.map_}},{key:"setMap",value:function(e){this.map_&&(0,o.removeNode)(this.element);for(var i=0,u=this.listenerKeys.length;i<u;++i)(0,n.unlistenByKey)(this.listenerKeys[i]);(this.listenerKeys.length=0,this.map_=e,e)&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==r.VOID&&this.listenerKeys.push((0,n.listen)(e,t.default.POSTRENDER,this.render,this)),e.render())}},{key:"render",value:function(e){}},{key:"setTarget",value:function(e){this.target_="string"==typeof e?document.getElementById(e):e}}]),c}(),_=j;exports.default=_;
},{"../Object.js":"fB8e","../MapEventType.js":"o4sL","../functions.js":"pDAE","../events.js":"MGag","../dom.js":"FYLQ"}],"WSLd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Control.js")),t=r(require("../events/EventType.js")),l=require("../css.js"),o=require("../array.js"),n=require("../dom.js");function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var l=0;l<t.length;l++){var o=t[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,c(o.key),o)}}function u(e,t,l){return t&&s(e.prototype,t),l&&s(e,l),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=p(e,"string");return"symbol"===i(t)?t:String(t)}function p(e,t){if("object"!==i(e)||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var o=l.call(e,t||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=y();return function(){var l,o=v(e);if(t){var n=v(this).constructor;l=Reflect.construct(o,arguments,n)}else l=o.apply(this,arguments);return _(this,l)}}function _(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(r){d(s,e.default);var i=b(s);function s(e){var o;a(this,s),e=e||{},(o=i.call(this,{element:document.createElement("div"),render:e.render,target:e.target})).ulElement_=document.createElement("ul"),o.collapsed_=void 0===e.collapsed||e.collapsed,o.userCollapsed_=o.collapsed_,o.overrideCollapsible_=void 0!==e.collapsible,o.collapsible_=void 0===e.collapsible||e.collapsible,o.collapsible_||(o.collapsed_=!1);var n=void 0!==e.className?e.className:"ol-attribution",r=void 0!==e.tipLabel?e.tipLabel:"Attributions",u=void 0!==e.expandClassName?e.expandClassName:n+"-expand",c=void 0!==e.collapseLabel?e.collapseLabel:"",p=void 0!==e.collapseClassName?e.collapseClassName:n+"-collapse";"string"==typeof c?(o.collapseLabel_=document.createElement("span"),o.collapseLabel_.textContent=c,o.collapseLabel_.className=p):o.collapseLabel_=c;var d=void 0!==e.label?e.label:"i";"string"==typeof d?(o.label_=document.createElement("span"),o.label_.textContent=d,o.label_.className=u):o.label_=d;var f=o.collapsible_&&!o.collapsed_?o.collapseLabel_:o.label_;o.toggleButton_=document.createElement("button"),o.toggleButton_.setAttribute("type","button"),o.toggleButton_.setAttribute("aria-expanded",String(!o.collapsed_)),o.toggleButton_.title=r,o.toggleButton_.appendChild(f),o.toggleButton_.addEventListener(t.default.CLICK,o.handleClick_.bind(h(o)),!1);var b=n+" "+l.CLASS_UNSELECTABLE+" "+l.CLASS_CONTROL+(o.collapsed_&&o.collapsible_?" "+l.CLASS_COLLAPSED:"")+(o.collapsible_?"":" ol-uncollapsible"),_=o.element;return _.className=b,_.appendChild(o.toggleButton_),_.appendChild(o.ulElement_),o.renderedAttributions_=[],o.renderedVisible_=!0,o}return u(s,[{key:"collectSourceAttributions_",value:function(e){var t=Array.from(new Set(this.getMap().getAllLayers().flatMap(function(t){return t.getAttributions(e)}))),l=!this.getMap().getAllLayers().some(function(e){return e.getSource()&&!1===e.getSource().getAttributionsCollapsible()});return this.overrideCollapsible_||this.setCollapsible(l),t}},{key:"updateElement_",value:function(e){if(e){var t=this.collectSourceAttributions_(e),l=t.length>0;if(this.renderedVisible_!=l&&(this.element.style.display=l?"":"none",this.renderedVisible_=l),!(0,o.equals)(t,this.renderedAttributions_)){(0,n.removeChildren)(this.ulElement_);for(var r=0,i=t.length;r<i;++r){var a=document.createElement("li");a.innerHTML=t[r],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}},{key:"handleClick_",value:function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}},{key:"handleToggle_",value:function(){this.element.classList.toggle(l.CLASS_COLLAPSED),this.collapsed_?(0,n.replaceNode)(this.collapseLabel_,this.label_):(0,n.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}},{key:"setCollapsed",value:function(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"render",value:function(e){this.updateElement_(e.frameState)}}]),s}(),g=m;exports.default=g;
},{"./Control.js":"KrL1","../events/EventType.js":"GUXn","../css.js":"MuPn","../array.js":"o0G8","../dom.js":"FYLQ"}],"zuam":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Control.js")),e=n(require("../events/EventType.js")),r=require("../css.js"),o=require("../easing.js");function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,s(o.key),o)}}function u(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=c(t,"string");return"symbol"===i(e)?e:String(e)}function c(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=y();return function(){var r,o=m(t);if(e){var n=m(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(n){f(l,t.default);var i=p(l);function l(t){var o;a(this,l),t=t||{},o=i.call(this,{element:document.createElement("div"),render:t.render,target:t.target});var n=void 0!==t.className?t.className:"ol-rotate",u=void 0!==t.label?t.label:"",s=void 0!==t.compassClassName?t.compassClassName:"ol-compass";o.label_=null,"string"==typeof u?(o.label_=document.createElement("span"),o.label_.className=s,o.label_.textContent=u):(o.label_=u,o.label_.classList.add(s));var c=t.tipLabel?t.tipLabel:"Reset rotation",f=document.createElement("button");f.className=n+"-reset",f.setAttribute("type","button"),f.title=c,f.appendChild(o.label_),f.addEventListener(e.default.CLICK,o.handleClick_.bind(v(o)),!1);var d=n+" "+r.CLASS_UNSELECTABLE+" "+r.CLASS_CONTROL,p=o.element;return p.className=d,p.appendChild(f),o.callResetNorth_=t.resetNorth?t.resetNorth:void 0,o.duration_=void 0!==t.duration?t.duration:250,o.autoHide_=void 0===t.autoHide||t.autoHide,o.rotation_=void 0,o.autoHide_&&o.element.classList.add(r.CLASS_HIDDEN),o}return u(l,[{key:"handleClick_",value:function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}},{key:"resetNorth_",value:function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:o.easeOut}):t.setRotation(0))}}},{key:"render",value:function(t){var e=t.frameState;if(e){var o=e.viewState.rotation;if(o!=this.rotation_){var n="rotate("+o+"rad)";if(this.autoHide_){var i=this.element.classList.contains(r.CLASS_HIDDEN);i||0!==o?i&&0!==o&&this.element.classList.remove(r.CLASS_HIDDEN):this.element.classList.add(r.CLASS_HIDDEN)}this.label_.style.transform=n}this.rotation_=o}}}]),l}(),_=h;exports.default=_;
},{"./Control.js":"KrL1","../events/EventType.js":"GUXn","../css.js":"MuPn","../easing.js":"k82w"}],"eHXz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Control.js")),t=r(require("../events/EventType.js")),o=require("../css.js"),n=require("../easing.js");function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function l(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=f(e,"string");return"symbol"===i(t)?t:String(t)}function f(e,t){if("object"!==i(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=y();return function(){var o,n=v(e);if(t){var r=v(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return m(this,o)}}function m(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(r){s(a,e.default);var i=p(a);function a(e){var n;u(this,a),e=e||{},n=i.call(this,{element:document.createElement("div"),target:e.target});var r=void 0!==e.className?e.className:"ol-zoom",l=void 0!==e.delta?e.delta:1,c=void 0!==e.zoomInClassName?e.zoomInClassName:r+"-in",f=void 0!==e.zoomOutClassName?e.zoomOutClassName:r+"-out",s=void 0!==e.zoomInLabel?e.zoomInLabel:"+",d=void 0!==e.zoomOutLabel?e.zoomOutLabel:"",p=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",m=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",y=document.createElement("button");y.className=c,y.setAttribute("type","button"),y.title=p,y.appendChild("string"==typeof s?document.createTextNode(s):s),y.addEventListener(t.default.CLICK,n.handleClick_.bind(b(n),l),!1);var v=document.createElement("button");v.className=f,v.setAttribute("type","button"),v.title=m,v.appendChild("string"==typeof d?document.createTextNode(d):d),v.addEventListener(t.default.CLICK,n.handleClick_.bind(b(n),-l),!1);var h=r+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,O=n.element;return O.className=h,O.appendChild(y),O.appendChild(v),n.duration_=void 0!==e.duration?e.duration:250,n}return l(a,[{key:"handleClick_",value:function(e,t){t.preventDefault(),this.zoomByDelta_(e)}},{key:"zoomByDelta_",value:function(e){var t=this.getMap().getView();if(t){var o=t.getZoom();if(void 0!==o){var r=t.getConstrainedZoom(o+e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:r,duration:this.duration_,easing:n.easeOut})):t.setZoom(r)}}}}]),a}(),O=h;exports.default=O;
},{"./Control.js":"KrL1","../events/EventType.js":"GUXn","../css.js":"MuPn","../easing.js":"k82w"}],"DcOi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=i;var t=u(require("./Attribution.js")),e=u(require("../Collection.js")),o=u(require("./Rotate.js")),r=u(require("./Zoom.js"));function u(t){return t&&t.__esModule?t:{default:t}}function i(u){u=u||{};var i=new e.default;return(void 0===u.zoom||u.zoom)&&i.push(new r.default(u.zoomOptions)),(void 0===u.rotate||u.rotate)&&i.push(new o.default(u.rotateOptions)),(void 0===u.attribution||u.attribution)&&i.push(new t.default(u.attributionOptions)),i}
},{"./Attribution.js":"WSLd","../Collection.js":"Kjrg","./Rotate.js":"zuam","./Zoom.js":"eHXz"}],"NHMn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ACTIVE:"active"};exports.default=e;
},{}],"qFcG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.pan=h,exports.zoomByDelta=g;var t=r(require("../Object.js")),e=r(require("./Property.js")),n=require("../easing.js");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function a(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===o(e)?e:String(e)}function f(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=b();return function(){var n,r=d(t);if(e){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(n){l(o,t.default);var r=p(o);function o(t){var e;return i(this,o),(e=r.call(this)).on,e.once,e.un,t&&t.handleEvent&&(e.handleEvent=t.handleEvent),e.map_=null,e.setActive(!0),e}return a(o,[{key:"getActive",value:function(){return this.get(e.default.ACTIVE)}},{key:"getMap",value:function(){return this.map_}},{key:"handleEvent",value:function(t){return!0}},{key:"setActive",value:function(t){this.set(e.default.ACTIVE,t)}},{key:"setMap",value:function(t){this.map_=t}}]),o}();function h(t,e,r){var o=t.getCenterInternal();if(o){var i=[o[0]+e[0],o[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:n.linear,center:t.getConstrainedCenter(i)})}}function g(t,e,r,o){var i=t.getZoom();if(void 0!==i){var u=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(u);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==o?o:250,easing:n.easeOut})}}var j=m;exports.default=j;
},{"../Object.js":"fB8e","./Property.js":"NHMn","../easing.js":"k82w"}],"noMw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Interaction.js")),e=r(require("../MapBrowserEventType.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var f=i?Object.getOwnPropertyDescriptor(t,u):null;f&&(f.get||f.set)?Object.defineProperty(o,u,f):o[u]=t[u]}return o.default=t,r&&r.set(t,o),o}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function c(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=l(t,"string");return"symbol"===i(e)?e:String(e)}function l(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(r){p(o,t.default);var n=y(o);function o(t){var e;return u(this,o),t=t||{},(e=n.call(this)).delta_=t.delta?t.delta:1,e.duration_=void 0!==t.duration?t.duration:250,e}return c(o,[{key:"handleEvent",value:function(r){var n=!1;if(r.type==e.default.DBLCLICK){var o=r.originalEvent,i=r.map,u=r.coordinate,f=o.shiftKey?-this.delta_:this.delta_,c=i.getView();(0,t.zoomByDelta)(c,f,u,this.duration_),o.preventDefault(),n=!0}return!n}}]),o}(),j=O;exports.default=j;
},{"./Interaction.js":"qFcG","../MapBrowserEventType.js":"LFOz"}],"BJIy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.centroid=b,exports.default=void 0;var e=n(require("./Interaction.js")),t=n(require("../MapBrowserEventType.js"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=l(e,"string");return"symbol"===r(t)?t:String(t)}function l(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=d();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(n){c(i,e.default);var r=s(i);function i(e){var t;return o(this,i),e=e||{},t=r.call(this,e),e.handleDownEvent&&(t.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(t.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(t.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(t.handleUpEvent=e.handleUpEvent),e.stopDown&&(t.stopDown=e.stopDown),t.handlingDownUpSequence=!1,t.targetPointers=[],t}return u(i,[{key:"getPointerCount",value:function(){return this.targetPointers.length}},{key:"handleDownEvent",value:function(e){return!1}},{key:"handleDragEvent",value:function(e){}},{key:"handleEvent",value:function(e){if(!e.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==t.default.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==t.default.POINTERUP){var r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==t.default.POINTERDOWN){var o=this.handleDownEvent(e);this.handlingDownUpSequence=o,n=this.stopDown(o)}else e.type==t.default.POINTERMOVE&&this.handleMoveEvent(e);return!n}},{key:"handleMoveEvent",value:function(e){}},{key:"handleUpEvent",value:function(e){return!1}},{key:"stopDown",value:function(e){return e}},{key:"updateTrackedPointers_",value:function(e){e.activePointers&&(this.targetPointers=e.activePointers)}}]),i}();function b(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++)n+=e[o].clientX,r+=e[o].clientY;return{clientX:n/t,clientY:r/t}}var E=y;exports.default=E;
},{"./Interaction.js":"qFcG","../MapBrowserEventType.js":"LFOz"}],"c2fz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=i,exports.touchOnly=exports.targetNotEditable=exports.singleClick=exports.shiftKeyOnly=exports.primaryAction=exports.pointerMove=exports.platformModifierKeyOnly=exports.penOnly=exports.noModifierKeys=exports.never=exports.mouseOnly=exports.mouseActionButton=exports.focusWithTabindex=exports.focus=exports.doubleClick=exports.click=exports.always=exports.altShiftKeysOnly=exports.altKeyOnly=void 0;var e=o(require("../MapBrowserEventType.js")),t=require("../functions.js"),r=require("../has.js"),n=require("../asserts.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments;return function(e){for(var r=!0,n=0,o=t.length;n<o&&(r=r&&t[n](e));++n);return r}}var a=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.altKeyOnly=a;var s=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.altShiftKeysOnly=s;var u=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)};exports.focus=u;var l=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||u(e)};exports.focusWithTabindex=l;var p=t.TRUE;exports.always=p;var y=function(t){return t.type==e.default.CLICK};exports.click=y;var v=function(e){var t=e.originalEvent;return 0==t.button&&!(r.WEBKIT&&r.MAC&&t.ctrlKey)};exports.mouseActionButton=v;var c=t.FALSE;exports.never=c;var f=function(e){return"pointermove"==e.type};exports.pointerMove=f;var x=function(t){return t.type==e.default.SINGLECLICK};exports.singleClick=x;var K=function(t){return t.type==e.default.DBLCLICK};exports.doubleClick=K;var E=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.noModifierKeys=E;var d=function(e){var t=e.originalEvent;return!t.altKey&&(r.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey};exports.platformModifierKeyOnly=d;var g=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.shiftKeyOnly=g;var m=function(e){var t=e.originalEvent,r=t.target.tagName;return"INPUT"!==r&&"SELECT"!==r&&"TEXTAREA"!==r&&!t.target.isContentEditable};exports.targetNotEditable=m;var h=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"mouse"==t.pointerType};exports.mouseOnly=h;var O=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"touch"===t.pointerType};exports.touchOnly=O;var C=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),"pen"===t.pointerType};exports.penOnly=C;var T=function(e){var t=e.originalEvent;return(0,n.assert)(void 0!==t,56),t.isPrimary&&0===t.button};exports.primaryAction=T;
},{"../MapBrowserEventType.js":"LFOz","../functions.js":"pDAE","../has.js":"mpkP","../asserts.js":"DVOE"}],"q4El":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("./Pointer.js")),e=require("../functions.js"),n=require("../events/condition.js"),r=require("../easing.js"),i=require("../coordinate.js");function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=p(t,"string");return"symbol"===u(e)?e:String(e)}function p(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=v();return function(){var n,r=_(t);if(e){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(o){h(u,t.default);var a=d(u);function u(t){var r;c(this,u),t=t||{},(r=a.call(this,{stopDown:e.FALSE})).kinetic_=t.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1;var i=t.condition?t.condition:(0,n.all)(n.noModifierKeys,n.primaryAction);return r.condition_=t.onFocusOnly?(0,n.all)(n.focusWithTabindex,i):i,r.noKinetic_=!1,r}return l(u,[{key:"handleDragEvent",value:function(e){var n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());var r=this.targetPointers,o=n.getEventPixel((0,t.centroid)(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){var a=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],u=e.map.getView();(0,i.scale)(a,u.getResolution()),(0,i.rotate)(a,u.getRotation()),u.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}},{key:"handleUpEvent",value:function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),a=n.getCenterInternal(),u=e.getPixelFromCoordinateInternal(a),c=e.getCoordinateFromPixelInternal([u[0]-i*Math.cos(o),u[1]-i*Math.sin(o)]);n.animateInternal({center:n.getConstrainedCenter(c),duration:500,easing:r.easeOut})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}]),u}(),P=m;exports.default=P;
},{"./Pointer.js":"BJIy","../functions.js":"pDAE","../events/condition.js":"c2fz","../easing.js":"k82w","../coordinate.js":"CMtO"}],"CIOI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Pointer.js")),e=require("../functions.js"),n=require("../events/condition.js"),r=require("../rotationconstraint.js");function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function a(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=l(t,"string");return"symbol"===i(e)?e:String(e)}function l(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(o){s(c,t.default);var i=y(c);function c(t){var r;return u(this,c),t=t||{},(r=i.call(this,{stopDown:e.FALSE})).condition_=t.condition?t.condition:n.altShiftKeysOnly,r.lastAngle_=void 0,r.duration_=void 0!==t.duration?t.duration:250,r}return a(c,[{key:"handleDragEvent",value:function(t){if((0,n.mouseOnly)(t)){var e=t.map,o=e.getView();if(o.getConstraints().rotation!==r.disable){var i=e.getSize(),u=t.pixel,c=Math.atan2(i[1]/2-u[1],u[0]-i[0]/2);if(void 0!==this.lastAngle_){var a=c-this.lastAngle_;o.adjustRotationInternal(-a)}this.lastAngle_=c}}}},{key:"handleUpEvent",value:function(t){return!(0,n.mouseOnly)(t)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){return!!(0,n.mouseOnly)(t)&&(!(!(0,n.mouseActionButton)(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}}]),c}(),g=m;exports.default=g;
},{"./Pointer.js":"BJIy","../functions.js":"pDAE","../events/condition.js":"c2fz","../rotationconstraint.js":"E0bT"}],"p2lH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../Disposable.js")),t=r(require("../geom/Polygon.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function u(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=a(e,"string");return"symbol"===n(t)?t:String(t)}function a(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=h();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(r){s(i,e.default);var n=f(i);function i(e){var t;return o(this,i),(t=n.call(this)).geometry_=null,t.element_=document.createElement("div"),t.element_.style.position="absolute",t.element_.style.pointerEvents="auto",t.element_.className="ol-box "+e,t.map_=null,t.startPixel_=null,t.endPixel_=null,t}return u(i,[{key:"disposeInternal",value:function(){this.setMap(null)}},{key:"render_",value:function(){var e=this.startPixel_,t=this.endPixel_,r=this.element_.style;r.left=Math.min(e[0],t[0])+"px",r.top=Math.min(e[1],t[1])+"px",r.width=Math.abs(t[0]-e[0])+"px",r.height=Math.abs(t[1]-e[1])+"px"}},{key:"setMap",value:function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}},{key:"setPixels",value:function(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}},{key:"createOrUpdateGeometry",value:function(){var e=this.startPixel_,r=this.endPixel_,n=[e,[e[0],r[1]],r,[r[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new t.default([n])}},{key:"getGeometry",value:function(){return this.geometry_}}]),i}(),_=d;exports.default=_;
},{"../Disposable.js":"jZkk","../geom/Polygon.js":"DTlF"}],"vAhX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DragBoxEvent=void 0;var t=r(require("../events/Event.js")),e=r(require("./Pointer.js")),n=r(require("../render/Box.js")),o=require("../events/condition.js");function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=l(t,"string");return"symbol"===i(e)?e:String(e)}function l(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=v();return function(){var n,o=x(t);if(e){var r=x(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return b(this,n)}}function b(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},E=function(e){f(o,t.default);var n=p(o);function o(t,e,r){var i;return s(this,o),(i=n.call(this,t)).coordinate=e,i.mapBrowserEvent=r,i}return c(o)}();exports.DragBoxEvent=E;var _=function(t){f(i,e.default);var r=p(i);function i(t){var e;return s(this,i),(e=r.call(this)).on,e.once,e.un,t=t||{},e.box_=new n.default(t.className||"ol-dragbox"),e.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(e.onBoxEnd=t.onBoxEnd),e.startPixel_=null,e.condition_=t.condition?t.condition:o.mouseActionButton,e.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:e.defaultBoxEndCondition,e}return c(i,[{key:"defaultBoxEndCondition",value:function(t,e,n){var o=n[0]-e[0],r=n[1]-e[1];return o*o+r*r>=this.minArea_}},{key:"getGeometry",value:function(){return this.box_.getGeometry()}},{key:"handleDragEvent",value:function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new E(h.BOXDRAG,t.coordinate,t))}},{key:"handleUpEvent",value:function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new E(e?h.BOXEND:h.BOXCANCEL,t.coordinate,t)),!1}},{key:"handleDownEvent",value:function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new E(h.BOXSTART,t.coordinate,t)),!0)}},{key:"onBoxEnd",value:function(t){}}]),i}(),m=_;exports.default=m;
},{"../events/Event.js":"M1Cf","./Pointer.js":"BJIy","../render/Box.js":"p2lH","../events/condition.js":"c2fz"}],"uy5k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./DragBox.js")),e=require("../easing.js"),r=require("../events/condition.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=a(t,"string");return"symbol"===o(e)?e:String(e)}function a(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=b();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(n){l(u,t.default);var o=y(u);function u(t){var e;i(this,u);var n=(t=t||{}).condition?t.condition:r.shiftKeyOnly;return(e=o.call(this,{condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea})).duration_=void 0!==t.duration?t.duration:200,e.out_=void 0!==t.out&&t.out,e}return c(u,[{key:"onBoxEnd",value:function(t){var r=this.getMap().getView(),n=this.getGeometry();if(this.out_){var o=r.rotatedExtentForGeometry(n),i=r.getResolutionForExtentInternal(o),u=r.getResolution()/i;(n=n.clone()).scale(u*u)}r.fitInternal(n,{duration:this.duration_,easing:e.easeOut})}}]),u}(),h=m;exports.default=h;
},{"./DragBox.js":"vAhX","../easing.js":"k82w","../events/condition.js":"c2fz"}],"tzsM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};exports.default=r;
},{}],"DsUC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=f(require("../events/EventType.js")),e=u(require("./Interaction.js")),r=f(require("../events/Key.js")),n=require("../events/condition.js"),o=require("../coordinate.js");function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(i=function(t){return t?r:e})(t)}function u(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=i(e);if(r&&r.has(t))return r.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var f=o?Object.getOwnPropertyDescriptor(t,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=t[u]}return n.default=t,r&&r.set(t,n),n}function f(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function p(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var e=y(t,"string");return"symbol"===a(e)?e:String(e)}function y(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=h();return function(){var r,n=_(t);if(e){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return O(this,r)}}function O(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(i){d(f,e.default);var u=b(f);function f(t){var e;return c(this,f),t=t||{},(e=u.call(this)).defaultCondition_=function(t){return(0,n.noModifierKeys)(t)&&(0,n.targetNotEditable)(t)},e.condition_=void 0!==t.condition?t.condition:e.defaultCondition_,e.duration_=void 0!==t.duration?t.duration:100,e.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128,e}return p(f,[{key:"handleEvent",value:function(n){var i=!1;if(n.type==t.default.KEYDOWN){var u=n.originalEvent,f=u.key;if(this.condition_(n)&&(f==r.default.DOWN||f==r.default.LEFT||f==r.default.RIGHT||f==r.default.UP)){var a=n.map.getView(),c=a.getResolution()*this.pixelDelta_,l=0,p=0;f==r.default.DOWN?p=-c:f==r.default.LEFT?l=-c:f==r.default.RIGHT?l=c:p=c;var s=[l,p];(0,o.rotate)(s,a.getRotation()),(0,e.pan)(a,s,this.duration_),u.preventDefault(),i=!0}}return!i}}]),f}(),w=m;exports.default=w;
},{"../events/EventType.js":"GUXn","./Interaction.js":"qFcG","../events/Key.js":"tzsM","../events/condition.js":"c2fz","../coordinate.js":"CMtO"}],"LPsd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../events/EventType.js")),e=o(require("./Interaction.js")),r=require("../events/condition.js");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var f=i?Object.getOwnPropertyDescriptor(t,u):null;f&&(f.get||f.set)?Object.defineProperty(o,u,f):o[u]=t[u]}return o.default=t,r&&r.set(t,o),o}function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function a(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=p(t,"string");return"symbol"===u(e)?e:String(e)}function p(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=O();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(n){s(i,e.default);var o=d(i);function i(t){var e;return f(this,i),t=t||{},(e=o.call(this)).condition_=t.condition?t.condition:r.targetNotEditable,e.delta_=t.delta?t.delta:1,e.duration_=void 0!==t.duration?t.duration:100,e}return a(i,[{key:"handleEvent",value:function(r){var n=!1;if(r.type==t.default.KEYDOWN||r.type==t.default.KEYPRESS){var o=r.originalEvent,i=o.key;if(this.condition_(r)&&("+"===i||"-"===i)){var u=r.map,f="+"===i?this.delta_:-this.delta_,c=u.getView();(0,e.zoomByDelta)(c,f,void 0,this.duration_),o.preventDefault(),n=!0}}return!n}}]),i}(),m=j;exports.default=m;
},{"../events/EventType.js":"GUXn","./Interaction.js":"qFcG","../events/condition.js":"c2fz"}],"pnST":[function(require,module,exports) {
"use strict";function t(i){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(i)}function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function e(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(i){var e=r(i,"string");return"symbol"===t(e)?e:String(e)}function r(i,e){if("object"!==t(i)||null===i)return i;var n=i[Symbol.toPrimitive];if(void 0!==n){var o=n.call(i,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=function(){function t(e,n,o){i(this,t),this.decay_=e,this.minVelocity_=n,this.delay_=o,this.points_=[],this.angle_=0,this.initialVelocity_=0}return n(t,[{key:"begin",value:function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}},{key:"update",value:function(t,i){this.points_.push(t,i,Date.now())}},{key:"end",value:function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var e=i-3;e>0&&this.points_[e+2]>t;)e-=3;var n=this.points_[i+2]-this.points_[e+2];if(n<1e3/60)return!1;var o=this.points_[i]-this.points_[e],r=this.points_[i+1]-this.points_[e+1];return this.angle_=Math.atan2(r,o),this.initialVelocity_=Math.sqrt(o*o+r*r)/n,this.initialVelocity_>this.minVelocity_}},{key:"getDistance",value:function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}},{key:"getAngle",value:function(){return this.angle_}}]),t}(),a=s;exports.default=a;
},{}],"X7Iz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("../events/EventType.js")),e=a(require("./Interaction.js")),o=require("../has.js"),n=require("../events/condition.js"),r=require("../math.js");function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(i=function(t){return t?o:e})(t)}function a(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var o=i(e);if(o&&o.has(t))return o.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=r?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,o&&o.set(t,n),n}function u(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function f(t,e,o){return e&&c(t.prototype,e),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){var e=h(t,"string");return"symbol"===s(e)?e:String(e)}function h(t,e){if("object"!==s(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=b();return function(){var o,n=O(t);if(e){var r=O(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return v(this,o)}}function v(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(i){_(u,e.default);var a=m(u);function u(t){var e;l(this,u),t=t||{},(e=a.call(this,t)).totalDelta_=0,e.lastDelta_=0,e.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,e.duration_=void 0!==t.duration?t.duration:250,e.timeout_=void 0!==t.timeout?t.timeout:80,e.useAnchor_=void 0===t.useAnchor||t.useAnchor,e.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;var o=t.condition?t.condition:n.always;return e.condition_=t.onFocusOnly?(0,n.all)(n.focusWithTabindex,o):o,e.lastAnchor_=null,e.startTime_=void 0,e.timeoutId_,e.mode_=void 0,e.trackpadEventGap_=400,e.trackpadTimeoutId_,e.deltaPerZoom_=300,e}return f(u,[{key:"endInteraction_",value:function(){this.trackpadTimeoutId_=void 0;var t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},{key:"handleEvent",value:function(e){if(!this.condition_(e))return!0;if(e.type!==t.default.WHEEL)return!0;var n,r=e.map,i=e.originalEvent;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==t.default.WHEEL&&(n=i.deltaY,o.FIREFOX&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=o.DEVICE_PIXEL_RATIO),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.lastDelta_=n;var a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");var u=r.getView();if("trackpad"===this.mode_&&!u.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=n;var s=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),s),!1}},{key:"handleWheelZoom_",value:function(t){var o=t.getView();o.getAnimating()&&o.cancelAnimations();var n=-(0,r.clamp)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(o.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),(0,e.zoomByDelta)(o,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}},{key:"setMouseAnchor",value:function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}]),u}(),g=j;exports.default=g;
},{"../events/EventType.js":"GUXn","./Interaction.js":"qFcG","../has.js":"mpkP","../events/condition.js":"c2fz","../math.js":"qAK2"}],"mfRS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Pointer.js")),e=require("../functions.js"),r=require("../rotationconstraint.js");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=t[a]}return o.default=t,r&&r.set(t,o),o}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=f(t,"string");return"symbol"===i(e)?e:String(e)}function f(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=v();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(n){s(i,t.default);var o=h(i);function i(t){var r;a(this,i);var n=t=t||{};return n.stopDown||(n.stopDown=e.FALSE),(r=o.call(this,n)).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==t.threshold?t.threshold:.3,r.duration_=void 0!==t.duration?t.duration:250,r}return c(i,[{key:"handleDragEvent",value:function(e){var n=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(void 0!==this.lastAngle_){var u=a-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=u}this.lastAngle_=a;var c=e.map,l=c.getView();l.getConstraints().rotation!==r.disable&&(this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel((0,t.centroid)(this.targetPointers))),this.rotating_&&(c.render(),l.adjustRotationInternal(n,this.anchor_)))}},{key:"handleUpEvent",value:function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}]),i}(),_=g;exports.default=_;
},{"./Pointer.js":"BJIy","../functions.js":"pDAE","../rotationconstraint.js":"E0bT"}],"V7NS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Pointer.js")),e=require("../functions.js");function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(r=function(t){return t?n:e})(t)}function n(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r(e);if(n&&n.has(t))return n.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=t[a]}return o.default=t,n&&n.set(t,o),o}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=l(t,"string");return"symbol"===o(e)?e:String(e)}function l(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=v();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(r){f(o,t.default);var n=p(o);function o(t){var r;i(this,o);var a=t=t||{};return a.stopDown||(a.stopDown=e.FALSE),(r=n.call(this,a)).anchor_=null,r.duration_=void 0!==t.duration?t.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return u(o,[{key:"handleDragEvent",value:function(e){var r=1,n=this.targetPointers[0],o=this.targetPointers[1],i=n.clientX-o.clientX,a=n.clientY-o.clientY,u=Math.sqrt(i*i+a*a);void 0!==this.lastDistance_&&(r=this.lastDistance_/u),this.lastDistance_=u;var c=e.map,l=c.getView();1!=r&&(this.lastScaleDelta_=r),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel((0,t.centroid)(this.targetPointers))),c.render(),l.adjustResolutionInternal(r,this.anchor_)}},{key:"handleUpEvent",value:function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}]),o}(),g=b;exports.default=g;
},{"./Pointer.js":"BJIy","../functions.js":"pDAE"}],"PevW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=m;var o=h(require("../Collection.js")),e=h(require("./DoubleClickZoom.js")),u=h(require("./DragPan.js")),t=h(require("./DragRotate.js")),r=h(require("./DragZoom.js")),a=h(require("./KeyboardPan.js")),i=h(require("./KeyboardZoom.js")),n=h(require("../Kinetic.js")),d=h(require("./MouseWheelZoom.js")),l=h(require("./PinchRotate.js")),s=h(require("./PinchZoom.js"));function h(o){return o&&o.__esModule?o:{default:o}}function m(h){h=h||{};var m=new o.default,c=new n.default(-.005,.05,100);return(void 0===h.altShiftDragRotate||h.altShiftDragRotate)&&m.push(new t.default),(void 0===h.doubleClickZoom||h.doubleClickZoom)&&m.push(new e.default({delta:h.zoomDelta,duration:h.zoomDuration})),(void 0===h.dragPan||h.dragPan)&&m.push(new u.default({onFocusOnly:h.onFocusOnly,kinetic:c})),(void 0===h.pinchRotate||h.pinchRotate)&&m.push(new l.default),(void 0===h.pinchZoom||h.pinchZoom)&&m.push(new s.default({duration:h.zoomDuration})),(void 0===h.keyboard||h.keyboard)&&(m.push(new a.default),m.push(new i.default({delta:h.zoomDelta,duration:h.zoomDuration}))),(void 0===h.mouseWheelZoom||h.mouseWheelZoom)&&m.push(new d.default({onFocusOnly:h.onFocusOnly,duration:h.zoomDuration})),(void 0===h.shiftDragZoom||h.shiftDragZoom)&&m.push(new r.default({duration:h.zoomDuration})),m}
},{"../Collection.js":"Kjrg","./DoubleClickZoom.js":"noMw","./DragPan.js":"q4El","./DragRotate.js":"CIOI","./DragZoom.js":"uy5k","./KeyboardPan.js":"DsUC","./KeyboardZoom.js":"LPsd","../Kinetic.js":"pnST","./MouseWheelZoom.js":"X7Iz","./PinchRotate.js":"mfRS","./PinchZoom.js":"V7NS"}],"d9VJ":[function(require,module,exports) {
"use strict";function r(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function e(r){return r[0]>0&&r[1]>0}function t(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function o(r,e){return Array.isArray(r)?r:(void 0===e?e=[r,r]:(e[0]=r,e[1]=r),e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=r,exports.hasArea=e,exports.scale=t,exports.toSize=o;
},{}],"ZXtR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=N(require("./Object.js")),t=N(require("./Collection.js")),r=N(require("./CollectionEventType.js")),n=N(require("./renderer/Composite.js")),i=N(require("./events/EventType.js")),a=N(require("./layer/Layer.js")),o=j(require("./layer/Group.js")),s=N(require("./MapBrowserEvent.js")),l=N(require("./MapBrowserEventHandler.js")),u=N(require("./MapBrowserEventType.js")),d=N(require("./MapEvent.js")),h=N(require("./MapEventType.js")),v=N(require("./MapProperty.js")),f=N(require("./ObjectEventType.js")),y=N(require("./pointer/EventType.js")),c=N(require("./render/EventType.js")),p=j(require("./TileQueue.js")),g=N(require("./View.js")),_=N(require("./ViewHint.js")),E=require("./has.js"),m=require("./functions.js"),w=require("./transform.js"),T=require("./asserts.js"),C=require("./extent.js"),L=require("./control/defaults.js"),R=require("./interaction/defaults.js"),b=require("./array.js"),S=require("./proj.js"),O=require("./util.js"),k=require("./size.js"),P=require("./events.js"),x=require("./dom.js"),A=require("./console.js");function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function N(e){return e&&e.__esModule?e:{default:e}}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V(n.key),n)}}function M(e,t,r){return t&&H(e.prototype,t),r&&H(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function V(e){var t=q(e,"string");return"symbol"===D(t)?t:String(t)}function q(e,t){if("object"!==D(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function G(){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=K(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function K(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}function z(e,t){return(z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=Q();return function(){var r,n=X(e);if(t){var i=X(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e){e instanceof a.default?e.setMapInternal(null):e instanceof o.default&&e.getLayers().forEach(Z)}function J(e,t){if(e instanceof a.default)e.setMapInternal(t);else if(e instanceof o.default)for(var r=e.getLayers().getArray(),n=0,i=r.length;n<i;++n)J(r[n],t)}var $=function(a){B(I,e.default);var T=W(I);function I(e){var t;F(this,I),e=e||{},(t=T.call(this)).on,t.once,t.un;var n=ee(e);t.renderComplete_,t.loaded_=!0,t.boundHandleBrowserEvent_=t.handleBrowserEvent.bind(Y(t)),t.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,t.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:E.DEVICE_PIXEL_RATIO,t.postRenderTimeoutHandle_,t.animationDelayKey_,t.animationDelay_=t.animationDelay_.bind(Y(t)),t.coordinateToPixelTransform_=(0,w.create)(),t.pixelToCoordinateTransform_=(0,w.create)(),t.frameIndex_=0,t.frameState_=null,t.previousExtent_=null,t.viewPropertyListenerKey_=null,t.viewChangeListenerKey_=null,t.layerGroupPropertyListenerKeys_=null,t.viewport_=document.createElement("div"),t.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),t.viewport_.style.position="relative",t.viewport_.style.overflow="hidden",t.viewport_.style.width="100%",t.viewport_.style.height="100%",t.overlayContainer_=document.createElement("div"),t.overlayContainer_.style.position="absolute",t.overlayContainer_.style.zIndex="0",t.overlayContainer_.style.width="100%",t.overlayContainer_.style.height="100%",t.overlayContainer_.style.pointerEvents="none",t.overlayContainer_.className="ol-overlaycontainer",t.viewport_.appendChild(t.overlayContainer_),t.overlayContainerStopEvent_=document.createElement("div"),t.overlayContainerStopEvent_.style.position="absolute",t.overlayContainerStopEvent_.style.zIndex="0",t.overlayContainerStopEvent_.style.width="100%",t.overlayContainerStopEvent_.style.height="100%",t.overlayContainerStopEvent_.style.pointerEvents="none",t.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",t.viewport_.appendChild(t.overlayContainerStopEvent_),t.mapBrowserEventHandler_=null,t.moveTolerance_=e.moveTolerance,t.keyboardEventTarget_=n.keyboardEventTarget,t.targetChangeHandlerKeys_=null,t.targetElement_=null,t.resizeObserver_=new ResizeObserver(function(){return t.updateSize()}),t.controls=n.controls||(0,L.defaults)(),t.interactions=n.interactions||(0,R.defaults)({onFocusOnly:!0}),t.overlays_=n.overlays,t.overlayIdIndex_={},t.renderer_=null,t.postRenderFunctions_=[],t.tileQueue_=new p.default(t.getTilePriority.bind(Y(t)),t.handleTileChange_.bind(Y(t))),t.addChangeListener(v.default.LAYERGROUP,t.handleLayerGroupChanged_),t.addChangeListener(v.default.VIEW,t.handleViewChanged_),t.addChangeListener(v.default.SIZE,t.handleSizeChanged_),t.addChangeListener(v.default.TARGET,t.handleTargetChanged_),t.setProperties(n.values);var i=Y(t);return!e.view||e.view instanceof g.default||e.view.then(function(e){i.setView(new g.default(e))}),t.controls.addEventListener(r.default.ADD,function(e){e.element.setMap(Y(t))}),t.controls.addEventListener(r.default.REMOVE,function(e){e.element.setMap(null)}),t.interactions.addEventListener(r.default.ADD,function(e){e.element.setMap(Y(t))}),t.interactions.addEventListener(r.default.REMOVE,function(e){e.element.setMap(null)}),t.overlays_.addEventListener(r.default.ADD,function(e){t.addOverlayInternal_(e.element)}),t.overlays_.addEventListener(r.default.REMOVE,function(e){var r=e.element.getId();void 0!==r&&delete t.overlayIdIndex_[r.toString()],e.element.setMap(null)}),t.controls.forEach(function(e){e.setMap(Y(t))}),t.interactions.forEach(function(e){e.setMap(Y(t))}),t.overlays_.forEach(t.addOverlayInternal_.bind(Y(t))),t}return M(I,[{key:"addControl",value:function(e){this.getControls().push(e)}},{key:"addInteraction",value:function(e){this.getInteractions().push(e)}},{key:"addLayer",value:function(e){this.getLayerGroup().getLayers().push(e)}},{key:"handleLayerAdd_",value:function(e){J(e.layer,this)}},{key:"addOverlay",value:function(e){this.getOverlays().push(e)}},{key:"addOverlayInternal_",value:function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}},{key:"disposeInternal",value:function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),G(X(I.prototype),"disposeInternal",this).call(this)}},{key:"forEachFeatureAtPixel",value:function(e,t,r){if(this.frameState_&&this.renderer_){var n=this.getCoordinateFromPixelInternal(e),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,a=void 0!==r.layerFilter?r.layerFilter:m.TRUE,o=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,o,t,null,a,null)}}},{key:"getFeaturesAtPixel",value:function(e,t){var r=[];return this.forEachFeatureAtPixel(e,function(e){r.push(e)},t),r}},{key:"getAllLayers",value:function(){var e=[];return function t(r){r.forEach(function(r){r instanceof o.default?t(r.getLayers()):e.push(r)})}(this.getLayers()),e}},{key:"hasFeatureAtPixel",value:function(e,t){if(!this.frameState_||!this.renderer_)return!1;var r=this.getCoordinateFromPixelInternal(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:m.TRUE,i=void 0!==t.hitTolerance?t.hitTolerance:0,a=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,a,n,null)}},{key:"getEventCoordinate",value:function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}},{key:"getEventCoordinateInternal",value:function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}},{key:"getEventPixel",value:function(e){var t=this.viewport_.getBoundingClientRect(),r=this.getSize(),n=t.width/r[0],i=t.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-t.left)/n,(a.clientY-t.top)/i]}},{key:"getTarget",value:function(){return this.get(v.default.TARGET)}},{key:"getTargetElement",value:function(){return this.targetElement_}},{key:"getCoordinateFromPixel",value:function(e){return(0,S.toUserCoordinate)(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}},{key:"getCoordinateFromPixelInternal",value:function(e){var t=this.frameState_;return t?(0,w.apply)(t.pixelToCoordinateTransform,e.slice()):null}},{key:"getControls",value:function(){return this.controls}},{key:"getOverlays",value:function(){return this.overlays_}},{key:"getOverlayById",value:function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}},{key:"getInteractions",value:function(){return this.interactions}},{key:"getLayerGroup",value:function(){return this.get(v.default.LAYERGROUP)}},{key:"setLayers",value:function(e){var r=this.getLayerGroup();if(e instanceof t.default)r.setLayers(e);else{var n=r.getLayers();n.clear(),n.extend(e)}}},{key:"getLayers",value:function(){return this.getLayerGroup().getLayers()}},{key:"getLoadingOrNotReady",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t];if(n.visible){var i=n.layer.getRenderer();if(i&&!i.ready)return!0;var a=n.layer.getSource();if(a&&a.loading)return!0}}return!1}},{key:"getPixelFromCoordinate",value:function(e){var t=(0,S.fromUserCoordinate)(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}},{key:"getPixelFromCoordinateInternal",value:function(e){var t=this.frameState_;return t?(0,w.apply)(t.coordinateToPixelTransform,e.slice(0,2)):null}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"getSize",value:function(){return this.get(v.default.SIZE)}},{key:"getView",value:function(){return this.get(v.default.VIEW)}},{key:"getViewport",value:function(){return this.viewport_}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getOwnerDocument",value:function(){var e=this.getTargetElement();return e?e.ownerDocument:document}},{key:"getTilePriority",value:function(e,t,r,n){return(0,p.getTilePriority)(this.frameState_,e,t,r,n)}},{key:"handleBrowserEvent",value:function(e,t){t=t||e.type;var r=new s.default(t,this,e);this.handleMapBrowserEvent(r)}},{key:"handleMapBrowserEvent",value:function(e){if(this.frameState_){var t=e.originalEvent,r=t.type;if(r===y.default.POINTERDOWN||r===i.default.WHEEL||r===i.default.KEYDOWN){var n=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(a===n?n.documentElement:a).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e))for(var s=this.getInteractions().getArray().slice(),l=s.length-1;l>=0;l--){var u=s[l];if(u.getMap()===this&&u.getActive()&&this.getTargetElement())if(!u.handleEvent(e)||e.propagationStopped)break}}}},{key:"handlePostRender",value:function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_,n=r;if(e){var i=e.viewHints;if(i[_.default.ANIMATING]||i[_.default.INTERACTING]){var a=Date.now()-e.time>8;r=a?0:8,n=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,n))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener(c.default.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(c.default.RENDERCOMPLETE,e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new d.default(h.default.LOADEND,this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new d.default(h.default.LOADSTART,this,e))));for(var o=this.postRenderFunctions_,s=0,l=o.length;s<l;++s)o[s](this,e);o.length=0}},{key:"handleSizeChanged_",value:function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}},{key:"handleTargetChanged_",value:function(){if(this.mapBrowserEventHandler_){for(var e=0,t=this.targetChangeHandlerKeys_.length;e<t;++e)(0,P.unlistenByKey)(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(i.default.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(i.default.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,x.removeNode)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);var r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}var a=this.getTarget(),o="string"==typeof a?document.getElementById(a):a;if(this.targetElement_=o,o){for(var s in o.appendChild(this.viewport_),this.renderer_||(this.renderer_=new n.default(this)),this.mapBrowserEventHandler_=new l.default(this,this.moveTolerance_),u.default)this.mapBrowserEventHandler_.addEventListener(u.default[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(i.default.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(i.default.WHEEL,this.boundHandleBrowserEvent_,!!E.PASSIVE_EVENT_LISTENERS&&{passive:!1});var d=this.keyboardEventTarget_?this.keyboardEventTarget_:o;this.targetChangeHandlerKeys_=[(0,P.listen)(d,i.default.KEYDOWN,this.handleBrowserEvent,this),(0,P.listen)(d,i.default.KEYPRESS,this.handleBrowserEvent,this)];var h=o.getRootNode();h instanceof ShadowRoot&&this.resizeObserver_.observe(h.host),this.resizeObserver_.observe(o)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}},{key:"handleTileChange_",value:function(){this.render()}},{key:"handleViewPropertyChanged_",value:function(){this.render()}},{key:"handleViewChanged_",value:function(){this.viewPropertyListenerKey_&&((0,P.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,P.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,P.listen)(e,f.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,P.listen)(e,i.default.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}},{key:"handleLayerGroupChanged_",value:function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(P.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.handleLayerAdd_(new o.GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[(0,P.listen)(e,f.default.PROPERTYCHANGE,this.render,this),(0,P.listen)(e,i.default.CHANGE,this.render,this),(0,P.listen)(e,"addlayer",this.handleLayerAdd_,this),(0,P.listen)(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}},{key:"isRendered",value:function(){return!!this.frameState_}},{key:"animationDelay_",value:function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}},{key:"renderSync",value:function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}},{key:"redrawText",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}},{key:"render",value:function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}},{key:"removeControl",value:function(e){return this.getControls().remove(e)}},{key:"removeInteraction",value:function(e){return this.getInteractions().remove(e)}},{key:"removeLayer",value:function(e){return this.getLayerGroup().getLayers().remove(e)}},{key:"handleLayerRemove_",value:function(e){Z(e.layer)}},{key:"removeOverlay",value:function(e){return this.getOverlays().remove(e)}},{key:"renderFrame_",value:function(e){var t=this,r=this.getSize(),n=this.getView(),i=this.frameState_,a=null;if(void 0!==r&&(0,k.hasArea)(r)&&n&&n.isDef()){var o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,C.getForViewAndSize)(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:s,viewHints:o,wantedTiles:{},mapId:(0,O.getUid)(this),renderTargets:{}},s.nextCenter&&s.nextResolution){var l=isNaN(s.nextRotation)?s.rotation:s.nextRotation;a.nextExtent=(0,C.getForViewAndSize)(s.nextCenter,s.nextResolution,l,r)}}if(this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),i)(!this.previousExtent_||!(0,C.isEmpty)(this.previousExtent_)&&!(0,C.equals)(a.extent,this.previousExtent_))&&(this.dispatchEvent(new d.default(h.default.MOVESTART,this,i)),this.previousExtent_=(0,C.createOrUpdateEmpty)(this.previousExtent_));this.previousExtent_&&!a.viewHints[_.default.ANIMATING]&&!a.viewHints[_.default.INTERACTING]&&!(0,C.equals)(a.extent,this.previousExtent_)&&(this.dispatchEvent(new d.default(h.default.MOVEEND,this,a)),(0,C.clone)(a.extent,this.previousExtent_))}this.dispatchEvent(new d.default(h.default.POSTRENDER,this,a)),this.renderComplete_=this.hasListener(h.default.LOADSTART)||this.hasListener(h.default.LOADEND)||this.hasListener(c.default.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){t.postRenderTimeoutHandle_=void 0,t.handlePostRender()},0))}},{key:"setLayerGroup",value:function(e){var t=this.getLayerGroup();t&&this.handleLayerRemove_(new o.GroupEvent("removelayer",t)),this.set(v.default.LAYERGROUP,e)}},{key:"setSize",value:function(e){this.set(v.default.SIZE,e)}},{key:"setTarget",value:function(e){this.set(v.default.TARGET,e)}},{key:"setView",value:function(e){if(!e||e instanceof g.default)this.set(v.default.VIEW,e);else{this.set(v.default.VIEW,new g.default);var t=this;e.then(function(e){t.setView(new g.default(e))})}}},{key:"updateSize",value:function(){var e=this.getTargetElement(),t=void 0;if(e){var r=getComputedStyle(e),n=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),i=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);isNaN(n)||isNaN(i)||(t=[n,i],!(0,k.hasArea)(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&(0,A.warn)("No map visible because the map container's width or height are 0."))}var a=this.getSize();!t||a&&(0,b.equals)(t,a)||(this.setSize(t),this.updateViewportSize_())}},{key:"updateViewportSize_",value:function(){var e=this.getView();if(e){var t=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(t=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(t)}}}]),I}();function ee(e){var r=null;void 0!==e.keyboardEventTarget&&(r="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var n,i,a,s={},l=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new o.default({layers:e.layers});return s[v.default.LAYERGROUP]=l,s[v.default.TARGET]=e.target,s[v.default.VIEW]=e.view instanceof g.default?e.view:new g.default,void 0!==e.controls&&(Array.isArray(e.controls)?n=new t.default(e.controls.slice()):((0,T.assert)("function"==typeof e.controls.getArray,47),n=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?i=new t.default(e.interactions.slice()):((0,T.assert)("function"==typeof e.interactions.getArray,48),i=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?a=new t.default(e.overlays.slice()):((0,T.assert)("function"==typeof e.overlays.getArray,49),a=e.overlays):a=new t.default,{controls:n,interactions:i,keyboardEventTarget:r,overlays:a,values:s}}var te=$;exports.default=te;
},{"./Object.js":"fB8e","./Collection.js":"Kjrg","./CollectionEventType.js":"f4vV","./renderer/Composite.js":"UhNT","./events/EventType.js":"GUXn","./layer/Layer.js":"Ee0U","./layer/Group.js":"MeSs","./MapBrowserEvent.js":"XTM4","./MapBrowserEventHandler.js":"iEtH","./MapBrowserEventType.js":"LFOz","./MapEvent.js":"umZa","./MapEventType.js":"o4sL","./MapProperty.js":"XrJm","./ObjectEventType.js":"cEhm","./pointer/EventType.js":"Jr4C","./render/EventType.js":"JwZs","./TileQueue.js":"mzg7","./View.js":"rXL1","./ViewHint.js":"DfOy","./has.js":"mpkP","./functions.js":"pDAE","./transform.js":"Ln8D","./asserts.js":"DVOE","./extent.js":"L0Vw","./control/defaults.js":"DcOi","./interaction/defaults.js":"PevW","./array.js":"o0G8","./proj.js":"VAQc","./util.js":"KA50","./size.js":"d9VJ","./events.js":"MGag","./dom.js":"FYLQ","./console.js":"xtlK"}],"CzwG":[function(require,module,exports) {
var define;
var t;!function(i,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):(i=i||self).RBush=n()}(this,function(){"use strict";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1);t(n,r,Math.max(e,Math.floor(r-s*f/o+u)),Math.min(a,Math.floor(r+(o-s)*f/o+u)),h)}var m=n[r],c=e,p=a;for(i(n,e,r),h(n[a],m)>0&&i(n,e,a);c<p;){for(i(n,c,p),c++,p--;h(n[c],m)<0;)c++;for(;h(n[p],m)>0;)p--}0===h(n[e],m)?i(n,e,p):i(n,++p,a),p<=r&&(e=p+1),r<=p&&(a=p-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,void 0,void 0,void 0,void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});
},{}],"UXGG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=require("../size.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function a(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t){var e=u(t,"string");return"symbol"===i(e)?e:String(e)}function u(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var c=function(){function i(t){n(this,i),this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,e.toSize)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}return a(i,[{key:"clone",value:function(){var t=this.getScale();return new i({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getOpacity",value:function(){return this.opacity_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getDisplacement",value:function(){return this.displacement_}},{key:"getDeclutterMode",value:function(){return this.declutterMode_}},{key:"getAnchor",value:function(){return(0,t.abstract)()}},{key:"getImage",value:function(e){return(0,t.abstract)()}},{key:"getHitDetectionImage",value:function(){return(0,t.abstract)()}},{key:"getPixelRatio",value:function(t){return 1}},{key:"getImageState",value:function(){return(0,t.abstract)()}},{key:"getImageSize",value:function(){return(0,t.abstract)()}},{key:"getOrigin",value:function(){return(0,t.abstract)()}},{key:"getSize",value:function(){return(0,t.abstract)()}},{key:"setDisplacement",value:function(t){this.displacement_=t}},{key:"setOpacity",value:function(t){this.opacity_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=(0,e.toSize)(t)}},{key:"listenImageChange",value:function(e){(0,t.abstract)()}},{key:"load",value:function(){(0,t.abstract)()}},{key:"unlistenImageChange",value:function(e){(0,t.abstract)()}}]),i}(),l=c;exports.default=l;
},{"../util.js":"KA50","../size.js":"d9VJ"}],"nZyX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asColorLike=e;var r=require("./color.js");function e(e){return Array.isArray(e)?(0,r.toString)(e):e}
},{"./color.js":"XaHX"}],"iQYs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../ImageState.js")),e=s(require("./Image.js")),i=require("../color.js"),r=require("../colorlike.js"),n=require("../dom.js"),o=require("../render/canvas.js");function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function c(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t){var e=f(t,"string");return"symbol"===a(e)?e:String(e)}function f(t,e){if("object"!==a(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=p();return function(){var i,r=k(t);if(e){var n=k(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return _(this,i)}}function _(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(s){v(u,e.default);var a=y(u);function u(t){var e;l(this,u);var i=void 0!==t.rotateWithView&&t.rotateWithView;return(e=a.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})).canvas_=void 0,e.hitDetectionCanvas_=null,e.fill_=void 0!==t.fill?t.fill:null,e.origin_=[0,0],e.points_=t.points,e.radius_=void 0!==t.radius?t.radius:t.radius1,e.radius2_=t.radius2,e.angle_=void 0!==t.angle?t.angle:0,e.stroke_=void 0!==t.stroke?t.stroke:null,e.size_=null,e.renderOptions_=null,e.render(),e}return c(u,[{key:"clone",value:function(){var t=this.getScale(),e=new u({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}},{key:"getAnchor",value:function(){var t=this.size_;if(!t)return null;var e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}},{key:"getAngle",value:function(){return this.angle_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(t){this.fill_=t,this.render()}},{key:"getHitDetectionImage",value:function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}},{key:"getImage",value:function(t){var e=this.canvas_[t];if(!e){var i=this.renderOptions_,r=(0,n.createCanvasContext2D)(i.size*t,i.size*t);this.draw_(i,r,t),e=r.canvas,this.canvas_[t]=e}return e}},{key:"getPixelRatio",value:function(t){return t}},{key:"getImageSize",value:function(){return this.size_}},{key:"getImageState",value:function(){return t.default.LOADED}},{key:"getOrigin",value:function(){return this.origin_}},{key:"getPoints",value:function(){return this.points_}},{key:"getRadius",value:function(){return this.radius_}},{key:"getRadius2",value:function(){return this.radius2_}},{key:"getSize",value:function(){return this.size_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(t){this.stroke_=t,this.render()}},{key:"listenImageChange",value:function(t){}},{key:"load",value:function(){}},{key:"unlistenImageChange",value:function(t){}},{key:"calculateLineJoinSize_",value:function(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var r=this.radius_,n=void 0===this.radius2_?r:this.radius2_;if(r<n){var o=r;r=n,n=o}var s=void 0===this.radius2_?this.points_:2*this.points_,a=2*Math.PI/s,l=n*Math.sin(a),u=r-Math.sqrt(n*n-l*l),c=Math.sqrt(l*l+u*u),h=c/l;if("miter"===t&&h<=i)return h*e;var f=e/2/h,v=e/2*(u/c),d=Math.sqrt((r+f)*(r+f)+v*v)-r;if(void 0===this.radius2_||"bevel"===t)return 2*d;var y=r*Math.sin(a),_=n-Math.sqrt(r*r-y*y),g=Math.sqrt(y*y+_*_)/y;if(g<=i){var p=g*e/2-n-r;return 2*Math.max(d,p)}return 2*d}},{key:"createRenderOptions",value:function(){var t,e=o.defaultLineJoin,i=0,n=null,s=0,a=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=o.defaultStrokeStyle),t=(0,r.asColorLike)(t),void 0===(a=this.stroke_.getWidth())&&(a=o.defaultLineWidth),n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=o.defaultLineJoin),void 0===(i=this.stroke_.getMiterLimit())&&(i=o.defaultMiterLimit));var l=this.calculateLineJoinSize_(e,a,i),u=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:a,size:Math.ceil(2*u+l),lineDash:n,lineDashOffset:s,lineJoin:e,miterLimit:i}}},{key:"render",value:function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}},{key:"draw_",value:function(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var n=this.fill_.getColor();null===n&&(n=o.defaultFillStyle),e.fillStyle=(0,r.asColorLike)(n),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}},{key:"createHitDetectionCanvas_",value:function(t){if(this.fill_){var e=this.fill_.getColor(),r=0;if("string"==typeof e&&(e=(0,i.asArray)(e)),null===e?r=1:Array.isArray(e)&&(r=4===e.length?e[3]:1),0===r){var o=(0,n.createCanvasContext2D)(t.size,t.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(t,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}},{key:"createPath_",value:function(t){var e=this.points_,i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{var r=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var n=this.angle_-Math.PI/2,o=2*Math.PI/e,s=0;s<e;s++){var a=n+s*o,l=s%2==0?i:r;t.lineTo(l*Math.cos(a),l*Math.sin(a))}t.closePath()}}},{key:"drawHitDetectionCanvas_",value:function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=o.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}]),u}(),b=m;exports.default=b;
},{"../ImageState.js":"FoaO","./Image.js":"UXGG","../color.js":"XaHX","../colorlike.js":"nZyX","../dom.js":"FYLQ","../render/canvas.js":"RKIq"}],"D2sG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./RegularShape.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,u(o.key),o)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=c(t,"string");return"symbol"===r(e)?e:String(e)}function c(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=y();return function(){var r,o=d(t);if(e){var n=d(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return f(this,r)}}function f(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(e){l(n,t.default);var r=s(n);function n(t){return o(this,n),t=t||{radius:5},r.call(this,{points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}return i(n,[{key:"clone",value:function(){var t=this.getScale(),e=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}},{key:"setRadius",value:function(t){this.radius_=t,this.render()}}]),n}(),h=b;exports.default=h;
},{"./RegularShape.js":"iQYs"}],"sqJC":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function o(t,r){for(var o=0;o<r.length;o++){var e=r[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,n(e.key),e)}}function e(t,r,e){return r&&o(t.prototype,r),e&&o(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(r){var o=i(r,"string");return"symbol"===t(o)?o:String(o)}function i(r,o){if("object"!==t(r)||null===r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var n=e.call(r,o||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=function(){function t(o){r(this,t),o=o||{},this.color_=void 0!==o.color?o.color:null}return e(t,[{key:"clone",value:function(){var r=this.getColor();return new t({color:Array.isArray(r)?r.slice():r||void 0})}},{key:"getColor",value:function(){return this.color_}},{key:"setColor",value:function(t){this.color_=t}}]),t}(),l=u;exports.default=l;
},{}],"dz0b":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(t){var i=r(t,"string");return"symbol"===e(i)?i:String(i)}function r(t,i){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,i||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=function(){function e(i){t(this,e),i=i||{},this.color_=void 0!==i.color?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=void 0!==i.lineDash?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width}return n(e,[{key:"clone",value:function(){var t=this.getColor();return new e({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}},{key:"getColor",value:function(){return this.color_}},{key:"getLineCap",value:function(){return this.lineCap_}},{key:"getLineDash",value:function(){return this.lineDash_}},{key:"getLineDashOffset",value:function(){return this.lineDashOffset_}},{key:"getLineJoin",value:function(){return this.lineJoin_}},{key:"getMiterLimit",value:function(){return this.miterLimit_}},{key:"getWidth",value:function(){return this.width_}},{key:"setColor",value:function(e){this.color_=e}},{key:"setLineCap",value:function(e){this.lineCap_=e}},{key:"setLineDash",value:function(e){this.lineDash_=e}},{key:"setLineDashOffset",value:function(e){this.lineDashOffset_=e}},{key:"setLineJoin",value:function(e){this.lineJoin_=e}},{key:"setMiterLimit",value:function(e){this.miterLimit_=e}},{key:"setWidth",value:function(e){this.width_=e}}]),e}(),l=s;exports.default=l;
},{}],"JtXZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDefaultStyle=d,exports.createEditingStyle=h,exports.default=void 0,exports.toFunction=y;var e=i(require("./Circle.js")),t=i(require("./Fill.js")),n=i(require("./Stroke.js")),r=require("../asserts.js");function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=f(e,"string");return"symbol"===o(t)?t:String(t)}function f(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var a=function(){function e(t){u(this,e),t=t||{},this.geometry_=null,this.geometryFunction_=v,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}return s(e,[{key:"clone",value:function(){var t=this.getGeometry();return t&&"object"===o(t)&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"setRenderer",value:function(e){this.renderer_=e}},{key:"setHitDetectionRenderer",value:function(e){this.hitDetectionRenderer_=e}},{key:"getHitDetectionRenderer",value:function(){return this.hitDetectionRenderer_}},{key:"getGeometry",value:function(){return this.geometry_}},{key:"getGeometryFunction",value:function(){return this.geometryFunction_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(e){this.fill_=e}},{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(e){this.image_=e}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(e){this.stroke_=e}},{key:"getText",value:function(){return this.text_}},{key:"setText",value:function(e){this.text_=e}},{key:"getZIndex",value:function(){return this.zIndex_}},{key:"setGeometry",value:function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=v,this.geometry_=e}},{key:"setZIndex",value:function(e){this.zIndex_=e}}]),e}();function y(e){var t;if("function"==typeof e)t=e;else{var n;if(Array.isArray(e))n=e;else(0,r.assert)("function"==typeof e.getZIndex,41),n=[e];t=function(){return n}}return t}var g=null;function d(r,i){if(!g){var o=new t.default({color:"rgba(255,255,255,0.4)"}),u=new n.default({color:"#3399CC",width:1.25});g=[new a({image:new e.default({fill:o,stroke:u,radius:5}),fill:o,stroke:u})]}return g}function h(){var r={},i=[255,255,255,1],o=[0,153,255,1];return r.Polygon=[new a({fill:new t.default({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new a({stroke:new n.default({color:i,width:5})}),new a({stroke:new n.default({color:o,width:3})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new a({image:new e.default({radius:6,fill:new t.default({color:o}),stroke:new n.default({color:i,width:1.5})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function v(e){return e.getGeometry()}var m=a;exports.default=m;
},{"./Circle.js":"D2sG","./Fill.js":"sqJC","./Stroke.js":"dz0b","../asserts.js":"DVOE"}],"NvYl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./events/Target.js")),e=n(require("./events/EventType.js")),r=require("./util.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function c(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=a(t,"string");return"symbol"===o(e)?e:String(e)}function a(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(n){l(i,t.default);var o=y(i);function i(t,e,r,n){var c;return u(this,i),(c=o.call(this)).extent=t,c.pixelRatio_=r,c.resolution=e,c.state=n,c}return c(i,[{key:"changed",value:function(){this.dispatchEvent(e.default.CHANGE)}},{key:"getExtent",value:function(){return this.extent}},{key:"getImage",value:function(){return(0,r.abstract)()}},{key:"getPixelRatio",value:function(){return this.pixelRatio_}},{key:"getResolution",value:function(){return this.resolution}},{key:"getState",value:function(){return this.state}},{key:"load",value:function(){(0,r.abstract)()}}]),i}(),m=h;exports.default=m;
},{"./events/Target.js":"KnPA","./events/EventType.js":"GUXn","./util.js":"KA50"}],"yR82":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.listenImage=O;var t=u(require("./events/EventType.js")),e=u(require("./ImageBase.js")),n=u(require("./ImageState.js")),i=require("./has.js"),r=require("./extent.js"),o=require("./events.js");function u(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,l(i.key),i)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=h(t,"string");return"symbol"===a(e)?e:String(e)}function h(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function g(t){var e=_();return function(){var n,i=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){d(o,e.default);var i=g(o);function o(t,e,r,u,a,c,f){var l;return s(this,o),(l=i.call(this,t,e,r,n.default.IDLE)).src_=u,l.image_=new Image,null!==a&&(l.image_.crossOrigin=a),l.context_=f,l.unlisten_=null,l.state=n.default.IDLE,l.imageLoadFunction_=c,l}return f(o,[{key:"getImage",value:function(){if(this.state==n.default.LOADED&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){var t=this.context_.canvas;t.width=this.image_.width,t.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}},{key:"handleImageError_",value:function(){this.state=n.default.ERROR,this.unlistenImage_(),this.changed()}},{key:"handleImageLoad_",value:function(){void 0===this.resolution&&(this.resolution=(0,r.getHeight)(this.extent)/this.image_.height),this.state=n.default.LOADED,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){this.state!=n.default.IDLE&&this.state!=n.default.ERROR||(this.state=n.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=O(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}},{key:"setImage",value:function(t){this.image_=t,this.resolution=(0,r.getHeight)(this.extent)/this.image_.height}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),o}();function O(e,n,r){var u=e,a=!0,s=!1,c=!1,f=[(0,o.listenOnce)(u,t.default.LOAD,function(){c=!0,s||n()})];return u.src&&i.IMAGE_DECODE?(s=!0,u.decode().then(function(){a&&n()}).catch(function(t){a&&(c?n():r())})):f.push((0,o.listenOnce)(u,t.default.ERROR,r)),function(){a=!1,f.forEach(o.unlistenByKey)}}var E=b;exports.default=E;
},{"./events/EventType.js":"GUXn","./ImageBase.js":"NvYl","./ImageState.js":"FoaO","./has.js":"mpkP","./extent.js":"L0Vw","./events.js":"MGag"}],"rGfC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.get=w;var t=s(require("../events/Target.js")),e=s(require("../events/EventType.js")),i=s(require("../ImageState.js")),n=require("../color.js"),r=require("../dom.js"),a=require("./IconImageCache.js"),o=require("../Image.js");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function h(t,e,i){return e&&l(t.prototype,e),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=_(t,"string");return"symbol"===u(e)?e:String(e)}function _(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=p();return function(){var i,n=b(t);if(e){var r=b(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return y(this,i)}}function y(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var I=null,O=function(a){g(u,t.default);var s=d(u);function u(t,e,i,n,r,a){var o;return c(this,u),(o=s.call(this)).hitDetectionImage_=null,o.image_=t,o.crossOrigin_=n,o.canvas_={},o.color_=a,o.unlisten_=null,o.imageState_=r,o.size_=i,o.src_=e,o.tainted_,o}return h(u,[{key:"initializeImage_",value:function(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}},{key:"isTainted_",value:function(){if(void 0===this.tainted_&&this.imageState_===i.default.LOADED){I||(I=(0,r.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})),I.drawImage(this.image_,0,0);try{I.getImageData(0,0,1,1),this.tainted_=!1}catch(t){I=null,this.tainted_=!0}}return!0===this.tainted_}},{key:"dispatchChangeEvent_",value:function(){this.dispatchEvent(e.default.CHANGE)}},{key:"handleImageError_",value:function(){this.imageState_=i.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}},{key:"handleImageLoad_",value:function(){this.imageState_=i.default.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}},{key:"getImage",value:function(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}},{key:"getPixelRatio",value:function(t){return this.replaceColor_(t),this.canvas_[t]?t:1}},{key:"getImageState",value:function(){return this.imageState_}},{key:"getHitDetectionImage",value:function(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],i=(0,r.createCanvasContext2D)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}},{key:"getSize",value:function(){return this.size_}},{key:"getSrc",value:function(){return this.src_}},{key:"load",value:function(){if(this.imageState_===i.default.IDLE){this.image_||this.initializeImage_(),this.imageState_=i.default.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,o.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}},{key:"replaceColor_",value:function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===i.default.LOADED){var e=this.image_,r=document.createElement("canvas");r.width=Math.ceil(e.width*t),r.height=Math.ceil(e.height*t);var a=r.getContext("2d");a.scale(t,t),a.drawImage(e,0,0),a.globalCompositeOperation="multiply",a.fillStyle=(0,n.asString)(this.color_),a.fillRect(0,0,r.width/t,r.height/t),a.globalCompositeOperation="destination-in",a.drawImage(e,0,0),this.canvas_[t]=r}}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),u}();function w(t,e,i,n,r,o){var s=a.shared.get(e,n,o);return s||(s=new O(t,e,i,n,r,o),a.shared.set(e,n,o,s)),s}var S=O;exports.default=S;
},{"../events/Target.js":"KnPA","../events/EventType.js":"GUXn","../ImageState.js":"FoaO","../color.js":"XaHX","../dom.js":"FYLQ","./IconImageCache.js":"V9TC","../Image.js":"yR82"}],"lB4R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("../events/EventType.js")),e=c(require("../ImageState.js")),i=c(require("./Image.js")),r=require("../color.js"),n=require("../asserts.js"),o=require("./IconImage.js"),a=require("../util.js");function c(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return v(t)||g(t,e)||f(t,e)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){if(t){if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function g(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,o,a,c=[],s=!0,l=!1;try{if(o=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;s=!1}else for(;!(s=(r=o.call(i)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(u){l=!0,n=u}finally{try{if(!s&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(l)throw n}}return c}}function v(t){if(Array.isArray(t))return t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function y(t,e,i){return e&&_(t.prototype,e),i&&_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=p(t,"string");return"symbol"===s(e)?e:String(e)}function p(t,e){if("object"!==s(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function O(){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=b(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(arguments.length<3?t:i):n.value}}).apply(this,arguments)}function b(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}function I(t,e){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function z(t){var e=A();return function(){var i,r=k(t);if(e){var n=k(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return w(this,i)}}function w(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e,i,r){return void 0!==i&&void 0!==r?[i/t,r/e]:void 0!==i?i/t:void 0!==r?r/e:1}var P=function(c){S(u,i.default);var s=z(u);function u(t){var i;d(this,u);var c=void 0!==(t=t||{}).opacity?t.opacity:1,f=void 0!==t.rotation?t.rotation:0,h=void 0!==t.scale?t.scale:1,g=void 0!==t.rotateWithView&&t.rotateWithView;(i=s.call(this,{opacity:c,rotation:f,scale:h,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:g,declutterMode:t.declutterMode})).anchor_=void 0!==t.anchor?t.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",i.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",i.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",i.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;var v=void 0!==t.img?t.img:null;i.imgSize_=t.imgSize;var _=t.src;(0,n.assert)(!(void 0!==_&&v),4),(0,n.assert)(!v||v&&i.imgSize_,5),void 0!==_&&0!==_.length||!v||(_=v.src||(0,a.getUid)(v)),(0,n.assert)(void 0!==_&&_.length>0,6),(0,n.assert)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),69);var y=void 0!==t.src?e.default.IDLE:e.default.LOADED;if(i.color_=void 0!==t.color?(0,r.asArray)(t.color):null,i.iconImage_=(0,o.get)(v,_,void 0!==i.imgSize_?i.imgSize_:null,i.crossOrigin_,y,i.color_),i.offset_=void 0!==t.offset?t.offset:[0,0],i.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",i.origin_=null,i.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){var m,p;if(t.size){var O=l(t.size,2);m=O[0],p=O[1]}else{var b=i.getImage(1);if(!(b instanceof HTMLCanvasElement||b.src&&b.complete)){i.initialOptions_=t;return i.listenImageChange(function e(){if(i.unlistenImageChange(e),i.initialOptions_){var r=i.iconImage_.getSize();i.setScale(E(r[0],r[1],t.width,t.height))}}),w(i)}m=b.width,p=b.height}void 0!==m&&i.setScale(E(m,p,t.width,t.height))}return i}return y(u,[{key:"clone",value:function(){var t,e,i;this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t);var r=new u({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r}},{key:"getAnchor",value:function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}var i=this.getDisplacement(),r=this.getScaleArray();return[t[0]-i[0]/r[0],t[1]+i[1]/r[1]]}},{key:"setAnchor",value:function(t){this.anchor_=t,this.normalizedAnchor_=null}},{key:"getColor",value:function(){return this.color_}},{key:"getImage",value:function(t){return this.iconImage_.getImage(t)}},{key:"getPixelRatio",value:function(t){return this.iconImage_.getPixelRatio(t)}},{key:"getImageSize",value:function(){return this.iconImage_.getSize()}},{key:"getImageState",value:function(){return this.iconImage_.getImageState()}},{key:"getHitDetectionImage",value:function(){return this.iconImage_.getHitDetectionImage()}},{key:"getOrigin",value:function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}},{key:"getSrc",value:function(){return this.iconImage_.getSrc()}},{key:"getSize",value:function(){return this.size_?this.size_:this.iconImage_.getSize()}},{key:"getWidth",value:function(){var t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==e.default.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}},{key:"getHeight",value:function(){var t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==e.default.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}},{key:"setScale",value:function(t){delete this.initialOptions_,O(k(u.prototype),"setScale",this).call(this,t)}},{key:"listenImageChange",value:function(e){this.iconImage_.addEventListener(t.default.CHANGE,e)}},{key:"load",value:function(){this.iconImage_.load()}},{key:"unlistenImageChange",value:function(e){this.iconImage_.removeEventListener(t.default.CHANGE,e)}}]),u}(),U=P;exports.default=U;
},{"../events/EventType.js":"GUXn","../ImageState.js":"FoaO","./Image.js":"UXGG","../color.js":"XaHX","../asserts.js":"DVOE","./IconImage.js":"rGfC","../util.js":"KA50"}],"kcKm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Fill.js")),e=require("../size.js");function i(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function l(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=s(t,"string");return"symbol"===n(e)?e:String(e)}function s(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var a="#333",f=function(){function i(n){o(this,i),n=n||{},this.font_=n.font,this.rotation_=n.rotation,this.rotateWithView_=n.rotateWithView,this.scale_=n.scale,this.scaleArray_=(0,e.toSize)(void 0!==n.scale?n.scale:1),this.text_=n.text,this.textAlign_=n.textAlign,this.justify_=n.justify,this.repeat_=n.repeat,this.textBaseline_=n.textBaseline,this.fill_=void 0!==n.fill?n.fill:new t.default({color:a}),this.maxAngle_=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.placement_=void 0!==n.placement?n.placement:"point",this.overflow_=!!n.overflow,this.stroke_=void 0!==n.stroke?n.stroke:null,this.offsetX_=void 0!==n.offsetX?n.offsetX:0,this.offsetY_=void 0!==n.offsetY?n.offsetY:0,this.backgroundFill_=n.backgroundFill?n.backgroundFill:null,this.backgroundStroke_=n.backgroundStroke?n.backgroundStroke:null,this.padding_=void 0===n.padding?null:n.padding}return l(i,[{key:"clone",value:function(){var t=this.getScale();return new i({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}},{key:"getOverflow",value:function(){return this.overflow_}},{key:"getFont",value:function(){return this.font_}},{key:"getMaxAngle",value:function(){return this.maxAngle_}},{key:"getPlacement",value:function(){return this.placement_}},{key:"getRepeat",value:function(){return this.repeat_}},{key:"getOffsetX",value:function(){return this.offsetX_}},{key:"getOffsetY",value:function(){return this.offsetY_}},{key:"getFill",value:function(){return this.fill_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getText",value:function(){return this.text_}},{key:"getTextAlign",value:function(){return this.textAlign_}},{key:"getJustify",value:function(){return this.justify_}},{key:"getTextBaseline",value:function(){return this.textBaseline_}},{key:"getBackgroundFill",value:function(){return this.backgroundFill_}},{key:"getBackgroundStroke",value:function(){return this.backgroundStroke_}},{key:"getPadding",value:function(){return this.padding_}},{key:"setOverflow",value:function(t){this.overflow_=t}},{key:"setFont",value:function(t){this.font_=t}},{key:"setMaxAngle",value:function(t){this.maxAngle_=t}},{key:"setOffsetX",value:function(t){this.offsetX_=t}},{key:"setOffsetY",value:function(t){this.offsetY_=t}},{key:"setPlacement",value:function(t){this.placement_=t}},{key:"setRepeat",value:function(t){this.repeat_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setFill",value:function(t){this.fill_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t,this.scaleArray_=(0,e.toSize)(void 0!==t?t:1)}},{key:"setStroke",value:function(t){this.stroke_=t}},{key:"setText",value:function(t){this.text_=t}},{key:"setTextAlign",value:function(t){this.textAlign_=t}},{key:"setJustify",value:function(t){this.justify_=t}},{key:"setTextBaseline",value:function(t){this.textBaseline_=t}},{key:"setBackgroundFill",value:function(t){this.backgroundFill_=t}},{key:"setBackgroundStroke",value:function(t){this.backgroundStroke_=t}},{key:"setPadding",value:function(t){this.padding_=t}}]),i}(),c=f;exports.default=c;
},{"./Fill.js":"sqJC","../size.js":"d9VJ"}],"Xf8O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toStyle=s;var e=c(require("../style/Circle.js")),t=c(require("./Fill.js")),i=c(require("./Icon.js")),r=c(require("./RegularShape.js")),o=c(require("./Stroke.js")),n=c(require("./Style.js")),a=c(require("./Text.js"));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return new n.default({fill:l(e,""),stroke:u(e,""),text:d(e),image:f(e)})}function l(e,i){var r=e[i+"fill-color"];if(r)return new t.default({color:r})}function u(e,t){var i=e[t+"stroke-width"],r=e[t+"stroke-color"];if(i||r)return new o.default({width:i,color:r,lineCap:e[t+"stroke-line-cap"],lineJoin:e[t+"stroke-line-join"],lineDash:e[t+"stroke-line-dash"],lineDashOffset:e[t+"stroke-line-dash-offset"],miterLimit:e[t+"stroke-miter-limit"]})}function d(e){var t=e["text-value"];if(t)return new a.default({text:t,font:e["text-font"],maxAngle:e["text-max-angle"],offsetX:e["text-offset-x"],offsetY:e["text-offset-y"],overflow:e["text-overflow"],placement:e["text-placement"],repeat:e["text-repeat"],scale:e["text-scale"],rotateWithView:e["text-rotate-with-view"],rotation:e["text-rotation"],textAlign:e["text-align"],justify:e["text-justify"],textBaseline:e["text-baseline"],padding:e["text-padding"],fill:l(e,"text-"),backgroundFill:l(e,"text-background-"),stroke:u(e,"text-"),backgroundStroke:u(e,"text-background-")})}function f(t){var o=t["icon-src"],n=t["icon-img"];if(o||n)return new i.default({src:o,img:n,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],width:t["icon-width"],height:t["icon-height"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]});var a=t["shape-points"];if(a){return new r.default({points:a,fill:l(t,"shape-"),stroke:u(t,"shape-"),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}var c=t["circle-radius"];if(c){return new e.default({radius:c,fill:l(t,"circle-"),stroke:u(t,"circle-"),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}
},{"../style/Circle.js":"D2sG","./Fill.js":"sqJC","./Icon.js":"lB4R","./RegularShape.js":"iQYs","./Stroke.js":"dz0b","./Style.js":"JtXZ","./Text.js":"kcKm"}],"sJYl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./Layer.js")),t=o(require("rbush")),r=i(require("../style/Style.js")),n=require("../style/flat.js");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function a(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=y(e,"string");return"symbol"===l(t)?t:String(t)}function y(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=d(e,t);if(n){var u=Object.getOwnPropertyDescriptor(n,t);return u.get?u.get.call(arguments.length<3?e:r):u.value}}).apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=_();return function(){var r,n=j(e);if(t){var u=j(this).constructor;r=Reflect.construct(n,arguments,u)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m={RENDER_ORDER:"renderOrder"},R=function(u){v(o,e.default);var i=b(o);function o(e){var t;f(this,o),e=e||{};var r=Object.assign({},e);return delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,(t=i.call(this,r)).declutter_=void 0!==e.declutter&&e.declutter,t.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,t.style_=null,t.styleFunction_=void 0,t.setStyle(e.style),t.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,t.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,t}return a(o,[{key:"getDeclutter",value:function(){return this.declutter_}},{key:"getFeatures",value:function(e){return p(j(o.prototype),"getFeatures",this).call(this,e)}},{key:"getRenderBuffer",value:function(){return this.renderBuffer_}},{key:"getRenderOrder",value:function(){return this.get(m.RENDER_ORDER)}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"getUpdateWhileAnimating",value:function(){return this.updateWhileAnimating_}},{key:"getUpdateWhileInteracting",value:function(){return this.updateWhileInteracting_}},{key:"renderDeclutter",value:function(e){e.declutterTree||(e.declutterTree=new t.default(9)),this.getRenderer().renderDeclutter(e)}},{key:"setRenderOrder",value:function(e){this.set(m.RENDER_ORDER,e)}},{key:"setStyle",value:function(e){var t;if(void 0===e)t=r.createDefaultStyle;else if(null===e)t=null;else if("function"==typeof e)t=e;else if(e instanceof r.default)t=e;else if(Array.isArray(e)){for(var u=e.length,i=new Array(u),o=0;o<u;++o){var l=e[o];l instanceof r.default?i[o]=l:i[o]=(0,n.toStyle)(l)}t=i}else t=(0,n.toStyle)(e);this.style_=t,this.styleFunction_=null===e?void 0:(0,r.toFunction)(this.style_),this.changed()}}]),o}(),w=R;exports.default=w;
},{"./Layer.js":"Ee0U","rbush":"CzwG","../style/Style.js":"JtXZ","../style/flat.js":"Xf8O"}],"HInR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.strokeInstruction=exports.fillInstruction=exports.default=exports.closePathInstruction=exports.beginPathInstruction=void 0;var t={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},r=[t.FILL];exports.fillInstruction=r;var e=[t.STROKE];exports.strokeInstruction=e;var o=[t.BEGIN_PATH];exports.beginPathInstruction=o;var s=[t.CLOSE_PATH];exports.closePathInstruction=s;var E=t;exports.default=E;
},{}],"JM2S":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(t){var n=u(t,"string");return"symbol"===e(n)?n:String(n)}function u(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=function(){function e(){t(this,e)}return o(e,[{key:"drawCustom",value:function(e,t,n,o){}},{key:"drawGeometry",value:function(e){}},{key:"setStyle",value:function(e){}},{key:"drawCircle",value:function(e,t){}},{key:"drawFeature",value:function(e,t){}},{key:"drawGeometryCollection",value:function(e,t){}},{key:"drawLineString",value:function(e,t){}},{key:"drawMultiLineString",value:function(e,t){}},{key:"drawMultiPoint",value:function(e,t){}},{key:"drawMultiPolygon",value:function(e,t){}},{key:"drawPoint",value:function(e,t){}},{key:"drawPolygon",value:function(e,t){}},{key:"drawText",value:function(e,t){}},{key:"setFillStrokeStyle",value:function(e,t){}},{key:"setImageStyle",value:function(e,t){}},{key:"setTextStyle",value:function(e,t){}}]),e}(),l=i;exports.default=l;
},{}],"Dn5Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("./Instruction.js")),e=u(require("../../extent/Relationship.js")),i=u(require("../VectorContext.js")),n=require("../../colorlike.js"),r=require("../../extent.js"),o=require("../canvas.js"),s=require("../../array.js"),a=require("../../geom/flat/inflate.js");function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function h(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){var e=p(t,"string");return"symbol"===l(e)?e:String(e)}function p(t,e){if("object"!==l(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=C();return function(){var i,n=S(t);if(e){var r=S(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return g(this,i)}}function g(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var L=function(u){y(f,i.default);var l=b(f);function f(t,e,i,n){var r;return c(this,f),(r=l.call(this)).tolerance=t,r.maxExtent=e,r.pixelRatio=n,r.maxLineWidth=0,r.resolution=i,r.beginGeometryInstruction1_=null,r.beginGeometryInstruction2_=null,r.bufferedMaxExtent_=null,r.instructions=[],r.coordinates=[],r.tmpCoordinate_=[],r.hitDetectionInstructions=[],r.state={},r}return h(f,[{key:"applyPixelRatio",value:function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}},{key:"appendFlatPointCoordinates",value:function(t,e){for(var i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,o=this.coordinates,s=o.length,a=0,u=t.length;a<u;a+=e)n[0]=t[a],n[1]=t[a+1],(0,r.containsCoordinate)(i,n)&&(o[s++]=n[0],o[s++]=n[1]);return s}},{key:"appendFlatLineCoordinates",value:function(t,i,n,o,s,a){var u=this.coordinates,l=u.length,c=this.getBufferedMaxExtent();a&&(i+=o);var f,h,d,p=t[i],y=t[i+1],v=this.tmpCoordinate_,b=!0;for(f=i+o;f<n;f+=o)v[0]=t[f],v[1]=t[f+1],(d=(0,r.coordinateRelationship)(c,v))!==h?(b&&(u[l++]=p,u[l++]=y,b=!1),u[l++]=v[0],u[l++]=v[1]):d===e.default.INTERSECTING?(u[l++]=v[0],u[l++]=v[1],b=!1):b=!0,p=v[0],y=v[1],h=d;return(s&&b||f===i+o)&&(u[l++]=p,u[l++]=y),l}},{key:"drawCustomCoordinates_",value:function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],u=this.appendFlatLineCoordinates(t,e,a,n,!1,!1);r.push(u),e=a}return e}},{key:"drawCustom",value:function(e,i,n,r){this.beginGeometry(e,i);var o,s,u,l,c,f=e.getType(),h=e.getStride(),d=this.coordinates.length;switch(f){case"MultiPolygon":o=e.getOrientedFlatCoordinates(),l=[];var p=e.getEndss();c=0;for(var y=0,v=p.length;y<v;++y){var b=[];c=this.drawCustomCoordinates_(o,c,p[y],h,b),l.push(b)}this.instructions.push([t.default.CUSTOM,d,l,e,n,a.inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,l,e,r||n,a.inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":u=[],o="Polygon"==f?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),c=this.drawCustomCoordinates_(o,0,e.getEnds(),h,u),this.instructions.push([t.default.CUSTOM,d,u,e,n,a.inflateCoordinatesArray]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,u,e,r||n,a.inflateCoordinatesArray]);break;case"LineString":case"Circle":o=e.getFlatCoordinates(),s=this.appendFlatLineCoordinates(o,0,o.length,h,!1,!1),this.instructions.push([t.default.CUSTOM,d,s,e,n,a.inflateCoordinates]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,s,e,r||n,a.inflateCoordinates]);break;case"MultiPoint":o=e.getFlatCoordinates(),(s=this.appendFlatPointCoordinates(o,h))>d&&(this.instructions.push([t.default.CUSTOM,d,s,e,n,a.inflateCoordinates]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,s,e,r||n,a.inflateCoordinates]));break;case"Point":o=e.getFlatCoordinates(),this.coordinates.push(o[0],o[1]),s=this.coordinates.length,this.instructions.push([t.default.CUSTOM,d,s,e,n]),this.hitDetectionInstructions.push([t.default.CUSTOM,d,s,e,r||n])}this.endGeometry(i)}},{key:"beginGeometry",value:function(e,i){this.beginGeometryInstruction1_=[t.default.BEGIN_GEOMETRY,i,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[t.default.BEGIN_GEOMETRY,i,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}},{key:"finish",value:function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}},{key:"reverseHitDetectionInstructions",value:function(){var e,i=this.hitDetectionInstructions;i.reverse();var n,r,o=i.length,a=-1;for(e=0;e<o;++e)(r=(n=i[e])[0])==t.default.END_GEOMETRY?a=e:r==t.default.BEGIN_GEOMETRY&&(n[2]=e,(0,s.reverseSubArray)(this.hitDetectionInstructions,a,e),a=-1)}},{key:"setFillStrokeStyle",value:function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=(0,n.asColorLike)(r||o.defaultFillStyle)}else i.fillStyle=void 0;if(e){var s=e.getColor();i.strokeStyle=(0,n.asColorLike)(s||o.defaultStrokeStyle);var a=e.getLineCap();i.lineCap=void 0!==a?a:o.defaultLineCap;var u=e.getLineDash();i.lineDash=u?u.slice():o.defaultLineDash;var l=e.getLineDashOffset();i.lineDashOffset=l||o.defaultLineDashOffset;var c=e.getLineJoin();i.lineJoin=void 0!==c?c:o.defaultLineJoin;var f=e.getWidth();i.lineWidth=void 0!==f?f:o.defaultLineWidth;var h=e.getMiterLimit();i.miterLimit=void 0!==h?h:o.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}},{key:"createFill",value:function(e){var i=e.fillStyle,n=[t.default.SET_FILL_STYLE,i];return"string"!=typeof i&&n.push(!0),n}},{key:"applyStroke",value:function(t){this.instructions.push(this.createStroke(t))}},{key:"createStroke",value:function(e){return[t.default.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}},{key:"updateFillStyle",value:function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}},{key:"updateStrokeStyle",value:function(t,e){var i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,u=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!(0,s.equals)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=u||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=u,t.currentMiterLimit=l)}},{key:"endGeometry",value:function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[t.default.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)}},{key:"getBufferedMaxExtent",value:function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,r.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,r.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}]),f}(),_=L;exports.default=_;
},{"./Instruction.js":"HInR","../../extent/Relationship.js":"kQlD","../VectorContext.js":"JM2S","../../colorlike.js":"nZyX","../../extent.js":"L0Vw","../canvas.js":"RKIq","../../array.js":"o0G8","../../geom/flat/inflate.js":"HSYb"}],"qp04":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Builder.js")),i=e(require("./Instruction.js"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function h(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var i=s(t,"string");return"symbol"===o(i)?i:String(i)}function s(t,i){if("object"!==o(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,i||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}function c(){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,i,e){var o=l(t,i);if(o){var r=Object.getOwnPropertyDescriptor(o,i);return r.get?r.get.call(arguments.length<3?t:e):r.value}}).apply(this,arguments)}function l(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=y(t)););return t}function u(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&_(t,i)}function _(t,i){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}function f(t){var i=p();return function(){var e,o=y(t);if(i){var r=y(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return d(this,e)}}function d(t,i){if(i&&("object"===o(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(e){u(n,t.default);var o=f(n);function n(t,i,e,h){var a;return r(this,n),(a=o.call(this,t,i,e,h)).hitDetectionImage_=null,a.image_=null,a.imagePixelRatio_=void 0,a.anchorX_=void 0,a.anchorY_=void 0,a.height_=void 0,a.opacity_=void 0,a.originX_=void 0,a.originY_=void 0,a.rotateWithView_=void 0,a.rotation_=void 0,a.scale_=void 0,a.width_=void 0,a.declutterMode_=void 0,a.declutterImageWithText_=void 0,a}return h(n,[{key:"drawPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var o=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,h=this.appendFlatPointCoordinates(o,r);this.instructions.push([i.default.DRAW_IMAGE,n,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,n,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"drawMultiPoint",value:function(t,e){if(this.image_){this.beginGeometry(t,e);var o=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,h=this.appendFlatPointCoordinates(o,r);this.instructions.push([i.default.DRAW_IMAGE,n,h,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.default.DRAW_IMAGE,n,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}}},{key:"finish",value:function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,c(y(n.prototype),"finish",this).call(this)}},{key:"setImageStyle",value:function(t,i){var e=t.getAnchor(),o=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}}]),n}(),v=m;exports.default=v;
},{"./Builder.js":"Dn5Z","./Instruction.js":"HInR"}],"iuft":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Builder.js")),e=i(require("./Instruction.js")),r=require("../canvas.js");function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function i(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var s=o?Object.getOwnPropertyDescriptor(t,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=t[u]}return i.default=t,r&&r.set(t,i),i}function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function l(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===u(e)?e:String(e)}function f(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=h(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=S();return function(){var r,n=O(t);if(e){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(n){y(o,t.default);var i=b(o);function o(t,e,r,n){return s(this,o),i.call(this,t,e,r,n)}return l(o,[{key:"drawFlatCoordinates_",value:function(t,r,n,i){var o=this.coordinates.length,u=this.appendFlatLineCoordinates(t,r,n,i,!1,!1),s=[e.default.MOVE_TO_LINE_TO,o,u];return this.instructions.push(s),this.hitDetectionInstructions.push(s),n}},{key:"drawLineString",value:function(t,n){var i=this.state,o=i.strokeStyle,u=i.lineWidth;if(void 0!==o&&void 0!==u){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,r.defaultLineDash,r.defaultLineDashOffset],e.beginPathInstruction);var s=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(s,0,s.length,a),this.hitDetectionInstructions.push(e.strokeInstruction),this.endGeometry(n)}}},{key:"drawMultiLineString",value:function(t,r){var n=this.state,i=n.strokeStyle,o=n.lineWidth;if(void 0!==i&&void 0!==o){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,r),this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],e.beginPathInstruction);for(var u=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),l=0,c=0,f=u.length;c<f;++c)l=this.drawFlatCoordinates_(s,l,u[c],a);this.hitDetectionInstructions.push(e.strokeInstruction),this.endGeometry(r)}}},{key:"finish",value:function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(e.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,p(O(o.prototype),"finish",this).call(this)}},{key:"applyStroke",value:function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(e.strokeInstruction),t.lastStroke=this.coordinates.length),t.lastStroke=0,p(O(o.prototype),"applyStroke",this).call(this,t),this.instructions.push(e.beginPathInstruction)}}]),o}(),m=k;exports.default=m;
},{"./Builder.js":"Dn5Z","./Instruction.js":"HInR","../canvas.js":"RKIq"}],"dU9F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./Builder.js")),e=o(require("./Instruction.js")),i=require("../canvas.js"),n=require("../../geom/flat/simplify.js");function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(r=function(t){return t?i:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=r(e);if(i&&i.has(t))return i.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var l=o?Object.getOwnPropertyDescriptor(t,s):null;l&&(l.get||l.set)?Object.defineProperty(n,s,l):n[s]=t[s]}return n.default=t,i&&i.set(t,n),n}function s(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function a(t,e,i){return e&&c(t.prototype,e),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=h(t,"string");return"symbol"===l(e)?e:String(e)}function h(t,e){if("object"!==l(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=y(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}}).apply(this,arguments)}function y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=O();return function(){var i,n=_(t);if(e){var r=_(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return b(this,i)}}function b(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var I=function(r){d(s,t.default);var o=S(s);function s(t,e,i,n){return u(this,s),o.call(this,t,e,i,n)}return a(s,[{key:"drawFlatCoordinatess_",value:function(t,i,n,r){var o=this.state,s=void 0!==o.fillStyle,l=void 0!==o.strokeStyle,u=n.length;this.instructions.push(e.beginPathInstruction),this.hitDetectionInstructions.push(e.beginPathInstruction);for(var c=0;c<u;++c){var a=n[c],f=this.coordinates.length,h=this.appendFlatLineCoordinates(t,i,a,r,!0,!l),p=[e.default.MOVE_TO_LINE_TO,f,h];this.instructions.push(p),this.hitDetectionInstructions.push(p),l&&(this.instructions.push(e.closePathInstruction),this.hitDetectionInstructions.push(e.closePathInstruction)),i=a}return s&&(this.instructions.push(e.fillInstruction),this.hitDetectionInstructions.push(e.fillInstruction)),l&&(this.instructions.push(e.strokeInstruction),this.hitDetectionInstructions.push(e.strokeInstruction)),i}},{key:"drawCircle",value:function(t,n){var r=this.state,o=r.fillStyle,s=r.strokeStyle;if(void 0!==o||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var l=t.getFlatCoordinates(),u=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,u,!1,!1);var a=[e.default.CIRCLE,c];this.instructions.push(e.beginPathInstruction,a),this.hitDetectionInstructions.push(e.beginPathInstruction,a),void 0!==r.fillStyle&&(this.instructions.push(e.fillInstruction),this.hitDetectionInstructions.push(e.fillInstruction)),void 0!==r.strokeStyle&&(this.instructions.push(e.strokeInstruction),this.hitDetectionInstructions.push(e.strokeInstruction)),this.endGeometry(n)}}},{key:"drawPolygon",value:function(t,n){var r=this.state,o=r.fillStyle,s=r.strokeStyle;if(void 0!==o||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var l=t.getEnds(),u=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(u,0,l,c),this.endGeometry(n)}}},{key:"drawMultiPolygon",value:function(t,n){var r=this.state,o=r.fillStyle,s=r.strokeStyle;if(void 0!==o||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([e.default.SET_FILL_STYLE,i.defaultFillStyle]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([e.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var l=t.getEndss(),u=t.getOrientedFlatCoordinates(),c=t.getStride(),a=0,f=0,h=l.length;f<h;++f)a=this.drawFlatCoordinatess_(u,a,l[f],c);this.endGeometry(n)}}},{key:"finish",value:function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,r=e.length;i<r;++i)e[i]=(0,n.snap)(e[i],t);return p(_(s.prototype),"finish",this).call(this)}},{key:"setFillStrokeStyles_",value:function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}]),s}(),m=I;exports.default=m;
},{"./Builder.js":"Dn5Z","./Instruction.js":"HInR","../canvas.js":"RKIq","../../geom/flat/simplify.js":"wmMI"}],"zEnG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineChunk=a;var r=require("../../math.js");function e(r,e){return o(r)||u(r,e)||n(r,e)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(r,e){if(r){if("string"==typeof r)return l(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(r,e):void 0}}function l(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function u(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,l,u,o,a=[],i=!0,s=!1;try{if(u=(t=t.call(r)).next,0===e){if(Object(t)!==t)return;i=!1}else for(;!(i=(n=u.call(t)).done)&&(a.push(n.value),a.length!==e);i=!0);}catch(c){s=!0,l=c}finally{try{if(!i&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(s)throw l}}return a}}function o(r){if(Array.isArray(r))return r}function a(t,n,l,u,o){for(var a=[],i=l,s=0,c=n.slice(l,2);s<t&&i+o<u;){var f=e(c.slice(-2),2),p=f[0],h=f[1],y=n[i+o],v=n[i+o+1],b=Math.sqrt((y-p)*(y-p)+(v-h)*(v-h));if((s+=b)>=t){var d=(t-s+b)/b,m=(0,r.lerp)(p,y,d),j=(0,r.lerp)(h,v,d);c.push(m,j),a.push(c),c=[m,j],s==t&&(i+=o),s=0}else if(s<t)c.push(n[i+o],n[i+o+1]),i+=o;else{var g=b-s,A=(0,r.lerp)(p,y,g/b),O=(0,r.lerp)(h,v,g/b);c.push(A,O),a.push(c),c=[A,O],s=0,i+=o}}return s>0&&a.push(c),a}
},{"../../math.js":"qAK2"}],"di12":[function(require,module,exports) {
"use strict";function t(t,e,r,o,a){var s,i,n,u,c,v,d,h,f,p=r,M=r,l=0,x=0,_=r;for(s=r;s<o;s+=a){var b=e[s],g=e[s+1];void 0!==u&&(h=b-u,f=g-c,n=Math.sqrt(h*h+f*f),void 0!==v&&(x+=i,Math.acos((v*h+d*f)/(i*n))>t&&(x>l&&(l=x,p=_,M=s),x=0,_=s-a)),i=n,v=h,d=f),u=b,c=g}return(x+=n)>l?[_,s]:[p,M]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchingChunk=t;
},{}],"v5GW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TEXT_ALIGN=void 0;var t=a(require("./Builder.js")),e=a(require("./Instruction.js")),i=require("../../colorlike.js"),r=require("../canvas.js"),n=require("../../util.js"),l=require("../../extent.js"),o=require("../../geom/flat/linechunk.js"),s=require("../../geom/flat/straightchunk.js");function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function c(t,e,i){return e&&h(t.prototype,e),i&&h(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t){var e=d(t,"string");return"symbol"===u(e)?e:String(e)}function d(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var r=p(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(arguments.length<3?t:i):n.value}}).apply(this,arguments)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function x(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function S(t){var e=b();return function(){var i,r=m(t);if(e){var n=m(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return _(this,i)}}function _(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k(t)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};exports.TEXT_ALIGN=O;var w=function(a){x(h,t.default);var u=S(h);function h(t,e,i,r){var n;return f(this,h),(n=u.call(this,t,e,i,r)).labels_=null,n.text_="",n.textOffsetX_=0,n.textOffsetY_=0,n.textRotateWithView_=void 0,n.textRotation_=0,n.textFillState_=null,n.fillStates={},n.textStrokeState_=null,n.strokeStates={},n.textState_={},n.textStates={},n.textKey_="",n.fillKey_="",n.strokeKey_="",n.declutterImageWithText_=void 0,n}return c(h,[{key:"finish",value:function(){var t=y(m(h.prototype),"finish",this).call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}},{key:"drawText",value:function(t,i){var n=this.textFillState_,a=this.textStrokeState_,u=this.textState_;if(""!==this.text_&&u&&(n||a)){var f=this.coordinates,h=f.length,c=t.getType(),g=null,d=t.getStride();if("line"!==u.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){var y=u.overflow?null:[];switch(c){case"Point":case"MultiPoint":g=t.getFlatCoordinates();break;case"LineString":g=t.getFlatMidpoint();break;case"Circle":g=t.getCenter();break;case"MultiLineString":g=t.getFlatMidpoints(),d=2;break;case"Polygon":g=t.getFlatInteriorPoint(),u.overflow||y.push(g[2]/this.resolution),d=3;break;case"MultiPolygon":var p=t.getFlatInteriorPoints();g=[];for(var x=0,v=p.length;x<v;x+=3)u.overflow||y.push(p[x+2]/this.resolution),g.push(p[x],p[x+1]);if(0===g.length)return;d=2}var S=this.appendFlatPointCoordinates(g,d);if(S===h)return;if(y&&(S-h)/2!=g.length/d){var _=h/2;y=y.filter(function(t,e){var i=f[2*(_+e)]===g[e*d]&&f[2*(_+e)+1]===g[e*d+1];return i||--_,i})}this.saveTextStates_(),(u.backgroundFill||u.backgroundStroke)&&(this.setFillStrokeStyle(u.backgroundFill,u.backgroundStroke),u.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),u.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);var k=u.padding;if(k!=r.defaultPadding&&(u.scale[0]<0||u.scale[1]<0)){var b=u.padding[0],m=u.padding[1],O=u.padding[2],w=u.padding[3];u.scale[0]<0&&(m=-m,w=-w),u.scale[1]<0&&(b=-b,O=-O),k=[b,m,O,w]}var P=this.pixelRatio;this.instructions.push([e.default.DRAW_IMAGE,h,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,k==r.defaultPadding?r.defaultPadding:k.map(function(t){return t*P}),!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);var j=1/P;this.hitDetectionInstructions.push([e.default.DRAW_IMAGE,h,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[j,j],NaN,void 0,this.declutterImageWithText_,k,!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),this.endGeometry(i)}else{if(!(0,l.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var F;if(g=t.getFlatCoordinates(),"LineString"==c)F=[g.length];else if("MultiLineString"==c)F=t.getEnds();else if("Polygon"==c)F=t.getEnds().slice(0,1);else if("MultiPolygon"==c){var R=t.getEndss();F=[];for(var L=0,T=R.length;L<T;++L)F.push(R[L][0])}this.beginGeometry(t,i);for(var A=u.repeat,C=A?void 0:u.textAlign,D=0,W=0,N=F.length;W<N;++W)for(var K=void 0,M=0,I=(K=A?(0,o.lineChunk)(A*this.resolution,g,D,F[W],d):[g.slice(D,F[W])]).length;M<I;++M){var B=K[M],E=0,q=B.length;if(null==C){var G=(0,s.matchingChunk)(u.maxAngle,B,0,B.length,2);E=G[0],q=G[1]}for(var J=E;J<q;J+=d)f.push(B[J],B[J+1]);var X=f.length;D=F[W],this.drawChars_(h,X),h=X}this.endGeometry(i)}}}},{key:"saveTextStates_",value:function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var l=this.textKey_;l in this.textStates||(this.textStates[l]={font:e.font,textAlign:e.textAlign||r.defaultTextAlign,justify:e.justify,textBaseline:e.textBaseline||r.defaultTextBaseline,scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}},{key:"drawChars_",value:function(t,i){var r=this.textStrokeState_,n=this.textState_,l=this.strokeKey_,o=this.textKey_,s=this.fillKey_;this.saveTextStates_();var a=this.pixelRatio,u=O[n.textBaseline],f=this.textOffsetY_*a,h=this.text_,c=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([e.default.DRAW_CHARS,t,i,u,n.overflow,s,n.maxAngle,a,f,l,c*a,h,o,1]),this.hitDetectionInstructions.push([e.default.DRAW_CHARS,t,i,u,n.overflow,s,n.maxAngle,1,f,l,c,h,o,1/a])}},{key:"setTextStyle",value:function(t,e){var l,o,s;if(t){var a=t.getFill();a?((o=this.textFillState_)||(o={},this.textFillState_=o),o.fillStyle=(0,i.asColorLike)(a.getColor()||r.defaultFillStyle)):(o=null,this.textFillState_=o);var u=t.getStroke();if(u){(s=this.textStrokeState_)||(s={},this.textStrokeState_=s);var f=u.getLineDash(),h=u.getLineDashOffset(),c=u.getWidth(),g=u.getMiterLimit();s.lineCap=u.getLineCap()||r.defaultLineCap,s.lineDash=f?f.slice():r.defaultLineDash,s.lineDashOffset=void 0===h?r.defaultLineDashOffset:h,s.lineJoin=u.getLineJoin()||r.defaultLineJoin,s.lineWidth=void 0===c?r.defaultLineWidth:c,s.miterLimit=void 0===g?r.defaultMiterLimit:g,s.strokeStyle=(0,i.asColorLike)(u.getColor()||r.defaultStrokeStyle)}else s=null,this.textStrokeState_=s;l=this.textState_;var d=t.getFont()||r.defaultFont;(0,r.registerFont)(d);var y=t.getScaleArray();l.overflow=t.getOverflow(),l.font=d,l.maxAngle=t.getMaxAngle(),l.placement=t.getPlacement(),l.textAlign=t.getTextAlign(),l.repeat=t.getRepeat(),l.justify=t.getJustify(),l.textBaseline=t.getTextBaseline()||r.defaultTextBaseline,l.backgroundFill=t.getBackgroundFill(),l.backgroundStroke=t.getBackgroundStroke(),l.padding=t.getPadding()||r.defaultPadding,l.scale=void 0===y?[1,1]:y;var p=t.getOffsetX(),x=t.getOffsetY(),v=t.getRotateWithView(),S=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===x?0:x,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===S?0:S,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:(0,n.getUid)(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=l.font+l.scale+(l.textAlign||"?")+(l.repeat||"?")+(l.justify||"?")+(l.textBaseline||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+(0,n.getUid)(o.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}]),h}(),P=w;exports.default=P;
},{"./Builder.js":"Dn5Z","./Instruction.js":"HInR","../../colorlike.js":"nZyX","../canvas.js":"RKIq","../../util.js":"KA50","../../extent.js":"L0Vw","../../geom/flat/linechunk.js":"zEnG","../../geom/flat/straightchunk.js":"di12"}],"qYWL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./Builder.js")),t=o(require("./ImageBuilder.js")),r=o(require("./LineStringBuilder.js")),i=o(require("./PolygonBuilder.js")),n=o(require("./TextBuilder.js"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function f(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=d(e,"string");return"symbol"===u(t)?t:String(t)}function d(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var c={Circle:i.default,Default:e.default,Image:t.default,LineString:r.default,Polygon:i.default,Text:n.default},y=function(){function e(t,r,i,n){l(this,e),this.tolerance_=t,this.maxExtent_=r,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}return f(e,[{key:"finish",value:function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var r=this.buildersByZIndex_[t];for(var i in r){var n=r[i].finish();e[t][i]=n}}return e}},{key:"getBuilder",value:function(e,t){var r=void 0!==e?e.toString():"0",i=this.buildersByZIndex_[r];void 0===i&&(i={},this.buildersByZIndex_[r]=i);var n=i[t];void 0===n&&(n=new(0,c[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=n);return n}}]),e}(),v=y;exports.default=v;
},{"./Builder.js":"Dn5Z","./ImageBuilder.js":"qp04","./LineStringBuilder.js":"iuft","./PolygonBuilder.js":"dU9F","./TextBuilder.js":"v5GW"}],"hxmo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawTextOnPath=e;var r=require("../../math.js"),a=require("./transform.js");function e(e,t,n,i,s,v,l,u,f,o,p,h){var M=e[t],b=e[t+1],c=0,d=0,g=0,j=0;function q(){c=M,d=b,M=e[t+=i],b=e[t+1],j+=g,g=Math.sqrt((M-c)*(M-c)+(b-d)*(b-d))}do{q()}while(t<n-i&&j+g<v);for(var x=0===g?0:(v-j)/g,P=(0,r.lerp)(c,M,x),m=(0,r.lerp)(d,b,x),w=t-i,O=j,_=v+u*f(o,s,p);t<n-i&&j+g<_;)q();x=0===g?0:(_-j)/g;var k,y=(0,r.lerp)(c,M,x),I=(0,r.lerp)(d,b,x);if(h){var T=[P,m,y,I];(0,a.rotate)(T,0,4,2,h,T,T),k=T[0]>T[2]}else k=P>y;var z,A=Math.PI,B=[],C=w+i===t;if(g=0,j=O,M=e[t=w],b=e[t+1],C){q(),z=Math.atan2(b-d,M-c),k&&(z+=z>0?-A:A);var D=(y+P)/2,E=(I+m)/2;return B[0]=[D,E,(_-v)/2,z,s],B}for(var F=0,G=(s=s.replace(/\n/g," ")).length;F<G;){q();var H=Math.atan2(b-d,M-c);if(k&&(H+=H>0?-A:A),void 0!==z){var J=H-z;if(J+=J>A?-2*A:J<-A?2*A:0,Math.abs(J)>l)return null}z=H;for(var K=F,L=0;F<G;++F){var N=u*f(o,s[k?G-F-1:F],p);if(t+i<n&&j+g<v+L+N/2)break;L+=N}if(F!==K){var Q=k?s.substring(G-K,G-F):s.substring(K,F);x=0===g?0:(v+L/2-j)/g;var R=(0,r.lerp)(c,M,x),S=(0,r.lerp)(d,b,x);B.push([R,S,L/2,H,Q]),v+=L}}return B}
},{"../../math.js":"qAK2","./transform.js":"v1jb"}],"QoUW":[function(require,module,exports) {
"use strict";function r(r,t,e,n){for(var i=r[t],o=r[t+1],s=0,a=t+n;a<e;a+=n){var u=r[a],c=r[a+1];s+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return s}function t(t,e,n,i){var o=r(t,e,n,i),s=t[n-i]-t[e],a=t[n-i+1]-t[e+1];return o+=Math.sqrt(s*s+a*a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringLength=r,exports.linearRingLength=t;
},{}],"iZLT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("./Instruction.js")),e=require("./TextBuilder.js"),i=require("../../transform.js"),a=require("../../extent.js"),r=require("../canvas.js"),n=require("../../geom/flat/textpath.js"),l=require("../../array.js"),s=require("../../geom/flat/length.js"),o=require("../../geom/flat/transform.js");function h(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,p(a.key),a)}}function f(t,e,i){return e&&d(t.prototype,e),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){var e=v(t,"string");return"symbol"===u(e)?e:String(e)}function v(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,e||"default");if("object"!==u(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var m=(0,a.createEmpty)(),g=[],y=[],_=[],x=[];function b(t){return t[3].declutterBox}var S=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function T(t,i){return"start"!==i&&"end"!==i||S.test(t)||(i="start"===i?"left":"right"),e.TEXT_ALIGN[i]}function k(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}var w=function(){function h(t,e,a,r){c(this,h),this.overlaps=a,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,i.create)(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return f(h,[{key:"createLabel",value:function(t,i,a,n){var l=t+i+a+n;if(this.labels_[l])return this.labels_[l];var s=n?this.strokeStates[n]:null,o=a?this.fillStates[a]:null,h=this.textStates[i],u=this.pixelRatio,c=[h.scale[0]*u,h.scale[1]*u],d=Array.isArray(t),f=h.justify?e.TEXT_ALIGN[h.justify]:T(Array.isArray(t)?t[0]:t,h.textAlign||r.defaultTextAlign),p=n&&s.lineWidth?s.lineWidth:0,v=d?t:t.split("\n").reduce(k,[]),m=(0,r.getTextDimensions)(h,v),g=m.width,y=m.height,_=m.widths,x=m.heights,b=m.lineWidths,S=g+p,w=[],C=(S+2)*c[0],I=(y+p)*c[1],L={width:C<0?Math.floor(C):Math.ceil(C),height:I<0?Math.floor(I):Math.ceil(I),contextInstructions:w};1==c[0]&&1==c[1]||w.push("scale",c),n&&(w.push("strokeStyle",s.strokeStyle),w.push("lineWidth",p),w.push("lineCap",s.lineCap),w.push("lineJoin",s.lineJoin),w.push("miterLimit",s.miterLimit),w.push("setLineDash",[s.lineDash]),w.push("lineDashOffset",s.lineDashOffset)),a&&w.push("fillStyle",o.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");for(var M,A=.5-f,E=f*S+A*p,O=[],R=[],D=0,P=0,j=0,B=0,W=0,X=v.length;W<X;W+=2){var Y=v[W];if("\n"!==Y){var N=v[W+1]||h.font;N!==M&&(n&&O.push("font",N),a&&R.push("font",N),M=N),D=Math.max(D,x[j]);var q=[Y,E+A*_[j]+f*(_[j]-b[B]),.5*(p+D)+P];E+=_[j],n&&O.push("strokeText",q),a&&R.push("fillText",q),++j}else P+=D,D=0,E=f*S+A*p,++B}return Array.prototype.push.apply(w,O),Array.prototype.push.apply(w,R),this.labels_[l]=L,L}},{key:"replayTextBackground_",value:function(t,e,i,a,r,n,l){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,a),t.lineTo.apply(t,r),t.lineTo.apply(t,e),n&&(this.alignFill_=n[2],this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())}},{key:"calculateImageOrLabelDimensions_",value:function(t,e,r,n,l,s,o,h,u,c,d,f,p,v,b,S){var T,k=r-(o*=f[0]),w=n-(h*=f[1]),C=l+u>t?t-u:l,I=s+c>e?e-c:s,L=v[3]+C*f[0]+v[1],M=v[0]+I*f[1]+v[2],A=k-v[3],E=w-v[0];return(b||0!==d)&&(g[0]=A,x[0]=A,g[1]=E,y[1]=E,y[0]=A+L,_[0]=y[0],_[1]=E+M,x[1]=_[1]),0!==d?(T=(0,i.compose)((0,i.create)(),r,n,1,1,d,-r,-n),(0,i.apply)(T,g),(0,i.apply)(T,y),(0,i.apply)(T,_),(0,i.apply)(T,x),(0,a.createOrUpdate)(Math.min(g[0],y[0],_[0],x[0]),Math.min(g[1],y[1],_[1],x[1]),Math.max(g[0],y[0],_[0],x[0]),Math.max(g[1],y[1],_[1],x[1]),m)):(0,a.createOrUpdate)(Math.min(A,A+L),Math.min(E,E+M),Math.max(A,A+L),Math.max(E,E+M),m),p&&(k=Math.round(k),w=Math.round(w)),{drawImageX:k,drawImageY:w,drawImageW:C,drawImageH:I,originX:u,originY:c,declutterBox:{minX:m[0],minY:m[1],maxX:m[2],maxY:m[3],value:S},canvasTransform:T,scale:f}}},{key:"replayImageOrLabel_",value:function(t,e,i,a,n,l,s){var o=!(!l&&!s),h=a.declutterBox,u=t.canvas,c=s?s[2]*a.scale[0]/2:0;return h.minX-c<=u.width/e&&h.maxX+c>=0&&h.minY-c<=u.height/e&&h.maxY+c>=0&&(o&&this.replayTextBackground_(t,g,y,_,x,l,s),(0,r.drawImageOrLabel)(t,a.canvasTransform,n,i,a.originX,a.originY,a.drawImageW,a.drawImageH,a.drawImageX,a.drawImageY,a.scale)),!0}},{key:"fill_",value:function(t){if(this.alignFill_){var e=(0,i.apply)(this.renderedTransform_,[0,0]),a=512*this.pixelRatio;t.save(),t.translate(e[0]%a,e[1]%a),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}},{key:"setStrokeStyle_",value:function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}},{key:"drawLabelWithPointPlacement_",value:function(t,i,a,n){var l=this.textStates[i],s=this.createLabel(t,i,n,a),o=this.strokeStates[a],h=this.pixelRatio,u=T(Array.isArray(t)?t[0]:t,l.textAlign||r.defaultTextAlign),c=e.TEXT_ALIGN[l.textBaseline||r.defaultTextBaseline],d=o&&o.lineWidth?o.lineWidth:0;return{label:s,anchorX:u*(s.width/h-2*l.scale[0])+2*(.5-u)*d,anchorY:c*s.height/h+2*(.5-c)*d}}},{key:"execute_",value:function(h,u,c,d,f,p,v,m){var g;this.pixelCoordinates_&&(0,l.equals)(c,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=(0,o.transform2D)(this.coordinates,0,this.coordinates.length,2,c,this.pixelCoordinates_),(0,i.setFromArray)(this.renderedTransform_,c));for(var y,_,x,S,T,k,w,C,I,L,M,A,E,O,R,D,P=0,j=d.length,B=0,W=0,X=0,Y=null,N=null,q=this.coordinateCache_,G=this.viewRotation_,F=Math.round(1e12*Math.atan2(-c[1],c[0]))/1e12,H={context:h,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:G},J=this.instructions!=d||this.overlaps?0:200;P<j;){var U=d[P];switch(U[0]){case t.default.BEGIN_GEOMETRY:E=U[1],D=U[3],E.getGeometry()?void 0===v||(0,a.intersects)(v,D.getExtent())?++P:P=U[2]+1:P=U[2];break;case t.default.BEGIN_PATH:W>J&&(this.fill_(h),W=0),X>J&&(h.stroke(),X=0),W||X||(h.beginPath(),S=NaN,T=NaN),++P;break;case t.default.CIRCLE:var K=g[B=U[1]],V=g[B+1],z=g[B+2]-K,Q=g[B+3]-V,Z=Math.sqrt(z*z+Q*Q);h.moveTo(K+Z,V),h.arc(K,V,Z,0,2*Math.PI,!0),++P;break;case t.default.CLOSE_PATH:h.closePath(),++P;break;case t.default.CUSTOM:B=U[1],y=U[2];var $=U[3],tt=U[4],et=6==U.length?U[5]:void 0;H.geometry=$,H.feature=E,P in q||(q[P]=[]);var it=q[P];et?et(g,B,y,2,it):(it[0]=g[B],it[1]=g[B+1],it.length=2),tt(it,H),++P;break;case t.default.DRAW_IMAGE:B=U[1],y=U[2],C=U[3],_=U[4],x=U[5];var at=U[6],rt=U[7],nt=U[8],lt=U[9],st=U[10],ot=U[11],ht=U[12],ut=U[13],ct=U[14],dt=U[15];if(!C&&U.length>=20){I=U[19],L=U[20],M=U[21],A=U[22];var ft=this.drawLabelWithPointPlacement_(I,L,M,A);C=ft.label,U[3]=C;var pt=U[23];_=(ft.anchorX-pt)*this.pixelRatio,U[4]=_;var vt=U[24];x=(ft.anchorY-vt)*this.pixelRatio,U[5]=x,at=C.height,U[6]=at,ut=C.width,U[13]=ut}var mt=void 0;U.length>25&&(mt=U[25]);var gt=void 0,yt=void 0,_t=void 0;U.length>17?(gt=U[16],yt=U[17],_t=U[18]):(gt=r.defaultPadding,yt=!1,_t=!1),st&&F?ot+=G:st||F||(ot-=G);for(var xt=0;B<y;B+=2)if(!(mt&&mt[xt++]<ut/this.pixelRatio)){var bt=this.calculateImageOrLabelDimensions_(C.width,C.height,g[B],g[B+1],ut,at,_,x,nt,lt,ot,ht,f,gt,yt||_t,E),St=[h,u,C,bt,rt,yt?Y:null,_t?N:null];if(m){if("none"===ct)continue;if("obstacle"===ct){m.insert(bt.declutterBox);continue}var Tt=void 0,kt=void 0;if(dt){var wt=y-B;if(!dt[wt]){dt[wt]=St;continue}if(Tt=dt[wt],delete dt[wt],kt=b(Tt),m.collides(kt))continue}if(m.collides(bt.declutterBox))continue;Tt&&(m.insert(kt),this.replayImageOrLabel_.apply(this,Tt)),m.insert(bt.declutterBox)}this.replayImageOrLabel_.apply(this,St)}++P;break;case t.default.DRAW_CHARS:var Ct=U[1],It=U[2],Lt=U[3],Mt=U[4];A=U[5];var At=U[6],Et=U[7],Ot=U[8];M=U[9];var Rt=U[10];I=U[11],L=U[12];var Dt=[U[13],U[13]],Pt=this.textStates[L],jt=Pt.font,Bt=[Pt.scale[0]*Et,Pt.scale[1]*Et],Wt=void 0;jt in this.widths_?Wt=this.widths_[jt]:(Wt={},this.widths_[jt]=Wt);var Xt=(0,s.lineStringLength)(g,Ct,It,2),Yt=Math.abs(Bt[0])*(0,r.measureAndCacheTextWidth)(jt,I,Wt);if(Mt||Yt<=Xt){var Nt=this.textStates[L].textAlign,qt=(Xt-Yt)*e.TEXT_ALIGN[Nt],Gt=(0,n.drawTextOnPath)(g,Ct,It,2,I,qt,At,Math.abs(Bt[0]),r.measureAndCacheTextWidth,jt,Wt,F?0:this.viewRotation_);t:if(Gt){var Ft=[],Ht=void 0,Jt=void 0,Ut=void 0,Kt=void 0,Vt=void 0;if(M)for(Ht=0,Jt=Gt.length;Ht<Jt;++Ht){Ut=(Vt=Gt[Ht])[4],Kt=this.createLabel(Ut,L,"",M),_=Vt[2]+(Bt[0]<0?-Rt:Rt),x=Lt*Kt.height+2*(.5-Lt)*Rt*Bt[1]/Bt[0]-Ot;var zt=this.calculateImageOrLabelDimensions_(Kt.width,Kt.height,Vt[0],Vt[1],Kt.width,Kt.height,_,x,0,0,Vt[3],Dt,!1,r.defaultPadding,!1,E);if(m&&m.collides(zt.declutterBox))break t;Ft.push([h,u,Kt,zt,1,null,null])}if(A)for(Ht=0,Jt=Gt.length;Ht<Jt;++Ht){Ut=(Vt=Gt[Ht])[4],Kt=this.createLabel(Ut,L,A,""),_=Vt[2],x=Lt*Kt.height-Ot;var Qt=this.calculateImageOrLabelDimensions_(Kt.width,Kt.height,Vt[0],Vt[1],Kt.width,Kt.height,_,x,0,0,Vt[3],Dt,!1,r.defaultPadding,!1,E);if(m&&m.collides(Qt.declutterBox))break t;Ft.push([h,u,Kt,Qt,1,null,null])}m&&m.load(Ft.map(b));for(var Zt=0,$t=Ft.length;Zt<$t;++Zt)this.replayImageOrLabel_.apply(this,Ft[Zt])}}++P;break;case t.default.END_GEOMETRY:if(void 0!==p){var te=p(E=U[1],D);if(te)return te}++P;break;case t.default.FILL:J?W++:this.fill_(h),++P;break;case t.default.MOVE_TO_LINE_TO:for(B=U[1],y=U[2],O=g[B],w=(R=g[B+1])+.5|0,(k=O+.5|0)===S&&w===T||(h.moveTo(O,R),S=k,T=w),B+=2;B<y;B+=2)k=(O=g[B])+.5|0,w=(R=g[B+1])+.5|0,B!=y-2&&k===S&&w===T||(h.lineTo(O,R),S=k,T=w);++P;break;case t.default.SET_FILL_STYLE:Y=U,this.alignFill_=U[2],W&&(this.fill_(h),W=0,X&&(h.stroke(),X=0)),h.fillStyle=U[1],++P;break;case t.default.SET_STROKE_STYLE:N=U,X&&(h.stroke(),X=0),this.setStrokeStyle_(h,U),++P;break;case t.default.STROKE:J?X++:h.stroke(),++P;break;default:++P}}W&&this.fill_(h),X&&h.stroke()}},{key:"execute",value:function(t,e,i,a,r,n){this.viewRotation_=a,this.execute_(t,e,i,this.instructions,r,void 0,void 0,n)}},{key:"executeHitDetection",value:function(t,e,i,a,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,a,r)}}]),h}(),C=w;exports.default=C;
},{"./Instruction.js":"HInR","./TextBuilder.js":"v5GW","../../transform.js":"Ln8D","../../extent.js":"L0Vw","../canvas.js":"RKIq","../../geom/flat/textpath.js":"hxmo","../../array.js":"o0G8","../../geom/flat/length.js":"QoUW","../../geom/flat/transform.js":"v1jb"}],"sCjt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.getPixelIndexArray=I;var e=u(require("./Executor.js")),t=require("../../array.js"),r=require("../../extent.js"),n=require("../../transform.js"),o=require("../../dom.js"),i=require("../../obj.js"),a=require("../../geom/flat/transform.js");function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return h(e)||l(e)||f(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function l(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){if(Array.isArray(e))return v(e)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function x(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=b(e,"string");return"symbol"===y(t)?t:String(t)}function b(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var g=["Polygon","Circle","LineString","Image","Text","Default"],_=function(){function u(e,t,r,o,i,a){d(this,u),this.maxExtent_=e,this.overlaps_=o,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,n.create)(),this.createExecutors_(i)}return x(u,[{key:"clip",value:function(e,t){var r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}},{key:"createExecutors_",value:function(t){for(var r in t){var n=this.executorsByZIndex_[r];void 0===n&&(n={},this.executorsByZIndex_[r]=n);var o=t[r];for(var i in o){var a=o[i];n[i]=new e.default(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}}},{key:"hasExecutors",value:function(e){for(var t in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[t],n=0,o=e.length;n<o;++n)if(e[n]in r)return!0;return!1}},{key:"forEachFeatureAtCoordinate",value:function(e,i,a,u,s,c){var f=2*(u=Math.round(u))+1,l=(0,n.compose)(this.hitDetectionTransform_,u+.5,u+.5,1/i,-1/i,-a,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=(0,o.createCanvasContext2D)(f,f,void 0,{willReadFrequently:!0}));var v,y=this.hitDetectionContext_;y.canvas.width!==f||y.canvas.height!==f?(y.canvas.width=f,y.canvas.height=f):h||y.clearRect(0,0,f,f),void 0!==this.renderBuffer_&&(v=(0,r.createEmpty)(),(0,r.extendCoordinate)(v,e),(0,r.buffer)(v,i*(this.renderBuffer_+u),v));var d,p=I(u);function x(e,t){for(var r=y.getImageData(0,0,f,f).data,n=0,o=p.length;n<o;n++)if(r[p[n]]>0){if(!c||"Image"!==d&&"Text"!==d||c.includes(e)){var i=(p[n]-3)/4,a=u-i%f,l=u-(i/f|0),h=s(e,t,a*a+l*l);if(h)return h}y.clearRect(0,0,f,f);break}}var m,b,_,j,S,C=Object.keys(this.executorsByZIndex_).map(Number);for(C.sort(t.ascending),m=C.length-1;m>=0;--m){var E=C[m].toString();for(_=this.executorsByZIndex_[E],b=g.length-1;b>=0;--b)if(void 0!==(j=_[d=g[b]])&&(S=j.executeHitDetection(y,l,a,x,v)))return S}}},{key:"getClipCoords",value:function(e){var t=this.maxExtent_;if(!t)return null;var r=t[0],n=t[1],o=t[2],i=t[3],u=[r,n,r,i,o,i,o,n];return(0,a.transform2D)(u,0,8,2,e,u),u}},{key:"isEmpty",value:function(){return(0,i.isEmpty)(this.executorsByZIndex_)}},{key:"execute",value:function(e,r,n,o,i,a,u){var s,c,f,l,h,v,y=Object.keys(this.executorsByZIndex_).map(Number);for(y.sort(t.ascending),this.maxExtent_&&(e.save(),this.clip(e,n)),a=a||g,u&&y.reverse(),s=0,c=y.length;s<c;++s){var d=y[s].toString();for(h=this.executorsByZIndex_[d],f=0,l=a.length;f<l;++f){void 0!==(v=h[a[f]])&&v.execute(e,r,n,o,i,u)}}this.maxExtent_&&e.restore()}}]),u}(),j={};function I(e){if(void 0!==j[e])return j[e];for(var t=2*e+1,r=e*e,n=new Array(r+1),o=0;o<=e;++o)for(var i=0;i<=e;++i){var a=o*o+i*i;if(a>r)break;var u=n[a];u||(u=[],n[a]=u),u.push(4*((e+o)*t+(e+i))+3),o>0&&u.push(4*((e-o)*t+(e+i))+3),i>0&&(u.push(4*((e+o)*t+(e-i))+3),o>0&&u.push(4*((e-o)*t+(e-i))+3))}for(var c=[],f=0,l=n.length;f<l;++f)n[f]&&c.push.apply(c,s(n[f]));return j[e]=c,c}var S=_;exports.default=S;
},{"./Executor.js":"iZLT","../../array.js":"o0G8","../../extent.js":"L0Vw","../../transform.js":"Ln8D","../../dom.js":"FYLQ","../../obj.js":"SLsU","../../geom/flat/transform.js":"v1jb"}],"BfJa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../events/EventType.js")),t=o(require("../ImageState.js")),r=o(require("../Observable.js")),n=require("../util.js");function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=f(e,"string");return"symbol"===u(t)?t:String(t)}function f(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=y(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=g();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(o){d(i,r.default);var u=b(i);function i(e){var t;return a(this,i),(t=u.call(this)).ready=!0,t.boundHandleImageChange_=t.handleImageChange_.bind(h(t)),t.layer_=e,t.declutterExecutorGroup=null,t}return l(i,[{key:"getFeatures",value:function(e){return(0,n.abstract)()}},{key:"getData",value:function(e){return null}},{key:"prepareFrame",value:function(e){return(0,n.abstract)()}},{key:"renderFrame",value:function(e,t){return(0,n.abstract)()}},{key:"loadedTileCallback",value:function(e,t,r){e[t]||(e[t]={}),e[t][r.tileCoord.toString()]=r}},{key:"createLoadedTileFinder",value:function(e,t,r){var n=this;return function(o,u){var a=n.loadedTileCallback.bind(n,r,o);return e.forEachLoadedTile(t,o,u,a)}}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,o){}},{key:"getLayer",value:function(){return this.layer_}},{key:"handleFontsChanged",value:function(){}},{key:"handleImageChange_",value:function(e){e.target.getState()===t.default.LOADED&&this.renderIfReadyAndVisible()}},{key:"loadImage",value:function(r){var n=r.getState();return n!=t.default.LOADED&&n!=t.default.ERROR&&r.addEventListener(e.default.CHANGE,this.boundHandleImageChange_),n==t.default.IDLE&&(r.load(),n=r.getState()),n==t.default.LOADED}},{key:"renderIfReadyAndVisible",value:function(){var e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}},{key:"disposeInternal",value:function(){delete this.layer_,s(m(i.prototype),"disposeInternal",this).call(this)}}]),i}(),j=O;exports.default=j;
},{"../events/EventType.js":"GUXn","../ImageState.js":"FoaO","../Observable.js":"TW86","../util.js":"KA50"}],"D55b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.canvasPool=void 0;var e=l(require("../Layer.js")),t=l(require("../../render/Event.js")),r=l(require("../../render/EventType.js")),n=require("../../transform.js"),o=require("../../color.js"),a=require("../../dom.js"),i=require("../../array.js"),u=require("../../extent.js");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=d(e,"string");return"symbol"===c(t)?t:String(t)}function d(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=h(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=P();return function(){var r,n=x(e);if(t){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=[];exports.canvasPool=j;var O=null;function w(){O=(0,a.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})}var E=function(l){m(f,e.default);var c=g(f);function f(e){var t;return s(this,f),(t=c.call(this,e)).container=null,t.renderedResolution,t.tempTransform=(0,n.create)(),t.pixelTransform=(0,n.create)(),t.inversePixelTransform=(0,n.create)(),t.context=null,t.containerReused=!1,t.pixelContext_=null,t.frameState=null,t}return p(f,[{key:"getImageData",value:function(e,t,r){var n;O||w(),O.clearRect(0,0,1,1);try{O.drawImage(e,t,r,1,1,0,0,1,1),n=O.getImageData(0,0,1,1).data}catch(o){return O=null,null}return n}},{key:"getBackground",value:function(e){var t=this.getLayer().getBackground();return"function"==typeof t&&(t=t(e.viewState.resolution)),t||void 0}},{key:"useContainer",value:function(e,t,r){var n,u,l=this.getLayer().getClassName();if(e&&e.className===l&&(!r||e&&e.style.backgroundColor&&(0,i.equals)((0,o.asArray)(e.style.backgroundColor),(0,o.asArray)(r)))){var c=e.firstElementChild;c instanceof HTMLCanvasElement&&(u=c.getContext("2d"))}if(u&&u.canvas.style.transform===t?(this.container=e,this.context=u,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=l;var s=n.style;s.position="absolute",s.width="100%",s.height="100%";var f=(u=(0,a.createCanvasContext2D)()).canvas;n.appendChild(f),(s=f.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=n,this.context=u}this.containerReused||!r||this.container.style.backgroundColor||(this.container.style.backgroundColor=r)}},{key:"clipUnrotated",value:function(e,t,r){var o=(0,u.getTopLeft)(r),a=(0,u.getTopRight)(r),i=(0,u.getBottomRight)(r),l=(0,u.getBottomLeft)(r);(0,n.apply)(t.coordinateToPixelTransform,o),(0,n.apply)(t.coordinateToPixelTransform,a),(0,n.apply)(t.coordinateToPixelTransform,i),(0,n.apply)(t.coordinateToPixelTransform,l);var c=this.inversePixelTransform;(0,n.apply)(c,o),(0,n.apply)(c,a),(0,n.apply)(c,i),(0,n.apply)(c,l),e.save(),e.beginPath(),e.moveTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()}},{key:"dispatchRenderEvent_",value:function(e,r,n){var o=this.getLayer();if(o.hasListener(e)){var a=new t.default(e,this.inversePixelTransform,n,r);o.dispatchEvent(a)}}},{key:"preRender",value:function(e,t){this.frameState=t,this.dispatchRenderEvent_(r.default.PRERENDER,e,t)}},{key:"postRender",value:function(e,t){this.dispatchRenderEvent_(r.default.POSTRENDER,e,t)}},{key:"getRenderTransform",value:function(e,t,r,o,a,i,u){var l=a/2,c=i/2,s=o/t,f=-s,p=-e[0]+u,y=-e[1];return(0,n.compose)(this.tempTransform,l,c,s,f,-r,p,y)}},{key:"disposeInternal",value:function(){delete this.frameState,v(x(f.prototype),"disposeInternal",this).call(this)}}]),f}(),k=E;exports.default=k;
},{"../Layer.js":"BfJa","../../render/Event.js":"UvWG","../../render/EventType.js":"JwZs","../../transform.js":"Ln8D","../../color.js":"XaHX","../../dom.js":"FYLQ","../../array.js":"o0G8","../../extent.js":"L0Vw"}],"iz3u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./events/Target.js")),e=o(require("./events/EventType.js")),r=o(require("./TileState.js")),n=require("./util.js"),i=require("./easing.js");function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function l(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=c(t,"string");return"symbol"===u(e)?e:String(e)}function c(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=b();return function(){var r,n=m(t);if(e){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(o){y(s,t.default);var u=p(s);function s(t,e,r){var n;return a(this,s),r=r||{},(n=u.call(this)).tileCoord=t,n.state=e,n.interimTile=null,n.key="",n.transition_=void 0===r.transition?250:r.transition,n.transitionStarts_={},n.interpolate=!!r.interpolate,n}return l(s,[{key:"changed",value:function(){this.dispatchEvent(e.default.CHANGE)}},{key:"release",value:function(){this.state===r.default.ERROR&&this.setState(r.default.EMPTY)}},{key:"getKey",value:function(){return this.key+"/"+this.tileCoord}},{key:"getInterimTile",value:function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==r.default.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}},{key:"refreshInterimChain",value:function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==r.default.LOADED){t.interimTile=null;break}t.getState()==r.default.LOADING?e=t:t.getState()==r.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}}},{key:"getTileCoord",value:function(){return this.tileCoord}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){if(this.state!==r.default.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}},{key:"load",value:function(){(0,n.abstract)()}},{key:"getAlpha",value:function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:(0,i.easeIn)(n/this.transition_)}},{key:"inTransition",value:function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}},{key:"endTransition",value:function(t){this.transition_&&(this.transitionStarts_[t]=-1)}}]),s}(),T=_;exports.default=T;
},{"./events/Target.js":"KnPA","./events/EventType.js":"GUXn","./TileState.js":"FoaO","./util.js":"KA50","./easing.js":"k82w"}],"j3TM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./Tile.js")),e=i(require("./TileState.js")),n=require("./dom.js"),r=require("./Image.js");function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=c(t,"string");return"symbol"===o(e)?e:String(e)}function c(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=g();return function(){var n,r=m(t);if(e){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(n){f(o,t.default);var i=y(o);function o(t,e,n,r,a,s){var l;return u(this,o),(l=i.call(this,t,e,s)).crossOrigin_=r,l.src_=n,l.key=n,l.image_=new Image,null!==r&&(l.image_.crossOrigin=r),l.unlisten_=null,l.tileLoadFunction_=a,l}return s(o,[{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(t){this.image_=t,this.state=e.default.LOADED,this.unlistenImage_(),this.changed()}},{key:"handleImageError_",value:function(){this.state=e.default.ERROR,this.unlistenImage_(),this.image_=b(),this.changed()}},{key:"handleImageLoad_",value:function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=e.default.LOADED:this.state=e.default.EMPTY,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){this.state==e.default.ERROR&&(this.state=e.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,r.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),o}();function b(){var t=(0,n.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var v=_;exports.default=v;
},{"./Tile.js":"iz3u","./TileState.js":"FoaO","./dom.js":"FYLQ","./Image.js":"yR82"}],"bYOC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ERROR_THRESHOLD=void 0;var e=.5;exports.ERROR_THRESHOLD=e;
},{}],"gmdY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),r=require("../proj.js"),e=require("../math.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function n(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,a(i.key),i)}}function s(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var r=u(t,"string");return"symbol"===i(r)?r:String(r)}function u(t,r){if("object"!==i(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,r||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}var h=10,c=.25,d=function(){function i(e,n,s,a,u,c){var d=this;o(this,i),this.sourceProj_=e,this.targetProj_=n;var l={},f=(0,r.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var r=t[0]+"/"+t[1];return l[r]||(l[r]=f(t)),l[r]},this.maxSourceExtent_=a,this.errorThresholdSquared_=u*u,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!a&&!!this.sourceProj_.getExtent()&&(0,t.getWidth)(a)>=(0,t.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,t.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,t.getWidth)(this.targetProj_.getExtent()):null;var _=(0,t.getTopLeft)(s),g=(0,t.getTopRight)(s),v=(0,t.getBottomRight)(s),m=(0,t.getBottomLeft)(s),W=this.transformInv_(_),p=this.transformInv_(g),y=this.transformInv_(v),b=this.transformInv_(m),x=h+(c?Math.max(0,Math.ceil(Math.log2((0,t.getArea)(s)/(c*c*256*256)))):0);if(this.addQuad_(_,g,v,m,W,p,y,b,x),this.wrapsXInSource_){var j=1/0;this.triangles_.forEach(function(t,r,e){j=Math.min(j,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-j>d.sourceWorldWidth_/2){var r=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];r[0][0]-j>d.sourceWorldWidth_/2&&(r[0][0]-=d.sourceWorldWidth_),r[1][0]-j>d.sourceWorldWidth_/2&&(r[1][0]-=d.sourceWorldWidth_),r[2][0]-j>d.sourceWorldWidth_/2&&(r[2][0]-=d.sourceWorldWidth_);var e=Math.min(r[0][0],r[1][0],r[2][0]);Math.max(r[0][0],r[1][0],r[2][0])-e<d.sourceWorldWidth_/2&&(t.source=r)}})}l={}}return s(i,[{key:"addTriangle_",value:function(t,r,e,i,o,n){this.triangles_.push({source:[i,o,n],target:[t,r,e]})}},{key:"addQuad_",value:function(r,i,o,n,s,a,u,h,d){var l=(0,t.boundingExtent)([s,a,u,h]),f=this.sourceWorldWidth_?(0,t.getWidth)(l)/this.sourceWorldWidth_:null,_=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&f>.5&&f<1,v=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var m=(0,t.boundingExtent)([r,i,o,n]);v=(0,t.getWidth)(m)/this.targetWorldWidth_>c||v}!g&&this.sourceProj_.isGlobal()&&f&&(v=f>c||v)}if(!(!v&&this.maxSourceExtent_&&isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2])&&isFinite(l[3]))||(0,t.intersects)(l,this.maxSourceExtent_)){var W=0;if(!(v||isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(h[0])&&isFinite(h[1])))if(d>0)v=!0;else if(1!=(W=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(u[0])&&isFinite(u[1])?0:2)+(isFinite(h[0])&&isFinite(h[1])?0:1))&&2!=W&&4!=W&&8!=W)return;if(d>0){if(!v){var p,y=[(r[0]+o[0])/2,(r[1]+o[1])/2],b=this.transformInv_(y);if(g)p=((0,e.modulo)(s[0],_)+(0,e.modulo)(u[0],_))/2-(0,e.modulo)(b[0],_);else p=(s[0]+u[0])/2-b[0];var x=(s[1]+u[1])/2-b[1];v=p*p+x*x>this.errorThresholdSquared_}if(v){if(Math.abs(r[0]-o[0])<=Math.abs(r[1]-o[1])){var j=[(i[0]+o[0])/2,(i[1]+o[1])/2],F=this.transformInv_(j),P=[(n[0]+r[0])/2,(n[1]+r[1])/2],S=this.transformInv_(P);this.addQuad_(r,i,j,P,s,a,F,S,d-1),this.addQuad_(P,j,o,n,S,F,u,h,d-1)}else{var E=[(r[0]+i[0])/2,(r[1]+i[1])/2],I=this.transformInv_(E),T=[(o[0]+n[0])/2,(o[1]+n[1])/2],M=this.transformInv_(T);this.addQuad_(r,E,T,n,s,I,M,h,d-1),this.addQuad_(E,i,o,T,I,a,u,M,d-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&W)&&this.addTriangle_(r,o,n,s,u,h),0==(14&W)&&this.addTriangle_(r,o,i,s,u,a),W&&(0==(13&W)&&this.addTriangle_(i,n,r,a,h,s),0==(7&W)&&this.addTriangle_(i,n,o,a,h,u))}}},{key:"calculateSourceExtent",value:function(){var r=(0,t.createEmpty)();return this.triangles_.forEach(function(e,i,o){var n=e.source;(0,t.extendCoordinate)(r,n[0]),(0,t.extendCoordinate)(r,n[1]),(0,t.extendCoordinate)(r,n[2])}),r}},{key:"getTriangles",value:function(){return this.triangles_}}]),i}(),l=d;exports.default=l;
},{"../extent.js":"L0Vw","../proj.js":"VAQc","../math.js":"qAK2"}],"BOkO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateSourceExtentResolution=g,exports.calculateSourceResolution=c,exports.canvasPool=void 0,exports.render=u;var e,t=require("./extent.js"),a=require("./dom.js"),r=require("./proj.js"),o=require("./math.js"),n=[];function i(e,t,a,r,o){e.beginPath(),e.moveTo(0,0),e.lineTo(t,a),e.lineTo(r,o),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,r)+1,Math.max(a,o)),e.restore()}function s(e,t){return Math.abs(e[4*t]-210)>2||Math.abs(e[4*t+3]-191.25)>2}function l(){if(void 0===e){var t=(0,a.createCanvasContext2D)(6,6,n);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",i(t,4,5,4,0),i(t,4,5,0,5);var r=t.getImageData(0,0,3,3).data;e=s(r,0)||s(r,4)||s(r,8),(0,a.releaseCanvas)(t),n.push(t.canvas)}return e}function c(e,a,o,n){var i=(0,r.transform)(o,a,e),s=(0,r.getPointResolution)(a,n,o),l=a.getMetersPerUnit();void 0!==l&&(s*=l);var c=e.getMetersPerUnit();void 0!==c&&(s/=c);var g=e.getExtent();if(!g||(0,t.containsCoordinate)(g,i)){var u=(0,r.getPointResolution)(e,s,i)/s;isFinite(u)&&u>0&&(s/=u)}return s}function g(e,a,r,o){var n=(0,t.getCenter)(r),i=c(e,a,n,o);return(!isFinite(i)||i<=0)&&(0,t.forEachCorner)(r,function(t){return i=c(e,a,t,o),isFinite(i)&&i>0}),i}function u(e,r,i,s,c,g,u,v,h,f,m,d){var p=(0,a.createCanvasContext2D)(Math.round(i*e),Math.round(i*r),n);if(d||(p.imageSmoothingEnabled=!1),0===h.length)return p.canvas;function x(e){return Math.round(e*i)/i}p.scale(i,i),p.globalCompositeOperation="lighter";var T=(0,t.createEmpty)();h.forEach(function(e,a,r){(0,t.extend)(T,e.extent)});var C=(0,t.getWidth)(T),b=(0,t.getHeight)(T),M=(0,a.createCanvasContext2D)(Math.round(i*C/s),Math.round(i*b/s),n);d||(M.imageSmoothingEnabled=!1);var P=i/s;h.forEach(function(e,a,r){var o=e.extent[0]-T[0],n=-(e.extent[3]-T[3]),i=(0,t.getWidth)(e.extent),s=(0,t.getHeight)(e.extent);e.image.width>0&&e.image.height>0&&M.drawImage(e.image,f,f,e.image.width-2*f,e.image.height-2*f,o*P,n*P,i*P,s*P)});var E=(0,t.getTopLeft)(u);return v.getTriangles().forEach(function(e,t,a){var r=e.source,n=e.target,c=r[0][0],u=r[0][1],v=r[1][0],h=r[1][1],f=r[2][0],m=r[2][1],C=x((n[0][0]-E[0])/g),b=x(-(n[0][1]-E[1])/g),P=x((n[1][0]-E[0])/g),S=x(-(n[1][1]-E[1])/g),j=x((n[2][0]-E[0])/g),y=x(-(n[2][1]-E[1])/g),R=c,q=u;c=0,u=0;var w=[[v-=R,h-=q,0,0,P-C],[f-=R,m-=q,0,0,j-C],[0,0,v,h,S-b],[0,0,f,m,y-b]],D=(0,o.solveLinearSystem)(w);if(D){if(p.save(),p.beginPath(),l()||!d){p.moveTo(P,S);for(var O=C-P,k=b-S,F=0;F<4;F++)p.lineTo(P+x((F+1)*O/4),S+x(F*k/3)),3!=F&&p.lineTo(P+x((F+1)*O/4),S+x((F+1)*k/3));p.lineTo(j,y)}else p.moveTo(P,S),p.lineTo(C,b),p.lineTo(j,y);p.clip(),p.transform(D[0],D[2],D[1],D[3],C,b),p.translate(T[0]-R,T[3]-q),p.scale(s/i,-s/i),p.drawImage(M.canvas,0,0),p.restore()}}),(0,a.releaseCanvas)(M),n.push(M.canvas),m&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,v.getTriangles().forEach(function(e,t,a){var r=e.target,o=(r[0][0]-E[0])/g,n=-(r[0][1]-E[1])/g,i=(r[1][0]-E[0])/g,s=-(r[1][1]-E[1])/g,l=(r[2][0]-E[0])/g,c=-(r[2][1]-E[1])/g;p.beginPath(),p.moveTo(i,s),p.lineTo(o,n),p.lineTo(l,c),p.closePath(),p.stroke()}),p.restore()),p.canvas}exports.canvasPool=n;
},{"./extent.js":"L0Vw","./dom.js":"FYLQ","./proj.js":"VAQc","./math.js":"qAK2"}],"o8Mp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=c(require("../events/EventType.js")),r=c(require("../Tile.js")),n=c(require("../TileState.js")),i=c(require("./Triangulation.js")),o=require("../reproj.js"),u=require("../math.js"),s=require("../extent.js"),a=require("../events.js"),l=require("../dom.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function h(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=_(e,"string");return"symbol"===f(t)?t:String(t)}function _(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=v(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=O();return function(){var r,n=R(e);if(t){var i=R(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(c){T(p,r.default);var f=E(p);function p(t,r,a,l,c,h,y,_,g,v,T,b){var E;d(this,p),(E=f.call(this,c,n.default.IDLE,{interpolate:!!b})).renderEdges_=void 0!==T&&T,E.pixelRatio_=y,E.gutter_=_,E.canvas_=null,E.sourceTileGrid_=r,E.targetTileGrid_=l,E.wrappedTileCoord_=h||c,E.sourceTiles_=[],E.sourcesListenerKeys_=null,E.sourceZ_=0;var j=l.getTileCoordExtent(E.wrappedTileCoord_),O=E.targetTileGrid_.getExtent(),R=E.sourceTileGrid_.getExtent(),w=O?(0,s.getIntersection)(j,O):j;if(0===(0,s.getArea)(w))return E.state=n.default.EMPTY,m(E);var x=t.getExtent();x&&(R=R?(0,s.getIntersection)(R,x):x);var P=l.getResolution(E.wrappedTileCoord_[0]),S=(0,o.calculateSourceExtentResolution)(t,a,w,P);if(!isFinite(S)||S<=0)return E.state=n.default.EMPTY,m(E);var D=void 0!==v?v:e.ERROR_THRESHOLD;if(E.triangulation_=new i.default(t,a,w,R,S*D,P),0===E.triangulation_.getTriangles().length)return E.state=n.default.EMPTY,m(E);E.sourceZ_=r.getZForResolution(S);var L=E.triangulation_.calculateSourceExtent();if(R&&(t.canWrapX()?(L[1]=(0,u.clamp)(L[1],R[1],R[3]),L[3]=(0,u.clamp)(L[3],R[1],R[3])):L=(0,s.getIntersection)(L,R)),(0,s.getArea)(L)){for(var C=r.getTileRangeForExtentAndZ(L,E.sourceZ_),G=C.minX;G<=C.maxX;G++)for(var I=C.minY;I<=C.maxY;I++){var q=g(E.sourceZ_,G,I,y);q&&E.sourceTiles_.push(q)}0===E.sourceTiles_.length&&(E.state=n.default.EMPTY)}else E.state=n.default.EMPTY;return E}return h(p,[{key:"getImage",value:function(){return this.canvas_}},{key:"reproject_",value:function(){var e=this,t=[];if(this.sourceTiles_.forEach(function(r){r&&r.getState()==n.default.LOADED&&t.push({extent:e.sourceTileGrid_.getTileCoordExtent(r.tileCoord),image:r.getImage()})}),this.sourceTiles_.length=0,0===t.length)this.state=n.default.ERROR;else{var r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),u="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],a=this.targetTileGrid_.getResolution(r),l=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,o.render)(u,s,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),a,c,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=n.default.LOADED}this.changed()}},{key:"load",value:function(){var e=this;if(this.state==n.default.IDLE){this.state=n.default.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i){var o=i.getState();if(o==n.default.IDLE||o==n.default.LOADING){r++;var u=(0,a.listen)(i,t.default.CHANGE,function(e){var t=i.getState();t!=n.default.LOADED&&t!=n.default.ERROR&&t!=n.default.EMPTY||((0,a.unlistenByKey)(u),0===--r&&(this.unlistenSources_(),this.reproject_()))},e);e.sourcesListenerKeys_.push(u)}}),0===r?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,t,r){e.getState()==n.default.IDLE&&e.load()})}}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(a.unlistenByKey),this.sourcesListenerKeys_=null}},{key:"release",value:function(){this.canvas_&&((0,l.releaseCanvas)(this.canvas_.getContext("2d")),o.canvasPool.push(this.canvas_),this.canvas_=null),g(R(p.prototype),"release",this).call(this)}}]),p}(),x=w;exports.default=x;
},{"./common.js":"bYOC","../events/EventType.js":"GUXn","../Tile.js":"iz3u","../TileState.js":"FoaO","./Triangulation.js":"gmdY","../reproj.js":"BOkO","../math.js":"qAK2","../extent.js":"L0Vw","../events.js":"MGag","../dom.js":"FYLQ"}],"m5CX":[function(require,module,exports) {
"use strict";function t(i){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(i)}function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,r(e.key),e)}}function e(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(i){var n=a(i,"string");return"symbol"===t(n)?n:String(n)}function a(i,n){if("object"!==t(i)||null===i)return i;var e=i[Symbol.toPrimitive];if(void 0!==e){var r=e.call(i,n||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=m,exports.default=void 0;var o=function(){function t(n,e,r,a){i(this,t),this.minX=n,this.maxX=e,this.minY=r,this.maxY=a}return e(t,[{key:"contains",value:function(t){return this.containsXY(t[1],t[2])}},{key:"containsTileRange",value:function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}},{key:"containsXY",value:function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY}},{key:"equals",value:function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}},{key:"extend",value:function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}},{key:"getHeight",value:function(){return this.maxY-this.minY+1}},{key:"getSize",value:function(){return[this.getWidth(),this.getHeight()]}},{key:"getWidth",value:function(){return this.maxX-this.minX+1}},{key:"intersects",value:function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}]),t}();function m(t,i,n,e,r){return void 0!==r?(r.minX=t,r.maxX=i,r.minY=n,r.maxY=e,r):new o(t,i,n,e)}var u=o;exports.default=u;
},{}],"ISPk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("./Layer.js")),t=d(require("../../ImageTile.js")),r=d(require("../../reproj/Tile.js")),i=d(require("../../TileRange.js")),n=d(require("../../TileState.js")),o=require("../../transform.js"),a=require("../../array.js"),l=require("../../extent.js"),s=require("../../proj.js"),u=require("../../util.js"),c=require("../../size.js");function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,v(i.key),i)}}function p(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=y(e,"string");return"symbol"===f(t)?t:String(t)}function y(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function T(){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=m(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=S();return function(){var r,i=E(e);if(t){var n=E(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return w(this,r)}}function w(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(d){x(h,e.default);var f=R(h);function h(e){var t;return g(this,h),(t=f.call(this,e)).extentChanged=!0,t.renderedExtent_=null,t.renderedPixelRatio,t.renderedProjection=null,t.renderedRevision,t.renderedTiles=[],t.newTiles_=!1,t.tmpExtent=(0,l.createEmpty)(),t.tmpTileRange_=new i.default(0,0,0,0),t}return p(h,[{key:"isDrawableTile",value:function(e){var t=this.getLayer(),r=e.getState(),i=t.getUseInterimTilesOnError();return r==n.default.LOADED||r==n.default.EMPTY||r==n.default.ERROR&&!i}},{key:"getTile",value:function(e,t,r,i){var o=i.pixelRatio,a=i.viewState.projection,l=this.getLayer(),s=l.getSource().getTile(e,t,r,o,a);return s.getState()==n.default.ERROR&&l.getUseInterimTilesOnError()&&l.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(s)||(s=s.getInterimTile()),s}},{key:"getData",value:function(e){var i=this.frameState;if(!i)return null;var a=this.getLayer(),s=(0,o.apply)(i.pixelToCoordinateTransform,e.slice()),u=a.getExtent();if(u&&!(0,l.containsCoordinate)(u,s))return null;for(var d=i.pixelRatio,f=i.viewState.projection,g=i.viewState,h=a.getRenderSource(),p=h.getTileGridForProjection(g.projection),v=h.getTilePixelRatio(i.pixelRatio),y=p.getZForResolution(g.resolution);y>=p.getMinZoom();--y){var T=p.getTileCoordForCoordAndZ(s,y),m=h.getTile(y,T[1],T[2],d,f);if(!(m instanceof t.default||m instanceof r.default)||m instanceof r.default&&m.getState()===n.default.EMPTY)return null;if(m.getState()===n.default.LOADED){var x=p.getOrigin(y),b=(0,c.toSize)(p.getTileSize(y)),R=p.getResolution(y),w=Math.floor(v*((s[0]-x[0])/R-T[1]*b[0])),j=Math.floor(v*((x[1]-s[1])/R-T[2]*b[1])),S=Math.round(v*h.getGutterForProjection(g.projection));return this.getImageData(m.getImage(),w+S,j+S)}}return null}},{key:"loadedTileCallback",value:function(e,t,r){return!!this.isDrawableTile(r)&&T(E(h.prototype),"loadedTileCallback",this).call(this,e,t,r)}},{key:"prepareFrame",value:function(e){return!!this.getLayer().getSource()}},{key:"renderFrame",value:function(e,t){var r=e.layerStatesArray[e.layerIndex],i=e.viewState,c=i.projection,d=i.resolution,f=i.center,g=i.rotation,h=e.pixelRatio,p=this.getLayer(),v=p.getSource(),y=v.getRevision(),T=v.getTileGridForProjection(c),m=T.getZForResolution(d,v.zDirection),x=T.getResolution(m),b=e.extent,R=e.viewState.resolution,w=v.getTilePixelRatio(h),j=Math.round((0,l.getWidth)(b)/R*h),S=Math.round((0,l.getHeight)(b)/R*h),E=r.extent&&(0,s.fromUserExtent)(r.extent,c);E&&(b=(0,l.getIntersection)(b,(0,s.fromUserExtent)(r.extent,c)));var P=x*j/2/w,C=x*S/2/w,O=[f[0]-P,f[1]-C,f[0]+P,f[1]+C],_=T.getTileRangeForExtentAndZ(b,m),I={};I[m]={};var k=this.createLoadedTileFinder(v,c,I),D=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;for(var q=g?(0,l.getRotatedViewport)(i.center,R,g,e.size):void 0,A=_.minX;A<=_.maxX;++A)for(var F=_.minY;F<=_.maxY;++F)if(!g||T.tileCoordIntersectsViewport([m,A,F],q)){var U=this.getTile(m,A,F,e);if(this.isDrawableTile(U)){var L=(0,u.getUid)(this);if(U.getState()==n.default.LOADED){I[m][U.tileCoord.toString()]=U;var z=U.inTransition(L);z&&1!==r.opacity&&(U.endTransition(L),z=!1),this.newTiles_||!z&&this.renderedTiles.includes(U)||(this.newTiles_=!0)}if(1===U.getAlpha(L,e.time))continue}var Z=T.getTileCoordChildTileRange(U.tileCoord,M,D),Y=!1;Z&&(Y=k(m+1,Z)),Y||T.forEachTileCoordParentTileRange(U.tileCoord,k,M,D)}var G=x/d*h/w;(0,o.compose)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/h,1/h,g,-j/2,-S/2);var K=(0,o.toString)(this.pixelTransform);this.useContainer(t,K,this.getBackground(e));var V=this.context,X=V.canvas;(0,o.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,o.compose)(this.tempTransform,j/2,S/2,G,G,0,-j/2,-S/2),X.width!=j||X.height!=S?(X.width=j,X.height=S):this.containerReused||V.clearRect(0,0,j,S),E&&this.clipUnrotated(V,e,E),v.getInterpolate()||(V.imageSmoothingEnabled=!1),this.preRender(V,e),this.renderedTiles.length=0;var B,N,Q,H=Object.keys(I).map(Number);H.sort(a.ascending),1!==r.opacity||this.containerReused&&!v.getOpaque(e.viewState.projection)?(B=[],N=[]):H=H.reverse();for(var W=H.length-1;W>=0;--W){var J=H[W],$=v.getTilePixelSize(J,h,c),ee=T.getResolution(J)/x,te=$[0]*ee*G,re=$[1]*ee*G,ie=T.getTileCoordForCoordAndZ((0,l.getTopLeft)(O),J),ne=T.getTileCoordExtent(ie),oe=(0,o.apply)(this.tempTransform,[w*(ne[0]-O[0])/x,w*(O[3]-ne[3])/x]),ae=w*v.getGutterForProjection(c),le=I[J];for(var se in le){var ue=le[se],ce=ue.tileCoord,de=ie[1]-ce[1],fe=Math.round(oe[0]-(de-1)*te),ge=ie[2]-ce[2],he=Math.round(oe[1]-(ge-1)*re),pe=Math.round(oe[0]-de*te),ve=Math.round(oe[1]-ge*re),ye=fe-pe,Te=he-ve,me=m===J,xe=me&&1!==ue.getAlpha((0,u.getUid)(this),e.time),be=!1;if(!xe)if(B){Q=[pe,ve,pe+ye,ve,pe+ye,ve+Te,pe,ve+Te];for(var Re=0,we=B.length;Re<we;++Re)if(m!==J&&J<N[Re]){var je=B[Re];(0,l.intersects)([pe,ve,pe+ye,ve+Te],[je[0],je[3],je[4],je[7]])&&(be||(V.save(),be=!0),V.beginPath(),V.moveTo(Q[0],Q[1]),V.lineTo(Q[2],Q[3]),V.lineTo(Q[4],Q[5]),V.lineTo(Q[6],Q[7]),V.moveTo(je[6],je[7]),V.lineTo(je[4],je[5]),V.lineTo(je[2],je[3]),V.lineTo(je[0],je[1]),V.clip())}B.push(Q),N.push(J)}else V.clearRect(pe,ve,ye,Te);this.drawTileImage(ue,e,pe,ve,ye,Te,ae,me),B&&!xe?(be&&V.restore(),this.renderedTiles.unshift(ue)):this.renderedTiles.push(ue),this.updateUsedTiles(e.usedTiles,v,ue)}}return this.renderedRevision=y,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!(0,l.equals)(this.renderedExtent_,O),this.renderedExtent_=O,this.renderedPixelRatio=h,this.renderedProjection=c,this.manageTilePyramid(e,v,T,h,c,b,m,p.getPreload()),this.scheduleExpireCache(e,v),this.postRender(V,e),r.extent&&V.restore(),V.imageSmoothingEnabled=!0,K!==X.style.transform&&(X.style.transform=K),this.container}},{key:"drawTileImage",value:function(e,t,r,i,n,o,a,l){var s=this.getTileImage(e);if(s){var c=(0,u.getUid)(this),d=t.layerStatesArray[t.layerIndex],f=d.opacity*(l?e.getAlpha(c,t.time):1),g=f!==this.context.globalAlpha;g&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(s,a,a,s.width-2*a,s.height-2*a,r,i,n,o),g&&this.context.restore(),f!==d.opacity?t.animate=!0:l&&e.endTransition(c)}}},{key:"getImage",value:function(){var e=this.context;return e?e.canvas:null}},{key:"getTileImage",value:function(e){return e.getImage()}},{key:"scheduleExpireCache",value:function(e,t){if(t.canExpireCache()){var r=function(e,t,r){var i=(0,u.getUid)(e);i in r.usedTiles&&e.expireCache(r.viewState.projection,r.usedTiles[i])}.bind(null,t);e.postRenderFunctions.push(r)}}},{key:"updateUsedTiles",value:function(e,t,r){var i=(0,u.getUid)(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}},{key:"manageTilePyramid",value:function(e,t,r,i,o,a,s,c,d){var f=(0,u.getUid)(t);f in e.wantedTiles||(e.wantedTiles[f]={});var g,h,p,v,y,T,m=e.wantedTiles[f],x=e.tileQueue,b=r.getMinZoom(),R=e.viewState.rotation,w=R?(0,l.getRotatedViewport)(e.viewState.center,e.viewState.resolution,R,e.size):void 0,j=0;for(T=b;T<=s;++T)for(h=r.getTileRangeForExtentAndZ(a,T,h),p=r.getResolution(T),v=h.minX;v<=h.maxX;++v)for(y=h.minY;y<=h.maxY;++y)R&&!r.tileCoordIntersectsViewport([T,v,y],w)||(s-T<=c?(++j,(g=t.getTile(T,v,y,i,o)).getState()==n.default.IDLE&&(m[g.getKey()]=!0,x.isKeyQueued(g.getKey())||x.enqueue([g,f,r.getTileCoordCenter(g.tileCoord),p])),void 0!==d&&d(g)):t.useTile(T,v,y,o));t.updateCacheSize(j,o)}}]),h}(),C=P;exports.default=C;
},{"./Layer.js":"D55b","../../ImageTile.js":"j3TM","../../reproj/Tile.js":"o8Mp","../../TileRange.js":"m5CX","../../TileState.js":"FoaO","../../transform.js":"Ln8D","../../array.js":"o0G8","../../extent.js":"L0Vw","../../proj.js":"VAQc","../../util.js":"KA50","../../size.js":"d9VJ"}],"noax":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("../VectorContext.js")),e=require("../../colorlike.js"),i=require("../../transform.js"),a=require("../canvas.js"),r=require("../../array.js"),n=require("../../extent.js"),s=require("../../math.js"),o=require("../../geom/flat/transform.js"),l=require("../../geom/SimpleGeometry.js");function h(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,c(a.key),a)}}function g(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=m(t,"string");return"symbol"===f(e)?e:String(e)}function m(t,e){if("object"!==f(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var a=i.call(t,e||"default");if("object"!==f(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function x(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}function S(t,e){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=p();return function(){var i,a=k(t);if(e){var r=k(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return y(this,i)}}function y(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var T=function(h){x(u,t.default);var f=d(u);function u(t,e,a,r,n,o,l){var h;return _(this,u),(h=f.call(this)).context_=t,h.pixelRatio_=e,h.extent_=a,h.transform_=r,h.transformRotation_=r?(0,s.toFixed)(Math.atan2(r[1],r[0]),10):0,h.viewRotation_=n,h.squaredTolerance_=o,h.userTransform_=l,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=(0,i.create)(),h}return g(u,[{key:"drawImages_",value:function(t,e,a,r){if(this.image_){var n=(0,o.transform2D)(t,e,a,r,this.transform_,this.pixelCoordinates_),s=this.context_,l=this.tmpLocalTransform_,h=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=h*this.imageOpacity_);var f=this.imageRotation_;0===this.transformRotation_&&(f-=this.viewRotation_),this.imageRotateWithView_&&(f+=this.viewRotation_);for(var _=0,u=n.length;_<u;_+=2){var g=n[_]-this.imageAnchorX_,c=n[_+1]-this.imageAnchorY_;if(0!==f||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var m=g+this.imageAnchorX_,x=c+this.imageAnchorY_;(0,i.compose)(l,m,x,1,1,f,-m,-x),s.setTransform.apply(s,l),s.translate(m,x),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,c,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=h)}}},{key:"drawText_",value:function(t,e,i,a){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=(0,o.transform2D)(t,e,i,a,this.transform_,this.pixelCoordinates_),n=this.context_,s=this.textRotation_;for(0===this.transformRotation_&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=a){var l=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(n.translate(l-this.textOffsetX_,h-this.textOffsetY_),n.rotate(s),n.translate(this.textOffsetX_,this.textOffsetY_),n.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&n.strokeText(this.text_,0,0),this.textFillState_&&n.fillText(this.text_,0,0),n.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&n.strokeText(this.text_,l,h),this.textFillState_&&n.fillText(this.text_,l,h))}}}},{key:"moveToLineTo_",value:function(t,e,i,a,r){var n=this.context_,s=(0,o.transform2D)(t,e,i,a,this.transform_,this.pixelCoordinates_);n.moveTo(s[0],s[1]);var l=s.length;r&&(l-=2);for(var h=2;h<l;h+=2)n.lineTo(s[h],s[h+1]);return r&&n.closePath(),i}},{key:"drawRings_",value:function(t,e,i,a){for(var r=0,n=i.length;r<n;++r)e=this.moveToLineTo_(t,e,i[r],a,!0);return e}},{key:"drawCircle",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,n.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,l.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],a=e[3]-e[1],r=Math.sqrt(i*i+a*a),s=this.context_;s.beginPath(),s.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}},{key:"setStyle",value:function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}},{key:"setTransform",value:function(t){this.transform_=t}},{key:"drawGeometry",value:function(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}},{key:"drawFeature",value:function(t,e){var i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}},{key:"drawGeometryCollection",value:function(t){for(var e=t.getGeometriesArray(),i=0,a=e.length;i<a;++i)this.drawGeometry(e[i])}},{key:"drawPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}},{key:"drawMultiPoint",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}},{key:"drawLineString",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,n.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}}},{key:"drawMultiLineString",value:function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if((0,n.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,a=t.getFlatCoordinates(),r=0,s=t.getEnds(),o=t.getStride();i.beginPath();for(var l=0,h=s.length;l<h;++l)r=this.moveToLineTo_(a,r,s[l],o,!1);i.stroke()}if(""!==this.text_){var f=t.getFlatMidpoints();this.drawText_(f,0,f.length,2)}}}},{key:"drawPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,n.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}},{key:"drawMultiPolygon",value:function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,n.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),a=0,r=t.getEndss(),s=t.getStride();e.beginPath();for(var o=0,l=r.length;o<l;++o){var h=r[o];a=this.drawRings_(i,a,h,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var f=t.getFlatInteriorPoints();this.drawText_(f,0,f.length,2)}}}},{key:"setContextFillState_",value:function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}},{key:"setContextStrokeState_",value:function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,r.equals)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}},{key:"setContextTextState_",value:function(t){var e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:a.defaultTextAlign;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=r&&(i.textAlign=r,e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}},{key:"setFillStrokeStyle",value:function(t,i){var r=this;if(t){var n=t.getColor();this.fillState_={fillStyle:(0,e.asColorLike)(n||a.defaultFillStyle)}}else this.fillState_=null;if(i){var s=i.getColor(),o=i.getLineCap(),l=i.getLineDash(),h=i.getLineDashOffset(),f=i.getLineJoin(),_=i.getWidth(),u=i.getMiterLimit(),g=l||a.defaultLineDash;this.strokeState_={lineCap:void 0!==o?o:a.defaultLineCap,lineDash:1===this.pixelRatio_?g:g.map(function(t){return t*r.pixelRatio_}),lineDashOffset:(h||a.defaultLineDashOffset)*this.pixelRatio_,lineJoin:void 0!==f?f:a.defaultLineJoin,lineWidth:(void 0!==_?_:a.defaultLineWidth)*this.pixelRatio_,miterLimit:void 0!==u?u:a.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(s||a.defaultStrokeStyle)}}else this.strokeState_=null}},{key:"setImageStyle",value:function(t){var e;if(t&&(e=t.getSize())){var i=t.getPixelRatio(this.pixelRatio_),a=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=a[0]*i,this.imageAnchorY_=a[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();var n=t.getScaleArray();this.imageScale_=[n[0]*this.pixelRatio_/i,n[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}else this.image_=null}},{key:"setTextStyle",value:function(t){if(t){var i=t.getFill();if(i){var r=i.getColor();this.textFillState_={fillStyle:(0,e.asColorLike)(r||a.defaultFillStyle)}}else this.textFillState_=null;var n=t.getStroke();if(n){var s=n.getColor(),o=n.getLineCap(),l=n.getLineDash(),h=n.getLineDashOffset(),f=n.getLineJoin(),_=n.getWidth(),u=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:a.defaultLineCap,lineDash:l||a.defaultLineDash,lineDashOffset:h||a.defaultLineDashOffset,lineJoin:void 0!==f?f:a.defaultLineJoin,lineWidth:void 0!==_?_:a.defaultLineWidth,miterLimit:void 0!==u?u:a.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(s||a.defaultStrokeStyle)}}else this.textStrokeState_=null;var g=t.getFont(),c=t.getOffsetX(),m=t.getOffsetY(),x=t.getRotateWithView(),S=t.getRotation(),d=t.getScaleArray(),y=t.getText(),v=t.getTextAlign(),p=t.getTextBaseline();this.textState_={font:void 0!==g?g:a.defaultFont,textAlign:void 0!==v?v:a.defaultTextAlign,textBaseline:void 0!==p?p:a.defaultTextBaseline},this.text_=void 0!==y?Array.isArray(y)?y.reduce(function(t,e,i){return t+(i%2?" ":e)},""):y:"",this.textOffsetX_=void 0!==c?this.pixelRatio_*c:0,this.textOffsetY_=void 0!==m?this.pixelRatio_*m:0,this.textRotateWithView_=void 0!==x&&x,this.textRotation_=void 0!==S?S:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}else this.text_=""}}]),u}(),w=T;exports.default=w;
},{"../VectorContext.js":"JM2S","../../colorlike.js":"nZyX","../../transform.js":"Ln8D","../canvas.js":"RKIq","../../array.js":"o0G8","../../extent.js":"L0Vw","../../math.js":"qAK2","../../geom/flat/transform.js":"v1jb","../../geom/SimpleGeometry.js":"JVJN"}],"TZKB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Fill",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Icon",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"IconImage",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"RegularShape",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Stroke",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Style",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return s.default}});var e=f(require("./style/Circle.js")),t=f(require("./style/Fill.js")),r=f(require("./style/Icon.js")),u=f(require("./style/IconImage.js")),n=f(require("./style/Image.js")),l=f(require("./style/RegularShape.js")),o=f(require("./style/Stroke.js")),i=f(require("./style/Style.js")),s=f(require("./style/Text.js"));function f(e){return e&&e.__esModule?e:{default:e}}
},{"./style/Circle.js":"D2sG","./style/Fill.js":"sqJC","./style/Icon.js":"lB4R","./style/IconImage.js":"rGfC","./style/Image.js":"UXGG","./style/RegularShape.js":"iQYs","./style/Stroke.js":"dz0b","./style/Style.js":"JtXZ","./style/Text.js":"kcKm"}],"UsFS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HIT_DETECT_RESOLUTION=void 0,exports.createHitDetectionImageData=s,exports.hitDetect=g;var e=n(require("./Immediate.js")),t=require("../../style.js"),r=require("../../array.js"),a=require("../../math.js"),i=require("../../dom.js"),o=require("../../extent.js");function n(e){return e&&e.__esModule?e:{default:e}}var l=.5;function s(a,n,s,g,h,c,v){var u=a[0]*l,f=a[1]*l,d=(0,i.createCanvasContext2D)(u,f);d.imageSmoothingEnabled=!1;for(var m=d.canvas,p=new e.default(d,l,h,null,v),y=s.length,S=Math.floor(16777215/y),x={},I=1;I<=y;++I){var T=s[I-1],C=T.getStyleFunction()||g;if(g){var M=C(T,c);if(M){Array.isArray(M)||(M=[M]);for(var w=(I*S).toString(16).padStart(7,"#00000"),D=0,j=M.length;D<j;++D){var E=M[D],O=E.getGeometryFunction()(T);if(O&&(0,o.intersects)(h,O.getExtent())){var _=E.clone(),q=_.getFill();q&&q.setColor(w);var R=_.getStroke();R&&(R.setColor(w),R.setLineDash(null)),_.setText(void 0);var b=E.getImage();if(b&&0!==b.getOpacity()){var z=b.getImageSize();if(!z)continue;var A=(0,i.createCanvasContext2D)(z[0],z[1],void 0,{alpha:!1}),G=A.canvas;A.fillStyle=w,A.fillRect(0,0,G.width,G.height),_.setImage(new t.Icon({img:G,imgSize:z,anchor:b.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:b.getOrigin(),opacity:1,size:b.getSize(),scale:b.getScale(),rotation:b.getRotation(),rotateWithView:b.getRotateWithView()}))}var L=_.getZIndex()||0,U=x[L];U||(U={},x[L]=U,U.Polygon=[],U.Circle=[],U.LineString=[],U.Point=[]);var F=O.getType();if("GeometryCollection"===F)for(var H=O.getGeometriesArrayRecursive(),N=0,P=H.length;N<P;++N){var k=H[N];U[k.getType().replace("Multi","")].push(k,_)}else U[F.replace("Multi","")].push(O,_)}}}}}for(var V=Object.keys(x).map(Number).sort(r.ascending),W=0,X=V.length;W<X;++W){var Y=x[V[W]];for(var Z in Y)for(var B=Y[Z],J=0,K=B.length;J<K;J+=2){p.setStyle(B[J+1]);for(var Q=0,$=n.length;Q<$;++Q)p.setTransform(n[Q]),p.drawGeometry(B[J])}}return d.getImageData(0,0,m.width,m.height)}function g(e,t,r){var i=[];if(r){var o=Math.floor(Math.round(e[0])*l),n=Math.floor(Math.round(e[1])*l),s=4*((0,a.clamp)(o,0,r.width-1)+(0,a.clamp)(n,0,r.height-1)*r.width),g=r.data[s],h=r.data[s+1],c=r.data[s+2]+256*(h+256*g),v=Math.floor(16777215/t.length);c&&c%v==0&&i.push(t[c/v-1])}return i}exports.HIT_DETECT_RESOLUTION=l;
},{"./Immediate.js":"noax","../../style.js":"TZKB","../../array.js":"o0G8","../../math.js":"qAK2","../../dom.js":"FYLQ","../../extent.js":"L0Vw"}],"iWoQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOrder=n,exports.getSquaredTolerance=a,exports.getTolerance=l,exports.renderFeature=d;var e=r(require("../ImageState.js")),t=require("../util.js");function r(e){return e&&e.__esModule?e:{default:e}}var g=.5,i={Point:I,LineString:v,Polygon:y,MultiPoint:S,MultiLineString:T,MultiPolygon:s,GeometryCollection:f,Circle:o};function n(e,r){return parseInt((0,t.getUid)(e),10)-parseInt((0,t.getUid)(r),10)}function a(e,t){var r=l(e,t);return r*r}function l(e,t){return g*e/t}function o(e,t,r,g,i){var n=r.getFill(),a=r.getStroke();if(n||a){var l=e.getBuilder(r.getZIndex(),"Circle");l.setFillStrokeStyle(n,a),l.drawCircle(t,g)}var o=r.getText();if(o&&o.getText()){var d=(i||e).getBuilder(r.getZIndex(),"Text");d.setTextStyle(o),d.drawText(t,g)}}function d(t,r,g,i,n,a,l){var o=!1,d=g.getImage();if(d){var x=d.getImageState();x==e.default.LOADED||x==e.default.ERROR?d.unlistenImageChange(n):(x==e.default.IDLE&&d.load(),d.listenImageChange(n),o=!0)}return u(t,r,g,i,a,l),o}function u(e,t,r,g,n,a){var l=r.getGeometryFunction()(t);if(l){var o=l.simplifyTransformed(g,n);if(r.getRenderer())x(e,o,r,t);else(0,i[o.getType()])(e,o,r,t,a)}}function x(e,t,r,g){if("GeometryCollection"!=t.getType())e.getBuilder(r.getZIndex(),"Default").drawCustom(t,g,r.getRenderer(),r.getHitDetectionRenderer());else for(var i=t.getGeometries(),n=0,a=i.length;n<a;++n)x(e,i[n],r,g)}function f(e,t,r,g,n){var a,l,o=t.getGeometriesArray();for(a=0,l=o.length;a<l;++a){(0,i[o[a].getType()])(e,o[a],r,g,n)}}function v(e,t,r,g,i){var n=r.getStroke();if(n){var a=e.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,n),a.drawLineString(t,g)}var l=r.getText();if(l&&l.getText()){var o=(i||e).getBuilder(r.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,g)}}function T(e,t,r,g,i){var n=r.getStroke();if(n){var a=e.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,n),a.drawMultiLineString(t,g)}var l=r.getText();if(l&&l.getText()){var o=(i||e).getBuilder(r.getZIndex(),"Text");o.setTextStyle(l),o.drawText(t,g)}}function s(e,t,r,g,i){var n=r.getFill(),a=r.getStroke();if(a||n){var l=e.getBuilder(r.getZIndex(),"Polygon");l.setFillStrokeStyle(n,a),l.drawMultiPolygon(t,g)}var o=r.getText();if(o&&o.getText()){var d=(i||e).getBuilder(r.getZIndex(),"Text");d.setTextStyle(o),d.drawText(t,g)}}function I(t,r,g,i,n){var a,l=g.getImage(),o=g.getText();if(l){if(l.getImageState()!=e.default.LOADED)return;var d=t;if(n){var u=l.getDeclutterMode();if("none"!==u)if(d=n,"obstacle"===u){var x=t.getBuilder(g.getZIndex(),"Image");x.setImageStyle(l,a),x.drawPoint(r,i)}else o&&o.getText()&&(a={})}var f=d.getBuilder(g.getZIndex(),"Image");f.setImageStyle(l,a),f.drawPoint(r,i)}if(o&&o.getText()){var v=t;n&&(v=n);var T=v.getBuilder(g.getZIndex(),"Text");T.setTextStyle(o,a),T.drawText(r,i)}}function S(t,r,g,i,n){var a,l=g.getImage(),o=g.getText();if(l){if(l.getImageState()!=e.default.LOADED)return;var d=t;if(n){var u=l.getDeclutterMode();if("none"!==u)if(d=n,"obstacle"===u){var x=t.getBuilder(g.getZIndex(),"Image");x.setImageStyle(l,a),x.drawMultiPoint(r,i)}else o&&o.getText()&&(a={})}var f=d.getBuilder(g.getZIndex(),"Image");f.setImageStyle(l,a),f.drawMultiPoint(r,i)}if(o&&o.getText()){var v=t;n&&(v=n);var T=v.getBuilder(g.getZIndex(),"Text");T.setTextStyle(o,a),T.drawText(r,i)}}function y(e,t,r,g,i){var n=r.getFill(),a=r.getStroke();if(n||a){var l=e.getBuilder(r.getZIndex(),"Polygon");l.setFillStrokeStyle(n,a),l.drawPolygon(t,g)}var o=r.getText();if(o&&o.getText()){var d=(i||e).getBuilder(r.getZIndex(),"Text");d.setTextStyle(o),d.drawText(t,g)}}
},{"../ImageState.js":"FoaO","../util.js":"KA50"}],"oSpf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../../render/canvas/BuilderGroup.js")),t=f(require("../../render/canvas/ExecutorGroup.js")),r=f(require("./TileLayer.js")),n=f(require("../../TileState.js")),o=f(require("../../ViewHint.js")),i=require("../../render/canvas/hitdetect.js"),a=require("../../transform.js"),l=require("../../extent.js"),u=require("../vector.js"),d=require("../../util.js"),s=require("../../size.js"),c=require("../../coordinate.js");function f(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function h(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=T(e,"string");return"symbol"===g(t)?t:String(t)}function T(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function R(){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=m(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=E();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},I={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},O=function(f){b(v,r.default);var g=x(v);function v(e){var t;return p(this,v),(t=g.call(this,e)).boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(C(t)),t.renderedLayerRevision_,t.renderedPixelToCoordinateTransform_=null,t.renderedRotation_,t.tmpTransform_=(0,a.create)(),t}return h(v,[{key:"prepareTile",value:function(e,t,r){var o,i=e.getState();return i!==n.default.LOADED&&i!==n.default.ERROR||(this.updateExecutorGroup_(e,t,r),this.tileImageNeedsRender_(e)&&(o=!0)),o}},{key:"getTile",value:function(e,t,r,n){var i=n.pixelRatio,a=n.viewState,l=a.resolution,u=a.projection,d=this.getLayer(),s=d.getSource().getTile(e,t,r,i,u),c=n.viewHints,f=!(c[o.default.ANIMATING]||c[o.default.INTERACTING]);return!f&&s.wantedResolution||(s.wantedResolution=l),this.prepareTile(s,i,u)&&(f||Date.now()-n.time<8)&&"vector"!==d.getRenderMode()&&this.renderTileImage_(s,n),R(_(v.prototype),"getTile",this).call(this,e,t,r,n)}},{key:"isDrawableTile",value:function(e){var t=this.getLayer();return R(_(v.prototype),"isDrawableTile",this).call(this,e)&&("vector"===t.getRenderMode()?(0,d.getUid)(t)in e.executorGroups:e.hasContext(t))}},{key:"getTileImage",value:function(e){return e.getImage(this.getLayer())}},{key:"prepareFrame",value:function(e){var t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),R(_(v.prototype),"prepareFrame",this).call(this,e)}},{key:"updateExecutorGroup_",value:function(r,o,i){var a=this,s=this.getLayer(),c=s.getRevision(),f=s.getRenderOrder()||null,g=r.wantedResolution,p=r.getReplayState(s);if(p.dirty||p.renderedResolution!==g||p.renderedRevision!=c||p.renderedRenderOrder!=f){var v=s.getSource(),h=s.getDeclutter(),y=v.getTileGrid(),T=v.getTileGridForProjection(i).getTileCoordExtent(r.wrappedTileCoord),R=v.getSourceTiles(o,i,r),m=(0,d.getUid)(s);delete r.hitDetectionImageData[m],r.executorGroups[m]=[],h&&(r.declutterExecutorGroups[m]=[]),p.dirty=!1;for(var b=function(){var i=R[S];if(i.getState()!=n.default.LOADED)return"continue";var d=i.tileCoord,c=y.getTileCoordExtent(d),b=(0,l.getIntersection)(T,c),x=(0,l.buffer)(b,s.getRenderBuffer()*g,a.tmpExtent),w=(0,l.equals)(c,b)?null:x,C=new e.default(0,x,g,o),E=h?new e.default(0,b,g,o):void 0,_=(0,u.getSquaredTolerance)(g,o),j=function(e){var t,r=e.getStyleFunction()||s.getStyleFunction();if(r&&(t=r(e,g)),t){var n=this.renderFeature(e,_,t,C,E);p.dirty=p.dirty||n}},I=i.getFeatures();f&&f!==p.renderedRenderOrder&&I.sort(f);for(var O=0,P=I.length;O<P;++O){var D=I[O];w&&!(0,l.intersects)(w,D.getGeometry().getExtent())||j.call(a,D)}var L=C.finish(),G="vector"!==s.getRenderMode()&&h&&1===R.length?null:b,A=new t.default(G,g,o,v.getOverlaps(),L,s.getRenderBuffer());if(r.executorGroups[m].push(A),E){var F=new t.default(null,g,o,v.getOverlaps(),E.finish(),s.getRenderBuffer());r.declutterExecutorGroups[m].push(F)}},S=0,x=R.length;S<x;++S)b();p.renderedRevision=c,p.renderedRenderOrder=f,p.renderedResolution=g}}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,o){var i=t.viewState.resolution,a=t.viewState.rotation;r=null==r?0:r;var u=this.getLayer(),s=u.getSource().getTileGridForProjection(t.viewState.projection),c=(0,l.boundingExtent)([e]);(0,l.buffer)(c,i*r,c);for(var f,g={},p=function(e,t,r){var i=e.getId();void 0===i&&(i=(0,d.getUid)(e));var a=g[i];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return g[i]=!0,o.splice(o.lastIndexOf(a),1),n(e,u,t);a.geometry=t,a.distanceSq=r}}else{if(0===r)return g[i]=!0,n(e,u,t);o.push(g[i]={feature:e,layer:u,geometry:t,distanceSq:r,callback:n})}},v=this.renderedTiles,h=function(){var n=v[y],o=s.getTileCoordExtent(n.wrappedTileCoord);if(!(0,l.intersects)(o,c))return"continue";var g=(0,d.getUid)(u),h=[n.executorGroups[g]],T=n.declutterExecutorGroups[g];T&&h.push(T),h.some(function(n){for(var o=n===T?t.declutterTree.all().map(function(e){return e.value}):null,l=0,u=n.length;l<u;++l){var d=n[l];if(f=d.forEachFeatureAtCoordinate(e,i,a,r,p,o))return!0}})},y=0,T=v.length;!f&&y<T;++y)h();return f}},{key:"getFeatures",value:function(e){var t=this;return new Promise(function(r,o){for(var u,f=t.getLayer(),g=(0,d.getUid)(f),p=f.getSource(),v=t.renderedProjection,h=v.getExtent(),y=t.renderedResolution,T=p.getTileGridForProjection(v),R=(0,a.apply)(t.renderedPixelToCoordinateTransform_,e.slice()),m=T.getTileCoordForCoordAndResolution(R,y),b=0,S=t.renderedTiles.length;b<S;++b)if(m.toString()===t.renderedTiles[b].tileCoord.toString()){if((u=t.renderedTiles[b]).getState()===n.default.LOADED){var x=T.getTileCoordExtent(u.tileCoord);p.getWrapX()&&v.canWrapX()&&!(0,l.containsExtent)(h,x)&&(0,c.wrapX)(R,v);break}u=void 0}if(!u||u.loadingSourceTiles>0)r([]);else{var w=T.getTileCoordExtent(u.wrappedTileCoord),C=(0,l.getTopLeft)(w),E=[(R[0]-C[0])/y,(C[1]-R[1])/y],_=u.getSourceTiles().reduce(function(e,t){return e.concat(t.getFeatures())},[]),j=u.hitDetectionImageData[g];if(!j){var I=(0,s.toSize)(T.getTileSize(T.getZForResolution(y,p.zDirection))),O=t.renderedRotation_,P=[t.getRenderTransform(T.getTileCoordCenter(u.wrappedTileCoord),y,0,i.HIT_DETECT_RESOLUTION,I[0]*i.HIT_DETECT_RESOLUTION,I[1]*i.HIT_DETECT_RESOLUTION,0)];j=(0,i.createHitDetectionImageData)(I,P,_,f.getStyleFunction(),T.getTileCoordExtent(u.wrappedTileCoord),u.getReplayState(f).renderedResolution,O),u.hitDetectionImageData[g]=j}r((0,i.hitDetect)(E,_,j))}})}},{key:"handleFontsChanged",value:function(){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()}},{key:"handleStyleImageChange_",value:function(e){this.renderIfReadyAndVisible()}},{key:"renderDeclutter",value:function(e){var t=this.context,r=t.globalAlpha;t.globalAlpha=this.getLayer().getOpacity();for(var n=e.viewHints,i=!(n[o.default.ANIMATING]||n[o.default.INTERACTING]),a=this.renderedTiles,l=0,u=a.length;l<u;++l){var s=a[l],c=s.declutterExecutorGroups[(0,d.getUid)(this.getLayer())];if(c)for(var f=c.length-1;f>=0;--f)c[f].execute(this.context,1,this.getTileRenderTransform(s,e),e.viewState.rotation,i,void 0,e.declutterTree)}t.globalAlpha=r}},{key:"getTileRenderTransform",value:function(e,t){var r=t.pixelRatio,n=t.viewState,o=n.center,i=n.resolution,l=n.rotation,u=t.size,d=Math.round(u[0]*r),s=Math.round(u[1]*r),c=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),f=e.tileCoord,g=c.getTileCoordExtent(e.wrappedTileCoord),p=c.getTileCoordExtent(f,this.tmpExtent)[0]-g[0];return(0,a.multiply)((0,a.scale)(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(o,i,l,r,d,s,p))}},{key:"postRender",value:function(e,t){var r=t.viewHints,n=!(r[o.default.ANIMATING]||r[o.default.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;var i=this.getLayer(),a=i.getRenderMode(),u=e.globalAlpha;e.globalAlpha=i.getOpacity();for(var s=I[a],c=t.viewState,f=c.rotation,g=i.getSource(),p=g.getTileGridForProjection(c.projection).getZForResolution(c.resolution,g.zDirection),h=this.renderedTiles,y=[],T=[],m=!0,b=h.length-1;b>=0;--b){var S=h[b];m=m&&!S.getReplayState(i).dirty;var x=S.executorGroups[(0,d.getUid)(i)].filter(function(e){return e.hasExecutors(s)});if(0!==x.length){var w=this.getTileRenderTransform(S,t),C=S.tileCoord[0],E=!1,j=x[0].getClipCoords(w);if(j){for(var O=0,P=y.length;O<P;++O)if(p!==C&&C<T[O]){var D=y[O];(0,l.intersects)([j[0],j[3],j[4],j[7]],[D[0],D[3],D[4],D[7]])&&(E||(e.save(),E=!0),e.beginPath(),e.moveTo(j[0],j[1]),e.lineTo(j[2],j[3]),e.lineTo(j[4],j[5]),e.lineTo(j[6],j[7]),e.moveTo(D[6],D[7]),e.lineTo(D[4],D[5]),e.lineTo(D[2],D[3]),e.lineTo(D[0],D[1]),e.clip())}y.push(j),T.push(C)}for(var L=0,G=x.length;L<G;++L){x[L].execute(e,1,w,f,n,s)}E&&e.restore()}}e.globalAlpha=u,this.ready=m,R(_(v.prototype),"postRender",this).call(this,e,t)}},{key:"renderFeature",value:function(e,t,r,n,o){if(!r)return!1;var i=!1;if(Array.isArray(r))for(var a=0,l=r.length;a<l;++a)i=(0,u.renderFeature)(n,e,r[a],t,this.boundHandleStyleImageChange_,void 0,o)||i;else i=(0,u.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,void 0,o);return i}},{key:"tileImageNeedsRender_",value:function(e){var t=this.getLayer();if("vector"===t.getRenderMode())return!1;var r=e.getReplayState(t),n=t.getRevision(),o=e.wantedResolution;return r.renderedTileResolution!==o||r.renderedTileRevision!==n}},{key:"renderTileImage_",value:function(e,t){var r=this.getLayer(),n=e.getReplayState(r),o=r.getRevision(),i=e.executorGroups[(0,d.getUid)(r)];n.renderedTileRevision=o;var l=e.wrappedTileCoord,u=l[0],s=r.getSource(),c=t.pixelRatio,f=t.viewState.projection,g=s.getTileGridForProjection(f),p=g.getResolution(e.tileCoord[0]),v=t.pixelRatio/e.wantedResolution*p,h=g.getResolution(u),y=e.getContext(r);c=Math.round(Math.max(c,v/c));var T=s.getTilePixelSize(u,c,f);y.canvas.width=T[0],y.canvas.height=T[1];var R=c/v;if(1!==R){var m=(0,a.reset)(this.tmpTransform_);(0,a.scale)(m,R,R),y.setTransform.apply(y,m)}var b=g.getTileCoordExtent(l,this.tmpExtent),S=v/h,x=(0,a.reset)(this.tmpTransform_);(0,a.scale)(x,S,-S),(0,a.translate)(x,-b[0],-b[3]);for(var w=0,C=i.length;w<C;++w){i[w].execute(y,R,x,0,!0,j[r.getRenderMode()])}n.renderedTileResolution=e.wantedResolution}}]),v}(),P=O;exports.default=P;
},{"../../render/canvas/BuilderGroup.js":"qYWL","../../render/canvas/ExecutorGroup.js":"sCjt","./TileLayer.js":"ISPk","../../TileState.js":"FoaO","../../ViewHint.js":"DfOy","../../render/canvas/hitdetect.js":"UsFS","../../transform.js":"Ln8D","../../extent.js":"L0Vw","../vector.js":"iWoQ","../../util.js":"KA50","../../size.js":"d9VJ","../../coordinate.js":"CMtO"}],"KhhP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};exports.default=e;
},{}],"g0oQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./BaseVector.js")),t=o(require("../renderer/canvas/VectorTileLayer.js")),r=o(require("./TileProperty.js")),n=require("../asserts.js");function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=a(e,"string");return"symbol"===u(t)?t:String(t)}function a(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=p(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=h();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(o){y(c,e.default);var u=b(c);function c(e){var t;i(this,c),e=e||{};var r=Object.assign({},e);delete r.preload,delete r.useInterimTilesOnError,(t=u.call(this,r)).on,t.once,t.un;var o=e.renderMode||"hybrid";return(0,n.assert)("hybrid"==o||"vector"==o,28),t.renderMode_=o,t.setPreload(e.preload?e.preload:0),t.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),t.getBackground,t.setBackground,t}return l(c,[{key:"createRenderer",value:function(){return new t.default(this)}},{key:"getFeatures",value:function(e){return s(g(c.prototype),"getFeatures",this).call(this,e)}},{key:"getRenderMode",value:function(){return this.renderMode_}},{key:"getPreload",value:function(){return this.get(r.default.PRELOAD)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(r.default.USE_INTERIM_TILES_ON_ERROR)}},{key:"setPreload",value:function(e){this.set(r.default.PRELOAD,e)}},{key:"setUseInterimTilesOnError",value:function(e){this.set(r.default.USE_INTERIM_TILES_ON_ERROR,e)}}]),c}(),_=m;exports.default=_;
},{"./BaseVector.js":"sJYl","../renderer/canvas/VectorTileLayer.js":"oSpf","./TileProperty.js":"KhhP","../asserts.js":"DVOE"}],"E2jd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStyleFunction=_,exports.default=void 0;var e=o(require("./Object.js")),t=o(require("./events/EventType.js")),r=require("./asserts.js"),n=require("./events.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=c(e,"string");return"symbol"===i(t)?t:String(t)}function c(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=d();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(r){l(i,e.default);var o=h(i);function i(e){var t;if(u(this,i),(t=o.call(this)).on,t.once,t.un,t.id_=void 0,t.geometryName_="geometry",t.style_=null,t.styleFunction_=void 0,t.geometryChangeKey_=null,t.addChangeListener(t.geometryName_,t.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var r=e;t.setGeometry(r)}else{var n=e;t.setProperties(n)}return t}return s(i,[{key:"clone",value:function(){var e=new i(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var r=this.getStyle();return r&&e.setStyle(r),e}},{key:"getGeometry",value:function(){return this.get(this.geometryName_)}},{key:"getId",value:function(){return this.id_}},{key:"getGeometryName",value:function(){return this.geometryName_}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"handleGeometryChange_",value:function(){this.changed()}},{key:"handleGeometryChanged_",value:function(){this.geometryChangeKey_&&((0,n.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=(0,n.listen)(e,t.default.CHANGE,this.handleGeometryChange_,this)),this.changed()}},{key:"setGeometry",value:function(e){this.set(this.geometryName_,e)}},{key:"setStyle",value:function(e){this.style_=e,this.styleFunction_=e?_(e):void 0,this.changed()}},{key:"setId",value:function(e){this.id_=e,this.changed()}},{key:"setGeometryName",value:function(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}]),i}();function _(e){if("function"==typeof e)return e;var t;Array.isArray(e)?t=e:((0,r.assert)("function"==typeof e.getZIndex,41),t=[e]);return function(){return t}}var b=v;exports.default=b;
},{"./Object.js":"fB8e","./events/EventType.js":"GUXn","./asserts.js":"DVOE","./events.js":"MGag"}],"BA1B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./SimpleGeometry.js")),e=require("../extent.js"),r=require("./flat/deflate.js"),n=require("./flat/transform.js");function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=l(t,"string");return"symbol"===i(e)?e:String(e)}function l(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=p();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=function(o){c(a,t.default);var i=h(a);function a(t,e,r){var n;return s(this,a),n=i.call(this),void 0!==r&&void 0===e?n.setFlatCoordinates(r,t):(e=e||0,n.setCenterAndRadius(t,e,r)),n}return u(a,[{key:"clone",value:function(){var t=new a(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,r,n){var o=this.flatCoordinates,i=t-o[0],s=e-o[1],a=i*i+s*s;if(a<n){if(0===a)for(var u=0;u<this.stride;++u)r[u]=o[u];else{var f=this.getRadius()/Math.sqrt(a);r[0]=o[0]+f*i,r[1]=o[1]+f*s;for(var l=2;l<this.stride;++l)r[l]=o[l]}return r.length=this.stride,a}return n}},{key:"containsXY",value:function(t,e){var r=this.flatCoordinates,n=t-r[0],o=e-r[1];return n*n+o*o<=this.getRadiusSquared_()}},{key:"getCenter",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"computeExtent",value:function(t){var r=this.flatCoordinates,n=r[this.stride]-r[0];return(0,e.createOrUpdate)(r[0]-n,r[1]-n,r[0]+n,r[1]+n,t)}},{key:"getRadius",value:function(){return Math.sqrt(this.getRadiusSquared_())}},{key:"getRadiusSquared_",value:function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}},{key:"getType",value:function(){return"Circle"}},{key:"intersectsExtent",value:function(t){var r=this.getExtent();if((0,e.intersects)(t,r)){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||(0,e.forEachCorner)(t,this.intersectsCoordinate.bind(this)))}return!1}},{key:"setCenter",value:function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(var o=1;o<e;++o)n[e+o]=t[o];this.setFlatCoordinates(this.layout,n),this.changed()}},{key:"setCenterAndRadius",value:function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,i=(0,r.deflateCoordinate)(o,0,t,this.stride);o[i++]=o[0]+e;for(var s=1,a=this.stride;s<a;++s)o[i++]=o[s];o.length=i,this.changed()}},{key:"getCoordinates",value:function(){return null}},{key:"setCoordinates",value:function(t,e){}},{key:"setRadius",value:function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}},{key:"rotate",value:function(t,e){var r=this.getCenter(),o=this.getStride();this.setCenter((0,n.rotate)(r,0,r.length,o,t,e,r)),this.changed()}}]),a}();C.prototype.transform;var g=C;exports.default=g;
},{"./SimpleGeometry.js":"JVJN","../extent.js":"L0Vw","./flat/deflate.js":"wnue","./flat/transform.js":"v1jb"}],"gVtC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../events/EventType.js")),t=i(require("./Geometry.js")),r=require("../extent.js"),n=require("../events.js");function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function a(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=c(e,"string");return"symbol"===o(t)?t:String(t)}function c(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=h(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=d();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(i){y(u,t.default);var o=g(u);function u(e){var t;return s(this,u),(t=o.call(this)).geometries_=e||null,t.changeEventsKeys_=[],t.listenGeometriesChange_(),t}return a(u,[{key:"unlistenGeometriesChange_",value:function(){this.changeEventsKeys_.forEach(n.unlistenByKey),this.changeEventsKeys_.length=0}},{key:"listenGeometriesChange_",value:function(){if(this.geometries_)for(var t=0,r=this.geometries_.length;t<r;++t)this.changeEventsKeys_.push((0,n.listen)(this.geometries_[t],e.default.CHANGE,this.changed,this))}},{key:"clone",value:function(){var e=new u(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,n,i){if(i<(0,r.closestSquaredDistanceXY)(this.getExtent(),e,t))return i;for(var o=this.geometries_,s=0,u=o.length;s<u;++s)i=o[s].closestPointXY(e,t,n,i);return i}},{key:"containsXY",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(e,t))return!0;return!1}},{key:"computeExtent",value:function(e){(0,r.createOrUpdateEmpty)(e);for(var t=this.geometries_,n=0,i=t.length;n<i;++n)(0,r.extend)(e,t[n].getExtent());return e}},{key:"getGeometries",value:function(){return G(this.geometries_)}},{key:"getGeometriesArray",value:function(){return this.geometries_}},{key:"getGeometriesArrayRecursive",value:function(){for(var e=[],t=this.geometries_,r=0,n=t.length;r<n;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}},{key:"getSimplifiedGeometry",value:function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var t=[],r=this.geometries_,n=!1,i=0,o=r.length;i<o;++i){var s=r[i],a=s.getSimplifiedGeometry(e);t.push(a),a!==s&&(n=!0)}if(n){var l=new u(null);return l.setGeometriesArray(t),l}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}},{key:"getType",value:function(){return"GeometryCollection"}},{key:"intersectsExtent",value:function(e){for(var t=this.geometries_,r=0,n=t.length;r<n;++r)if(t[r].intersectsExtent(e))return!0;return!1}},{key:"isEmpty",value:function(){return 0===this.geometries_.length}},{key:"rotate",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(e,t);this.changed()}},{key:"scale",value:function(e,t,n){n||(n=(0,r.getCenter)(this.getExtent()));for(var i=this.geometries_,o=0,s=i.length;o<s;++o)i[o].scale(e,t,n);this.changed()}},{key:"setGeometries",value:function(e){this.setGeometriesArray(G(e))}},{key:"setGeometriesArray",value:function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}},{key:"applyTransform",value:function(e){for(var t=this.geometries_,r=0,n=t.length;r<n;++r)t[r].applyTransform(e);this.changed()}},{key:"translate",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(e,t);this.changed()}},{key:"disposeInternal",value:function(){this.unlistenGeometriesChange_(),f(_(u.prototype),"disposeInternal",this).call(this)}}]),u}();function G(e){for(var t=[],r=0,n=e.length;r<n;++r)t.push(e[r].clone());return t}var k=b;exports.default=k;
},{"../events/EventType.js":"GUXn","./Geometry.js":"AhnV","../extent.js":"L0Vw","../events.js":"MGag"}],"VRTH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolatePoint=n,exports.lineStringCoordinateAtM=t,exports.lineStringsCoordinateAtM=i;var r=require("../../array.js"),e=require("../../math.js");function n(n,t,i,l,u,a,f){var o,s,v=(i-t)/l;if(1===v)o=t;else if(2===v)o=t,s=u;else if(0!==v){for(var c=n[t],p=n[t+1],h=0,d=[0],g=t+l;g<i;g+=l){var x=n[g],y=n[g+1];h+=Math.sqrt((x-c)*(x-c)+(y-p)*(y-p)),d.push(h),c=x,p=y}var M=u*h,j=(0,r.binarySearch)(d,M);j<0?(s=(M-d[-j-2])/(d[-j-1]-d[-j-2]),o=t+(-j-2)*l):o=t+j*l}f=f>1?f:2,a=a||new Array(f);for(var q=0;q<f;++q)a[q]=void 0===o?NaN:void 0===s?n[o+q]:(0,e.lerp)(n[o+q],n[o+l+q],s);return a}function t(r,n,t,i,l,u){if(t==n)return null;var a;if(l<r[n+i-1])return u?((a=r.slice(n,n+i))[i-1]=l,a):null;if(r[t-1]<l)return u?((a=r.slice(t-i,t))[i-1]=l,a):null;if(l==r[n+i-1])return r.slice(n,n+i);for(var f=n/i,o=t/i;f<o;){var s=f+o>>1;l<r[(s+1)*i-1]?o=s:f=s+1}var v=r[f*i-1];if(l==v)return r.slice((f-1)*i,(f-1)*i+i);var c=(l-v)/(r[(f+1)*i-1]-v);a=[];for(var p=0;p<i-1;++p)a.push((0,e.lerp)(r[(f-1)*i+p],r[f*i+p],c));return a.push(l),a}function i(r,e,n,i,l,u,a){if(a)return t(r,e,n[n.length-1],i,l,u);var f;if(l<r[i-1])return u?((f=r.slice(0,i))[i-1]=l,f):null;if(r[r.length-1]<l)return u?((f=r.slice(r.length-i))[i-1]=l,f):null;for(var o=0,s=n.length;o<s;++o){var v=n[o];if(e!=v){if(l<r[e+i-1])return null;if(l<=r[v-1])return t(r,e,v,i,l,!1);e=v}}return null}
},{"../../array.js":"o0G8","../../math.js":"qAK2"}],"qAxQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./SimpleGeometry.js")),e=require("./flat/closest.js"),i=require("../extent.js"),n=require("./flat/deflate.js"),r=require("./flat/simplify.js"),o=require("../array.js"),s=require("./flat/segments.js"),a=require("./flat/inflate.js"),l=require("./flat/interpolate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/length.js");function c(t){return t&&t.__esModule?t:{default:t}}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function p(t,e,i){return e&&y(t.prototype,e),i&&y(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t){var e=g(t,"string");return"symbol"===h(e)?e:String(e)}function g(t,e){if("object"!==h(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function C(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=S();return function(){var i,n=x(t);if(e){var r=x(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return j(this,i)}}function j(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(c){C(y,t.default);var h=m(y);function y(t,e){var i;return d(this,y),(i=h.call(this)).flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?i.setCoordinates(t,e):i.setFlatCoordinates(e,t),i}return p(y,[{key:"appendCoordinate",value:function(t){this.flatCoordinates?(0,o.extend)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}},{key:"clone",value:function(){var t=new y(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,n,r,o){return o<(0,i.closestSquaredDistanceXY)(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,e.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,e.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,r,o))}},{key:"forEachSegment",value:function(t){return(0,s.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinateAtM",value:function(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,(0,l.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}},{key:"getCoordinates",value:function(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinateAt",value:function(t,e){return(0,l.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}},{key:"getLength",value:function(){return(0,f.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getFlatMidpoint",value:function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[];return e.length=(0,r.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new y(e,"XY")}},{key:"getType",value:function(){return"LineString"}},{key:"intersectsExtent",value:function(t){return(0,u.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),y}(),w=P;exports.default=w;
},{"./SimpleGeometry.js":"JVJN","./flat/closest.js":"Bhwh","../extent.js":"L0Vw","./flat/deflate.js":"wnue","./flat/simplify.js":"wmMI","../array.js":"o0G8","./flat/segments.js":"ps7C","./flat/inflate.js":"HSYb","./flat/interpolate.js":"VRTH","./flat/intersectsextent.js":"aXDF","./flat/length.js":"QoUW"}],"OxPj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=f(require("./LineString.js")),e=f(require("./SimpleGeometry.js")),r=require("./flat/closest.js"),n=require("../extent.js"),i=require("./flat/deflate.js"),o=require("./flat/simplify.js"),s=require("../array.js"),a=require("./flat/inflate.js"),l=require("./flat/interpolate.js"),u=require("./flat/intersectsextent.js");function f(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p(n.key),n)}}function y(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){var e=v(t,"string");return"symbol"===c(e)?e:String(e)}function v(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=j();return function(){var r,n=S(t);if(e){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(f){g(h,e.default);var c=_(h);function h(t,e,r){var n;if(d(this,h),(n=c.call(this)).ends_=[],n.maxDelta_=-1,n.maxDeltaRevision_=-1,Array.isArray(t[0]))n.setCoordinates(t,e);else if(void 0!==e&&r)n.setFlatCoordinates(e,t),n.ends_=r;else{for(var i=n.getLayout(),o=t,a=[],l=[],u=0,f=o.length;u<f;++u){var y=o[u];0===u&&(i=y.getLayout()),(0,s.extend)(a,y.getFlatCoordinates()),l.push(a.length)}n.setFlatCoordinates(i,a),n.ends_=l}return n}return y(h,[{key:"appendLineString",value:function(t){this.flatCoordinates?(0,s.extend)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var t=new h(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,i,o){return o<(0,n.closestSquaredDistanceXY)(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,o))}},{key:"getCoordinateAtM",value:function(t,e,r){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,r=void 0!==r&&r,(0,l.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,t,e,r))}},{key:"getCoordinates",value:function(){return(0,a.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getLineString",value:function(e){return e<0||this.ends_.length<=e?null:new t.default(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}},{key:"getLineStrings",value:function(){for(var e=this.flatCoordinates,r=this.ends_,n=this.layout,i=[],o=0,s=0,a=r.length;s<a;++s){var l=r[s],u=new t.default(e.slice(o,l),n);i.push(u),o=l}return i}},{key:"getFlatMidpoints",value:function(){for(var t=[],e=this.flatCoordinates,r=0,n=this.ends_,i=this.stride,o=0,a=n.length;o<a;++o){var u=n[o],f=(0,l.interpolatePoint)(e,r,u,i,.5);(0,s.extend)(t,f),r=u}return t}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],r=[];return e.length=(0,o.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,r),new h(e,"XY",r)}},{key:"getType",value:function(){return"MultiLineString"}},{key:"intersectsExtent",value:function(t){return(0,u.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=(0,i.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}]),h}(),w=x;exports.default=w;
},{"./LineString.js":"qAxQ","./SimpleGeometry.js":"JVJN","./flat/closest.js":"Bhwh","../extent.js":"L0Vw","./flat/deflate.js":"wnue","./flat/simplify.js":"wmMI","../array.js":"o0G8","./flat/inflate.js":"HSYb","./flat/interpolate.js":"VRTH","./flat/intersectsextent.js":"aXDF"}],"ldA8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./Point.js")),e=s(require("./SimpleGeometry.js")),r=require("../extent.js"),n=require("./flat/deflate.js"),o=require("../array.js"),i=require("./flat/inflate.js"),a=require("../math.js");function s(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function c(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){var e=y(t,"string");return"symbol"===u(e)?e:String(e)}function y(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=C();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(s){h(l,e.default);var u=v(l);function l(t,e){var r;return f(this,l),r=u.call(this),e&&!Array.isArray(t[0])?r.setFlatCoordinates(e,t):r.setCoordinates(t,e),r}return c(l,[{key:"appendPoint",value:function(t){this.flatCoordinates?(0,o.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}},{key:"clone",value:function(){var t=new l(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}},{key:"closestPointXY",value:function(t,e,n,o){if(o<(0,r.closestSquaredDistanceXY)(this.getExtent(),t,e))return o;for(var i=this.flatCoordinates,s=this.stride,u=0,f=i.length;u<f;u+=s){var l=(0,a.squaredDistance)(t,e,i[u],i[u+1]);if(l<o){o=l;for(var c=0;c<s;++c)n[c]=i[u+c];n.length=s}}return o}},{key:"getCoordinates",value:function(){return(0,i.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getPoint",value:function(e){var r=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||r<=e?null:new t.default(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}},{key:"getPoints",value:function(){for(var e=this.flatCoordinates,r=this.layout,n=this.stride,o=[],i=0,a=e.length;i<a;i+=n){var s=new t.default(e.slice(i,i+n),r);o.push(s)}return o}},{key:"getType",value:function(){return"MultiPoint"}},{key:"intersectsExtent",value:function(t){for(var e=this.flatCoordinates,n=this.stride,o=0,i=e.length;o<i;o+=n){var a=e[o],s=e[o+1];if((0,r.containsXY)(t,a,s))return!0}return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),l}(),P=j;exports.default=P;
},{"./Point.js":"IIKA","./SimpleGeometry.js":"JVJN","../extent.js":"L0Vw","./flat/deflate.js":"wnue","../array.js":"o0G8","./flat/inflate.js":"HSYb","../math.js":"qAK2"}],"Cjmj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingss=r;var e=require("../../extent.js");function r(r,t,a,n){for(var s=[],o=(0,e.createEmpty)(),i=0,u=a.length;i<u;++i){var l=a[i];o=(0,e.createOrUpdateFromFlatCoordinates)(r,t,l[0],n),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return s}
},{"../../extent.js":"L0Vw"}],"ZPDo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=v(require("./MultiPoint.js")),e=v(require("./Polygon.js")),i=v(require("./SimpleGeometry.js")),r=require("./flat/closest.js"),n=require("../extent.js"),s=require("./flat/deflate.js"),o=require("../array.js"),a=require("./flat/interiorpoint.js"),l=require("./flat/inflate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/orient.js"),d=require("./flat/area.js"),h=require("./flat/center.js"),c=require("./flat/contains.js"),y=require("./flat/simplify.js");function v(t){return t&&t.__esModule?t:{default:t}}function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function C(t,e,i){return e&&_(t.prototype,e),i&&_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t){var e=m(t,"string");return"symbol"===g(e)?e:String(e)}function m(t,e){if("object"!==g(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}function j(t,e){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=w();return function(){var i,r=F(t);if(e){var n=F(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return O(this,i)}}function O(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return q(t)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var x=function(v){P(_,i.default);var g=R(_);function _(t,e,i){var r;if(p(this,_),(r=g.call(this)).endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){for(var n=r.getLayout(),s=t,a=[],l=[],u=0,f=s.length;u<f;++u){var d=s[u];0===u&&(n=d.getLayout());for(var h=a.length,c=d.getEnds(),y=0,v=c.length;y<v;++y)c[y]+=h;(0,o.extend)(a,d.getFlatCoordinates()),l.push(c)}e=n,t=a,i=l}return void 0!==e&&i?(r.setFlatCoordinates(e,t),r.endss_=i):r.setCoordinates(t,e),r}return C(_,[{key:"appendPolygon",value:function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;(0,o.extend)(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,n=(e=t.getEnds().slice()).length;r<n;++r)e[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}},{key:"clone",value:function(){for(var t=this.endss_.length,e=new Array(t),i=0;i<t;++i)e[i]=this.endss_[i].slice();var r=new _(this.flatCoordinates.slice(),this.layout,e);return r.applyProperties(this),r}},{key:"closestPointXY",value:function(t,e,i,s){return s<(0,n.closestSquaredDistanceXY)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,s))}},{key:"containsXY",value:function(t,e){return(0,c.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}},{key:"getArea",value:function(){return(0,d.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,f.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,l.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)}},{key:"getEndss",value:function(){return this.endss_}},{key:"getFlatInteriorPoints",value:function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=(0,h.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,a.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}},{key:"getInteriorPoints",value:function(){return new t.default(this.getFlatInteriorPoints().slice(),"XYM")}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,f.linearRingssAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,f.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],i=[];return e.length=(0,y.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new _(e,"XY",i)}},{key:"getPolygon",value:function(t){if(t<0||this.endss_.length<=t)return null;var i;if(0===t)i=0;else{var r=this.endss_[t-1];i=r[r.length-1]}var n=this.endss_[t].slice(),s=n[n.length-1];if(0!==i)for(var o=0,a=n.length;o<a;++o)n[o]-=i;return new e.default(this.flatCoordinates.slice(i,s),this.layout,n)}},{key:"getPolygons",value:function(){for(var t=this.layout,i=this.flatCoordinates,r=this.endss_,n=[],s=0,o=0,a=r.length;o<a;++o){var l=r[o].slice(),u=l[l.length-1];if(0!==s)for(var f=0,d=l.length;f<d;++f)l[f]-=s;var h=new e.default(i.slice(s,u),t,l);n.push(h),s=u}return n}},{key:"getType",value:function(){return"MultiPolygon"}},{key:"intersectsExtent",value:function(t){return(0,u.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,s.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()}}]),_}(),k=x;exports.default=k;
},{"./MultiPoint.js":"ldA8","./Polygon.js":"DTlF","./SimpleGeometry.js":"JVJN","./flat/closest.js":"Bhwh","../extent.js":"L0Vw","./flat/deflate.js":"wnue","../array.js":"o0G8","./flat/interiorpoint.js":"amVp","./flat/inflate.js":"HSYb","./flat/intersectsextent.js":"aXDF","./flat/orient.js":"pxk9","./flat/area.js":"weGW","./flat/center.js":"Cjmj","./flat/contains.js":"PaNT","./flat/simplify.js":"wmMI"}],"z54l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"GeometryCollection",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"LineString",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"LinearRing",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"MultiLineString",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"MultiPoint",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"MultiPolygon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Point",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"SimpleGeometry",{enumerable:!0,get:function(){return m.default}});var e=c(require("./geom/Circle.js")),r=c(require("./geom/Geometry.js")),t=c(require("./geom/GeometryCollection.js")),n=c(require("./geom/LinearRing.js")),o=c(require("./geom/LineString.js")),u=c(require("./geom/MultiLineString.js")),i=c(require("./geom/MultiPoint.js")),l=c(require("./geom/MultiPolygon.js")),f=c(require("./geom/Point.js")),g=c(require("./geom/Polygon.js")),m=c(require("./geom/SimpleGeometry.js"));function c(e){return e&&e.__esModule?e:{default:e}}
},{"./geom/Circle.js":"BA1B","./geom/Geometry.js":"AhnV","./geom/GeometryCollection.js":"gVtC","./geom/LinearRing.js":"AX8o","./geom/LineString.js":"qAxQ","./geom/MultiLineString.js":"OxPj","./geom/MultiPoint.js":"ldA8","./geom/MultiPolygon.js":"ZPDo","./geom/Point.js":"IIKA","./geom/Polygon.js":"DTlF","./geom/SimpleGeometry.js":"JVJN"}],"TTaU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.toFeature=C,exports.toGeometry=P;var t=d(require("../Feature.js")),e=require("../geom.js"),r=require("../transform.js"),n=require("../extent.js"),i=require("../array.js"),o=require("../geom/flat/interiorpoint.js"),s=require("../proj.js"),a=require("../geom/flat/orient.js"),l=require("../geom/flat/interpolate.js"),u=require("../geom/flat/center.js"),f=require("../geom/flat/transform.js");function d(t){return t&&t.__esModule?t:{default:t}}function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function p(t,e,r){return e&&y(t.prototype,e),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=_(t,"string");return"symbol"===g(e)?e:String(e)}function _(t,e){if("object"!==g(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var v=(0,r.create)(),m=function(){function t(e,r,n,i,o){h(this,t),this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=r,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n,this.properties_=i}return p(t,[{key:"get",value:function(t){return this.properties_[t]}},{key:"getExtent",value:function(){return this.extent_||(this.extent_="Point"===this.type_?(0,n.createOrUpdateFromCoordinate)(this.flatCoordinates_):(0,n.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}},{key:"getFlatInteriorPoint",value:function(){if(!this.flatInteriorPoints_){var t=(0,n.getCenter)(this.getExtent());this.flatInteriorPoints_=(0,o.getInteriorPointOfArray)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}},{key:"getFlatInteriorPoints",value:function(){if(!this.flatInteriorPoints_){var t=(0,u.linearRingss)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,o.getInteriorPointsOfMultiArray)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_}},{key:"getFlatMidpoint",value:function(){return this.flatMidpoints_||(this.flatMidpoints_=(0,l.interpolatePoint)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}},{key:"getFlatMidpoints",value:function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,n=0,o=r.length;n<o;++n){var s=r[n],a=(0,l.interpolatePoint)(t,e,s,2,.5);(0,i.extend)(this.flatMidpoints_,a),e=s}}return this.flatMidpoints_}},{key:"getId",value:function(){return this.id_}},{key:"getOrientedFlatCoordinates",value:function(){return this.flatCoordinates_}},{key:"getGeometry",value:function(){return this}},{key:"getSimplifiedGeometry",value:function(t){return this}},{key:"simplifyTransformed",value:function(t,e){return this}},{key:"getProperties",value:function(){return this.properties_}},{key:"getStride",value:function(){return 2}},{key:"getStyleFunction",value:function(){return this.styleFunction}},{key:"getType",value:function(){return this.type_}},{key:"transform",value:function(t){var e=(t=(0,s.get)(t)).getExtent(),i=t.getWorldExtent();if(e&&i){var o=(0,n.getHeight)(i)/(0,n.getHeight)(e);(0,r.compose)(v,i[0],i[3],o,-o,0,0,0),(0,f.transform2D)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,v,this.flatCoordinates_)}}},{key:"getEnds",value:function(){return this.ends_}}]),t}();function P(t){var r=t.getType();switch(r){case"Point":return new e.Point(t.getFlatCoordinates());case"MultiPoint":return new e.MultiPoint(t.getFlatCoordinates(),"XY");case"LineString":return new e.LineString(t.getFlatCoordinates(),"XY");case"MultiLineString":return new e.MultiLineString(t.getFlatCoordinates(),"XY",t.getEnds());case"Polygon":var n=t.getFlatCoordinates(),i=t.getEnds(),o=(0,a.inflateEnds)(n,i);return o.length>1?new e.MultiPolygon(n,"XY",o):new e.Polygon(n,"XY",i);default:throw new Error("Invalid geometry type:"+r)}}function C(e,r){var n=e.getId(),i=P(e),o=e.getProperties(),s=new t.default;return void 0!==r&&s.setGeometryName(r),s.setGeometry(i),void 0!==n&&s.setId(n),s.setProperties(o,!0),s}m.prototype.getEndss=m.prototype.getEnds,m.prototype.getFlatCoordinates=m.prototype.getOrientedFlatCoordinates;var b=m;exports.default=b;
},{"../Feature.js":"E2jd","../geom.js":"z54l","../transform.js":"Ln8D","../extent.js":"L0Vw","../array.js":"o0G8","../geom/flat/interiorpoint.js":"amVp","../proj.js":"VAQc","../geom/flat/orient.js":"pxk9","../geom/flat/interpolate.js":"VRTH","../geom/flat/center.js":"Cjmj","../geom/flat/transform.js":"v1jb"}],"NPSy":[function(require,module,exports) {
"use strict";function t(t,n){return u(t)||o(t,n)||e(t,n)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function o(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,u,i,a=[],l=!0,c=!1;try{if(u=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=u.call(e)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(f){c=!0,o=f}finally{try{if(!l&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function u(t){if(Array.isArray(t))return t}function i(t,r,e,n){return void 0!==n?(n[0]=t,n[1]=r,n[2]=e,n):[t,r,e]}function a(t,r,e){return t+"/"+r+"/"+e}function l(t){return a(t[0],t[1],t[2])}function c(r){var e=t(r.substring(r.lastIndexOf("/")+1,r.length).split(",").map(Number),3);return a(e[0],e[1],e[2])}function f(t){return t.split("/").map(Number)}function s(t){return(t[1]<<t[0])+t[2]}function p(t,r){var e=t[0],n=t[1],o=t[2];if(r.getMinZoom()>e||e>r.getMaxZoom())return!1;var u=r.getFullTileRange(e);return!u||u.containsXY(n,o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=i,exports.fromKey=f,exports.getCacheKeyForTileKey=c,exports.getKey=l,exports.getKeyZXY=a,exports.hash=s,exports.withinExtentAndZ=p;
},{}],"dZ35":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromTemplate=n,exports.createFromTemplates=o,exports.createFromTileUrlFunctions=a,exports.expandUrl=i,exports.nullTileUrlFunction=u;var r=require("./asserts.js"),e=require("./math.js"),t=require("./tilecoord.js");function n(e,t){var n=/\{z\}/g,o=/\{x\}/g,a=/\{y\}/g,u=/\{-y\}/g;return function(i,c,l){if(i)return e.replace(n,i[0].toString()).replace(o,i[1].toString()).replace(a,i[2].toString()).replace(u,function(){var e=i[0],n=t.getFullTileRange(e);return(0,r.assert)(n,55),(n.getHeight()-i[2]-1).toString()})}}function o(r,e){for(var t=r.length,o=new Array(t),u=0;u<t;++u)o[u]=n(r[u],e);return a(o)}function a(r){return 1===r.length?r[0]:function(n,o,a){if(n){var u=(0,t.hash)(n),i=(0,e.modulo)(u,r.length);return r[i](n,o,a)}}}function u(r,e,t){}function i(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n,o=t[1].charCodeAt(0),a=t[2].charCodeAt(0);for(n=o;n<=a;++n)e.push(r.replace(t[0],String.fromCharCode(n)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r)){for(var u=parseInt(t[2],10),i=parseInt(t[1],10);i<=u;i++)e.push(r.replace(t[0],i.toString()));return e}return e.push(r),e}
},{"./asserts.js":"DVOE","./math.js":"qAK2","./tilecoord.js":"NPSy"}],"eAuZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.transformExtentWithOptions=s,exports.transformGeometryWithOptions=f;var t=require("../util.js"),e=require("../proj.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=u(t,"string");return"symbol"===r(e)?e:String(e)}function u(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var c=function(){function r(){n(this,r),this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return a(r,[{key:"getReadOptions",value:function(t,r){if(r){var n=r.dataProjection?(0,e.get)(r.dataProjection):this.readProjection(t);r.extent&&n&&"tile-pixels"===n.getUnits()&&(n=(0,e.get)(n)).setWorldExtent(r.extent),r={dataProjection:n,featureProjection:r.featureProjection}}return this.adaptOptions(r)}},{key:"adaptOptions",value:function(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}},{key:"getType",value:function(){return(0,t.abstract)()}},{key:"readFeature",value:function(e,r){return(0,t.abstract)()}},{key:"readFeatures",value:function(e,r){return(0,t.abstract)()}},{key:"readGeometry",value:function(e,r){return(0,t.abstract)()}},{key:"readProjection",value:function(e){return(0,t.abstract)()}},{key:"writeFeature",value:function(e,r){return(0,t.abstract)()}},{key:"writeFeatures",value:function(e,r){return(0,t.abstract)()}},{key:"writeGeometry",value:function(e,r){return(0,t.abstract)()}}]),r}(),l=c;function f(t,r,n){var o,a=n?(0,e.get)(n.featureProjection):null,i=n?(0,e.get)(n.dataProjection):null;if(o=a&&i&&!(0,e.equivalent)(a,i)?(r?t.clone():t).transform(r?a:i,r?i:a):t,r&&n&&void 0!==n.decimals){var u=Math.pow(10,n.decimals);o===t&&(o=t.clone()),o.applyTransform(function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*u)/u;return t})}return o}function s(t,r){var n=r?(0,e.get)(r.featureProjection):null,o=r?(0,e.get)(r.dataProjection):null;return n&&o&&!(0,e.equivalent)(n,o)?(0,e.transformExtent)(t,o,n):t}exports.default=l;
},{"../util.js":"KA50","../proj.js":"VAQc"}],"dlCC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Feature.js")),t=require("../util.js");function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function i(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=a(e,"string");return"symbol"===n(t)?t:String(t)}function a(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=p();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(r){f(u,e.default);var n=s(u);function u(){return o(this,u),n.call(this)}return i(u,[{key:"getType",value:function(){return"json"}},{key:"readFeature",value:function(e,t){return this.readFeatureFromObject(O(e),this.getReadOptions(e,t))}},{key:"readFeatures",value:function(e,t){return this.readFeaturesFromObject(O(e),this.getReadOptions(e,t))}},{key:"readFeatureFromObject",value:function(e,r){return(0,t.abstract)()}},{key:"readFeaturesFromObject",value:function(e,r){return(0,t.abstract)()}},{key:"readGeometry",value:function(e,t){return this.readGeometryFromObject(O(e),this.getReadOptions(e,t))}},{key:"readGeometryFromObject",value:function(e,r){return(0,t.abstract)()}},{key:"readProjection",value:function(e){return this.readProjectionFromObject(O(e))}},{key:"readProjectionFromObject",value:function(e){return(0,t.abstract)()}},{key:"writeFeature",value:function(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}},{key:"writeFeatureObject",value:function(e,r){return(0,t.abstract)()}},{key:"writeFeatures",value:function(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}},{key:"writeFeaturesObject",value:function(e,r){return(0,t.abstract)()}},{key:"writeGeometry",value:function(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}},{key:"writeGeometryObject",value:function(e,r){return(0,t.abstract)()}}]),u}();function O(e){if("string"==typeof e){var t=JSON.parse(e);return t||null}return null!==e?e:null}var j=d;exports.default=j;
},{"./Feature.js":"eAuZ","../util.js":"KA50"}],"csgN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../Feature.js")),t=p(require("../geom/GeometryCollection.js")),r=p(require("./JSONFeature.js")),o=p(require("../geom/LineString.js")),n=p(require("../geom/MultiLineString.js")),i=p(require("../geom/MultiPoint.js")),u=p(require("../geom/MultiPolygon.js")),a=p(require("../geom/Point.js")),c=p(require("../geom/Polygon.js")),s=require("../asserts.js"),l=require("../proj.js"),f=require("../obj.js"),y=require("./Feature.js");function p(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,j(o.key),o)}}function b(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e){var t=v(e,"string");return"symbol"===d(t)?t:String(t)}function v(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=F();return function(){var r,o=G(e);if(t){var n=G(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return w(this,r)}}function w(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(t){P(n,r.default);var o=O(n);function n(e){var t;return m(this,n),e=e||{},(t=o.call(this)).dataProjection=(0,l.get)(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(t.defaultFeatureProjection=(0,l.get)(e.featureProjection)),t.geometryName_=e.geometryName,t.extractGeometryName_=e.extractGeometryName,t.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],t}return b(n,[{key:"readFeatureFromObject",value:function(t,r){var o=null,n=_((o="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,r),i=new e.default;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in o!==void 0&&i.setGeometryName(o.geometry_name),i.setGeometry(n),"id"in o&&i.setId(o.id),o.properties&&i.setProperties(o.properties,!0),i}},{key:"readFeaturesFromObject",value:function(e,t){var r=null;if("FeatureCollection"===e.type){r=[];for(var o=e.features,n=0,i=o.length;n<i;++n)r.push(this.readFeatureFromObject(o[n],t))}else r=[this.readFeatureFromObject(e,t)];return r}},{key:"readGeometryFromObject",value:function(e,t){return _(e,t)}},{key:"readProjectionFromObject",value:function(e){var t,r=e.crs;return r?"name"==r.type?t=(0,l.get)(r.properties.name):"EPSG"===r.type?t=(0,l.get)("EPSG:"+r.properties.code):(0,s.assert)(!1,36):t=this.dataProjection,t}},{key:"writeFeatureObject",value:function(e,t){t=this.adaptOptions(t);var r={type:"Feature",geometry:null,properties:null},o=e.getId();if(void 0!==o&&(r.id=o),!e.hasProperties())return r;var n=e.getProperties(),i=e.getGeometry();return i&&(r.geometry=R(i,t),delete n[e.getGeometryName()]),(0,f.isEmpty)(n)||(r.properties=n),r}},{key:"writeFeaturesObject",value:function(e,t){t=this.adaptOptions(t);for(var r=[],o=0,n=e.length;o<n;++o)r.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:r}}},{key:"writeGeometryObject",value:function(e,t){return R(e,this.adaptOptions(t))}}]),n}();function _(e,t){if(!e)return null;var r;switch(e.type){case"Point":r=M(e);break;case"LineString":r=q(e);break;case"Polygon":r=L(e);break;case"MultiPoint":r=E(e);break;case"MultiLineString":r=N(e);break;case"MultiPolygon":r=x(e);break;case"GeometryCollection":r=C(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return(0,y.transformGeometryWithOptions)(r,!1,t)}function C(e,r){var o=e.geometries.map(function(e){return _(e,r)});return new t.default(o)}function M(e){return new a.default(e.coordinates)}function q(e){return new o.default(e.coordinates)}function N(e){return new n.default(e.coordinates)}function E(e){return new i.default(e.coordinates)}function x(e){return new u.default(e.coordinates)}function L(e){return new c.default(e.coordinates)}function R(e,t){var r,o=(e=(0,y.transformGeometryWithOptions)(e,!0,t)).getType();switch(o){case"Point":r=U(e,t);break;case"LineString":r=B(e,t);break;case"Polygon":r=W(e,t);break;case"MultiPoint":r=I(e,t);break;case"MultiLineString":r=H(e,t);break;case"MultiPolygon":r=J(e,t);break;case"GeometryCollection":r=T(e,t);break;case"Circle":r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+o)}return r}function T(e,t){return delete(t=Object.assign({},t)).featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(e){return R(e,t)})}}function B(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function H(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function I(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function J(e,t){var r;return t&&(r=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function U(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function W(e,t){var r;return t&&(r=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(r)}}var A=S;exports.default=A;
},{"../Feature.js":"E2jd","../geom/GeometryCollection.js":"gVtC","./JSONFeature.js":"dlCC","../geom/LineString.js":"qAxQ","../geom/MultiLineString.js":"OxPj","../geom/MultiPoint.js":"ldA8","../geom/MultiPolygon.js":"ZPDo","../geom/Point.js":"IIKA","../geom/Polygon.js":"DTlF","../asserts.js":"DVOE","../proj.js":"VAQc","../obj.js":"SLsU","./Feature.js":"eAuZ"}],"HnO5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Layer.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)}function i(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){f(n,t.default);var r=a(n);function n(t){return c(this,n),t=t||{},r.call(this,t)}return o(n)}(),v=d;exports.default=v;
},{"./Layer.js":"Ee0U"}],"tvPe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./Layer.js")),t=a(require("../../ImageState.js")),r=a(require("../../ViewHint.js")),n=require("../../transform.js"),i=require("../../extent.js"),o=require("../../proj.js");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function f(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=h(e,"string");return"symbol"===u(t)?t:String(t)}function h(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=v();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(a){p(s,e.default);var u=y(s);function s(e){var t;return l(this,s),(t=u.call(this,e)).image_=null,t}return f(s,[{key:"getImage",value:function(){return this.image_?this.image_.getImage():null}},{key:"prepareFrame",value:function(e){var n=e.layerStatesArray[e.layerIndex],a=e.pixelRatio,u=e.viewState,l=u.resolution,s=this.getLayer().getSource(),f=e.viewHints,c=e.extent;if(void 0!==n.extent&&(c=(0,i.getIntersection)(c,(0,o.fromUserExtent)(n.extent,u.projection))),!f[r.default.ANIMATING]&&!f[r.default.INTERACTING]&&!(0,i.isEmpty)(c))if(s){var h=u.projection,p=s.getImage(c,l,a,h);p&&(this.loadImage(p)?this.image_=p:p.getState()===t.default.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}},{key:"getData",value:function(e){var t=this.frameState;if(!t)return null;var r=this.getLayer(),o=(0,n.apply)(t.pixelToCoordinateTransform,e.slice()),a=r.getExtent();if(a&&!(0,i.containsCoordinate)(a,o))return null;var u=this.image_.getExtent(),l=this.getImage(),s=(0,i.getWidth)(u),f=Math.floor(l.width*((o[0]-u[0])/s));if(f<0||f>=l.width)return null;var c=(0,i.getHeight)(u),h=Math.floor(l.height*((u[3]-o[1])/c));return h<0||h>=l.height?null:this.getImageData(l,f,h)}},{key:"renderFrame",value:function(e,t){var r=this.image_,a=r.getExtent(),u=r.getResolution(),l=r.getPixelRatio(),s=e.layerStatesArray[e.layerIndex],f=e.pixelRatio,c=e.viewState,h=c.center,p=f*u/(c.resolution*l),g=e.extent,y=c.resolution,m=c.rotation,d=Math.round((0,i.getWidth)(g)/y*f),v=Math.round((0,i.getHeight)(g)/y*f);(0,n.compose)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/f,1/f,m,-d/2,-v/2),(0,n.makeInverse)(this.inversePixelTransform,this.pixelTransform);var b=(0,n.toString)(this.pixelTransform);this.useContainer(t,b,this.getBackground(e));var x=this.context,w=x.canvas;w.width!=d||w.height!=v?(w.width=d,w.height=v):this.containerReused||x.clearRect(0,0,d,v);var j=!1,S=!0;if(s.extent){var _=(0,o.fromUserExtent)(s.extent,c.projection);(j=(S=(0,i.intersects)(_,e.extent))&&!(0,i.containsExtent)(_,e.extent))&&this.clipUnrotated(x,e,_)}var I=this.getImage(),E=(0,n.compose)(this.tempTransform,d/2,v/2,p,p,0,l*(a[0]-h[0])/u,l*(h[1]-a[3])/u);this.renderedResolution=u*f/l;var O=I.width*E[0],R=I.height*E[3];if(this.getLayer().getSource().getInterpolate()||(x.imageSmoothingEnabled=!1),this.preRender(x,e),S&&O>=.5&&R>=.5){var P,T=E[4],A=E[5],M=s.opacity;1!==M&&(P=x.globalAlpha,x.globalAlpha=M),x.drawImage(I,0,0,+I.width,+I.height,T,A,O,R),1!==M&&(x.globalAlpha=P)}return this.postRender(x,e),j&&x.restore(),x.imageSmoothingEnabled=!0,b!==w.style.transform&&(w.style.transform=b),this.container}}]),s}(),w=x;exports.default=w;
},{"./Layer.js":"D55b","../../ImageState.js":"FoaO","../../ViewHint.js":"DfOy","../../transform.js":"Ln8D","../../extent.js":"L0Vw","../../proj.js":"VAQc"}],"kjaO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./BaseImage.js")),e=r(require("../renderer/canvas/ImageLayer.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===n(e)?e:String(e)}function f(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=l(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=v();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(r){p(u,t.default);var n=y(u);function u(t){return o(this,u),n.call(this,t)}return i(u,[{key:"createRenderer",value:function(){return new e.default(this)}},{key:"getData",value:function(t){return a(h(u.prototype),"getData",this).call(this,t)}}]),u}(),O=m;exports.default=O;
},{"./BaseImage.js":"HnO5","../renderer/canvas/ImageLayer.js":"tvPe"}],"JgNJ":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"QftS":[function(require,module,exports) {
"use strict";module.exports=i;var t=require("ieee754");function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var e=4294967296,r=1/e,s=12,n="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function o(t,i,e){var r,s,n=e.buf;if(r=(112&(s=n[e.pos++]))>>4,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<3,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<10,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<17,s<128)return a(t,r,i);if(r|=(127&(s=n[e.pos++]))<<24,s<128)return a(t,r,i);if(r|=(1&(s=n[e.pos++]))<<31,s<128)return a(t,r,i);throw new Error("Expected varint not more than 10 bytes")}function h(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,i,e){return e?4294967296*i+(t>>>0):4294967296*(i>>>0)+(t>>>0)}function u(t,i){var e,r;if(t>=0?(e=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(e=~(-t%4294967296))?e=e+1|0:(e=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),f(e,r,i),d(r,i)}function f(t,i,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}function d(t,i){var e=(7&t)<<4;i.buf[i.pos++]|=e|((t>>>=3)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.buf[i.pos++]=127&t)))))}function p(t,i,e){var r=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));e.realloc(r);for(var s=e.pos-1;s>=t;s--)e.buf[s+r]=e.buf[s]}function l(t,i){for(var e=0;e<t.length;e++)i.writeVarint(t[e])}function c(t,i){for(var e=0;e<t.length;e++)i.writeSVarint(t[e])}function w(t,i){for(var e=0;e<t.length;e++)i.writeFloat(t[e])}function F(t,i){for(var e=0;e<t.length;e++)i.writeDouble(t[e])}function g(t,i){for(var e=0;e<t.length;e++)i.writeBoolean(t[e])}function b(t,i){for(var e=0;e<t.length;e++)i.writeFixed32(t[e])}function x(t,i){for(var e=0;e<t.length;e++)i.writeSFixed32(t[e])}function v(t,i){for(var e=0;e<t.length;e++)i.writeFixed64(t[e])}function y(t,i){for(var e=0;e<t.length;e++)i.writeSFixed64(t[e])}function V(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+16777216*t[i+3]}function S(t,i,e){t[e]=i,t[e+1]=i>>>8,t[e+2]=i>>>16,t[e+3]=i>>>24}function B(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+(t[i+3]<<24)}function k(t,i,e){for(var r="",s=i;s<e;){var n,o,h,a=t[s],u=null,f=a>239?4:a>223?3:a>191?2:1;if(s+f>e)break;1===f?a<128&&(u=a):2===f?128==(192&(n=t[s+1]))&&(u=(31&a)<<6|63&n)<=127&&(u=null):3===f?(n=t[s+1],o=t[s+2],128==(192&n)&&128==(192&o)&&((u=(15&a)<<12|(63&n)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===f&&(n=t[s+1],o=t[s+2],h=t[s+3],128==(192&n)&&128==(192&o)&&128==(192&h)&&((u=(15&a)<<18|(63&n)<<12|(63&o)<<6|63&h)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,f=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),s+=f}return r}function M(t,i,e){return n.decode(t.subarray(i,e))}function P(t,i,e){for(var r,s,n=0;n<i.length;n++){if((r=i.charCodeAt(n))>55295&&r<57344){if(!s){r>56319||n+1===i.length?(t[e++]=239,t[e++]=191,t[e++]=189):s=r;continue}if(r<56320){t[e++]=239,t[e++]=191,t[e++]=189,s=r;continue}r=s-55296<<10|r-56320|65536,s=null}else s&&(t[e++]=239,t[e++]=191,t[e++]=189,s=null);r<128?t[e++]=r:(r<2048?t[e++]=r>>6|192:(r<65536?t[e++]=r>>12|224:(t[e++]=r>>18|240,t[e++]=r>>12&63|128),t[e++]=r>>6&63|128),t[e++]=63&r|128)}return e}i.prototype={destroy:function(){this.buf=null},readFields:function(t,i,e){for(e=e||this.length;this.pos<e;){var r=this.readVarint(),s=r>>3,n=this.pos;this.type=7&r,t(s,i,this),this.pos===n&&this.skip(r)}return i},readMessage:function(t,i){return this.readFields(t,i,this.readVarint()+this.pos)},readFixed32:function(){var t=V(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=B(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=V(this.buf,this.pos)+V(this.buf,this.pos+4)*e;return this.pos+=8,t},readSFixed64:function(){var t=V(this.buf,this.pos)+B(this.buf,this.pos+4)*e;return this.pos+=8,t},readFloat:function(){var i=t.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=t.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(t){var i,e,r=this.buf;return i=127&(e=r[this.pos++]),e<128?i:(i|=(127&(e=r[this.pos++]))<<7,e<128?i:(i|=(127&(e=r[this.pos++]))<<14,e<128?i:(i|=(127&(e=r[this.pos++]))<<21,e<128?i:o(i|=(15&(e=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,i=this.pos;return this.pos=t,t-i>=s&&n?M(this.buf,i,t):k(this.buf,i,t)},readBytes:function(){var t=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,t);return this.pos=t,i},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=h(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=h(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,i){this.writeVarint(t<<3|i)},realloc:function(t){for(var i=this.length||16;i<this.pos+t;)i*=2;if(i!==this.length){var e=new Uint8Array(i);e.set(this.buf),this.buf=e,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*r),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?u(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var i=this.pos;this.pos=P(this.buf,t,this.pos);var e=this.pos-i;e>=128&&p(i,e,this),this.pos=i-1,this.writeVarint(e),this.pos+=e},writeFloat:function(i){this.realloc(4),t.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),t.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var i=t.length;this.writeVarint(i),this.realloc(i);for(var e=0;e<i;e++)this.buf[this.pos++]=t[e]},writeRawMessage:function(t,i){this.pos++;var e=this.pos;t(i,this);var r=this.pos-e;r>=128&&p(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,i){i.length&&this.writeMessage(t,l,i)},writePackedSVarint:function(t,i){i.length&&this.writeMessage(t,c,i)},writePackedBoolean:function(t,i){i.length&&this.writeMessage(t,g,i)},writePackedFloat:function(t,i){i.length&&this.writeMessage(t,w,i)},writePackedDouble:function(t,i){i.length&&this.writeMessage(t,F,i)},writePackedFixed32:function(t,i){i.length&&this.writeMessage(t,b,i)},writePackedSFixed32:function(t,i){i.length&&this.writeMessage(t,x,i)},writePackedFixed64:function(t,i){i.length&&this.writeMessage(t,v,i)},writePackedSFixed64:function(t,i){i.length&&this.writeMessage(t,y,i)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,i){this.writeVarintField(t,Boolean(i))}};
},{"ieee754":"JgNJ"}],"CAny":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=v(require("./Feature.js")),t=y(require("../geom/LineString.js")),r=y(require("../geom/MultiLineString.js")),n=y(require("../geom/MultiPoint.js")),o=y(require("../geom/MultiPolygon.js")),a=y(require("pbf")),i=y(require("../geom/Point.js")),u=y(require("../geom/Polygon.js")),s=y(require("../proj/Projection.js")),l=y(require("../render/Feature.js")),f=require("../asserts.js"),c=require("../proj.js"),p=require("../geom/flat/orient.js");function y(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function g(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e){var t=P(e,"string");return"symbol"===m(t)?t:String(t)}function P(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=x();return function(){var r,n=M(e);if(t){var o=M(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(y){_(v,e.default);var d=O(v);function v(e){var t;return h(this,v),e=e||{},(t=d.call(this)).dataProjection=new s.default({code:"",units:"tile-pixels"}),t.featureClass_=e.featureClass?e.featureClass:l.default,t.geometryName_=e.geometryName,t.layerName_=e.layerName?e.layerName:"layer",t.layers_=e.layers?e.layers:null,t.idProperty_=e.idProperty,t.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],t}return g(v,[{key:"readRawGeometry_",value:function(e,t,r,n){e.pos=t.geometry;for(var o=e.readVarint()+e.pos,a=1,i=0,u=0,s=0,l=0,c=0;e.pos<o;){if(!i){var p=e.readVarint();a=7&p,i=p>>3}i--,1===a||2===a?(u+=e.readSVarint(),s+=e.readSVarint(),1===a&&l>c&&(n.push(l),c=l),r.push(u,s),l+=2):7===a?l>c&&(r.push(r[c],r[c+1]),l+=2):(0,f.assert)(!1,59)}l>c&&(n.push(l),c=l)}},{key:"createFeature_",value:function(a,s,f){var c,y=s.type;if(0===y)return null;var d,v=s.properties;this.idProperty_?(d=v[this.idProperty_],delete v[this.idProperty_]):d=s.id,v[this.layerName_]=s.layer.name;var m=[],h=[];this.readRawGeometry_(a,s,m,h);var b=R(y,h.length);if(this.featureClass_===l.default)(c=new this.featureClass_(b,m,h,v,d)).transform(f.dataProjection);else{var g;if("Polygon"==b){var j=(0,p.inflateEnds)(m,h);g=j.length>1?new o.default(m,"XY",j):new u.default(m,"XY",h)}else g="Point"===b?new i.default(m,"XY"):"LineString"===b?new t.default(m,"XY"):"MultiPoint"===b?new n.default(m,"XY"):"MultiLineString"===b?new r.default(m,"XY",h):null;c=new(0,this.featureClass_),this.geometryName_&&c.setGeometryName(this.geometryName_);var P=(0,e.transformGeometryWithOptions)(g,!1,f);c.setGeometry(P),void 0!==d&&c.setId(d),c.setProperties(v,!0)}return c}},{key:"getType",value:function(){return"arraybuffer"}},{key:"readFeatures",value:function(e,t){var r=this.layers_;t=this.adaptOptions(t);var n=(0,c.get)(t.dataProjection);n.setWorldExtent(t.extent),t.dataProjection=n;var o=new a.default(e),i=o.readFields(q,{}),u=[];for(var s in i)if(!r||r.includes(s)){var l=i[s],f=l?[0,0,l.extent,l.extent]:null;n.setExtent(f);for(var p=0,y=l.length;p<y;++p){var d=E(o,l,p),v=this.createFeature_(o,d,t);null!==v&&u.push(v)}}return u}},{key:"readProjection",value:function(e){return this.dataProjection}},{key:"setLayers",value:function(e){this.layers_=e}}]),v}();function q(e,t,r){if(3===e){var n={keys:[],values:[],features:[]},o=r.readVarint()+r.pos;r.readFields(N,n,o),n.length=n.features.length,n.length&&(t[n.name]=n)}}function N(e,t,r){if(15===e)t.version=r.readVarint();else if(1===e)t.name=r.readString();else if(5===e)t.extent=r.readVarint();else if(2===e)t.features.push(r.pos);else if(3===e)t.keys.push(r.readString());else if(4===e){for(var n=null,o=r.readVarint()+r.pos;r.pos<o;)n=1===(e=r.readVarint()>>3)?r.readString():2===e?r.readFloat():3===e?r.readDouble():4===e?r.readVarint64():5===e?r.readVarint():6===e?r.readSVarint():7===e?r.readBoolean():null;t.values.push(n)}}function F(e,t,r){if(1==e)t.id=r.readVarint();else if(2==e)for(var n=r.readVarint()+r.pos;r.pos<n;){var o=t.layer.keys[r.readVarint()],a=t.layer.values[r.readVarint()];t.properties[o]=a}else 3==e?t.type=r.readVarint():4==e&&(t.geometry=r.pos)}function E(e,t,r){e.pos=t.features[r];var n=e.readVarint()+e.pos,o={layer:t,type:0,properties:{}};return e.readFields(F,o,n),o}function R(e,t){var r;return 1===e?r=1===t?"Point":"MultiPoint":2===e?r=1===t?"LineString":"MultiLineString":3===e&&(r="Polygon"),r}var C=k;exports.default=C;
},{"./Feature.js":"eAuZ","../geom/LineString.js":"qAxQ","../geom/MultiLineString.js":"OxPj","../geom/MultiPoint.js":"ldA8","../geom/MultiPolygon.js":"ZPDo","pbf":"QftS","../geom/Point.js":"IIKA","../geom/Polygon.js":"DTlF","../proj/Projection.js":"wxkT","../render/Feature.js":"TTaU","../asserts.js":"DVOE","../proj.js":"VAQc","../geom/flat/orient.js":"pxk9"}],"ZO7P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./ImageBase.js")),e=r(require("./ImageState.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=f(t,"string");return"symbol"===n(e)?e:String(e)}function f(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=d();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(r){c(u,t.default);var n=s(u);function u(t,r,i,a,f){var c;o(this,u);var l=void 0!==f?e.default.IDLE:e.default.LOADED;return(c=n.call(this,t,r,i,l)).loader_=void 0!==f?f:null,c.canvas_=a,c.error_=null,c}return i(u,[{key:"getError",value:function(){return this.error_}},{key:"handleLoad_",value:function(t){t?(this.error_=t,this.state=e.default.ERROR):this.state=e.default.LOADED,this.changed()}},{key:"load",value:function(){this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}},{key:"getImage",value:function(){return this.canvas_}}]),u}(),h=v;exports.default=h;
},{"./ImageBase.js":"NvYl","./ImageState.js":"FoaO"}],"JJzC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./common.js"),e=s(require("../events/EventType.js")),r=s(require("../ImageBase.js")),n=s(require("../ImageState.js")),o=s(require("./Triangulation.js")),i=require("../reproj.js"),u=require("../extent.js"),a=require("../events.js");function s(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function p(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=h(t,"string");return"symbol"===c(e)?e:String(e)}function h(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=_(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=O();return function(){var r,n=E(t);if(e){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var R=function(s){d(f,r.default);var c=b(f);function f(e,r,a,s,p,y,h){var g;l(this,f);var _=e.getExtent();_&&e.canWrapX()&&((_=_.slice())[0]=-1/0,_[2]=1/0);var d=r.getExtent();d&&r.canWrapX()&&((d=d.slice())[0]=-1/0,d[2]=1/0);var v=d?(0,u.getIntersection)(a,d):a,b=(0,u.getCenter)(v),m=(0,i.calculateSourceResolution)(e,r,b,s),j=t.ERROR_THRESHOLD,O=new o.default(e,r,v,_,m*j,s),E=O.calculateSourceExtent(),R=(0,u.isEmpty)(E)?null:y(E,m,p),x=R?n.default.IDLE:n.default.EMPTY,P=R?R.getPixelRatio():1;return(g=c.call(this,a,s,P,x)).targetProj_=r,g.maxSourceExtent_=_,g.triangulation_=O,g.targetResolution_=s,g.targetExtent_=a,g.sourceImage_=R,g.sourcePixelRatio_=P,g.interpolate_=h,g.canvas_=null,g.sourceListenerKey_=null,g}return p(f,[{key:"disposeInternal",value:function(){this.state==n.default.LOADING&&this.unlistenSource_(),g(E(f.prototype),"disposeInternal",this).call(this)}},{key:"getImage",value:function(){return this.canvas_}},{key:"getProjection",value:function(){return this.targetProj_}},{key:"reproject_",value:function(){var t=this.sourceImage_.getState();if(t==n.default.LOADED){var e=(0,u.getWidth)(this.targetExtent_)/this.targetResolution_,r=(0,u.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,i.render)(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}},{key:"load",value:function(){if(this.state==n.default.IDLE){this.state=n.default.LOADING,this.changed();var t=this.sourceImage_.getState();t==n.default.LOADED||t==n.default.ERROR?this.reproject_():(this.sourceListenerKey_=(0,a.listen)(this.sourceImage_,e.default.CHANGE,function(t){var e=this.sourceImage_.getState();e!=n.default.LOADED&&e!=n.default.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}},{key:"unlistenSource_",value:function(){(0,a.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null}}]),f}(),x=R;exports.default=x;
},{"./common.js":"bYOC","../events/EventType.js":"GUXn","../ImageBase.js":"NvYl","../ImageState.js":"FoaO","./Triangulation.js":"gmdY","../reproj.js":"BOkO","../extent.js":"L0Vw","../events.js":"MGag"}],"AC87":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../Object.js")),e=require("../proj.js");function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=a(t,"string");return"symbol"===n(e)?e:String(e)}function a(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(r){l(i,t.default);var n=s(i);function i(t){var r;o(this,i),(r=n.call(this)).projection=(0,e.get)(t.projection),r.attributions_=d(t.attributions),r.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,r.loading=!1,r.state_=void 0!==t.state?t.state:"ready",r.wrapX_=void 0!==t.wrapX&&t.wrapX,r.interpolate_=!!t.interpolate,r.viewResolver=null,r.viewRejector=null;var u=y(r);return r.viewPromise_=new Promise(function(t,e){u.viewResolver=t,u.viewRejector=e}),r}return u(i,[{key:"getAttributions",value:function(){return this.attributions_}},{key:"getAttributionsCollapsible",value:function(){return this.attributionsCollapsible_}},{key:"getProjection",value:function(){return this.projection}},{key:"getResolutions",value:function(t){return null}},{key:"getView",value:function(){return this.viewPromise_}},{key:"getState",value:function(){return this.state_}},{key:"getWrapX",value:function(){return this.wrapX_}},{key:"getInterpolate",value:function(){return this.interpolate_}},{key:"refresh",value:function(){this.changed()}},{key:"setAttributions",value:function(t){this.attributions_=d(t),this.changed()}},{key:"setState",value:function(t){this.state_=t,this.changed()}}]),i}();function d(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var w=h;exports.default=w;
},{"../Object.js":"fB8e","../proj.js":"VAQc"}],"X7eW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ImageSourceEventType=exports.ImageSourceEvent=void 0,exports.defaultImageLoadFunction=E;var e=s(require("../events/Event.js")),t=s(require("../ImageState.js")),r=s(require("../reproj/Image.js")),n=s(require("./Source.js")),o=require("../util.js"),i=require("../extent.js"),u=require("../proj.js"),a=require("../array.js");function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e){var t=d(e,"string");return"symbol"===c(t)?t:String(t)}function d(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=j();return function(){var r,n=I(e);if(t){var o=I(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};exports.ImageSourceEventType=_;var O=function(t){v(n,e.default);var r=h(n);function n(e,t){var o;return g(this,n),(o=r.call(this,e)).image=t,o}return f(n)}();exports.ImageSourceEvent=O;var R=function(e){v(c,n.default);var s=h(c);function c(e){var t;return g(this,c),(t=s.call(this,{attributions:e.attributions,projection:e.projection,state:e.state,interpolate:void 0===e.interpolate||e.interpolate})).on,t.once,t.un,t.resolutions_=void 0!==e.resolutions?e.resolutions:null,t.reprojectedImage_=null,t.reprojectedRevision_=0,t}return f(c,[{key:"getResolutions",value:function(){return this.resolutions_}},{key:"setResolutions",value:function(e){this.resolutions_=e}},{key:"findNearestResolution",value:function(e){var t=this.getResolutions();t&&(e=t[(0,a.linearFindNearest)(t,e,0)]);return e}},{key:"getImage",value:function(e,t,n,o){var a=this,s=this.getProjection();if(!s||!o||(0,u.equivalent)(s,o))return s&&(o=s),this.getImageInternal(e,t,n,o);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,u.equivalent)(this.reprojectedImage_.getProjection(),o)&&this.reprojectedImage_.getResolution()==t&&(0,i.equals)(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new r.default(s,o,e,t,n,function(e,t,r){return a.getImageInternal(e,t,r,s)},this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}},{key:"getImageInternal",value:function(e,t,r,n){return(0,o.abstract)()}},{key:"handleImageChange",value:function(e){var r,n=e.target;switch(n.getState()){case t.default.LOADING:this.loading=!0,r=_.IMAGELOADSTART;break;case t.default.LOADED:this.loading=!1,r=_.IMAGELOADEND;break;case t.default.ERROR:this.loading=!1,r=_.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new O(r,n))}}]),c}();function E(e,t){e.getImage().src=t}var S=R;exports.default=S;
},{"../events/Event.js":"M1Cf","../ImageState.js":"FoaO","../reproj/Image.js":"JJzC","./Source.js":"AC87","../util.js":"KA50","../extent.js":"L0Vw","../proj.js":"VAQc","../array.js":"o0G8"}],"mRAJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Layer.js")),t=r(require("./TileProperty.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function u(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=f(e,"string");return"symbol"===n(t)?t:String(t)}function f(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=v();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(r){s(i,e.default);var n=y(i);function i(e){var t;o(this,i),e=e||{};var r=Object.assign({},e);return delete r.preload,delete r.useInterimTilesOnError,(t=n.call(this,r)).on,t.once,t.un,t.setPreload(void 0!==e.preload?e.preload:0),t.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),t}return u(i,[{key:"getPreload",value:function(){return this.get(t.default.PRELOAD)}},{key:"setPreload",value:function(e){this.set(t.default.PRELOAD,e)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(t.default.USE_INTERIM_TILES_ON_ERROR)}},{key:"setUseInterimTilesOnError",value:function(e){this.set(t.default.USE_INTERIM_TILES_ON_ERROR,e)}},{key:"getData",value:function(e){return l(O(i.prototype),"getData",this).call(this,e)}}]),i}(),m=h;exports.default=m;
},{"./Layer.js":"Ee0U","./TileProperty.js":"KhhP"}],"PqrZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./BaseTile.js")),e=r(require("../renderer/canvas/TileLayer.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===n(e)?e:String(e)}function f(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(r){l(u,t.default);var n=s(u);function u(t){return o(this,u),n.call(this,t)}return i(u,[{key:"createRenderer",value:function(){return new e.default(this)}}]),u}(),m=v;exports.default=m;
},{"./BaseTile.js":"mRAJ","../renderer/canvas/TileLayer.js":"ISPk"}],"UtOR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var n=o(e,"string");return"symbol"===t(n)?n:String(n)}function o(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}var u=function(){function t(e){n(this,t),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return i(t,[{key:"canExpireCache",value:function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}},{key:"expireCache",value:function(e){for(;this.canExpireCache();)this.pop()}},{key:"clear",value:function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}},{key:"containsKey",value:function(e){return this.entries_.hasOwnProperty(e)}},{key:"forEach",value:function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer}},{key:"get",value:function(t,n){var r=this.entries_[t];return(0,e.assert)(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)}},{key:"remove",value:function(t){var n=this.entries_[t];return(0,e.assert)(void 0!==n,15),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}},{key:"getCount",value:function(){return this.count_}},{key:"getKeys",value:function(){var e,t=new Array(this.count_),n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}},{key:"getValues",value:function(){var e,t=new Array(this.count_),n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}},{key:"peekLast",value:function(){return this.oldest_.value_}},{key:"peekLastKey",value:function(){return this.oldest_.key_}},{key:"peekFirstKey",value:function(){return this.newest_.key_}},{key:"peek",value:function(e){if(this.containsKey(e))return this.entries_[e].value_}},{key:"pop",value:function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}},{key:"replace",value:function(e,t){this.get(e),this.entries_[e].value_=t}},{key:"set",value:function(t,n){(0,e.assert)(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_}},{key:"setSize",value:function(e){this.highWaterMark=e}}]),t}(),l=u;exports.default=l;
},{"../asserts.js":"DVOE"}],"zj1M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./structs/LRUCache.js")),t=require("./tilecoord.js");function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function u(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=f(e,"string");return"symbol"===n(t)?t:String(t)}function f(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=v();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(r){p(i,e.default);var n=y(i);function i(){return o(this,i),n.apply(this,arguments)}return u(i,[{key:"clear",value:function(){for(;this.getCount()>0;)this.pop().release();l(d(i.prototype),"clear",this).call(this)}},{key:"expireCache",value:function(e){for(;this.canExpireCache();){if(this.peekLast().getKey()in e)break;this.pop().release()}}},{key:"pruneExceptNewestZ",value:function(){var e=this;if(0!==this.getCount()){var r=this.peekFirstKey(),n=(0,t.fromKey)(r)[0];this.forEach(function(r){r.tileCoord[0]!==n&&(e.remove((0,t.getKey)(r.tileCoord)),r.release())})}}}]),i}(),O=m;exports.default=O;
},{"./structs/LRUCache.js":"UtOR","./tilecoord.js":"NPSy"}],"JVE6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("../TileRange.js")),t=require("./common.js"),i=require("../asserts.js"),r=require("../math.js"),o=require("../extent.js"),n=require("../tilecoord.js"),s=require("../geom/flat/intersectsextent.js"),l=require("../array.js"),a=require("../size.js");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(u=function(e){return e?i:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=u(t);if(i&&i.has(e))return i.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var s=o?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n]}return r.default=e,i&&i.set(e,r),r}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function m(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e){var t=d(e,"string");return"symbol"===g(t)?t:String(t)}function d(e,t){if("object"!==g(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var v=[0,0,0],p=5,y=function(){function u(r){var n;if(f(this,u),this.minZoom=void 0!==r.minZoom?r.minZoom:0,this.resolutions_=r.resolutions,(0,i.assert)((0,l.isSorted)(this.resolutions_,function(e,t){return t-e},!0),17),!r.origins)for(var s=0,a=this.resolutions_.length-1;s<a;++s)if(n){if(this.resolutions_[s]/this.resolutions_[s+1]!==n){n=void 0;break}}else n=this.resolutions_[s]/this.resolutions_[s+1];this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==r.origin?r.origin:null,this.origins_=null,void 0!==r.origins&&(this.origins_=r.origins,(0,i.assert)(this.origins_.length==this.resolutions_.length,20));var h=r.extent;void 0===h||this.origin_||this.origins_||(this.origin_=(0,o.getTopLeft)(h)),(0,i.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==r.tileSizes&&(this.tileSizes_=r.tileSizes,(0,i.assert)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==r.tileSize?r.tileSize:this.tileSizes_?null:t.DEFAULT_TILE_SIZE,(0,i.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==h?h:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==r.sizes?this.fullTileRanges_=r.sizes.map(function(t,i){var r=new e.default(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(h){var o=this.getTileRangeForExtentAndZ(h,i);r.minX=Math.max(o.minX,r.minX),r.maxX=Math.min(o.maxX,r.maxX),r.minY=Math.max(o.minY,r.minY),r.maxY=Math.min(o.maxY,r.maxY)}return r},this):h&&this.calculateTileRanges_(h)}return m(u,[{key:"forEachTileCoord",value:function(e,t,i){for(var r=this.getTileRangeForExtentAndZ(e,t),o=r.minX,n=r.maxX;o<=n;++o)for(var s=r.minY,l=r.maxY;s<=l;++s)i([t,o,s])}},{key:"forEachTileCoordParentTileRange",value:function(t,i,r,o){var n,s,l,a=null,u=t[0]-1;for(2===this.zoomFactor_?(s=t[1],l=t[2]):a=this.getTileCoordExtent(t,o);u>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),l=Math.floor(l/2),n=(0,e.createOrUpdate)(s,s,l,l,r)):n=this.getTileRangeForExtentAndZ(a,u,r),i(u,n))return!0;--u}return!1}},{key:"getExtent",value:function(){return this.extent_}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"getOrigin",value:function(e){return this.origin_?this.origin_:this.origins_[e]}},{key:"getResolution",value:function(e){return this.resolutions_[e]}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getTileCoordChildTileRange",value:function(t,i,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var o=2*t[1],n=2*t[2];return(0,e.createOrUpdate)(o,o+1,n,n+1,i)}var s=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,i)}return null}},{key:"getTileRangeForTileCoordAndZ",value:function(t,i,r){if(i>this.maxZoom||i<this.minZoom)return null;var o=t[0],n=t[1],s=t[2];if(i===o)return(0,e.createOrUpdate)(n,s,n,s,r);if(this.zoomFactor_){var l=Math.pow(this.zoomFactor_,i-o),a=Math.floor(n*l),u=Math.floor(s*l);if(i<o)return(0,e.createOrUpdate)(a,a,u,u,r);var h=Math.floor(l*(n+1))-1,g=Math.floor(l*(s+1))-1;return(0,e.createOrUpdate)(a,h,u,g,r)}var f=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(f,i,r)}},{key:"getTileRangeForExtentAndZ",value:function(t,i,r){this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,v);var o=v[1],n=v[2];this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,v);var s=v[1],l=v[2];return(0,e.createOrUpdate)(o,s,n,l,r)}},{key:"getTileCoordCenter",value:function(e){var t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=(0,a.toSize)(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}},{key:"getTileCoordExtent",value:function(e,t){var i=this.getOrigin(e[0]),r=this.getResolution(e[0]),n=(0,a.toSize)(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*n[0]*r,l=i[1]-(e[2]+1)*n[1]*r,u=s+n[0]*r,h=l+n[1]*r;return(0,o.createOrUpdate)(s,l,u,h,t)}},{key:"getTileCoordForCoordAndResolution",value:function(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}},{key:"getTileCoordForXYAndResolution_",value:function(e,t,i,o,s){var l=this.getZForResolution(i),u=i/this.getResolution(l),h=this.getOrigin(l),g=(0,a.toSize)(this.getTileSize(l),this.tmpSize_),f=u*(e-h[0])/i/g[0],c=u*(h[1]-t)/i/g[1];return o?(f=(0,r.ceil)(f,p)-1,c=(0,r.ceil)(c,p)-1):(f=(0,r.floor)(f,p),c=(0,r.floor)(c,p)),(0,n.createOrUpdate)(l,f,c,s)}},{key:"getTileCoordForXYAndZ_",value:function(e,t,i,o,s){var l=this.getOrigin(i),u=this.getResolution(i),h=(0,a.toSize)(this.getTileSize(i),this.tmpSize_),g=(e-l[0])/u/h[0],f=(l[1]-t)/u/h[1];return o?(g=(0,r.ceil)(g,p)-1,f=(0,r.ceil)(f,p)-1):(g=(0,r.floor)(g,p),f=(0,r.floor)(f,p)),(0,n.createOrUpdate)(i,g,f,s)}},{key:"getTileCoordForCoordAndZ",value:function(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}},{key:"getTileCoordResolution",value:function(e){return this.resolutions_[e[0]]}},{key:"getTileSize",value:function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}},{key:"getFullTileRange",value:function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}},{key:"getZForResolution",value:function(e,t){var i=(0,l.linearFindNearest)(this.resolutions_,e,t||0);return(0,r.clamp)(i,this.minZoom,this.maxZoom)}},{key:"tileCoordIntersectsViewport",value:function(e,t){return(0,s.intersectsLinearRing)(t,0,t.length,2,this.getTileCoordExtent(e))}},{key:"calculateTileRanges_",value:function(e){for(var t=this.resolutions_.length,i=new Array(t),r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}]),u}(),T=y;exports.default=T;
},{"../TileRange.js":"m5CX","./common.js":"exM9","../asserts.js":"DVOE","../math.js":"qAK2","../extent.js":"L0Vw","../tilecoord.js":"NPSy","../geom/flat/intersectsextent.js":"aXDF","../array.js":"o0G8","../size.js":"d9VJ"}],"gNrJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createForExtent=s,exports.createForProjection=c,exports.createXYZ=l,exports.extentFromProjection=f,exports.getForProjection=u,exports.wrapX=a;var e=n(require("./tilegrid/TileGrid.js")),t=require("./tilegrid/common.js"),r=require("./proj.js"),o=require("./extent.js"),i=require("./size.js");function n(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e.getDefaultTileGrid();return t||(t=c(e),e.setDefaultTileGrid(t)),t}function a(e,t,r){var i=t[0],n=e.getTileCoordCenter(t),u=f(r);if(!(0,o.containsCoordinate)(u,n)){var a=(0,o.getWidth)(u),s=Math.ceil((u[0]-n[0])/a);return n[0]+=a*s,e.getTileCoordForCoordAndZ(n,i)}return t}function s(t,r,i,n){n=void 0!==n?n:"top-left";var u=d(t,r,i);return new e.default({extent:t,origin:(0,o.getCorner)(t,n),resolutions:u,tileSize:i})}function l(t){var o=t||{},i=o.extent||(0,r.get)("EPSG:3857").getExtent(),n={extent:i,minZoom:o.minZoom,tileSize:o.tileSize,resolutions:d(i,o.maxZoom,o.tileSize,o.maxResolution)};return new e.default(n)}function d(e,r,n,u){r=void 0!==r?r:t.DEFAULT_MAX_ZOOM,n=(0,i.toSize)(void 0!==n?n:t.DEFAULT_TILE_SIZE);var a=(0,o.getHeight)(e),s=(0,o.getWidth)(e);u=u>0?u:Math.max(s/n[0],a/n[1]);for(var l=r+1,d=new Array(l),c=0;c<l;++c)d[c]=u/Math.pow(2,c);return d}function c(e,t,r,o){return s(f(e),t,r,o)}function f(e){var t=(e=(0,r.get)(e)).getExtent();if(!t){var i=180*r.METERS_PER_UNIT.degrees/e.getMetersPerUnit();t=(0,o.createOrUpdate)(-i,-i,i,i)}return t}
},{"./tilegrid/TileGrid.js":"JVE6","./tilegrid/common.js":"exM9","./proj.js":"VAQc","./extent.js":"L0Vw","./size.js":"d9VJ"}],"MN9s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TileSourceEvent=void 0;var e=s(require("../events/Event.js")),t=s(require("./Source.js")),r=s(require("../TileCache.js")),i=s(require("../TileState.js")),n=require("../util.js"),o=require("../asserts.js"),u=require("../proj.js"),l=require("../tilecoord.js"),a=require("../tilegrid.js"),c=require("../size.js");function s(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,v(i.key),i)}}function h(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=d(e,"string");return"symbol"===f(t)?t:String(t)}function d(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=g(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=S();return function(){var r,i=O(e);if(t){var n=O(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){j(f,t.default);var s=k(f);function f(e){var t;p(this,f),(t=s.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})).on,t.once,t.un,t.opaque_=void 0!==e.opaque&&e.opaque,t.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,t.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;return t.tileGrid&&(0,c.toSize)(t.tileGrid.getTileSize(t.tileGrid.getMinZoom()),[256,256]),t.tileCache=new r.default(e.cacheSize||0),t.tmpSize=[0,0],t.key_=e.key||"",t.tileOptions={transition:e.transition,interpolate:e.interpolate},t.zDirection=e.zDirection?e.zDirection:0,t}return h(f,[{key:"canExpireCache",value:function(){return this.tileCache.canExpireCache()}},{key:"expireCache",value:function(e,t){var r=this.getTileCacheForProjection(e);r&&r.expireCache(t)}},{key:"forEachLoadedTile",value:function(e,t,r,n){var o=this.getTileCacheForProjection(e);if(!o)return!1;for(var u,a,c,s=!0,f=r.minX;f<=r.maxX;++f)for(var p=r.minY;p<=r.maxY;++p)a=(0,l.getKeyZXY)(t,f,p),c=!1,o.containsKey(a)&&(c=(u=o.get(a)).getState()===i.default.LOADED)&&(c=!1!==n(u)),c||(s=!1);return s}},{key:"getGutterForProjection",value:function(e){return 0}},{key:"getKey",value:function(){return this.key_}},{key:"setKey",value:function(e){this.key_!==e&&(this.key_=e,this.changed())}},{key:"getOpaque",value:function(e){return this.opaque_}},{key:"getResolutions",value:function(e){var t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}},{key:"getTile",value:function(e,t,r,i,o){return(0,n.abstract)()}},{key:"getTileGrid",value:function(){return this.tileGrid}},{key:"getTileGridForProjection",value:function(e){return this.tileGrid?this.tileGrid:(0,a.getForProjection)(e)}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();return(0,o.assert)(null===t||(0,u.equivalent)(t,e),68),this.tileCache}},{key:"getTilePixelRatio",value:function(e){return this.tilePixelRatio_}},{key:"getTilePixelSize",value:function(e,t,r){var i=this.getTileGridForProjection(r),n=this.getTilePixelRatio(t),o=(0,c.toSize)(i.getTileSize(e),this.tmpSize);return 1==n?o:(0,c.scale)(o,n,this.tmpSize)}},{key:"getTileCoordForTileUrlFunction",value:function(e,t){t=void 0!==t?t:this.getProjection();var r=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=(0,a.wrapX)(r,e,t)),(0,l.withinExtentAndZ)(e,r)?e:null}},{key:"clear",value:function(){this.tileCache.clear()}},{key:"refresh",value:function(){this.clear(),b(O(f.prototype),"refresh",this).call(this)}},{key:"updateCacheSize",value:function(e,t){var r=this.getTileCacheForProjection(t);e>r.highWaterMark&&(r.highWaterMark=e)}},{key:"useTile",value:function(e,t,r,i){}}]),f}(),x=function(t){j(i,e.default);var r=k(i);function i(e,t){var n;return p(this,i),(n=r.call(this,e)).tile=t,n}return h(i)}();exports.TileSourceEvent=x;var _=w;exports.default=_;
},{"../events/Event.js":"M1Cf","./Source.js":"AC87","../TileCache.js":"zj1M","../TileState.js":"FoaO","../util.js":"KA50","../asserts.js":"DVOE","../proj.js":"VAQc","../tilecoord.js":"NPSy","../tilegrid.js":"gNrJ","../size.js":"d9VJ"}],"yh9p":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"REa7":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"dskh":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"yh9p","ieee754":"JgNJ","isarray":"REa7","buffer":"dskh"}],"xFSo":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.RasterSourceEvent=exports.Processor=void 0,exports.newImageData=A;var t=v(require("../Disposable.js")),r=v(require("../events/Event.js")),n=v(require("../events/EventType.js")),a=v(require("../ImageCanvas.js")),i=v(require("../layer/Image.js")),o=v(require("./Image.js")),s=v(require("./Source.js")),u=v(require("../layer/Tile.js")),l=v(require("../TileQueue.js")),f=v(require("./Tile.js")),c=require("../dom.js"),h=require("../transform.js"),d=require("../extent.js"),p=require("../util.js");function v(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=m(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}}).apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function w(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e){var t=O(e,"string");return"symbol"===g(t)?t:String(t)}function O(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=C();return function(){var r,n=I(e);if(t){var a=I(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E,T=!0;try{new ImageData(10,10)}catch(G){T=!1}function A(e,t,r){if(T)return new ImageData(e,t,r);E||(E=document.createElement("canvas").getContext("2d"));var n=E.createImageData(t,r);return n.data.set(e),n}function P(e){var t=!0;try{new ImageData(10,10)}catch(G){t=!1}function r(e,r,n){return t?new ImageData(e,r,n):{data:e,width:r,height:n}}return function(t){var n=t.buffers,a=t.meta,i=t.imageOps,o=t.width,s=t.height,u=n.length,l=n[0].byteLength;if(i){for(var f=new Array(u),c=0;c<u;++c)f[c]=r(new Uint8ClampedArray(n[c]),o,s);return e(f,a).data.buffer}for(var h=new Uint8ClampedArray(l),d=new Array(u),p=new Array(u),v=0;v<u;++v)d[v]=new Uint8ClampedArray(n[v]),p[v]=[0,0,0,0];for(var g=0;g<l;g+=4){for(var _=0;_<u;++_){var m=d[_];p[_][0]=m[g],p[_][1]=m[g+1],p[_][2]=m[g+2],p[_][3]=m[g+3]}var y=e(p,a);h[g]=y[0],h[g+1]=y[1],h[g+2]=y[2],h[g+3]=y[3]}return h.buffer}}function F(t,r){var n=Object.keys(t.lib||{}).map(function(e){return"const "+e+" = "+t.lib[e].toString()+";"}).concat(["const __minion__ = ("+P.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),a=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+e.from(n.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})));return a.addEventListener("message",r),a}function L(e,t){var r=P(e.operation),n=!1;return{postMessage:function(e){setTimeout(function(){n||t({data:{buffer:r(e),meta:e.meta}})},0)},terminate:function(){n=!0}}}var M=function(e){j(n,t.default);var r=R(n);function n(e){var t,a;y(this,n),(t=r.call(this))._imageOps=!!e.imageOps,a=0===e.threads?0:t._imageOps?1:e.threads||1;var i=new Array(a);if(a)for(var o=0;o<a;++o)i[o]=F(e,t._onWorkerMessage.bind(q(t),o));else i[0]=L(e,t._onWorkerMessage.bind(q(t),0));return t._workers=i,t._queue=[],t._maxQueueLength=e.queue||1/0,t._running=0,t._dataLookup={},t._job=null,t}return w(n,[{key:"process",value:function(e,t,r){this._enqueue({inputs:e,meta:t,callback:r}),this._dispatch()}},{key:"_enqueue",value:function(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}},{key:"_dispatch",value:function(){if(!this._running&&0!==this._queue.length){var e=this._queue.shift();this._job=e;var t=e.inputs[0].width,r=e.inputs[0].height,n=e.inputs.map(function(e){return e.data.buffer}),a=this._workers.length;if(this._running=a,1!==a)for(var i=e.inputs[0].data.length,o=4*Math.ceil(i/4/a),s=0;s<a;++s){for(var u=s*o,l=[],f=0,c=n.length;f<c;++f)l.push(n[f].slice(u,u+o));this._workers[s].postMessage({buffers:l,meta:e.meta,imageOps:this._imageOps,width:t,height:r},l)}else this._workers[0].postMessage({buffers:n,meta:e.meta,imageOps:this._imageOps,width:t,height:r},n)}}},{key:"_onWorkerMessage",value:function(e,t){this.disposed||(this._dataLookup[e]=t.data,--this._running,0===this._running&&this._resolveJob())}},{key:"_resolveJob",value:function(){var e,t,r=this._job,n=this._workers.length;if(1===n)e=new Uint8ClampedArray(this._dataLookup[0].buffer),t=this._dataLookup[0].meta;else{var a=r.inputs[0].data.length;e=new Uint8ClampedArray(a),t=new Array(n);for(var i=4*Math.ceil(a/4/n),o=0;o<n;++o){var s=this._dataLookup[o].buffer,u=o*i;e.set(new Uint8ClampedArray(s),u),t[o]=this._dataLookup[o].meta}}this._job=null,this._dataLookup={},r.callback(null,A(e,r.inputs[0].width,r.inputs[0].height),t),this._dispatch()}},{key:"disposeInternal",value:function(){for(var e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0}}]),n}();exports.Processor=M;var D={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"},U=function(e){j(n,r.default);var t=R(n);function n(e,r,a){var i;return y(this,n),(i=t.call(this,e)).extent=r.extent,i.resolution=r.viewState.resolution/r.pixelRatio,i.data=a,i}return w(n)}();exports.RasterSourceEvent=U;var z=function(e){j(r,o.default);var t=R(r);function r(e){var a;y(this,r),(a=t.call(this,{projection:null})).on,a.once,a.un,a.processor_=null,a.operationType_=void 0!==e.operationType?e.operationType:"pixel",a.threads_=void 0!==e.threads?e.threads:1,a.layers_=Q(e.sources);for(var i=a.changed.bind(q(a)),o=0,u=a.layers_.length;o<u;++o)a.layers_[o].addEventListener(n.default.CHANGE,i);return a.useResolutions_=null!==e.resolutions,a.tileQueue_=new l.default(function(){return 1},a.changed.bind(q(a))),a.requestedFrameState_,a.renderedImageCanvas_=null,a.renderedRevision_,a.frameState_={animate:!1,coordinateToPixelTransform:(0,h.create)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:N(a.layers_),pixelRatio:1,pixelToCoordinateTransform:(0,h.create)(),postRenderFunctions:[],size:[0,0],tileQueue:a.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,p.getUid)(q(a)),renderTargets:{}},a.setAttributions(function(t){for(var r=[],n=0,a=e.sources.length;n<a;++n){var i=e.sources[n],o=i instanceof s.default?i:i.getSource();if(o){var u=o.getAttributions();if("function"==typeof u){var l=u(t);r.push.apply(r,l)}}}return 0!==r.length?r:null}),void 0!==e.operation&&a.setOperation(e.operation,e.lib),a}return w(r,[{key:"setOperation",value:function(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new M({operation:e,imageOps:"image"===this.operationType_,queue:1,lib:t,threads:this.threads_}),this.changed()}},{key:"updateFrameState_",value:function(e,t,r){var n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);var a=(0,d.getCenter)(e);n.size[0]=Math.ceil((0,d.getWidth)(e)/t),n.size[1]=Math.ceil((0,d.getHeight)(e)/t),n.extent=[a[0]-n.size[0]*t/2,a[1]-n.size[1]*t/2,a[0]+n.size[0]*t/2,a[1]+n.size[1]*t/2],n.time=Date.now();var i=n.viewState;return i.center=a,i.projection=r,i.resolution=t,n}},{key:"allSourcesReady_",value:function(){for(var e,t=!0,r=0,n=this.layers_.length;r<n;++r)if(!(e=this.layers_[r].getSource())||"ready"!==e.getState()){t=!1;break}return t}},{key:"getImage",value:function(e,t,r,n){if(!this.allSourcesReady_())return null;t=this.findNearestResolution(t);var a=this.updateFrameState_(e,t,n);if(this.requestedFrameState_=a,this.renderedImageCanvas_){var i=this.renderedImageCanvas_.getResolution(),o=this.renderedImageCanvas_.getExtent();t===i&&(0,d.equals)(a.extent,o)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),a.tileQueue.loadMoreTiles(16,16),a.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}},{key:"processSources_",value:function(){for(var e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t),n=0;n<t;++n){e.layerIndex=n,e.renderTargets={};var a=B(this.layers_[n],e);if(!a)return;r[n]=a}var i={};this.dispatchEvent(new U(D.BEFOREOPERATIONS,e,i)),this.processor_.process(r,i,this.onWorkerComplete_.bind(this,e))}},{key:"onWorkerComplete_",value:function(e,t,r,n){if(!t&&r){var i=e.extent,o=e.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&(0,d.equals)(i,this.requestedFrameState_.extent)){var s;if(this.renderedImageCanvas_)s=this.renderedImageCanvas_.getImage().getContext("2d");else{var u=Math.round((0,d.getWidth)(i)/o),l=Math.round((0,d.getHeight)(i)/o);s=(0,c.createCanvasContext2D)(u,l),this.renderedImageCanvas_=new a.default(i,o,1,s.canvas)}s.putImageData(r,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new U(D.AFTEROPERATIONS,e,n)),e.animate&&requestAnimationFrame(this.changed.bind(this))}}}},{key:"getResolutions",value:function(e){if(!this.useResolutions_)return null;var t=_(I(r.prototype),"getResolutions",this).call(this);if(!t)for(var n=0,a=this.layers_.length;n<a;++n){if(t=this.layers_[n].getSource().getResolutions(e))break}return t}},{key:"disposeInternal",value:function(){this.processor_&&this.processor_.dispose(),_(I(r.prototype),"disposeInternal",this).call(this)}}]),r}();z.prototype.dispose;var W=null;function B(e,t){var r=e.getRenderer();if(!r)throw new Error("Unsupported layer type: "+e);if(!r.prepareFrame(t))return null;var n=t.size[0],a=t.size[1];if(0===n||0===a)return null;var i,o=r.renderFrame(t,null);if(o instanceof HTMLCanvasElement)i=o;else{if(o&&(i=o.firstElementChild),!(i instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+i);if(i.width===n&&i.height===a)return i.getContext("2d").getImageData(0,0,n,a)}if(W){var s=W.canvas;s.width!==n||s.height!==a?W=(0,c.createCanvasContext2D)(n,a,void 0,{willReadFrequently:!0}):W.clearRect(0,0,n,a)}else W=(0,c.createCanvasContext2D)(n,a,void 0,{willReadFrequently:!0});return W.drawImage(i,0,0,n,a),W.getImageData(0,0,n,a)}function N(e){return e.map(function(e){return e.getLayerState()})}function Q(e){for(var t=e.length,r=new Array(t),n=0;n<t;++n)r[n]=H(e[n]);return r}function H(e){var t;return e instanceof s.default?e instanceof f.default?t=new u.default({source:e}):e instanceof o.default&&(t=new i.default({source:e})):t=e,t}var J=z;exports.default=J;
},{"../Disposable.js":"jZkk","../events/Event.js":"M1Cf","../events/EventType.js":"GUXn","../ImageCanvas.js":"ZO7P","../layer/Image.js":"kjaO","./Image.js":"X7eW","./Source.js":"AC87","../layer/Tile.js":"PqrZ","../TileQueue.js":"mzg7","./Tile.js":"MN9s","../dom.js":"FYLQ","../transform.js":"Ln8D","../extent.js":"L0Vw","../util.js":"KA50","buffer":"dskh"}],"qsHJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};exports.default=e;
},{}],"P4LM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("./TileEventType.js")),e=l(require("./Tile.js")),r=c(require("../TileState.js")),n=require("../tileurlfunction.js"),i=require("../tilecoord.js"),o=require("../util.js");function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(u=function(t){return t?r:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=u(e);if(r&&r.has(t))return r.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var l=i?Object.getOwnPropertyDescriptor(t,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function c(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function p(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=d(t,"string");return"symbol"===a(e)?e:String(e)}function d(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=j();return function(){var r,n=T(t);if(e){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var U=function(u){h(c,e.default);var l=v(c);function c(t){var e;return s(this,c),(e=l.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})).generateTileUrlFunction_=e.tileUrlFunction===c.prototype.tileUrlFunction,e.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(e.tileUrlFunction=t.tileUrlFunction),e.urls=null,t.urls?e.setUrls(t.urls):t.url&&e.setUrl(t.url),e.tileLoadingKeys_={},e}return p(c,[{key:"getTileLoadFunction",value:function(){return this.tileLoadFunction}},{key:"getTileUrlFunction",value:function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}},{key:"getUrls",value:function(){return this.urls}},{key:"handleTileChange",value:function(n){var i,u=n.target,l=(0,o.getUid)(u),c=u.getState();c==r.default.LOADING?(this.tileLoadingKeys_[l]=!0,i=t.default.TILELOADSTART):l in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[l],i=c==r.default.ERROR?t.default.TILELOADERROR:c==r.default.LOADED?t.default.TILELOADEND:void 0),null!=i&&this.dispatchEvent(new e.TileSourceEvent(i,u))}},{key:"setTileLoadFunction",value:function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}},{key:"setTileUrlFunction",value:function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}},{key:"setUrl",value:function(t){var e=(0,n.expandUrl)(t);this.urls=e,this.setUrls(e)}},{key:"setUrls",value:function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,n.createFromTemplates)(t,this.tileGrid),e):this.setKey(e)}},{key:"tileUrlFunction",value:function(t,e,r){}},{key:"useTile",value:function(t,e,r){var n=(0,i.getKeyZXY)(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}]),c}(),w=U;exports.default=w;
},{"./TileEventType.js":"qsHJ","./Tile.js":"MN9s","../TileState.js":"FoaO","../tileurlfunction.js":"dZ35","../tilecoord.js":"NPSy","../util.js":"KA50"}],"rQ5G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../events/EventType.js")),t=s(require("../ImageTile.js")),r=s(require("../reproj/Tile.js")),i=s(require("../TileCache.js")),o=s(require("../TileState.js")),n=s(require("./UrlTile.js")),l=require("../proj.js"),c=require("../tilecoord.js"),a=require("../tilegrid.js"),u=require("../util.js");function s(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,y(i.key),i)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=v(e,"string");return"symbol"===h(t)?t:String(t)}function v(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=j(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=m();return function(){var r,i=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return F(this,r)}}function F(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(s){P(p,n.default);var h=C(p);function p(e){var r;return f(this,p),(r=h.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:E,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:t.default,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return d(p,[{key:"canExpireCache",value:function(){if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}},{key:"expireCache",value:function(e,t){var r=this.getTileCacheForProjection(e);for(var i in this.tileCache.expireCache(this.tileCache==r?t:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[i];o.expireCache(o==r?t:{})}}},{key:"getGutterForProjection",value:function(e){return this.getProjection()&&e&&!(0,l.equivalent)(this.getProjection(),e)?0:this.getGutter()}},{key:"getGutter",value:function(){return 0}},{key:"getKey",value:function(){var e=g(O(p.prototype),"getKey",this).call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e}},{key:"getOpaque",value:function(e){return!(this.getProjection()&&e&&!(0,l.equivalent)(this.getProjection(),e))&&g(O(p.prototype),"getOpaque",this).call(this,e)}},{key:"getTileGridForProjection",value:function(e){var t=this.getProjection();if(this.tileGrid&&(!t||(0,l.equivalent)(t,e)))return this.tileGrid;var r=(0,u.getUid)(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=(0,a.getForProjection)(e)),this.tileGridForProjection[r]}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();if(!t||(0,l.equivalent)(t,e))return this.tileCache;var r=(0,u.getUid)(e);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new i.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]}},{key:"createTile_",value:function(t,r,i,n,l,c){var a=[t,r,i],u=this.getTileCoordForTileUrlFunction(a,l),s=u?this.tileUrlFunction(u,n,l):void 0,h=new this.tileClass(a,void 0!==s?o.default.IDLE:o.default.EMPTY,void 0!==s?s:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=c,h.addEventListener(e.default.CHANGE,this.handleTileChange.bind(this)),h}},{key:"getTile",value:function(e,t,i,o,n){var a=this,u=this.getProjection();if(!u||!n||(0,l.equivalent)(u,n))return this.getTileInternal(e,t,i,o,u||n);var s,h=this.getTileCacheForProjection(n),f=[e,t,i],p=(0,c.getKey)(f);h.containsKey(p)&&(s=h.get(p));var d=this.getKey();if(s&&s.key==d)return s;var y=this.getTileGridForProjection(u),v=this.getTileGridForProjection(n),g=this.getTileCoordForTileUrlFunction(f,n),j=new r.default(u,y,n,v,f,g,this.getTilePixelRatio(o),this.getGutter(),function(e,t,r,i){return a.getTileInternal(e,t,r,i,u)},this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return j.key=d,s?(j.interimTile=s,j.refreshInterimChain(),h.replace(p,j)):h.set(p,j),j}},{key:"getTileInternal",value:function(e,t,r,i,n){var l=null,a=(0,c.getKeyZXY)(e,t,r),u=this.getKey();if(this.tileCache.containsKey(a)){if((l=this.tileCache.get(a)).key!=u){var s=l;l=this.createTile_(e,t,r,i,n,u),s.getState()==o.default.IDLE?l.interimTile=s.interimTile:l.interimTile=s,l.refreshInterimChain(),this.tileCache.replace(a,l)}}else l=this.createTile_(e,t,r,i,n,u),this.tileCache.set(a,l);return l}},{key:"setRenderReprojectionEdges",value:function(e){if(this.renderReprojectionEdges_!=e){for(var t in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}},{key:"setTileGridForProjection",value:function(e,t){var r=(0,l.get)(e);if(r){var i=(0,u.getUid)(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}},{key:"clear",value:function(){for(var e in g(O(p.prototype),"clear",this).call(this),this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}]),p}();function E(e,t){e.getImage().src=t}var w=k;exports.default=w;
},{"../events/EventType.js":"GUXn","../ImageTile.js":"j3TM","../reproj/Tile.js":"o8Mp","../TileCache.js":"zj1M","../TileState.js":"FoaO","./UrlTile.js":"P4LM","../proj.js":"VAQc","../tilecoord.js":"NPSy","../tilegrid.js":"gNrJ","../util.js":"KA50"}],"MPOK":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResponseError=exports.ClientError=void 0,exports.getJSON=g,exports.jsonp=h,exports.overrideXHR=j,exports.resolveUrl=R,exports.restoreXHR=x;var t=require("./util.js");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){var t=u(e,"string");return"symbol"===r(t)?t:String(t)}function u(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function a(e){var t=d();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||!v(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return y(e,arguments,m(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)})(e)}function y(e,t,r){return(y=d()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&b(o,r.prototype),o}).apply(null,arguments)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,r,n,o){var i=document.createElement("script"),u="olc_"+(0,t.getUid)(r);function c(){delete window[u],i.parentNode.removeChild(i)}i.async=!0,i.src=e+(e.includes("?")?"&":"?")+(o||"callback")+"="+u;var s=setTimeout(function(){c(),n&&n()},1e4);window[u]=function(e){clearTimeout(s),c(),r(e)},document.head.appendChild(i)}var w=function(e){s(r,l(Error));var t=a(r);function r(e){var n;c(this,r);var o="Unexpected response status: "+e.status;return(n=t.call(this,o)).name="ResponseError",n.response=e,n}return o(r)}();exports.ResponseError=w;var O,E=function(e){s(r,l(Error));var t=a(r);function r(e){var n;return c(this,r),(n=t.call(this,"Failed to issue request")).name="ClientError",n.client=e,n}return o(r)}();function g(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.addEventListener("load",function(e){var n=e.target;if(!n.status||n.status>=200&&n.status<300){var o;try{o=JSON.parse(n.responseText)}catch(u){var i="Error parsing response text as JSON: "+u.message;return void r(new Error(i))}t(o)}else r(new w(n))}),n.addEventListener("error",function(e){r(new E(e.target))}),n.open("GET",e),n.setRequestHeader("Accept","application/json"),n.send()})}function R(e,t){return t.includes("://")?t:new URL(t,e).href}function j(t){"undefined"!=typeof XMLHttpRequest&&(O=XMLHttpRequest),e.XMLHttpRequest=t}function x(){e.XMLHttpRequest=O}exports.ClientError=E;
},{"./util.js":"KA50"}],"Lic7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./TileImage.js")),t=require("../extent.js"),r=require("../asserts.js"),n=require("../tileurlfunction.js"),o=require("../tilegrid.js"),i=require("../proj.js"),u=require("../net.js");function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e){var t=d(e,"string");return"symbol"===l(t)?t:String(t)}function d(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=m();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(s){y(c,e.default);var l=h(c);function c(e){var t;if(a(this,c),(t=l.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:(0,i.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})).tileJSON_=null,t.tileSize_=e.tileSize,e.url)if(e.jsonp)(0,u.jsonp)(e.url,t.handleTileJSONResponse.bind(S(t)),t.handleTileJSONError.bind(S(t)));else{var n=new XMLHttpRequest;n.addEventListener("load",t.onXHRLoad_.bind(S(t))),n.addEventListener("error",t.onXHRError_.bind(S(t))),n.open("GET",e.url),n.send()}else e.tileJSON?t.handleTileJSONResponse(e.tileJSON):(0,r.assert)(!1,51);return t}return f(c,[{key:"onXHRLoad_",value:function(e){var t=e.target;if(!t.status||t.status>=200&&t.status<300){var r;try{r=JSON.parse(t.responseText)}catch(n){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}},{key:"onXHRError_",value:function(e){this.handleTileJSONError()}},{key:"getTileJSON",value:function(){return this.tileJSON_}},{key:"handleTileJSONResponse",value:function(e){var r,u=(0,i.get)("EPSG:4326"),s=this.getProjection();if(void 0!==e.bounds){var l=(0,i.getTransformFromProjections)(u,s);r=(0,t.applyTransform)(e.bounds,l)}var a=(0,o.extentFromProjection)(s),c=e.minzoom||0,f=e.maxzoom||22,p=(0,o.createXYZ)({extent:a,maxZoom:f,minZoom:c,tileSize:this.tileSize_});if(this.tileGrid=p,this.tileUrlFunction=(0,n.createFromTemplates)(e.tiles,p),e.attribution&&!this.getAttributions()){var d=void 0!==r?r:a;this.setAttributions(function(r){return(0,t.intersects)(d,r.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}},{key:"handleTileJSONError",value:function(){this.setState("error")}}]),c}(),T=j;exports.default=T;
},{"./TileImage.js":"rQ5G","../extent.js":"L0Vw","../asserts.js":"DVOE","../tileurlfunction.js":"dZ35","../tilegrid.js":"gNrJ","../proj.js":"VAQc","../net.js":"MPOK"}],"QaCa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("../../render/canvas/BuilderGroup.js")),t=p(require("./Layer.js")),r=y(require("../../render/canvas/ExecutorGroup.js")),n=y(require("../../ViewHint.js")),i=require("../../render/canvas/hitdetect.js"),o=require("../../transform.js"),a=require("../../extent.js"),s=require("../../dom.js"),u=require("../vector.js"),c=require("../../array.js"),l=require("../../proj.js"),d=require("../../util.js"),f=require("../../coordinate.js");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function y(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function m(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function x(e){var t=E(e,"string");return"symbol"===v(t)?t:String(t)}function E(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=w();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(h){b(y,t.default);var p=R(y);function y(e){var t;return g(this,y),(t=p.call(this,e)).boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(T(t)),t.animatingOrInteracting_,t.hitDetectionImageData_=null,t.renderedFeatures_=null,t.renderedRevision_=-1,t.renderedResolution_=NaN,t.renderedExtent_=(0,a.createEmpty)(),t.wrappedRenderedExtent_=(0,a.createEmpty)(),t.renderedRotation_,t.renderedCenter_=null,t.renderedProjection_=null,t.renderedRenderOrder_=null,t.replayGroup_=null,t.replayGroupChanged=!0,t.declutterExecutorGroup=null,t.clipping=!0,t.compositionContext_=null,t.opacity_=1,t}return m(y,[{key:"renderWorlds",value:function(e,t,r){var i=t.extent,o=t.viewState,s=o.center,u=o.resolution,c=o.projection,l=o.rotation,d=c.getExtent(),f=this.getLayer().getSource(),h=t.pixelRatio,p=t.viewHints,y=!(p[n.default.ANIMATING]||p[n.default.INTERACTING]),v=this.compositionContext_,g=Math.round(t.size[0]*h),_=Math.round(t.size[1]*h),m=f.getWrapX()&&c.canWrapX(),x=m?(0,a.getWidth)(d):null,E=m?Math.ceil((i[2]-d[2])/x)+1:1,b=m?Math.floor((i[0]-d[0])/x):0;do{var C=this.getRenderTransform(s,u,l,h,g,_,b*x);e.execute(v,1,C,l,y,void 0,r)}while(++b<E)}},{key:"setupCompositionContext_",value:function(){if(1!==this.opacity_){var e=(0,s.createCanvasContext2D)(this.context.canvas.width,this.context.canvas.height,t.canvasPool);this.compositionContext_=e}else this.compositionContext_=this.context}},{key:"releaseCompositionContext_",value:function(){if(1!==this.opacity_){var e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,(0,s.releaseCanvas)(this.compositionContext_),t.canvasPool.push(this.compositionContext_.canvas),this.compositionContext_=null}}},{key:"renderDeclutter",value:function(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}},{key:"renderFrame",value:function(e,t){var r=e.pixelRatio,n=e.layerStatesArray[e.layerIndex];(0,o.makeScale)(this.pixelTransform,1/r,1/r),(0,o.makeInverse)(this.inversePixelTransform,this.pixelTransform);var i=(0,o.toString)(this.pixelTransform);this.useContainer(t,i,this.getBackground(e));var s=this.context,u=s.canvas,c=this.replayGroup_,d=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!d||d.isEmpty()))return null;var f=Math.round(e.size[0]*r),h=Math.round(e.size[1]*r);u.width!=f||u.height!=h?(u.width=f,u.height=h,u.style.transform!==i&&(u.style.transform=i)):this.containerReused||s.clearRect(0,0,f,h),this.preRender(s,e);var p=e.viewState,y=p.projection;this.opacity_=n.opacity,this.setupCompositionContext_();var v=!1,g=!0;if(n.extent&&this.clipping){var _=(0,l.fromUserExtent)(n.extent,y);(v=(g=(0,a.intersects)(_,e.extent))&&!(0,a.containsExtent)(_,e.extent))&&this.clipUnrotated(this.compositionContext_,e,_)}return g&&this.renderWorlds(c,e),v&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(s,e),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),this.container}},{key:"getFeatures",value:function(e){var t=this;return new Promise(function(r){if(!t.hitDetectionImageData_&&!t.animatingOrInteracting_){var n=[t.context.canvas.width,t.context.canvas.height];(0,o.apply)(t.pixelTransform,n);var s=t.renderedCenter_,u=t.renderedResolution_,c=t.renderedRotation_,l=t.renderedProjection_,d=t.wrappedRenderedExtent_,f=t.getLayer(),h=[],p=n[0]*i.HIT_DETECT_RESOLUTION,y=n[1]*i.HIT_DETECT_RESOLUTION;h.push(t.getRenderTransform(s,u,c,i.HIT_DETECT_RESOLUTION,p,y,0).slice());var v=f.getSource(),g=l.getExtent();if(v.getWrapX()&&l.canWrapX()&&!(0,a.containsExtent)(g,d)){for(var _,m=d[0],x=(0,a.getWidth)(g),E=0;m<g[0];)_=x*--E,h.push(t.getRenderTransform(s,u,c,i.HIT_DETECT_RESOLUTION,p,y,_).slice()),m+=x;for(E=0,m=d[2];m>g[2];)_=x*++E,h.push(t.getRenderTransform(s,u,c,i.HIT_DETECT_RESOLUTION,p,y,_).slice()),m-=x}t.hitDetectionImageData_=(0,i.createHitDetectionImageData)(n,h,t.renderedFeatures_,f.getStyleFunction(),d,u,c)}r((0,i.hitDetect)(e,t.renderedFeatures_,t.hitDetectionImageData_))})}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){var o=this;if(this.replayGroup_){var a,s=t.viewState.resolution,u=t.viewState.rotation,c=this.getLayer(),l={},f=function(e,t,r){var o=(0,d.getUid)(e),a=l[o];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return l[o]=!0,i.splice(i.lastIndexOf(a),1),n(e,c,t);a.geometry=t,a.distanceSq=r}}else{if(0===r)return l[o]=!0,n(e,c,t);i.push(l[o]={feature:e,layer:c,geometry:t,distanceSq:r,callback:n})}},h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some(function(n){return a=n.forEachFeatureAtCoordinate(e,s,u,r,f,n===o.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(function(e){return e.value}):null)}),a}}},{key:"handleFontsChanged",value:function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}},{key:"handleStyleImageChange_",value:function(e){this.renderIfReadyAndVisible()}},{key:"prepareFrame",value:function(t){var i=this,o=this.getLayer(),s=o.getSource();if(!s)return!1;var d=t.viewHints[n.default.ANIMATING],h=t.viewHints[n.default.INTERACTING],p=o.getUpdateWhileAnimating(),y=o.getUpdateWhileInteracting();if(this.ready&&!p&&d||!y&&h)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var v=t.extent,g=t.viewState,_=g.projection,m=g.resolution,x=t.pixelRatio,E=o.getRevision(),b=o.getRenderBuffer(),C=o.getRenderOrder();void 0===C&&(C=u.defaultOrder);var R=g.center.slice(),O=(0,a.buffer)(v,b*m),T=O.slice(),w=[O.slice()],j=_.getExtent();if(s.getWrapX()&&_.canWrapX()&&!(0,a.containsExtent)(j,t.extent)){var I=(0,a.getWidth)(j),S=Math.max((0,a.getWidth)(O)/2,I);O[0]=j[0]-S,O[2]=j[2]+S,(0,f.wrapX)(R,_);var D=(0,a.wrapX)(w[0],_);D[0]<j[0]&&D[2]<j[2]?w.push([D[0]+I,D[1],D[2]+I,D[3]]):D[0]>j[0]&&D[2]>j[2]&&w.push([D[0]-I,D[1],D[2]-I,D[3]])}if(this.ready&&this.renderedResolution_==m&&this.renderedRevision_==E&&this.renderedRenderOrder_==C&&(0,a.containsExtent)(this.wrappedRenderedExtent_,O))return(0,c.equals)(this.renderedExtent_,T)||(this.hitDetectionImageData_=null,this.renderedExtent_=T),this.renderedCenter_=R,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var P,G=new e.default((0,u.getTolerance)(m,x),O,m,x);this.getLayer().getDeclutter()&&(P=new e.default((0,u.getTolerance)(m,x),O,m,x));var F,k=(0,l.getUserProjection)();if(k){for(var q=0,W=w.length;q<W;++q){var A=w[q],N=(0,l.toUserExtent)(A,_);s.loadFeatures(N,(0,l.toUserResolution)(m,_),k)}F=(0,l.getTransformFromProjections)(k,_)}else for(var M=0,U=w.length;M<U;++M)s.loadFeatures(w[M],m,_);var H=(0,u.getSquaredTolerance)(m,x),L=!0,X=function(e){var t,r=e.getStyleFunction()||o.getStyleFunction();if(r&&(t=r(e,m)),t){var n=i.renderFeature(e,H,t,G,F,P);L=L&&!n}},B=(0,l.toUserExtent)(O,_),z=s.getFeaturesInExtent(B);C&&z.sort(C);for(var V=0,J=z.length;V<J;++V)X(z[V]);this.renderedFeatures_=z,this.ready=L;var K=G.finish(),Q=new r.default(O,m,x,s.getOverlaps(),K,o.getRenderBuffer());return P&&(this.declutterExecutorGroup=new r.default(O,m,x,s.getOverlaps(),P.finish(),o.getRenderBuffer())),this.renderedResolution_=m,this.renderedRevision_=E,this.renderedRenderOrder_=C,this.renderedExtent_=T,this.wrappedRenderedExtent_=O,this.renderedCenter_=R,this.renderedProjection_=_,this.replayGroup_=Q,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}},{key:"renderFeature",value:function(e,t,r,n,i,o){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var s=0,c=r.length;s<c;++s)a=(0,u.renderFeature)(n,e,r[s],t,this.boundHandleStyleImageChange_,i,o)||a;else a=(0,u.renderFeature)(n,e,r,t,this.boundHandleStyleImageChange_,i,o);return a}}]),y}(),S=I;exports.default=S;
},{"../../render/canvas/BuilderGroup.js":"qYWL","./Layer.js":"D55b","../../render/canvas/ExecutorGroup.js":"sCjt","../../ViewHint.js":"DfOy","../../render/canvas/hitdetect.js":"UsFS","../../transform.js":"Ln8D","../../extent.js":"L0Vw","../../dom.js":"FYLQ","../vector.js":"iWoQ","../../array.js":"o0G8","../../proj.js":"VAQc","../../util.js":"KA50","../../coordinate.js":"CMtO"}],"AGre":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./BaseVector.js")),e=r(require("../renderer/canvas/VectorLayer.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===n(e)?e:String(e)}function f(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(r){a(u,t.default);var n=s(u);function u(t){return o(this,u),n.call(this,t)}return i(u,[{key:"createRenderer",value:function(){return new e.default(this)}}]),u}(),m=v;exports.default=m;
},{"./BaseVector.js":"sJYl","../renderer/canvas/VectorLayer.js":"QaCa"}],"XnTI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("rbush")),e=require("../extent.js"),r=require("../util.js"),n=require("../obj.js");function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function s(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t){var e=f(t,"string");return"symbol"===u(e)?e:String(e)}function f(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var m=function(){function i(e){o(this,i),this.rbush_=new t.default(e),this.items_={}}return s(i,[{key:"insert",value:function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[(0,r.getUid)(e)]=n}},{key:"load",value:function(t,e){for(var n=new Array(e.length),i=0,u=e.length;i<u;i++){var o=t[i],a=e[i],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[i]=s,this.items_[(0,r.getUid)(a)]=s}this.rbush_.load(n)}},{key:"remove",value:function(t){var e=(0,r.getUid)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}},{key:"update",value:function(t,n){var i=this.items_[(0,r.getUid)(n)],u=[i.minX,i.minY,i.maxX,i.maxY];(0,e.equals)(u,t)||(this.remove(n),this.insert(t,n))}},{key:"getAll",value:function(){return this.rbush_.all().map(function(t){return t.value})}},{key:"getInExtent",value:function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})}},{key:"forEach",value:function(t){return this.forEach_(this.getAll(),t)}},{key:"forEachInExtent",value:function(t,e){return this.forEach_(this.getInExtent(t),e)}},{key:"forEach_",value:function(t,e){for(var r,n=0,i=t.length;n<i;n++)if(r=e(t[n]))return r;return r}},{key:"isEmpty",value:function(){return(0,n.isEmpty)(this.items_)}},{key:"clear",value:function(){this.rbush_.clear(),this.items_={}}},{key:"getExtent",value:function(t){var r=this.rbush_.toJSON();return(0,e.createOrUpdate)(r.minX,r.minY,r.maxX,r.maxY,t)}},{key:"concat",value:function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]}}]),i}(),c=m;exports.default=c;
},{"rbush":"CzwG","../extent.js":"L0Vw","../util.js":"KA50","../obj.js":"SLsU"}],"fn6i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};exports.default=e;
},{}],"RDFU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=t,exports.bbox=r,exports.tile=o;var e=require("./proj.js");function t(e,t){return[[-1/0,-1/0,1/0,1/0]]}function r(e,t){return[e]}function o(t){return function(r,o,n){var u=t.getZForResolution((0,e.fromUserResolution)(o,n)),i=t.getTileRangeForExtentAndZ((0,e.fromUserExtent)(r,n),u),s=[],x=[u,0,0];for(x[1]=i.minX;x[1]<=i.maxX;++x[1])for(x[2]=i.minY;x[2]<=i.maxY;++x[2])s.push((0,e.toUserExtent)(t.getTileCoordExtent(x),n));return s}}
},{"./proj.js":"VAQc"}],"Y9Xi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadFeaturesXhr=t,exports.setWithCredentials=n,exports.xhr=s;var e=require("./functions.js"),r=!1;function t(e,t,s,n,o,a,u){var i=new XMLHttpRequest;i.open("GET","function"==typeof e?e(s,n,o):e,!0),"arraybuffer"==t.getType()&&(i.responseType="arraybuffer"),i.withCredentials=r,i.onload=function(e){if(!i.status||i.status>=200&&i.status<300){var r,n=t.getType();"json"==n||"text"==n?r=i.responseText:"xml"==n?(r=i.responseXML)||(r=(new DOMParser).parseFromString(i.responseText,"application/xml")):"arraybuffer"==n&&(r=i.response),r?a(t.readFeatures(r,{extent:s,featureProjection:o}),t.readProjection(r)):u()}else u()},i.onerror=u,i.send()}function s(r,s){return function(n,o,a,u,i){var p=this;t(r,s,n,o,a,function(e,r){p.addFeatures(e),void 0!==u&&u(e)},i||e.VOID)}}function n(e){r=e}
},{"./functions.js":"pDAE"}],"v3xZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VectorSourceEvent=void 0;var e=p(require("../Collection.js")),t=p(require("../CollectionEventType.js")),r=p(require("../events/Event.js")),n=p(require("../events/EventType.js")),i=p(require("../ObjectEventType.js")),a=p(require("../structs/RBush.js")),u=p(require("./Source.js")),o=p(require("./VectorEventType.js")),s=require("../functions.js"),l=require("../loadingstrategy.js"),f=require("../asserts.js"),c=require("../extent.js"),d=require("../array.js"),h=require("../util.js"),v=require("../obj.js"),y=require("../events.js"),_=require("../featureloader.js");function p(e){return e&&e.__esModule?e:{default:e}}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){return F(e)||R(e)||x(e)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}function R(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function F(e){if(Array.isArray(e))return I(e)}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=C(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function A(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e){var t=w(e,"string");return"symbol"===E(t)?t:String(t)}function w(e,t){if("object"!==E(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=D();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(e){S(n,r.default);var t=G(n);function n(e,r,i){var a;return O(this,n),(a=t.call(this,e)).feature=r,a.features=i,a}return A(n)}();exports.VectorSourceEvent=L;var K=function(r){S(E,u.default);var p=G(E);function E(t){var r;O(this,E),t=t||{},(r=p.call(this,{attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX})).on,r.once,r.un,r.loader_=s.VOID,r.format_=t.format,r.overlaps_=void 0===t.overlaps||t.overlaps,r.url_=t.url,void 0!==t.loader?r.loader_=t.loader:void 0!==r.url_&&((0,f.assert)(r.format_,7),r.loader_=(0,_.xhr)(r.url_,r.format_)),r.strategy_=void 0!==t.strategy?t.strategy:l.all;var n,i,u=void 0===t.useSpatialIndex||t.useSpatialIndex;return r.featuresRtree_=u?new a.default:null,r.loadedExtentsRtree_=new a.default,r.loadingExtentsCount_=0,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(i=(n=t.features).getArray()),u||void 0!==n||(n=new e.default(i)),void 0!==i&&r.addFeaturesInternal(i),void 0!==n&&r.bindFeaturesCollection_(n),r}return A(E,[{key:"addFeature",value:function(e){this.addFeatureInternal(e),this.changed()}},{key:"addFeatureInternal",value:function(e){var t=(0,h.getUid)(e);if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new L(o.default.ADDFEATURE,e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)}},{key:"setupChangeEvents_",value:function(e,t){this.featureChangeKeys_[e]=[(0,y.listen)(t,n.default.CHANGE,this.handleFeatureChange_,this),(0,y.listen)(t,i.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]}},{key:"addToIndex_",value:function(e,t){var r=!0,n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t),r&&((0,f.assert)(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),r}},{key:"addFeatures",value:function(e){this.addFeaturesInternal(e),this.changed()}},{key:"addFeaturesInternal",value:function(e){for(var t=[],r=[],n=[],i=0,a=e.length;i<a;i++){var u=e[i],s=(0,h.getUid)(u);this.addToIndex_(s,u)&&r.push(u)}for(var l=0,f=r.length;l<f;l++){var c=r[l],d=(0,h.getUid)(c);this.setupChangeEvents_(d,c);var v=c.getGeometry();if(v){var y=v.getExtent();t.push(y),n.push(c)}else this.nullGeometryFeatures_[d]=c}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(o.default.ADDFEATURE))for(var _=0,p=r.length;_<p;_++)this.dispatchEvent(new L(o.default.ADDFEATURE,r[_]))}},{key:"bindFeaturesCollection_",value:function(e){var r=this,n=!1;this.addEventListener(o.default.ADDFEATURE,function(t){n||(n=!0,e.push(t.feature),n=!1)}),this.addEventListener(o.default.REMOVEFEATURE,function(t){n||(n=!0,e.remove(t.feature),n=!1)}),e.addEventListener(t.default.ADD,function(e){n||(n=!0,r.addFeature(e.element),n=!1)}),e.addEventListener(t.default.REMOVE,function(e){n||(n=!0,r.removeFeature(e.element),n=!1)}),this.featuresCollection_=e}},{key:"clear",value:function(e){var t=this;if(e){for(var r in this.featureChangeKeys_){this.featureChangeKeys_[r].forEach(y.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){for(var n in this.featuresRtree_.forEach(function(e){t.removeFeatureInternal(e)}),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var i=new L(o.default.CLEAR);this.dispatchEvent(i),this.changed()}},{key:"forEachFeature",value:function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}},{key:"forEachFeatureAtCoordinateDirect",value:function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)})}},{key:"forEachFeatureInExtent",value:function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}},{key:"forEachFeatureIntersectingExtent",value:function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}})}},{key:"getFeaturesCollection",value:function(){return this.featuresCollection_}},{key:"getFeatures",value:function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,v.isEmpty)(this.nullGeometryFeatures_)||(0,d.extend)(e,Object.values(this.nullGeometryFeatures_))),e}},{key:"getFeaturesAtCoordinate",value:function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t}},{key:"getFeaturesInExtent",value:function(e,t){var r=this;if(this.featuresRtree_){var n;if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);var i=(0,c.wrapAndSliceX)(e,t);return(n=[]).concat.apply(n,g(i.map(function(e){return r.featuresRtree_.getInExtent(e)})))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}},{key:"getClosestFeatureToCoordinate",value:function(e,t){var r=e[0],n=e[1],i=null,a=[NaN,NaN],u=1/0,o=[-1/0,-1/0,1/0,1/0];return t=t||s.TRUE,this.featuresRtree_.forEachInExtent(o,function(e){if(t(e)){var s=e.getGeometry(),l=u;if((u=s.closestPointXY(r,n,a,u))<l){i=e;var f=Math.sqrt(u);o[0]=r-f,o[1]=n-f,o[2]=r+f,o[3]=n+f}}}),i}},{key:"getExtent",value:function(e){return this.featuresRtree_.getExtent(e)}},{key:"getFeatureById",value:function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null}},{key:"getFeatureByUid",value:function(e){var t=this.uidIndex_[e];return void 0!==t?t:null}},{key:"getFormat",value:function(){return this.format_}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"getUrl",value:function(){return this.url_}},{key:"handleFeatureChange_",value:function(e){var t=e.target,r=(0,h.getUid)(t),n=t.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,t)):this.featuresRtree_&&this.featuresRtree_.update(i,t)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);var a=t.getId();if(void 0!==a){var u=a.toString();this.idIndex_[u]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[u]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new L(o.default.CHANGEFEATURE,t))}},{key:"hasFeature",value:function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:(0,h.getUid)(e)in this.uidIndex_}},{key:"isEmpty",value:function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,v.isEmpty)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}},{key:"loadFeatures",value:function(e,t,r){for(var n=this,i=this.loadedExtentsRtree_,a=this.strategy_(e,t,r),u=function(){var e=a[s];i.forEachInExtent(e,function(t){return(0,c.containsExtent)(t.extent,e)})||(++n.loadingExtentsCount_,n.dispatchEvent(new L(o.default.FEATURESLOADSTART)),n.loader_.call(n,e,t,r,function(e){--n.loadingExtentsCount_,n.dispatchEvent(new L(o.default.FEATURESLOADEND,void 0,e))},function(){--n.loadingExtentsCount_,n.dispatchEvent(new L(o.default.FEATURESLOADERROR))}),i.insert(e,{extent:e.slice()}))},s=0,l=a.length;s<l;++s)u();this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}},{key:"refresh",value:function(){this.clear(!0),this.loadedExtentsRtree_.clear(),b(P(E.prototype),"refresh",this).call(this)}},{key:"removeLoadedExtent",value:function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if((0,c.equals)(r.extent,e))return t=r,!0}),t&&r.remove(t)}},{key:"removeFeature",value:function(e){if(e){var t=(0,h.getUid)(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}}},{key:"removeFeatureInternal",value:function(e){var t=(0,h.getUid)(e),r=this.featureChangeKeys_[t];if(r){r.forEach(y.unlistenByKey),delete this.featureChangeKeys_[t];var n=e.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[t],this.dispatchEvent(new L(o.default.REMOVEFEATURE,e)),e}}},{key:"removeFromIdIndex_",value:function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t}},{key:"setLoader",value:function(e){this.loader_=e}},{key:"setUrl",value:function(e){(0,f.assert)(this.format_,7),this.url_=e,this.setLoader((0,_.xhr)(e,this.format_))}}]),E}(),N=K;exports.default=N;
},{"../Collection.js":"Kjrg","../CollectionEventType.js":"f4vV","../events/Event.js":"M1Cf","../events/EventType.js":"GUXn","../ObjectEventType.js":"cEhm","../structs/RBush.js":"XnTI","./Source.js":"AC87","./VectorEventType.js":"fn6i","../functions.js":"pDAE","../loadingstrategy.js":"RDFU","../asserts.js":"DVOE","../extent.js":"L0Vw","../array.js":"o0G8","../util.js":"KA50","../obj.js":"SLsU","../events.js":"MGag","../featureloader.js":"Y9Xi"}],"Cg9B":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Tile.js")),e=r(require("./TileState.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=c(t,"string");return"symbol"===n(e)?e:String(e)}function c(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(r){a(u,t.default);var n=s(u);function u(t,e,r,i,f,c){var a;return o(this,u),(a=n.call(this,t,e,c)).extent=null,a.format_=i,a.features_=null,a.loader_,a.projection=null,a.resolution,a.tileLoadFunction_=f,a.url_=r,a.key=r,a}return i(u,[{key:"getFormat",value:function(){return this.format_}},{key:"getFeatures",value:function(){return this.features_}},{key:"load",value:function(){this.state==e.default.IDLE&&(this.setState(e.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}},{key:"onLoad",value:function(t,e){this.setFeatures(t)}},{key:"onError",value:function(){this.setState(e.default.ERROR)}},{key:"setFeatures",value:function(t){this.features_=t,this.setState(e.default.LOADED)}},{key:"setLoader",value:function(t){this.loader_=t}}]),u}(),v=h;exports.default=v;
},{"./Tile.js":"iz3u","./TileState.js":"FoaO"}],"mjTk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./Tile.js")),t=require("./dom.js"),r=require("./util.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=a(e,"string");return"symbol"===o(t)?t:String(t)}function a(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=s(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=h();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=[],m=function(n){p(u,e.default);var o=d(u);function u(e,t,r,n){var c;return i(this,u),(c=o.call(this,e,t,{transition:0})).context_={},c.executorGroups={},c.declutterExecutorGroups={},c.loadingSourceTiles=0,c.hitDetectionImageData={},c.replayState_={},c.sourceTiles=[],c.errorTileKeys={},c.wantedResolution,c.getSourceTiles=n.bind(void 0,b(c)),c.wrappedTileCoord=r,c}return c(u,[{key:"getContext",value:function(e){var n=(0,r.getUid)(e);return n in this.context_||(this.context_[n]=(0,t.createCanvasContext2D)(1,1,_)),this.context_[n]}},{key:"hasContext",value:function(e){return(0,r.getUid)(e)in this.context_}},{key:"getImage",value:function(e){return this.hasContext(e)?this.getContext(e).canvas:null}},{key:"getReplayState",value:function(e){var t=(0,r.getUid)(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}},{key:"load",value:function(){this.getSourceTiles()}},{key:"release",value:function(){for(var e in this.context_){var r=this.context_[e];(0,t.releaseCanvas)(r),_.push(r.canvas),delete this.context_[e]}f(g(u.prototype),"release",this).call(this)}}]),u}(),O=m;exports.default=O;
},{"./Tile.js":"iz3u","./dom.js":"FYLQ","./util.js":"KA50"}],"EYMU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.defaultLoadFunction=L;var e=p(require("../events/EventType.js")),t=p(require("../VectorTile.js")),r=p(require("../TileCache.js")),i=p(require("../tilegrid/TileGrid.js")),o=p(require("../TileState.js")),n=p(require("./UrlTile.js")),l=p(require("../VectorRenderTile.js")),u=require("../tilegrid/common.js"),a=require("../extent.js"),c=require("../tilegrid.js"),s=require("../tilecoord.js"),f=require("../obj.js"),d=require("../featureloader.js"),h=require("../size.js");function p(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,b(i.key),i)}}function T(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e){var t=m(e,"string");return"symbol"===g(t)?t:String(t)}function m(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==g(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function C(){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=E(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=F();return function(){var r,i=P(e);if(t){var o=P(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(d){j(g,n.default);var p=O(g);function g(e){var i;y(this,g);var o=e.projection||"EPSG:3857",n=e.extent||(0,c.extentFromProjection)(o),l=e.tileGrid||(0,c.createXYZ)({extent:n,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(i=p.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:o,state:e.state,tileGrid:l,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:L,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})).format_=e.format?e.format:null,i.sourceTileCache=new r.default(i.tileCache.highWaterMark),i.overlaps_=null==e.overlaps||e.overlaps,i.tileClass=e.tileClass?e.tileClass:t.default,i.tileGrids_={},i}return T(g,[{key:"getFeaturesInExtent",value:function(e){var t=[],r=this.tileCache;if(0===r.getCount())return t;var i=(0,s.fromKey)(r.peekFirstKey())[0],n=this.tileGrid;return r.forEach(function(r){if(r.tileCoord[0]===i&&r.getState()===o.default.LOADED)for(var l=r.getSourceTiles(),u=0,c=l.length;u<c;++u){var s=l[u],f=s.tileCoord;if((0,a.intersects)(e,n.getTileCoordExtent(f))){var d=s.getFeatures();if(d)for(var h=0,p=d.length;h<p;++h){var g=d[h],y=g.getGeometry();(0,a.intersects)(e,y.getExtent())&&t.push(g)}}}}),t}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"clear",value:function(){this.tileCache.clear(),this.sourceTileCache.clear()}},{key:"expireCache",value:function(e,t){var r=this.getTileCacheForProjection(e),i=Object.keys(t).reduce(function(e,t){var i=(0,s.getCacheKeyForTileKey)(t),o=r.peek(i);if(o)for(var n=o.sourceTiles,l=0,u=n.length;l<u;++l)e[n[l].getKey()]=!0;return e},{});C(P(g.prototype),"expireCache",this).call(this,e,t),this.sourceTileCache.expireCache(i)}},{key:"getSourceTiles",value:function(t,r,i){var n=this;if(i.getState()===o.default.IDLE){i.setState(o.default.LOADING);var l=i.wrappedTileCoord,u=this.getTileGridForProjection(r),c=u.getTileCoordExtent(l),s=l[0],d=u.getResolution(s);(0,a.buffer)(c,-d,c);var h=this.tileGrid,p=h.getExtent();p&&(0,a.getIntersection)(c,p,c);var g=h.getZForResolution(d,this.zDirection);h.forEachTileCoord(c,g,function(l){var u=n.tileUrlFunction(l,t,r),a=n.sourceTileCache.containsKey(u)?n.sourceTileCache.get(u):new n.tileClass(l,u?o.default.IDLE:o.default.EMPTY,u,n.format_,n.tileLoadFunction);i.sourceTiles.push(a);var c=a.getState();if(c<o.default.LOADED){a.addEventListener(e.default.CHANGE,function t(r){n.handleTileChange(r);var l=a.getState();if(l===o.default.LOADED||l===o.default.ERROR){var u=a.getKey();u in i.errorTileKeys?a.getState()===o.default.LOADED&&delete i.errorTileKeys[u]:i.loadingSourceTiles--,l===o.default.ERROR?i.errorTileKeys[u]=!0:a.removeEventListener(e.default.CHANGE,t),0===i.loadingSourceTiles&&i.setState((0,f.isEmpty)(i.errorTileKeys)?o.default.LOADED:o.default.ERROR)}}),i.loadingSourceTiles++}c===o.default.IDLE&&(a.extent=h.getTileCoordExtent(l),a.projection=r,a.resolution=h.getResolution(l[0]),n.sourceTileCache.set(u,a),a.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(function(e){return e.getState()===o.default.ERROR})?o.default.ERROR:o.default.LOADED)}return i.sourceTiles}},{key:"getTile",value:function(e,t,r,i,n){var u,c=this,f=(0,s.getKeyZXY)(e,t,r),d=this.getKey();if(this.tileCache.containsKey(f)&&(u=this.tileCache.get(f)).key===d)return u;var h=[e,t,r],p=this.getTileCoordForTileUrlFunction(h,n),g=this.getTileGrid().getExtent(),y=this.getTileGridForProjection(n);if(p&&g){var v=y.getTileCoordExtent(p);(0,a.buffer)(v,-y.getResolution(e),v),(0,a.intersects)(g,v)||(p=null)}var T=!0;if(null!==p){var b=this.tileGrid,m=y.getResolution(e),C=b.getZForResolution(m,1),E=y.getTileCoordExtent(p);(0,a.buffer)(E,-m,E),b.forEachTileCoord(E,C,function(e){T=T&&!c.tileUrlFunction(e,i,n)})}var j=new l.default(h,T?o.default.EMPTY:o.default.IDLE,p,this.getSourceTiles.bind(this,i,n));return j.key=d,u?(j.interimTile=u,j.refreshInterimChain(),this.tileCache.replace(f,j)):this.tileCache.set(f,j),j}},{key:"getTileGridForProjection",value:function(e){var t=e.getCode(),r=this.tileGrids_[t];if(!r){for(var o=this.tileGrid,n=o.getResolutions().slice(),l=n.map(function(e,t){return o.getOrigin(t)}),a=n.map(function(e,t){return o.getTileSize(t)}),c=u.DEFAULT_MAX_ZOOM+1,s=n.length;s<c;++s)n.push(n[s-1]/2),l.push(l[s-1]),a.push(a[s-1]);r=new i.default({extent:o.getExtent(),origins:l,resolutions:n,tileSizes:a}),this.tileGrids_[t]=r}return r}},{key:"getTilePixelRatio",value:function(e){return e}},{key:"getTilePixelSize",value:function(e,t,r){var i=this.getTileGridForProjection(r),o=(0,h.toSize)(i.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}},{key:"updateCacheSize",value:function(e,t){C(P(g.prototype),"updateCacheSize",this).call(this,2*e,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}]),g}(),D=w;function L(e,t){e.setLoader(function(r,i,o){(0,d.loadFeaturesXhr)(t,e.getFormat(),r,i,o,e.onLoad.bind(e),e.onError.bind(e))})}exports.default=D;
},{"../events/EventType.js":"GUXn","../VectorTile.js":"Cg9B","../TileCache.js":"zj1M","../tilegrid/TileGrid.js":"JVE6","../TileState.js":"FoaO","./UrlTile.js":"P4LM","../VectorRenderTile.js":"mjTk","../tilegrid/common.js":"exM9","../extent.js":"L0Vw","../tilegrid.js":"gNrJ","../tilecoord.js":"NPSy","../obj.js":"SLsU","../featureloader.js":"Y9Xi","../size.js":"d9VJ"}],"Pq51":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addMapboxLayer=ri,exports.default=exports.apply=Ea,exports.applyBackground=fa,exports.applyStyle=ua,exports.getFeatureState=ei,exports.getLayer=Ha,exports.getLayers=Ya,exports.getMapboxLayer=ti,exports.getSource=Ka,exports.getStyleForLayer=Oi,exports.recordStyleLayer=Pi,exports.removeMapboxLayer=ai,exports.renderTransparent=Ei,exports.setFeatureState=Qa,exports.stylefunction=Fi,exports.updateMapboxLayer=ni;var e=A(require("ol/style/Circle.js")),t=A(require("ol/style/Fill.js")),r=A(require("ol/style/Icon.js")),n=A(require("ol/render/Feature.js")),a=A(require("ol/style/Stroke.js")),i=A(require("ol/style/Style.js")),o=A(require("ol/style/Text.js")),s=require("ol/render/canvas.js"),u=require("ol/tileurlfunction.js"),l=A(require("ol/format/GeoJSON.js")),p=A(require("ol/layer/Image.js")),f=A(require("ol/layer/Layer.js")),c=A(require("ol/layer/Group.js")),d=A(require("ol/format/MVT.js")),y=A(require("ol/Map.js")),m=A(require("ol/source/Raster.js")),h=A(require("ol/source/Source.js")),v=A(require("ol/tilegrid/TileGrid.js")),g=A(require("ol/source/TileJSON.js")),b=A(require("ol/layer/Tile.js")),x=A(require("ol/layer/Vector.js")),w=A(require("ol/source/Vector.js")),k=A(require("ol/layer/VectorTile.js")),z=T(require("ol/source/VectorTile.js")),M=A(require("ol/View.js")),S=require("ol/proj.js"),q=require("ol/loadingstrategy.js"),j=require("ol/tilegrid.js"),_=require("ol/extent.js"),E=require("ol/util.js");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(C=function(e){return e?r:t})(e)}function T(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=C(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function A(e){return e&&e.__esModule?e:{default:e}}var I,P={},D={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function F(e){return(e=Math.round(e))<0?0:e>255?255:e}function O(e){return e<0?0:e>1?1:e}function L(e){return"%"===e[e.length-1]?F(parseFloat(e)/100*255):F(parseInt(e))}function R(e){return"%"===e[e.length-1]?O(parseFloat(e)/100):O(parseFloat(e))}function N(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function U(e){var t,r=e.replace(/ /g,"").toLowerCase();if(r in D)return D[r].slice();if("#"===r[0])return 4===r.length?(t=parseInt(r.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===r.length&&(t=parseInt(r.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var n=r.indexOf("("),a=r.indexOf(")");if(-1!==n&&a+1===r.length){var i=r.substr(0,n),o=r.substr(n+1,a-(n+1)).split(","),s=1;switch(i){case"rgba":if(4!==o.length)return null;s=R(o.pop());case"rgb":return 3!==o.length?null:[L(o[0]),L(o[1]),L(o[2]),s];case"hsla":if(4!==o.length)return null;s=R(o.pop());case"hsl":if(3!==o.length)return null;var u=(parseFloat(o[0])%360+360)%360/360,l=R(o[1]),p=R(o[2]),f=p<=.5?p*(l+1):p+l-p*l,c=2*p-f;return[F(255*N(c,f,u+1/3)),F(255*N(c,f,u)),F(255*N(c,f,u-1/3)),s];default:return null}}return null}try{I=P.parseCSSColor=U}catch(Li){}var G=function(e,t,r,n){void 0===n&&(n=1),this.r=e,this.g=t,this.b=r,this.a=n};G.parse=function(e){if(e){if(e instanceof G)return e;if("string"==typeof e){var t=I(e);if(t)return new G(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},G.prototype.toString=function(){var e=this.toArray(),t=e[0],r=e[1],n=e[2],a=e[3];return"rgba("+Math.round(t)+","+Math.round(r)+","+Math.round(n)+","+a+")"},G.prototype.toArray=function(){var e=this.r,t=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*r/n,n]},G.prototype.toArray01=function(){var e=this.r,t=this.g,r=this.b,n=this.a;return 0===n?[0,0,0,0]:[e/n,t/n,r/n,n]},G.prototype.toArray01PremultipliedAlpha=function(){return[this.r,this.g,this.b,this.a]},G.black=new G(0,0,0,1),G.white=new G(1,1,1,1),G.transparent=new G(0,0,0,0),G.red=new G(1,0,0,1),G.blue=new G(0,0,1,1);var V=G;function W(e){return"object"==typeof e?["literal",e]:e}function J(e,t){var r=e.stops;if(!r)return Z(e,t);var n=r&&"object"==typeof r[0][0],a=n||void 0!==e.property,i=n||!a;return r=r.map(function(e){return!a&&t.tokens&&"string"==typeof e[1]?[e[0],re(e[1])]:[e[0],W(e[1])]}),n?B(e,t,r):i?K(e,t,r):Y(e,t,r)}function Z(e,t){var r=["get",e.property];if(void 0===e.default)return"string"===t.type?["string",r]:r;if("enum"===t.type)return["match",r,Object.keys(t.values),r,e.default];var n=["color"===t.type?"to-color":t.type,r,W(e.default)];return"array"===t.type&&n.splice(1,0,t.value,t.length||null),n}function $(e){switch(e.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function B(e,t,r){for(var n={},a={},i=[],o=0;o<r.length;o++){var s=r[o],u=s[0].zoom;void 0===n[u]&&(n[u]={zoom:u,type:e.type,property:e.property,default:e.default},a[u]=[],i.push(u)),a[u].push([s[0].value,s[1]])}if("exponential"===te({},t)){for(var l=[$(e),["linear"],["zoom"]],p=0,f=i;p<f.length;p+=1){var c=f[p];ee(l,c,Y(n[c],t,a[c]),!1)}return l}for(var d=["step",["zoom"]],y=0,m=i;y<m.length;y+=1){var h=m[y];ee(d,h,Y(n[h],t,a[h]),!0)}return Q(d),d}function X(e,t){return void 0!==e?e:void 0!==t?t:void 0}function H(e,t){var r=W(X(e.default,t.default));return void 0===r&&"resolvedImage"===t.type?"":r}function Y(e,t,r){var n=te(e,t),a=["get",e.property];if("categorical"===n&&"boolean"==typeof r[0][0]){for(var i=["case"],o=0,s=r;o<s.length;o+=1){var u=s[o];i.push(["==",a,u[0]],u[1])}return i.push(H(e,t)),i}if("categorical"===n){for(var l=["match",a],p=0,f=r;p<f.length;p+=1){var c=f[p];ee(l,c[0],c[1],!1)}return l.push(H(e,t)),l}if("interval"===n){for(var d=["step",["number",a]],y=0,m=r;y<m.length;y+=1){var h=m[y];ee(d,h[0],h[1],!0)}return Q(d),void 0===e.default?d:["case",["==",["typeof",a],"number"],d,W(e.default)]}if("exponential"===n){for(var v=void 0!==e.base?e.base:1,g=[$(e),1===v?["linear"]:["exponential",v],["number",a]],b=0,x=r;b<x.length;b+=1){var w=x[b];ee(g,w[0],w[1],!1)}return void 0===e.default?g:["case",["==",["typeof",a],"number"],g,W(e.default)]}throw new Error("Unknown property function type "+n)}function K(e,t,r,n){void 0===n&&(n=["zoom"]);var a,i=te(e,t),o=!1;if("interval"===i)a=["step",n],o=!0;else{if("exponential"!==i)throw new Error('Unknown zoom function type "'+i+'"');var s=void 0!==e.base?e.base:1;a=[$(e),1===s?["linear"]:["exponential",s],n]}for(var u=0,l=r;u<l.length;u+=1){var p=l[u];ee(a,p[0],p[1],o)}return Q(a),a}function Q(e){"step"===e[0]&&3===e.length&&(e.push(0),e.push(e[3]))}function ee(e,t,r,n){e.length>3&&t===e[e.length-2]||(n&&2===e.length||e.push(t),e.push(r))}function te(e,t){return e.type?e.type:t.expression.interpolated?"exponential":"interval"}function re(e){for(var t=["concat"],r=/{([^{}]+)}/g,n=0,a=r.exec(e);null!==a;a=r.exec(e)){var i=e.slice(n,r.lastIndex-a[0].length);n=r.lastIndex,i.length>0&&t.push(i),t.push(["get",a[1]])}if(1===t.length)return e;if(n<e.length)t.push(e.slice(n));else if(2===t.length)return["to-string",t[1]];return t}var ne=function(e){function t(t,r){e.call(this,r),this.message=r,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ae=ne,ie=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var r=0,n=t;r<n.length;r+=1){var a=n[r],i=a[0],o=a[1];this.bindings[i]=o}};ie.prototype.concat=function(e){return new ie(this,e)},ie.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},ie.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var oe=ie,se={kind:"null"},ue={kind:"number"},le={kind:"string"},pe={kind:"boolean"},fe={kind:"color"},ce={kind:"object"},de={kind:"value"},ye={kind:"error"},me={kind:"collator"},he={kind:"formatted"},ve={kind:"resolvedImage"};function ge(e,t){return{kind:"array",itemType:e,N:t}}function be(e){if("array"===e.kind){var t=be(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var xe=[se,ue,le,pe,fe,he,ce,ge(de),ve];function we(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!we(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var r=0,n=xe;r<n.length;r+=1){if(!we(n[r],t))return null}}return"Expected "+be(e)+" but found "+be(t)+" instead."}function ke(e,t){return t.some(function(t){return t.kind===e.kind})}function ze(e,t){return t.some(function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e})}var Me=function(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Me.prototype.compare=function(e,t){return this.collator.compare(e,t)},Me.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Se=Me,qe=function(e,t,r,n,a){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=r,this.fontStack=n,this.textColor=a},je=function(e){this.sections=e};je.fromString=function(e){return new je([new qe(e,null,null,null,null)])},je.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length})},je.factory=function(e){return e instanceof je?e:je.fromString(e)},je.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(e){return e.text}).join("")},je.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var n=r[t];if(n.image)e.push(["image",n.image.name]);else{e.push(n.text);var a={};n.fontStack&&(a["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(a["font-scale"]=n.scale),n.textColor&&(a["text-color"]=["rgba"].concat(n.textColor.toArray())),e.push(a)}}return e};var _e=je,Ee=function(e){this.name=e.name,this.available=e.available};Ee.prototype.toString=function(){return this.name},Ee.fromString=function(e){return e?new Ee({name:e,available:!1}):null},Ee.prototype.serialize=function(){return["image",this.name]};var Ce=Ee;function Te(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[e,t,r,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ae(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof V)return!0;if(e instanceof Se)return!0;if(e instanceof _e)return!0;if(e instanceof Ce)return!0;if(Array.isArray(e)){for(var t=0,r=e;t<r.length;t+=1){if(!Ae(r[t]))return!1}return!0}if("object"==typeof e){for(var n in e)if(!Ae(e[n]))return!1;return!0}return!1}function Ie(e){if(null===e)return se;if("string"==typeof e)return le;if("boolean"==typeof e)return pe;if("number"==typeof e)return ue;if(e instanceof V)return fe;if(e instanceof Se)return me;if(e instanceof _e)return he;if(e instanceof Ce)return ve;if(Array.isArray(e)){for(var t,r=e.length,n=0,a=e;n<a.length;n+=1){var i=Ie(a[n]);if(t){if(t===i)continue;t=de;break}t=i}return ge(t||de,r)}return ce}function Pe(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof V||e instanceof _e||e instanceof Ce?e.toString():JSON.stringify(e)}var De=function(e,t){this.type=e,this.value=t};De.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Ae(e[1]))return t.error("invalid value");var r=e[1],n=Ie(r),a=t.expectedType;return"array"!==n.kind||0!==n.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(n=a),new De(n,r)},De.prototype.evaluate=function(){return this.value},De.prototype.eachChild=function(){},De.prototype.outputDefined=function(){return!0},De.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof V?["rgba"].concat(this.value.toArray()):this.value instanceof _e?this.value.serialize():this.value};var Fe=De,Oe=function(e){this.name="ExpressionEvaluationError",this.message=e};Oe.prototype.toJSON=function(){return this.message};var Le=Oe,Re={string:le,number:ue,boolean:pe,object:ce},Ne=function(e,t){this.type=e,this.args=t};Ne.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r,n=1,a=e[0];if("array"===a){var i,o;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in Re)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=Re[s],n++}else i=de;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],n++}r=ge(i,o)}else r=Re[a];for(var u=[];n<e.length;n++){var l=t.parse(e[n],n,de);if(!l)return null;u.push(l)}return new Ne(r,u)},Ne.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var r=this.args[t].evaluate(e);if(!we(this.type,Ie(r)))return r;if(t===this.args.length-1)throw new Le("Expected value to be of type "+be(this.type)+", but found "+be(Ie(r))+" instead.")}return null},Ne.prototype.eachChild=function(e){this.args.forEach(e)},Ne.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Ne.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);var n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map(function(e){return e.serialize()}))};var Ue=Ne,Ge=function(e){this.type=he,this.sections=e};Ge.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");for(var n=[],a=!1,i=1;i<=e.length-1;++i){var o=e[i];if(a&&"object"==typeof o&&!Array.isArray(o)){a=!1;var s=null;if(o["font-scale"]&&!(s=t.parse(o["font-scale"],1,ue)))return null;var u=null;if(o["text-font"]&&!(u=t.parse(o["text-font"],1,ge(le))))return null;var l=null;if(o["text-color"]&&!(l=t.parse(o["text-color"],1,fe)))return null;var p=n[n.length-1];p.scale=s,p.font=u,p.textColor=l}else{var f=t.parse(e[i],1,de);if(!f)return null;var c=f.type.kind;if("string"!==c&&"value"!==c&&"null"!==c&&"resolvedImage"!==c)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,n.push({content:f,scale:null,font:null,textColor:null})}}return new Ge(n)},Ge.prototype.evaluate=function(e){return new _e(this.sections.map(function(t){var r=t.content.evaluate(e);return Ie(r)===ve?new qe("",r,null,null,null):new qe(Pe(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},Ge.prototype.eachChild=function(e){for(var t=0,r=this.sections;t<r.length;t+=1){var n=r[t];e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}},Ge.prototype.outputDefined=function(){return!1},Ge.prototype.serialize=function(){for(var e=["format"],t=0,r=this.sections;t<r.length;t+=1){var n=r[t];e.push(n.content.serialize());var a={};n.scale&&(a["font-scale"]=n.scale.serialize()),n.font&&(a["text-font"]=n.font.serialize()),n.textColor&&(a["text-color"]=n.textColor.serialize()),e.push(a)}return e};var Ve=Ge,We=function(e){this.type=ve,this.input=e};We.parse=function(e,t){if(2!==e.length)return t.error("Expected two arguments.");var r=t.parse(e[1],1,le);return r?new We(r):t.error("No image name provided.")},We.prototype.evaluate=function(e){var t=this.input.evaluate(e),r=Ce.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r},We.prototype.eachChild=function(e){e(this.input)},We.prototype.outputDefined=function(){return!1},We.prototype.serialize=function(){return["image",this.input.serialize()]};var Je=We,Ze={"to-boolean":pe,"to-color":fe,"to-number":ue,"to-string":le},$e=function(e,t){this.type=e,this.args=t};$e.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var r=e[0];if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");for(var n=Ze[r],a=[],i=1;i<e.length;i++){var o=t.parse(e[i],i,de);if(!o)return null;a.push(o)}return new $e(n,a)},$e.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,r,n=0,a=this.args;n<a.length;n+=1){if(r=null,(t=a[n].evaluate(e))instanceof V)return t;if("string"==typeof t){var i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&!(r=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Te(t[0],t[1],t[2],t[3])))return new V(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Le(r||"Could not parse color from value '"+("string"==typeof t?t:String(JSON.stringify(t)))+"'")}if("number"===this.type.kind){for(var o=null,s=0,u=this.args;s<u.length;s+=1){if(null===(o=u[s].evaluate(e)))return 0;var l=Number(o);if(!isNaN(l))return l}throw new Le("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?_e.fromString(Pe(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Ce.fromString(Pe(this.args[0].evaluate(e))):Pe(this.args[0].evaluate(e))},$e.prototype.eachChild=function(e){this.args.forEach(e)},$e.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},$e.prototype.serialize=function(){if("formatted"===this.type.kind)return new Ve([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Je(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var Be=$e,Xe=["Unknown","Point","LineString","Polygon"],He=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};He.prototype.id=function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null},He.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Xe[this.feature.type]:this.feature.type:null},He.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},He.prototype.canonicalID=function(){return this.canonical},He.prototype.properties=function(){return this.feature&&this.feature.properties||{}},He.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,t=this.featureDistanceData.scale,r=this.featureTileCoord,n=r.x,a=r.y,i=n*t-e[0],o=a*t-e[1];return this.featureDistanceData.bearing[0]*i+this.featureDistanceData.bearing[1]*o}return 0},He.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=V.parse(e)),t};var Ye=He,Ke=function(e,t,r,n){this.name=e,this.type=t,this._evaluate=r,this.args=n};function Qe(e){return Array.isArray(e)?"("+e.map(be).join(", ")+")":"("+be(e.type)+"...)"}Ke.prototype.evaluate=function(e){return this._evaluate(e,this.args)},Ke.prototype.eachChild=function(e){this.args.forEach(e)},Ke.prototype.outputDefined=function(){return!1},Ke.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},Ke.parse=function(e,t){var r,n=e[0],a=Ke.definitions[n];if(!a)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(a)?a[0]:a.type,o=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,s=o.filter(function(t){var r=t[0];return!Array.isArray(r)||r.length===e.length-1}),u=null,l=0,p=s;l<p.length;l+=1){var f=p[l],c=f[0],d=f[1];u=new Dt(t.registry,t.path,null,t.scope);for(var y=[],m=!1,h=1;h<e.length;h++){var v=e[h],g=Array.isArray(c)?c[h-1]:c.type,b=u.parse(v,1+y.length,g);if(!b){m=!0;break}y.push(b)}if(!m)if(Array.isArray(c)&&c.length!==y.length)u.error("Expected "+c.length+" arguments, but found "+y.length+" instead.");else{for(var x=0;x<y.length;x++){var w=Array.isArray(c)?c[x]:c.type,k=y[x];u.concat(x+1).checkSubtype(w,k.type)}if(0===u.errors.length)return new Ke(n,i,d,y)}}if(1===s.length)(r=t.errors).push.apply(r,u.errors);else{for(var z=(s.length?s:o).map(function(e){return Qe(e[0])}).join(" | "),M=[],S=1;S<e.length;S++){var q=t.parse(e[S],1+M.length);if(!q)return null;M.push(be(q.type))}t.error("Expected arguments of type "+z+", but found ("+M.join(", ")+") instead.")}return null},Ke.register=function(e,t){for(var r in Ke.definitions=t,t)e[r]=Ke};var et=Ke,tt=function(e,t,r){this.type=me,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t};tt.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");var n=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,pe);if(!n)return null;var a=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,pe);if(!a)return null;var i=null;return r.locale&&!(i=t.parse(r.locale,1,le))?null:new tt(n,a,i)},tt.prototype.evaluate=function(e){return new Se(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},tt.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},tt.prototype.outputDefined=function(){return!1},tt.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var rt=tt,nt=8192;function at(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function it(e){return(180+e)/360}function ot(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function st(e,t){return!(e[0]<=t[0])&&(!(e[2]>=t[2])&&(!(e[1]<=t[1])&&!(e[3]>=t[3])))}function ut(e,t){var r=it(e[0]),n=ot(e[1]),a=Math.pow(2,t.z);return[Math.round(r*a*nt),Math.round(n*a*nt)]}function lt(e,t,r){var n=e[0]-t[0],a=e[1]-t[1],i=e[0]-r[0],o=e[1]-r[1];return n*o-i*a==0&&n*i<=0&&a*o<=0}function pt(e,t,r){return t[1]>e[1]!=r[1]>e[1]&&e[0]<(r[0]-t[0])*(e[1]-t[1])/(r[1]-t[1])+t[0]}function ft(e,t){for(var r=!1,n=0,a=t.length;n<a;n++)for(var i=t[n],o=0,s=i.length;o<s-1;o++){if(lt(e,i[o],i[o+1]))return!1;pt(e,i[o],i[o+1])&&(r=!r)}return r}function ct(e,t){for(var r=0;r<t.length;r++)if(ft(e,t[r]))return!0;return!1}function dt(e,t){return e[0]*t[1]-e[1]*t[0]}function yt(e,t,r,n){var a=e[0]-r[0],i=e[1]-r[1],o=t[0]-r[0],s=t[1]-r[1],u=n[0]-r[0],l=n[1]-r[1],p=a*l-u*i,f=o*l-u*s;return p>0&&f<0||p<0&&f>0}function mt(e,t,r,n){var a=[t[0]-e[0],t[1]-e[1]];return 0!==dt([n[0]-r[0],n[1]-r[1]],a)&&!(!yt(e,t,r,n)||!yt(r,n,e,t))}function ht(e,t,r){for(var n=0,a=r;n<a.length;n+=1)for(var i=a[n],o=0;o<i.length-1;++o)if(mt(e,t,i[o],i[o+1]))return!0;return!1}function vt(e,t){for(var r=0;r<e.length;++r)if(!ft(e[r],t))return!1;for(var n=0;n<e.length-1;++n)if(ht(e[n],e[n+1],t))return!1;return!0}function gt(e,t){for(var r=0;r<t.length;r++)if(vt(e,t[r]))return!0;return!1}function bt(e,t,r){for(var n=[],a=0;a<e.length;a++){for(var i=[],o=0;o<e[a].length;o++){var s=ut(e[a][o],r);at(t,s),i.push(s)}n.push(i)}return n}function xt(e,t,r){for(var n=[],a=0;a<e.length;a++){var i=bt(e[a],t,r);n.push(i)}return n}function wt(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){var a=.5*n,i=e[0]-r[0]>a?-n:r[0]-e[0]>a?n:0;0===i&&(i=e[0]-r[2]>a?-n:r[2]-e[0]>a?n:0),e[0]+=i}at(t,e)}function kt(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function zt(e,t,r,n){var a=Math.pow(2,n.z)*nt,i=[n.x*nt,n.y*nt],o=[];if(!e)return o;for(var s=0,u=e;s<u.length;s+=1)for(var l=0,p=u[s];l<p.length;l+=1){var f=p[l],c=[f.x+i[0],f.y+i[1]];wt(c,t,r,a),o.push(c)}return o}function Mt(e,t,r,n){var a=Math.pow(2,n.z)*nt,i=[n.x*nt,n.y*nt],o=[];if(!e)return o;for(var s=0,u=e;s<u.length;s+=1){for(var l=[],p=0,f=u[s];p<f.length;p+=1){var c=f[p],d=[c.x+i[0],c.y+i[1]];at(t,d),l.push(d)}o.push(l)}if(t[2]-t[0]<=a/2){kt(t);for(var y=0,m=o;y<m.length;y+=1)for(var h=0,v=m[y];h<v.length;h+=1){wt(v[h],t,r,a)}}return o}function St(e,t){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(!a)return!1;if("Polygon"===t.type){var i=bt(t.coordinates,n,a),o=zt(e.geometry(),r,n,a);if(!st(r,n))return!1;for(var s=0,u=o;s<u.length;s+=1){if(!ft(u[s],i))return!1}}if("MultiPolygon"===t.type){var l=xt(t.coordinates,n,a),p=zt(e.geometry(),r,n,a);if(!st(r,n))return!1;for(var f=0,c=p;f<c.length;f+=1){if(!ct(c[f],l))return!1}}return!0}function qt(e,t){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(!a)return!1;if("Polygon"===t.type){var i=bt(t.coordinates,n,a),o=Mt(e.geometry(),r,n,a);if(!st(r,n))return!1;for(var s=0,u=o;s<u.length;s+=1){if(!vt(u[s],i))return!1}}if("MultiPolygon"===t.type){var l=xt(t.coordinates,n,a),p=Mt(e.geometry(),r,n,a);if(!st(r,n))return!1;for(var f=0,c=p;f<c.length;f+=1){if(!gt(c[f],l))return!1}}return!0}var jt=function(e,t){this.type=pe,this.geojson=e,this.geometries=t};jt.parse=function(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Ae(e[1])){var r=e[1];if("FeatureCollection"===r.type)for(var n=0;n<r.features.length;++n){var a=r.features[n].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new jt(r,r.features[n].geometry)}else if("Feature"===r.type){var i=r.geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new jt(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new jt(r,r)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},jt.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return St(e,this.geometries);if("LineString"===e.geometryType())return qt(e,this.geometries)}return!1},jt.prototype.eachChild=function(){},jt.prototype.outputDefined=function(){return!0},jt.prototype.serialize=function(){return["within",this.geojson]};var _t=jt;function Et(e){if(e instanceof et){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof _t)return!1;var t=!0;return e.eachChild(function(e){t&&!Et(e)&&(t=!1)}),t}function Ct(e){if(e instanceof et&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild(function(e){t&&!Ct(e)&&(t=!1)}),t}function Tt(e,t){if(e instanceof et&&t.indexOf(e.name)>=0)return!1;var r=!0;return e.eachChild(function(e){r&&!Tt(e,t)&&(r=!1)}),r}var At=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};At.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var r=e[1];return t.scope.has(r)?new At(r,t.scope.get(r)):t.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},At.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},At.prototype.eachChild=function(){},At.prototype.outputDefined=function(){return!1},At.prototype.serialize=function(){return["var",this.name]};var It=At,Pt=function(e,t,r,n,a){void 0===t&&(t=[]),void 0===n&&(n=new oe),void 0===a&&(a=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=n,this.errors=a,this.expectedType=r};Pt.prototype.parse=function(e,t,r,n,a){return void 0===a&&(a={}),t?this.concat(t,r,n)._parse(e,a):this._parse(e,a)},Pt.prototype._parse=function(e,t){function r(e,t,r){return"assert"===r?new Ue(t,[e]):"coerce"===r?new Be(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=e[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var a=this.registry[n];if(a){var i=a.parse(e,this);if(!i)return null;if(this.expectedType){var o=this.expectedType,s=i.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else i=r(i,o,t.typeAnnotation||"coerce");else i=r(i,o,t.typeAnnotation||"assert")}if(!(i instanceof Fe)&&"resolvedImage"!==i.type.kind&&Ft(i)){var u=new Ye;try{i=new Fe(i.type,i.evaluate(u))}catch(Li){return this.error(Li.message),null}}return i}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},Pt.prototype.concat=function(e,t,r){var n="number"==typeof e?this.path.concat(e):this.path,a=r?this.scope.concat(r):this.scope;return new Pt(this.registry,n,t||null,a,this.errors)},Pt.prototype.error=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var n=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new ae(n,e))},Pt.prototype.checkSubtype=function(e,t){var r=we(e,t);return r&&this.error(r),r};var Dt=Pt;function Ft(e){if(e instanceof It)return Ft(e.boundExpression);if(e instanceof et&&"error"===e.name)return!1;if(e instanceof rt)return!1;if(e instanceof _t)return!1;var t=e instanceof Be||e instanceof Ue,r=!0;return e.eachChild(function(e){r=t?r&&Ft(e):r&&e instanceof Fe}),!!r&&(Et(e)&&Tt(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]))}function Ot(e,t){for(var r,n,a=e.length-1,i=0,o=a,s=0;i<=o;)if(r=e[s=Math.floor((i+o)/2)],n=e[s+1],r<=t){if(s===a||t<n)return s;i=s+1}else{if(!(r>t))throw new Le("Input is not a number.");o=s-1}return 0}var Lt=function(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var n=0,a=r;n<a.length;n+=1){var i=a[n],o=i[0],s=i[1];this.labels.push(o),this.outputs.push(s)}};Lt.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var r=t.parse(e[1],1,ue);if(!r)return null;var n=[],a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType);for(var i=1;i<e.length;i+=2){var o=1===i?-1/0:e[i],s=e[i+1],u=i,l=i+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(n.length&&n[n.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var p=t.parse(s,l,a);if(!p)return null;a=a||p.type,n.push([o,p])}return new Lt(a,r,n)},Lt.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);var a=t.length;return n>=t[a-1]?r[a-1].evaluate(e):r[Ot(t,n)].evaluate(e)},Lt.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1){e(r[t])}},Lt.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Lt.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Rt=Lt,Nt=Ut;function Ut(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=r,this.p2y=n}function Gt(e,t,r){return e*(1-r)+t*r}function Vt(e,t,r){return new V(Gt(e.r,t.r,r),Gt(e.g,t.g,r),Gt(e.b,t.b,r),Gt(e.a,t.a,r))}function Wt(e,t,r){return e.map(function(e,n){return Gt(e,t[n],r)})}Ut.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},Ut.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},Ut.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},Ut.prototype.solveCurveX=function(e,t){var r,n,a,i,o;for(void 0===t&&(t=1e-6),a=e,o=0;o<8;o++){if(i=this.sampleCurveX(a)-e,Math.abs(i)<t)return a;var s=this.sampleCurveDerivativeX(a);if(Math.abs(s)<1e-6)break;a-=i/s}if((a=e)<(r=0))return r;if(a>(n=1))return n;for(;r<n;){if(i=this.sampleCurveX(a),Math.abs(i-e)<t)return a;e>i?r=a:n=a,a=.5*(n-r)+r}return a},Ut.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var Jt=Object.freeze({__proto__:null,number:Gt,color:Vt,array:Wt}),Zt=.95047,$t=1,Bt=1.08883,Xt=4/29,Ht=6/29,Yt=3*Ht*Ht,Kt=Ht*Ht*Ht,Qt=Math.PI/180,er=180/Math.PI;function tr(e){return e>Kt?Math.pow(e,1/3):e/Yt+Xt}function rr(e){return e>Ht?e*e*e:Yt*(e-Xt)}function nr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ar(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ir(e){var t=ar(e.r),r=ar(e.g),n=ar(e.b),a=tr((.4124564*t+.3575761*r+.1804375*n)/Zt),i=tr((.2126729*t+.7151522*r+.072175*n)/$t);return{l:116*i-16,a:500*(a-i),b:200*(i-tr((.0193339*t+.119192*r+.9503041*n)/Bt)),alpha:e.a}}function or(e){var t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=$t*rr(t),r=Zt*rr(r),n=Bt*rr(n),new V(nr(3.2404542*r-1.5371385*t-.4985314*n),nr(-.969266*r+1.8760108*t+.041556*n),nr(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}function sr(e,t,r){return{l:Gt(e.l,t.l,r),a:Gt(e.a,t.a,r),b:Gt(e.b,t.b,r),alpha:Gt(e.alpha,t.alpha,r)}}function ur(e){var t=ir(e),r=t.l,n=t.a,a=t.b,i=Math.atan2(a,n)*er;return{h:i<0?i+360:i,c:Math.sqrt(n*n+a*a),l:r,alpha:e.a}}function lr(e){var t=e.h*Qt,r=e.c;return or({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})}function pr(e,t,r){var n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}function fr(e,t,r){return{h:pr(e.h,t.h,r),c:Gt(e.c,t.c,r),l:Gt(e.l,t.l,r),alpha:Gt(e.alpha,t.alpha,r)}}var cr={forward:ir,reverse:or,interpolate:sr},dr={forward:ur,reverse:lr,interpolate:fr},yr=function(e,t,r,n,a){this.type=e,this.operator=t,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(var i=0,o=a;i<o.length;i+=1){var s=o[i],u=s[0],l=s[1];this.labels.push(u),this.outputs.push(l)}};function mr(e,t,r,n){var a=n-r,i=e-r;return 0===a?0:1===t?i/a:(Math.pow(t,i)-1)/(Math.pow(t,a)-1)}yr.interpolationFactor=function(e,t,r,n){var a=0;if("exponential"===e.name)a=mr(t,e.base,r,n);else if("linear"===e.name)a=mr(t,1,r,n);else if("cubic-bezier"===e.name){var i=e.controlPoints;a=new Nt(i[0],i[1],i[2],i[3]).solve(mr(t,1,r,n))}return a},yr.parse=function(e,t){var r=e[0],n=e[1],a=e[2],i=e.slice(3);if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(a=t.parse(a,2,ue)))return null;var u=[],l=null;"interpolate-hcl"===r||"interpolate-lab"===r?l=fe:t.expectedType&&"value"!==t.expectedType.kind&&(l=t.expectedType);for(var p=0;p<i.length;p+=2){var f=i[p],c=i[p+1],d=p+3,y=p+4;if("number"!=typeof f)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(u.length&&u[u.length-1][0]>=f)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var m=t.parse(c,y,l);if(!m)return null;l=l||m.type,u.push([f,m])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new yr(l,r,n,a,u):t.error("Type "+be(l)+" is not interpolatable.")},yr.prototype.evaluate=function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);var a=t.length;if(n>=t[a-1])return r[a-1].evaluate(e);var i=Ot(t,n),o=t[i],s=t[i+1],u=yr.interpolationFactor(this.interpolation,n,o,s),l=r[i].evaluate(e),p=r[i+1].evaluate(e);return"interpolate"===this.operator?Jt[this.type.kind.toLowerCase()](l,p,u):"interpolate-hcl"===this.operator?dr.reverse(dr.interpolate(dr.forward(l),dr.forward(p),u)):cr.reverse(cr.interpolate(cr.forward(l),cr.forward(p),u))},yr.prototype.eachChild=function(e){e(this.input);for(var t=0,r=this.outputs;t<r.length;t+=1){e(r[t])}},yr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},yr.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t};var hr=yr,vr=function(e,t){this.type=e,this.args=t};vr.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var r=null,n=t.expectedType;n&&"value"!==n.kind&&(r=n);for(var a=[],i=0,o=e.slice(1);i<o.length;i+=1){var s=o[i],u=t.parse(s,1+a.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,a.push(u)}var l=n&&a.some(function(e){return we(n,e.type)});return new vr(l?de:r,a)},vr.prototype.evaluate=function(e){for(var t,r=null,n=0,a=0,i=this.args;a<i.length;a+=1){if(n++,(r=i[a].evaluate(e))&&r instanceof Ce&&!r.available&&(t||(t=r),r=null,n===this.args.length))return t;if(null!==r)break}return r},vr.prototype.eachChild=function(e){this.args.forEach(e)},vr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},vr.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var gr=vr,br=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};br.prototype.evaluate=function(e){return this.result.evaluate(e)},br.prototype.eachChild=function(e){for(var t=0,r=this.bindings;t<r.length;t+=1){e(r[t][1])}e(this.result)},br.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var r=[],n=1;n<e.length-1;n+=2){var a=e[n];if("string"!=typeof a)return t.error("Expected string, but found "+typeof a+" instead.",n);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);var i=t.parse(e[n+1],n+1);if(!i)return null;r.push([a,i])}var o=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return o?new br(r,o):null},br.prototype.outputDefined=function(){return this.result.outputDefined()},br.prototype.serialize=function(){for(var e=["let"],t=0,r=this.bindings;t<r.length;t+=1){var n=r[t],a=n[0],i=n[1];e.push(a,i.serialize())}return e.push(this.result.serialize()),e};var xr=br,wr=function(e,t,r){this.type=e,this.index=t,this.input=r};wr.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,ue),n=t.parse(e[2],2,ge(t.expectedType||de));if(!r||!n)return null;var a=n.type;return new wr(a.itemType,r,n)},wr.prototype.evaluate=function(e){var t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new Le("Array index out of bounds: "+t+" < 0.");if(t>=r.length)throw new Le("Array index out of bounds: "+t+" > "+(r.length-1)+".");if(t!==Math.floor(t))throw new Le("Array index must be an integer, but found "+t+" instead.");return r[t]},wr.prototype.eachChild=function(e){e(this.index),e(this.input)},wr.prototype.outputDefined=function(){return!1},wr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var kr=wr,zr=function(e,t){this.type=pe,this.needle=e,this.haystack=t};zr.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,de),n=t.parse(e[2],2,de);return r&&n?ke(r.type,[pe,le,ue,se,de])?new zr(r,n):t.error("Expected first argument to be of type boolean, string, number or null, but found "+be(r.type)+" instead"):null},zr.prototype.evaluate=function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(null==r)return!1;if(!ze(t,["boolean","string","number","null"]))throw new Le("Expected first argument to be of type boolean, string, number or null, but found "+be(Ie(t))+" instead.");if(!ze(r,["string","array"]))throw new Le("Expected second argument to be of type array or string, but found "+be(Ie(r))+" instead.");return r.indexOf(t)>=0},zr.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},zr.prototype.outputDefined=function(){return!0},zr.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Mr=zr,Sr=function(e,t,r){this.type=ue,this.needle=e,this.haystack=t,this.fromIndex=r};Sr.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,de),n=t.parse(e[2],2,de);if(!r||!n)return null;if(!ke(r.type,[pe,le,ue,se,de]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+be(r.type)+" instead");if(4===e.length){var a=t.parse(e[3],3,ue);return a?new Sr(r,n,a):null}return new Sr(r,n)},Sr.prototype.evaluate=function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!ze(t,["boolean","string","number","null"]))throw new Le("Expected first argument to be of type boolean, string, number or null, but found "+be(Ie(t))+" instead.");if(!ze(r,["string","array"]))throw new Le("Expected second argument to be of type array or string, but found "+be(Ie(r))+" instead.");if(this.fromIndex){var n=this.fromIndex.evaluate(e);return r.indexOf(t,n)}return r.indexOf(t)},Sr.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Sr.prototype.outputDefined=function(){return!1},Sr.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var qr=Sr,jr=function(e,t,r,n,a,i){this.inputType=e,this.type=t,this.input=r,this.cases=n,this.outputs=a,this.otherwise=i};jr.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var r,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var a={},i=[],o=2;o<e.length-1;o+=2){var s=e[o],u=e[o+1];Array.isArray(s)||(s=[s]);var l=t.concat(o);if(0===s.length)return l.error("Expected at least one branch label.");for(var p=0,f=s;p<f.length;p+=1){var c=f[p];if("number"!=typeof c&&"string"!=typeof c)return l.error("Branch labels must be numbers or strings.");if("number"==typeof c&&Math.abs(c)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof c&&Math.floor(c)!==c)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,Ie(c)))return null}else r=Ie(c);if(void 0!==a[String(c)])return l.error("Branch labels must be unique.");a[String(c)]=i.length}var d=t.parse(u,o,n);if(!d)return null;n=n||d.type,i.push(d)}var y=t.parse(e[1],1,de);if(!y)return null;var m=t.parse(e[e.length-1],e.length-1,n);return m?"value"!==y.type.kind&&t.concat(1).checkSubtype(r,y.type)?null:new jr(r,n,y,a,i,m):null},jr.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Ie(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},jr.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},jr.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},jr.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],r=[],n={},a=0,i=Object.keys(this.cases).sort();a<i.length;a+=1){var o=i[a];void 0===(f=n[this.cases[o]])?(n[this.cases[o]]=r.length,r.push([this.cases[o],[o]])):r[f][1].push(o)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},u=0,l=r;u<l.length;u+=1){var p=l[u],f=p[0],c=p[1];1===c.length?t.push(s(c[0])):t.push(c.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var _r=jr,Er=function(e,t,r){this.type=e,this.branches=t,this.otherwise=r};Er.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var n=[],a=1;a<e.length-1;a+=2){var i=t.parse(e[a],a,pe);if(!i)return null;var o=t.parse(e[a+1],a+1,r);if(!o)return null;n.push([i,o]),r=r||o.type}var s=t.parse(e[e.length-1],e.length-1,r);return s?new Er(r,n,s):null},Er.prototype.evaluate=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var n=r[t],a=n[0],i=n[1];if(a.evaluate(e))return i.evaluate(e)}return this.otherwise.evaluate(e)},Er.prototype.eachChild=function(e){for(var t=0,r=this.branches;t<r.length;t+=1){var n=r[t],a=n[0],i=n[1];e(a),e(i)}e(this.otherwise)},Er.prototype.outputDefined=function(){return this.branches.every(function(e){return e[0],e[1].outputDefined()})&&this.otherwise.outputDefined()},Er.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Cr=Er,Tr=function(e,t,r,n){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=n};Tr.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1,de),n=t.parse(e[2],2,ue);if(!r||!n)return null;if(!ke(r.type,[ge(de),le,de]))return t.error("Expected first argument to be of type array or string, but found "+be(r.type)+" instead");if(4===e.length){var a=t.parse(e[3],3,ue);return a?new Tr(r.type,r,n,a):null}return new Tr(r.type,r,n)},Tr.prototype.evaluate=function(e){var t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!ze(t,["string","array"]))throw new Le("Expected first argument to be of type array or string, but found "+be(Ie(t))+" instead.");if(this.endIndex){var n=this.endIndex.evaluate(e);return t.slice(r,n)}return t.slice(r)},Tr.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Tr.prototype.outputDefined=function(){return!1},Tr.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ar=Tr;function Ir(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Pr(e,t,r){return t===r}function Dr(e,t,r){return t!==r}function Fr(e,t,r){return t<r}function Or(e,t,r){return t>r}function Lr(e,t,r){return t<=r}function Rr(e,t,r){return t>=r}function Nr(e,t,r,n){return 0===n.compare(t,r)}function Ur(e,t,r,n){return!Nr(e,t,r,n)}function Gr(e,t,r,n){return n.compare(t,r)<0}function Vr(e,t,r,n){return n.compare(t,r)>0}function Wr(e,t,r,n){return n.compare(t,r)<=0}function Jr(e,t,r,n){return n.compare(t,r)>=0}function Zr(e,t,r){var n="=="!==e&&"!="!==e;return function(){function a(e,t,r){this.type=pe,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return a.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var r=e[0],i=t.parse(e[1],1,de);if(!i)return null;if(!Ir(r,i.type))return t.concat(1).error('"'+r+"\" comparisons are not supported for type '"+be(i.type)+"'.");var o=t.parse(e[2],2,de);if(!o)return null;if(!Ir(r,o.type))return t.concat(2).error('"'+r+"\" comparisons are not supported for type '"+be(o.type)+"'.");if(i.type.kind!==o.type.kind&&"value"!==i.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '"+be(i.type)+"' and '"+be(o.type)+"'.");n&&("value"===i.type.kind&&"value"!==o.type.kind?i=new Ue(o.type,[i]):"value"!==i.type.kind&&"value"===o.type.kind&&(o=new Ue(i.type,[o])));var s=null;if(4===e.length){if("string"!==i.type.kind&&"string"!==o.type.kind&&"value"!==i.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,me)))return null}return new a(i,o,s)},a.prototype.evaluate=function(a){var i=this.lhs.evaluate(a),o=this.rhs.evaluate(a);if(n&&this.hasUntypedArgument){var s=Ie(i),u=Ie(o);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Le('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var l=Ie(i),p=Ie(o);if("string"!==l.kind||"string"!==p.kind)return t(a,i,o)}return this.collator?r(a,i,o,this.collator.evaluate(a)):t(a,i,o)},a.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},a.prototype.outputDefined=function(){return!0},a.prototype.serialize=function(){var t=[e];return this.eachChild(function(e){t.push(e.serialize())}),t},a}()}var $r=Zr("==",Pr,Nr),Br=Zr("!=",Dr,Ur),Xr=Zr("<",Fr,Gr),Hr=Zr(">",Or,Vr),Yr=Zr("<=",Lr,Wr),Kr=Zr(">=",Rr,Jr),Qr=function(e,t,r,n,a,i){this.type=le,this.number=e,this.locale=t,this.currency=r,this.unit=n,this.minFractionDigits=a,this.maxFractionDigits=i};Qr.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var r=t.parse(e[1],1,ue);if(!r)return null;var n=e[2];if("object"!=typeof n||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");var a=null;if(n.locale&&!(a=t.parse(n.locale,1,le)))return null;var i=null;if(n.currency&&!(i=t.parse(n.currency,1,le)))return null;var o=null;if(n.unit&&!(o=t.parse(n.unit,1,le)))return null;var s=null;if(n["min-fraction-digits"]&&!(s=t.parse(n["min-fraction-digits"],1,ue)))return null;var u=null;return n["max-fraction-digits"]&&!(u=t.parse(n["max-fraction-digits"],1,ue))?null:new Qr(r,a,i,o,s,u)},Qr.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Qr.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Qr.prototype.outputDefined=function(){return!1},Qr.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var en=Qr,tn=function(e){this.type=ue,this.input=e};tn.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error("Expected argument of type string or array, but found "+be(r.type)+" instead."):new tn(r):null},tn.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Le("Expected value to be of type string or array, but found "+be(Ie(t))+" instead.")},tn.prototype.eachChild=function(e){e(this.input)},tn.prototype.outputDefined=function(){return!1},tn.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var rn=tn,nn={"==":$r,"!=":Br,">":Hr,"<":Xr,">=":Kr,"<=":Yr,array:Ue,at:kr,boolean:Ue,case:Cr,coalesce:gr,collator:rt,format:Ve,image:Je,in:Mr,"index-of":qr,interpolate:hr,"interpolate-hcl":hr,"interpolate-lab":hr,length:rn,let:xr,literal:Fe,match:_r,number:Ue,"number-format":en,object:Ue,slice:Ar,step:Rt,string:Ue,"to-boolean":Be,"to-color":Be,"to-number":Be,"to-string":Be,var:It,within:_t};function an(e,t){var r=t[0],n=t[1],a=t[2],i=t[3];r=r.evaluate(e),n=n.evaluate(e),a=a.evaluate(e);var o=i?i.evaluate(e):1,s=Te(r,n,a,o);if(s)throw new Le(s);return new V(r/255*o,n/255*o,a/255*o,o)}function on(e,t){return e in t}function sn(e,t){var r=t[e];return void 0===r?null:r}function un(e,t,r,n){for(;r<=n;){var a=r+n>>1;if(t[a]===e)return!0;t[a]>e?n=a-1:r=a+1}return!1}function ln(e){return{type:e}}et.register(nn,{error:[ye,[le],function(e,t){var r=t[0];throw new Le(r.evaluate(e))}],typeof:[le,[de],function(e,t){return be(Ie(t[0].evaluate(e)))}],"to-rgba":[ge(ue,4),[fe],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[fe,[ue,ue,ue],an],rgba:[fe,[ue,ue,ue,ue],an],has:{type:pe,overloads:[[[le],function(e,t){return on(t[0].evaluate(e),e.properties())}],[[le,ce],function(e,t){var r=t[0],n=t[1];return on(r.evaluate(e),n.evaluate(e))}]]},get:{type:de,overloads:[[[le],function(e,t){return sn(t[0].evaluate(e),e.properties())}],[[le,ce],function(e,t){var r=t[0],n=t[1];return sn(r.evaluate(e),n.evaluate(e))}]]},"feature-state":[de,[le],function(e,t){return sn(t[0].evaluate(e),e.featureState||{})}],properties:[ce,[],function(e){return e.properties()}],"geometry-type":[le,[],function(e){return e.geometryType()}],id:[de,[],function(e){return e.id()}],zoom:[ue,[],function(e){return e.globals.zoom}],pitch:[ue,[],function(e){return e.globals.pitch||0}],"distance-from-center":[ue,[],function(e){return e.distanceFromCenter()}],"heatmap-density":[ue,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[ue,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[ue,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[de,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[ue,ln(ue),function(e,t){for(var r=0,n=0,a=t;n<a.length;n+=1){r+=a[n].evaluate(e)}return r}],"*":[ue,ln(ue),function(e,t){for(var r=1,n=0,a=t;n<a.length;n+=1){r*=a[n].evaluate(e)}return r}],"-":{type:ue,overloads:[[[ue,ue],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)-n.evaluate(e)}],[[ue],function(e,t){return-t[0].evaluate(e)}]]},"/":[ue,[ue,ue],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)/n.evaluate(e)}],"%":[ue,[ue,ue],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)%n.evaluate(e)}],ln2:[ue,[],function(){return Math.LN2}],pi:[ue,[],function(){return Math.PI}],e:[ue,[],function(){return Math.E}],"^":[ue,[ue,ue],function(e,t){var r=t[0],n=t[1];return Math.pow(r.evaluate(e),n.evaluate(e))}],sqrt:[ue,[ue],function(e,t){var r=t[0];return Math.sqrt(r.evaluate(e))}],log10:[ue,[ue],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN10}],ln:[ue,[ue],function(e,t){var r=t[0];return Math.log(r.evaluate(e))}],log2:[ue,[ue],function(e,t){var r=t[0];return Math.log(r.evaluate(e))/Math.LN2}],sin:[ue,[ue],function(e,t){var r=t[0];return Math.sin(r.evaluate(e))}],cos:[ue,[ue],function(e,t){var r=t[0];return Math.cos(r.evaluate(e))}],tan:[ue,[ue],function(e,t){var r=t[0];return Math.tan(r.evaluate(e))}],asin:[ue,[ue],function(e,t){var r=t[0];return Math.asin(r.evaluate(e))}],acos:[ue,[ue],function(e,t){var r=t[0];return Math.acos(r.evaluate(e))}],atan:[ue,[ue],function(e,t){var r=t[0];return Math.atan(r.evaluate(e))}],min:[ue,ln(ue),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[ue,ln(ue),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[ue,[ue],function(e,t){var r=t[0];return Math.abs(r.evaluate(e))}],round:[ue,[ue],function(e,t){var r=t[0].evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[ue,[ue],function(e,t){var r=t[0];return Math.floor(r.evaluate(e))}],ceil:[ue,[ue],function(e,t){var r=t[0];return Math.ceil(r.evaluate(e))}],"filter-==":[pe,[le,de],function(e,t){var r=t[0],n=t[1];return e.properties()[r.value]===n.value}],"filter-id-==":[pe,[de],function(e,t){var r=t[0];return e.id()===r.value}],"filter-type-==":[pe,[le],function(e,t){var r=t[0];return e.geometryType()===r.value}],"filter-<":[pe,[le,de],function(e,t){var r=t[0],n=t[1],a=e.properties()[r.value],i=n.value;return typeof a==typeof i&&a<i}],"filter-id-<":[pe,[de],function(e,t){var r=t[0],n=e.id(),a=r.value;return typeof n==typeof a&&n<a}],"filter->":[pe,[le,de],function(e,t){var r=t[0],n=t[1],a=e.properties()[r.value],i=n.value;return typeof a==typeof i&&a>i}],"filter-id->":[pe,[de],function(e,t){var r=t[0],n=e.id(),a=r.value;return typeof n==typeof a&&n>a}],"filter-<=":[pe,[le,de],function(e,t){var r=t[0],n=t[1],a=e.properties()[r.value],i=n.value;return typeof a==typeof i&&a<=i}],"filter-id-<=":[pe,[de],function(e,t){var r=t[0],n=e.id(),a=r.value;return typeof n==typeof a&&n<=a}],"filter->=":[pe,[le,de],function(e,t){var r=t[0],n=t[1],a=e.properties()[r.value],i=n.value;return typeof a==typeof i&&a>=i}],"filter-id->=":[pe,[de],function(e,t){var r=t[0],n=e.id(),a=r.value;return typeof n==typeof a&&n>=a}],"filter-has":[pe,[de],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[pe,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[pe,[ge(le)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[pe,[ge(de)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[pe,[le,ge(de)],function(e,t){var r=t[0];return t[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[pe,[le,ge(de)],function(e,t){var r=t[0],n=t[1];return un(e.properties()[r.value],n.value,0,n.value.length-1)}],all:{type:pe,overloads:[[[pe,pe],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)&&n.evaluate(e)}],[ln(pe),function(e,t){for(var r=0,n=t;r<n.length;r+=1){if(!n[r].evaluate(e))return!1}return!0}]]},any:{type:pe,overloads:[[[pe,pe],function(e,t){var r=t[0],n=t[1];return r.evaluate(e)||n.evaluate(e)}],[ln(pe),function(e,t){for(var r=0,n=t;r<n.length;r+=1){if(n[r].evaluate(e))return!0}return!1}]]},"!":[pe,[pe],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[pe,[le],function(e,t){var r=t[0],n=e.globals&&e.globals.isSupportedScript;return!n||n(r.evaluate(e))}],upcase:[le,[le],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[le,[le],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[le,ln(de),function(e,t){return t.map(function(t){return Pe(t.evaluate(e))}).join("")}],"resolved-locale":[le,[me],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var pn=nn;function fn(e){return{result:"success",value:e}}function cn(e){return{result:"error",value:e}}function dn(e){return"data-driven"===e["property-type"]}function yn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function mn(e){return!!e.expression&&e.expression.interpolated}function hn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}var vn=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Ye,this._defaultValue=t?Sn(t):null,this._enumValues=t&&"enum"===t.type?t.values:null};function gn(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in pn}function bn(e,t){var r=new Dt(pn,[],t?Mn(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?fn(new vn(n,t)):cn(r.errors)}vn.prototype.evaluateWithoutErrorHandling=function(e,t,r,n,a,i,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=i,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)},vn.prototype.evaluate=function(e,t,r,n,a,i,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=i||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null;try{var u=this.expression.evaluate(this._evaluator);if(null==u||"number"==typeof u&&u!=u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new Le("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(u)+" instead.");return u}catch(Li){return this._warningHistory[Li.message]||(this._warningHistory[Li.message]=!0,"undefined"!=typeof console&&console.warn(Li.message)),this._defaultValue}};var xn=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Ct(t.expression)};xn.prototype.evaluateWithoutErrorHandling=function(e,t,r,n,a,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,a,i)},xn.prototype.evaluate=function(e,t,r,n,a,i){return this._styleExpression.evaluate(e,t,r,n,a,i)};var wn=function(e,t,r,n){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Ct(t.expression),this.interpolationType=n};function kn(e,t){if("error"===(e=bn(e,t)).result)return e;var r=e.value.expression,n=Et(r);if(!n&&!dn(t))return cn([new ae("","data expressions not supported")]);var a=Tt(r,["zoom","pitch","distance-from-center"]);if(!a&&!yn(t))return cn([new ae("","zoom expressions not supported")]);var i=zn(r);if(!i&&!a)return cn([new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(i instanceof ae)return cn([i]);if(i instanceof hr&&!mn(t))return cn([new ae("",'"interpolate" expressions cannot be used with this property')]);if(!i)return fn(new xn(n?"constant":"source",e.value));var o=i instanceof hr?i.interpolation:void 0;return fn(new wn(n?"camera":"composite",e.value,i.labels,o))}function zn(e){var t=null;if(e instanceof xr)t=zn(e.result);else if(e instanceof gr)for(var r=0,n=e.args;r<n.length;r+=1){var a=n[r];if(t=zn(a))break}else(e instanceof Rt||e instanceof hr)&&e.input instanceof et&&"zoom"===e.input.name&&(t=e);return t instanceof ae?t:(e.eachChild(function(e){var r=zn(e);r instanceof ae?t=r:!t&&r?t=new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new ae("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t)}function Mn(e){var t={color:fe,string:le,number:ue,enum:le,boolean:pe,formatted:he,resolvedImage:ve};return"array"===e.type?ge(t[e.value]||de,e.length):t[e.type]}function Sn(e){return"color"===e.type&&(hn(e.default)||Array.isArray(e.default))?new V(0,0,0,0):"color"===e.type?V.parse(e.default)||null:void 0===e.default?null:e.default}function qn(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function jn(e){if(Array.isArray(e))return e.map(jn);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var r in e)t[r]=jn(e[r]);return t}return qn(e)}wn.prototype.evaluateWithoutErrorHandling=function(e,t,r,n,a,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,a,i)},wn.prototype.evaluate=function(e,t,r,n,a,i){return this._styleExpression.evaluate(e,t,r,n,a,i)},wn.prototype.interpolationFactor=function(e,t,r){return this.interpolationType?hr.interpolationFactor(this.interpolationType,e,t,r):0};var _n={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function En(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,r=e.slice(1);t<r.length;t+=1){var n=r[t];if(!En(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}function Cn(e,t){if(void 0===t&&(t="fill"),null==e)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};En(e)||(e=Nn(e));var r=e,n=!0;try{n=Tn(r)}catch(Li){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(r,null,2)+"\n        ")}var a=_n["filter_"+t],i=bn(n,a),o=null;if("error"===i.result)throw new Error(i.value.map(function(e){return e.key+": "+e.message}).join(", "));o=function(e,t,r){return i.value.evaluate(e,t,{},r)};var s=null,u=null;if(n!==r){var l=bn(r,a);if("error"===l.result)throw new Error(l.value.map(function(e){return e.key+": "+e.message}).join(", "));s=function(e,t,r,n,a){return l.value.evaluate(e,t,{},r,void 0,void 0,n,a)},u=!Et(l.value.expression)}return{filter:o=o,dynamicFilter:s||void 0,needGeometry:Rn(n),needFeature:!!u}}function Tn(e){if(!Pn(e))return e;var t=jn(e);return In(t),t=An(t)}function An(e){if(!Array.isArray(e))return e;var t=On(e);return!0===t?t:t.map(function(e){return An(e)})}function In(e){var t=!1,r=[];if("case"===e[0]){for(var n=1;n<e.length-1;n+=2)t=t||Pn(e[n]),r.push(e[n+1]);r.push(e[e.length-1])}else if("match"===e[0]){t=t||Pn(e[1]);for(var a=2;a<e.length-1;a+=2)r.push(e[a+1]);r.push(e[e.length-1])}else if("step"===e[0]){t=t||Pn(e[1]);for(var i=1;i<e.length-1;i+=2)r.push(e[i+1])}t&&(e.length=0,e.push.apply(e,["any"].concat(r)));for(var o=1;o<e.length;o++)In(e[o])}function Pn(e){if(!Array.isArray(e))return!1;if(Dn(e[0]))return!0;for(var t=1;t<e.length;t++){if(Pn(e[t]))return!0}return!1}function Dn(e){return"pitch"===e||"distance-from-center"===e}var Fn=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function On(e){if(Fn.has(e[0]))for(var t=1;t<e.length;t++){if(Pn(e[t]))return!0}return e}function Ln(e,t){return e<t?-1:e>t?1:0}function Rn(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(Rn(e[t]))return!0;return!1}function Nn(e){if(!e)return!0;var t=e[0];return e.length<=1?"any"!==t:"=="===t?Un(e[1],e[2],"=="):"!="===t?Jn(Un(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Un(e[1],e[2],t):"any"===t?Gn(e.slice(1)):"all"===t?["all"].concat(e.slice(1).map(Nn)):"none"===t?["all"].concat(e.slice(1).map(Nn).map(Jn)):"in"===t?Vn(e[1],e.slice(2)):"!in"===t?Jn(Vn(e[1],e.slice(2))):"has"===t?Wn(e[1]):"!has"===t?Jn(Wn(e[1])):"within"!==t||e}function Un(e,t,r){switch(e){case"$type":return["filter-type-"+r,t];case"$id":return["filter-id-"+r,t];default:return["filter-"+r,e,t]}}function Gn(e){return["any"].concat(e.map(Nn))}function Vn(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(Ln)]]:["filter-in-small",e,["literal",t]]}}function Wn(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Jn(e){return["!",e]}var Zn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function $n(e,t){var r={};for(var n in e)"ref"!==n&&(r[n]=e[n]);return Zn.forEach(function(e){e in t&&(r[e]=t[e])}),r}function Bn(e){e=e.slice();for(var t=Object.create(null),r=0;r<e.length;r++)t[e[r].id]=e[r];for(var n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=$n(e[n],t[e[n].ref]));return e}var Xn={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},Hn=" ",Yn=/(italic|oblique)$/i,Kn={},Qn=function(e,t,r){var n=Kn[e];if(!n){Array.isArray(e)||(e=[e]);for(var a=400,i="normal",o=[],s=0,u=e.length;s<u;++s){var l=e[s].split(" "),p=l[l.length-1].toLowerCase();for(var f in"normal"==p||"italic"==p||"oblique"==p?(i=p,l.pop(),p=l[l.length-1].toLowerCase()):Yn.test(p)&&(p=p.replace(Yn,""),i=l[l.length-1].replace(p,"")),Xn){var c=l.length>1?l[l.length-2].toLowerCase():"";if(p==f||p==f.replace("-","")||c+"-"+p==f){a=Xn[f],l.pop(),c&&f.startsWith(c)&&l.pop();break}}"number"==typeof p&&(a=p);var d=l.join(Hn).replace("Klokantech Noto Sans","Noto Sans");-1!==d.indexOf(Hn)&&(d='"'+d+'"'),o.push(d)}n=Kn[e]=[i,a,o]}return n[0]+Hn+n[1]+Hn+t+"px"+(r?"/"+r:"")+Hn+n[2]};function ea(e,t){var r,n,a,i,o,s,u,l,p,f,c,d,y,m,h,v,g,b,x,w,k=e[0],z=k.width,M=k.height,S=k.data,q=new Uint8ClampedArray(S.length),j=2*t.resolution,_=z-1,E=M-1,C=[0,0,0,0],T=2*Math.PI,A=Math.PI/2,I=Math.PI*t.sunEl/180,P=Math.PI*t.sunAz/180,D=Math.cos(I),F=Math.sin(I),O=t.highlightColor,L=t.shadowColor,R=t.accentColor,N=t.encoding;function U(e,t){return void 0===t&&(t="mapbox"),"mapbox"===t?.1*(256*e[0]*256+256*e[1]+e[2])-1e4:"terrarium"===t?256*e[0]+e[1]+e[2]/256-32768:void 0}for(n=0;n<=E;++n)for(i=0===n?0:n-1,o=n===E?E:n+1,r=0;r<=_;++r)a=r===_?_:r+1,s=4*(n*z+(0===r?0:r-1)),C[0]=S[s],C[1]=S[s+1],C[2]=S[s+2],C[3]=S[s+3],u=t.vert*U(C,N),s=4*(n*z+a),C[0]=S[s],C[1]=S[s+1],C[2]=S[s+2],C[3]=S[s+3],l=(t.vert*U(C,N)-u)/j,s=4*(i*z+r),C[0]=S[s],C[1]=S[s+1],C[2]=S[s+2],C[3]=S[s+3],u=t.vert*U(C,N),s=4*(o*z+r),C[0]=S[s],C[1]=S[s+1],C[2]=S[s+2],C[3]=S[s+3],p=(t.vert*U(C,N)-u)/j,c=(c=Math.atan2(p,-l))<0?A-c:c>A?T-c+A:A-c,f=Math.atan(Math.sqrt(l*l+p*p)),w=F*Math.cos(f)+D*Math.sin(f)*Math.cos(P-c),d=Math.cos(f),y=255*w,g=Math.min(Math.max(2*t.sunEl,0),1),b=1.875-1.75*t.opacity,x=.5!==t.opacity?A*((Math.pow(b,f)-1)/(Math.pow(b,A)-1)):f,h={r:(1-d)*R.r*g*255,g:(1-d)*R.g*g*255,b:(1-d)*R.b*g*255,a:(1-d)*R.a*g*255},m=Math.abs(((c+P)/Math.PI+.5)%2-1),v={r:(O.r*(1-m)+L.r*m)*y,g:(O.g*(1-m)+L.g*m)*y,b:(O.b*(1-m)+L.b*m)*y,a:(O.a*(1-m)+L.a*m)*y},q[s=4*(n*z+r)]=h.r*(1-m)+v.r,q[s+1]=h.g*(1-m)+v.g,q[s+2]=h.b*(1-m)+v.b,q[s+3]=S[s+3]*t.opacity*g*Math.sin(x);return new ImageData(q,z,M)}var ta="https://api.mapbox.com";function ra(e){return 0!==e.indexOf("mapbox://")?"":e.slice("mapbox://".length)}function na(e,t,r){var n=ra(e);if(!n)return decodeURI(new URL(e,r).href);if(0!==n.indexOf("sprites/"))throw new Error("unexpected sprites url: "+e);var a=n.slice("sprites/".length);return ta+"/styles/v1/"+a+"/sprite?access_token="+t}function aa(e,t){var r=ra(e);if(!r)return decodeURI(new URL(e,location.href).href);if(0!==r.indexOf("styles/"))throw new Error("unexpected style url: "+e);var n=r.slice("styles/".length);return ta+"/styles/v1/"+n+"?&access_token="+t}function ia(e,t,r,n){var a=new URL(e,n),i=ra(e);return i?"mapbox.satellite"===i?"https://api.mapbox.com/v4/"+i+"/{z}/{x}/{y}"+(window.devicePixelRatio>=1.5?"@2x":"")+".webp?access_token="+t:"https://{a-d}.tiles.mapbox.com/v4/"+i+"/{z}/{x}/{y}.vector.pbf?access_token="+t:t?(a.searchParams.set(r,t),decodeURI(a.href)):decodeURI(a.href)}function oa(e,t){return void 0===t&&(t=512),e.getExtent()?(0,j.createXYZ)({extent:e.getExtent(),tileSize:t,maxZoom:22}).getResolutions():Na}function sa(e,t){t.accessToken||(t=Object.assign({},t),new URL(e).searchParams.forEach(function(e,r){t.accessToken=e,t.accessTokenParam=r}));return t}function ua(e,t,r,n,a){var i,o,s,u;void 0===r&&(r=""),void 0===n&&(n={}),void 0===a&&(a=void 0);var l=!0;return"string"==typeof r||Array.isArray(r)?u=r:(u=(s=r).source||s.layers,n=s),"string"==typeof n?(i=n,s={}):(i=n.styleUrl,s=n),!1===s.updateSource&&(l=!1),a||(a=s.resolutions),i||"string"!=typeof t||t.trim().startsWith("{")||(i=t),i&&(i=i.startsWith("data:")?location.href:aa(i,s.accessToken),s=sa(i,s)),new Promise(function(r,n){Ja(t,s).then(function(t){if(8!=t.version)return n(new Error("glStyle version 8 required."));if(!(e instanceof x.default||e instanceof k.default))return n(new Error("Can only apply to VectorLayer or VectorTileLayer"));var p,f,c,d=e instanceof k.default?"vector":"geojson";if(u?o=Array.isArray(u)?t.layers.find(function(e){return e.id===u[0]}).source:u:(o=Object.keys(t.sources).find(function(e){return t.sources[e].type===d}),u=o),!o)return n(new Error("No "+d+" source found in the glStyle."));function y(){if(!l)return Promise.resolve();if(e instanceof k.default)return va(t.sources[o],i,s).then(function(t){var r=e.getSource();if(r?t!==r&&(r.setTileUrlFunction(t.getTileUrlFunction()),"function"==typeof r.setUrls&&"function"==typeof t.getUrls&&r.setUrls(t.getUrls()),r.format_||(r.format_=t.format_),r.getAttributions()||r.setAttributions(t.getAttributions()),r.getTileLoadFunction()===z.defaultLoadFunction&&r.setTileLoadFunction(t.getTileLoadFunction()),(0,S.equivalent)(r.getProjection(),t.getProjection())&&(r.tileGrid=t.getTileGrid())):e.setSource(t),!isFinite(e.getMaxResolution())&&!isFinite(e.getMinZoom())){var n=e.getSource().getTileGrid();e.setMaxResolution(n.getResolution(n.getMinZoom()))}});var r=t.sources[o],n=e.getSource();n&&n.get("mapbox-source")===r||(n=ka(r,i,s));var a=e.getSource();return a?n!==a&&(a.getAttributions()||a.setAttributions(n.getAttributions()),a.format_||(a.format_=n.getFormat()),a.url_=n.getUrl()):e.setSource(n),Promise.resolve()}function m(){if(c||t.sprite&&!p)c?(e.setStyle(c),y().then(r).catch(n)):n(new Error("Something went wrong trying to apply style."));else{if(s.projection&&!a){var i=(0,S.get)(s.projection).getUnits();"m"!==i&&(a=Na.map(function(e){return e/S.METERS_PER_UNIT[i]}))}c=Fi(e,t,u,a,p,f,vi,s.getImage),e.getStyle()?y().then(r).catch(n):n(new Error("Nothing to show for source ["+o+"]"))}}if(t.sprite){var h=new URL(na(t.sprite,s.accessToken,i||location.href)),v=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",g=h.origin+h.pathname+v+".json"+h.search;new Promise(function(e,t){Wa("Sprite",g,s).then(e).catch(function(r){Wa("Sprite",g=h.origin+h.pathname+".json"+h.search,s).then(e).catch(t)})}).then(function(e){if(void 0===e&&n(new Error("No sprites found.")),p=e,f=h.origin+h.pathname+v+".png"+h.search,s.transformRequest){var t=s.transformRequest(f,"SpriteImage");t instanceof Request&&(f=encodeURI(t.url))}m()}).catch(function(e){n(new Error("Sprites cannot be loaded: "+g+": "+e.message))})}else m()}).catch(n)})}var la={};function pa(e,t,r){t.layers.some(function(t){if("background"===t.type){if(e instanceof f.default)return e.setBackground(function(e){return ma(t,e,r,{})}),!0;if(e instanceof y.default||e instanceof c.default)return e.getLayers().push(ha(t,r,{})),!0}})}function fa(e,t,r){return void 0===r&&(r={}),Ja(t,r).then(function(t){pa(e,t,r)})}function ca(e,t){var r;return e.some(function(e){if(e.id==t)return r=e.source,!0}),r}function da(e,t){var r=e.bounds;if(r){var n=(0,S.fromLonLat)([r[0],r[1]],t),a=(0,S.fromLonLat)([r[2],r[3]],t);return[n[0],n[1],a[0],a[1]]}return(0,S.get)(t).getExtent()}function ya(e,t,r){var n=new g.default({tileJSON:t,tileSize:e.tileSize||t.tileSize||512}),a=n.getTileJSON(),i=n.getTileGrid(),o=(0,S.get)(r.projection||"EPSG:3857"),s=da(a,o),u=o.getExtent(),l=a.minzoom||0,p=a.maxzoom||22,f={attributions:n.getAttributions(),projection:o,tileGrid:new v.default({origin:u?(0,_.getTopLeft)(u):i.getOrigin(0),extent:s||i.getExtent(),minZoom:l,resolutions:oa(o,t.tileSize).slice(0,p+1),tileSize:i.getTileSize(0)})};return Array.isArray(a.tiles)?f.urls=a.tiles:f.url=a.tiles,f}function ma(e,t,r,n){var a={id:e.id,type:e.type},i=e.layout||{},o=e.paint||{};a.paint=o;var s,u,l=Ga(t,r.resolutions||Na);return void 0!==o["background-color"]&&(s=Si(a,"paint","background-color",l,la,n)),void 0!==o["background-opacity"]&&(u=Si(a,"paint","background-opacity",l,la,n)),"none"==i.visibility?void 0:Ci(s,u)}function ha(e,t,r){var n=document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new f.default({source:new h.default({}),render:function(a){var i=ma(e,a.viewState.resolution,t,r);return n.style.backgroundColor=i,n}})}function va(e,t,r){return new Promise(function(n,a){Ba(e,t,r).then(function(t){var a=ya(e,t,r);a.format=new d.default,n(new z.default(a))}).catch(a)})}function ga(e,t,r){var n=new k.default({declutter:!0,visible:!1});return va(e,t,r).then(function(t){t.set("mapbox-source",e),n.setSource(t)}).catch(function(e){n.setSource(void 0)}),n}function ba(e){return"{bbox-"+(e?e.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")+"}"}function xa(e,t,r){var n=new b.default;return Ba(e,t,r).then(function(t){var a=new g.default({interpolate:void 0===r.interpolate||r.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:t});a.tileGrid=ya(e,t,r).tileGrid,r.projection&&(a.projection=(0,S.get)(r.projection));var i=a.getTileUrlFunction();a.setTileUrlFunction(function(e,t,r){var n=ba(r),o=i(e,t,r);if(-1!=o.indexOf(n)){var s=a.getTileGrid().getTileCoordExtent(e);o=o.replace(n,s.toString())}return o}),a.set("mapbox-source",e),n.setSource(a)}).catch(function(e){n.setSource(void 0)}),n}function wa(e,t,r){var n=xa(e,t,r);return new p.default({source:new m.default({operationType:"image",operation:ea,sources:[n]})})}function ka(e,t,r){var n=r.projection?new l.default({dataProjection:r.projection}):new l.default,a=e.data,i={};if("string"==typeof a){var o=ia(a,r.accessToken,r.accessTokenParam||"access_token",t||location.href);if(r.transformRequest){var s=r.transformRequest(o,"GeoJSON");s instanceof Request&&(o=decodeURI(s.url))}if(/\{bbox-[0-9a-z-]+\}/.test(o)){var u=new w.default({attributions:e.attribution,format:n,url:function(e,t,r){var n=ba(r);return o.replace(n,""+e.join(","))},strategy:q.bbox});return u.set("mapbox-source",e),u}return new w.default({attributions:e.attribution,format:n,url:o})}i.features=n.readFeatures(a,{featureProjection:(0,S.getUserProjection)()||"EPSG:3857"});var p=new w.default(Object.assign({attributions:e.attribution,format:n},i));return p.set("mapbox-source",e),p}function za(e,t,r){return new x.default({declutter:!0,source:ka(e,t,r),visible:!1})}function Ma(e,t,r){var n=null;return function(a){e.paint&&"raster-opacity"in e.paint&&a.frameState.viewState.zoom!==n&&(n=a.frameState.viewState.zoom,delete r[e.id],Sa(e,t,n,r))}}function Sa(e,t,r,n){var a=Si(e,"paint","raster-opacity",r,la,n);t.setOpacity(a)}function qa(e,t){function r(){var r=t.get("mapbox-style");if(r){var n=Bn(r.layers),a=e.get("mapbox-layers"),i=n.filter(function(e){return a.includes(e.id)}).some(function(e){return!e.layout||!e.layout.visibility||"visible"===e.layout.visibility});e.get("visible")!==i&&e.setVisible(i)}}e.on("change",r),r()}function ja(e,t,r,n){var a,i=Fa(e),o=e.layers,s=r.type,u=r.source||ca(o,r.ref),l=e.sources[u];if("background"==s)a=ha(r,n,i);else if("vector"==l.type)a=ga(l,t,n);else if("raster"==l.type)(a=xa(l,t,n)).setVisible(!r.layout||"none"!==r.layout.visibility),a.on("prerender",Ma(r,a,i));else if("geojson"==l.type)a=za(l,t,n);else if("raster-dem"==l.type&&"hillshade"==r.type){var p=wa(l,t,n);a=p,p.getSource().on("beforeoperations",function(e){var t=e.data;t.resolution=e.resolution;var a=Ga(e.resolution,n.resolutions||Na);t.encoding=l.encoding,t.vert=5*Si(r,"paint","hillshade-exaggeration",a,la,i),t.sunAz=Si(r,"paint","hillshade-illumination-direction",a,la,i),t.sunEl=35,t.opacity=.3,t.highlightColor=Si(r,"paint","hillshade-highlight-color",a,la,i),t.shadowColor=Si(r,"paint","hillshade-shadow-color",a,la,i),t.accentColor=Si(r,"paint","hillshade-accent-color",a,la,i)}),a.setVisible(!r.layout||"none"!==r.layout.visibility)}var f=u;return a&&a.set("mapbox-source",f),a}function _a(e,t,r,n){var a=[],i=null;if(t instanceof y.default){if(!(i=t.getView()).isDef()&&!i.getRotation()&&!i.getResolutions()){var o=n.projection?(0,S.get)(n.projection):i.getProjection();i=new M.default(Object.assign(i.getProperties(),{maxResolution:Na[0]/S.METERS_PER_UNIT[o.getUnits()],projection:n.projection||i.getProjection()})),t.setView(i)}"center"in e&&!i.getCenter()&&i.setCenter((0,S.fromLonLat)(e.center,i.getProjection())),"zoom"in e&&void 0===i.getZoom()&&i.setResolution(Na[0]/S.METERS_PER_UNIT[i.getProjection().getUnits()]/Math.pow(2,e.zoom)),i.getCenter()&&void 0!==i.getZoom()||i.fit(i.getProjection().getExtent(),{nearest:!0,size:t.getSize()})}t.set("mapbox-style",e),t.set("mapbox-metadata",{styleUrl:r,options:n});for(var s,u,l,p=e.layers,f=[],c=0,d=p.length;c<d;++c){var m=p[c],h=m.type;if("heatmap"==h)throw new Error(h+" layers are not supported");(l=m.source||ca(p,m.ref))&&l==u||(f.length&&(a.push(Ca(s,f,e,r,t,n)),f=[]),(s=ja(e,r,m,n))instanceof x.default||s instanceof k.default||(f=[]),u=s.get("mapbox-source")),f.push(m.id)}return a.push(Ca(s,f,e,r,t,n)),Promise.all(a)}function Ea(e,t,r){var n,a;if(void 0===r&&(r={}),a="string"==typeof e||e instanceof HTMLElement?new y.default({target:e}):e,"string"==typeof t){var i=t.startsWith("data:")?location.href:aa(t,r.accessToken);r=sa(i,r),n=new Promise(function(e,n){Ja(t,r).then(function(t){_a(t,a,i,r).then(function(){e(a)}).catch(n)}).catch(function(e){n(new Error("Could not load "+t+": "+e.message))})})}else n=new Promise(function(e,n){_a(t,a,!r.styleUrl||r.styleUrl.startsWith("data:")?location.href:aa(r.styleUrl,r.accessToken),r).then(function(){e(a)}).catch(n)});return n}function Ca(e,t,r,n,a,i){void 0===i&&(i={});for(var o=24,s=0,u=r.layers,l=0,p=u.length;l<p;++l){var f=u[l];-1!==t.indexOf(f.id)&&(o=Math.min("minzoom"in f?f.minzoom:0,o),s=Math.max("maxzoom"in f?f.maxzoom:24,s))}return new Promise(function(u,l){var p=function(){var p=e.getSource();if(p&&"error"!==p.getState()){if("getTileGrid"in p){var f=p.getTileGrid();if(f){var c=f.getMinZoom();(o>0||c>0)&&e.setMaxResolution(Math.min(Na[o],f.getResolution(c))+1e-9),s<24&&e.setMinResolution(Na[s]+1e-9)}}else o>0&&e.setMaxResolution(Na[o]+1e-9);p instanceof w.default||p instanceof z.default?ua(e,r,t,Object.assign({styleUrl:n},i)).then(function(){qa(e,a),u()}).catch(l):u()}else l(new Error("Error accessing data for source "+e.get("mapbox-source")))};e.set("mapbox-layers",t);var f=a.getLayers();-1===f.getArray().indexOf(e)&&f.push(e),e.getSource()?p():e.once("change:source",p)})}var Ta={},Aa={},Ia=0;function Pa(e){return e.id||(e.id=Ia++),e.id}function Da(e,t){return Pa(e)+"."+(0,E.getUid)(t)}function Fa(e){var t=Ta[e.id];return t||(t={},Ta[Pa(e)]=t),t}function Oa(){for(var e in Ta)delete Ta[e]}function La(e){var t=Aa[e.id];return t||(t={},Aa[Pa(e)]=t),t}function Ra(e){return e*Math.PI/180}var Na=function(){for(var e=[],t=78271.51696402048;e.length<=24;t/=2)e.push(t);return e}();function Ua(e,t){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(e,t);var r=document.createElement("canvas");return r.width=e,r.height=t,r}function Ga(e,t){for(var r=0,n=t.length;r<n;++r){if(t[r]<e&&r+1<n){var a=t[r]/t[r+1];return r+Math.log(t[r]/e)/Math.log(a)}}return n-1}var Va={};function Wa(e,t,r,n){if(void 0===r&&(r={}),t in Va)return n&&(n.request=Va[t][0]),Va[t][1];var a=r.transformRequest&&r.transformRequest(t,e)||new Request(t);a.headers.get("Accept")||a.headers.set("Accept","application/json"),n&&(n.request=a);var i=fetch(a).then(function(e){return delete Va[t],e.ok?e.json():Promise.reject(new Error("Error fetching source "+t))}).catch(function(e){return delete Va[t],Promise.reject(new Error("Error fetching source "+t))});return Va[t]=[a,i],i}function Ja(e,t){if("string"!=typeof e)return Promise.resolve(e);if(!e.trim().startsWith("{"))return Wa("Style",e=aa(e,t.accessToken),t);try{var r=JSON.parse(e);return Promise.resolve(r)}catch(cn){return Promise.reject(cn)}}function Za(e,t){if(t.transformRequest){var r=t.transformRequest(e,"Tiles");if(r instanceof Request)return decodeURI(r.url)}return e}var $a={};function Ba(e,t,r){void 0===r&&(r={});var n=[t,JSON.stringify(e)].toString(),a=$a[n];if(!a||r.transformRequest){var i=e.url;if(i&&!e.tiles){var o=ia(i,r.accessToken,r.accessTokenParam||"access_token",t||location.href);if(i.startsWith("mapbox://"))a=Promise.resolve(Object.assign({},e,{url:void 0,tiles:(0,u.expandUrl)(o)}));else{var s={};a=Wa("Source",o,r,s).then(function(e){return e.tiles=e.tiles.map(function(t){return"tms"===e.scheme&&(t=t.replace("{y}","{-y}")),Za(ia(t,r.accessToken,r.accessTokenParam||"access_token",s.request.url),r)}),Promise.resolve(e)})}}else e=Object.assign({},e,{tiles:e.tiles.map(function(n){return"tms"===e.scheme&&(n=n.replace("{y}","{-y}")),Za(ia(n,r.accessToken,r.accessTokenParam||"access_token",t||location.href),r)})}),a=Promise.resolve(Object.assign({},e));$a[n]=a}return a}function Xa(e,t,r,n){var a=document.createElement("canvas"),i=[2*r*t.pixelRatio+t.width,2*r*t.pixelRatio+t.height];a.width=i[0],a.height=i[1];var o=a.getContext("2d");o.drawImage(e,t.x,t.y,t.width,t.height,r*t.pixelRatio,r*t.pixelRatio,t.width,t.height);var s=o.getImageData(0,0,i[0],i[1]);o.globalCompositeOperation="destination-over",o.fillStyle="rgba("+255*n.r+","+255*n.g+","+255*n.b+","+n.a+")";for(var u=s.data,l=0,p=s.width;l<p;++l)for(var f=0,c=s.height;f<c;++f){u[4*(f*p+l)+3]>0&&o.arc(l,f,r*t.pixelRatio,0,2*Math.PI)}return o.fill(),a}function Ha(e,t){for(var r=e.getLayers().getArray(),n=0,a=r.length;n<a;++n){var i=r[n].get("mapbox-layers");if(i&&-1!==i.indexOf(t))return r[n]}}function Ya(e,t){for(var r=[],n=e.getLayers().getArray(),a=0,i=n.length;a<i;++a)n[a].get("mapbox-source")===t&&r.push(n[a]);return r}function Ka(e,t){for(var r=e.getLayers().getArray(),n=0,a=r.length;n<a;++n){var i=r[n].getSource();if(r[n].get("mapbox-source")===t)return i}}function Qa(e,t,r){for(var n=("getLayers"in e?Ya(e,t.source):[e]),a=0,i=n.length;a<i;++a){var o=n[a].get("mapbox-featurestate");if(!o)throw new Error('Map or layer for source "'+t.source+'" not found.');r?o[t.id]=r:delete o[t.id],n[a].changed()}}function ei(e,t){for(var r=("getLayers"in e?Ya(e,t.source):[e]),n=0,a=r.length;n<a;++n){var i=r[n].get("mapbox-featurestate");if(i&&i[t.id])return i[t.id]}}function ti(e,t){return e.get("mapbox-style").layers.find(function(e){return e.id===t})}function ri(e,t,r){var n,a,i=e.get("mapbox-style"),o=i.layers,s=-1;if(void 0!==r){var u=ti(e,r);if(void 0===u)throw new Error('Layer with id "'+r+'" not found.');n=o.indexOf(u)}else n=o.length;if(n>0&&o[n-1].source===t.source?(s=n-1,a=-1):n<o.length&&o[n].source===t.source&&(s=n,a=0),-1===s){var l=e.get("mapbox-metadata"),p=l.options,f=l.styleUrl,c=ja(i,f,t,p);if(r){var d=Ha(e,r),y=e.getLayers().getArray().indexOf(d);e.getLayers().insertAt(y,c)}return o.splice(n,0,t),Ca(c,[t.id],i,f,e,p)}if(o.some(function(e){return e.id===t.id}))throw new Error('Layer with id "'+t.id+'" already exists.');var m=o[s].id,h=Di[Da(e.get("mapbox-style"),Ha(e,m))];if(o.splice(n,0,t),h){var v=h[0],g=h[1],b=h[2],x=h[3],w=h[4],k=h[5],z=h[6],M=h[7];if(Array.isArray(b)){var S=b.indexOf(m)+a;b.splice(S,0,t.id)}Fi(v,g,b,x,w,k,z,M)}else Ha(e,o[s].id).changed();return Promise.resolve()}function ni(e,t){var r=e.get("mapbox-style"),n=r.layers,a=n.findIndex(function(e){return e.id===t.id});if(-1===a)throw new Error('Layer with id "'+t.id+'" not found.');if(n[a].source!==t.source)throw new Error("Updated layer and previous version must use the same source.");delete Fa(r)[t.id],delete La(r)[t.id],n[a]=t,Fi.apply(void 0,Di[Da(e.get("mapbox-style"),Ha(e,t.id))])}function ai(e,t){var r="string"==typeof t?t:t.id,n=Ha(e,r),a=n.get("mapbox-layers");if(1===a.length)throw new Error("Cannot remove last Mapbox layer from an OpenLayers layer.");a.splice(a.indexOf(r),1);var i=e.get("mapbox-style").layers;i.splice(i.findIndex(function(e){return e.id===r}),1),Fi.apply(void 0,Di[Da(e.get("mapbox-style"),n)])}var ii,oi=Array(256).join("");function si(e,t){if(t>=.05){for(var r="",n=e.split("\n"),a=oi.slice(0,Math.round(t/.1)),i=0,o=n.length;i<o;++i)i>0&&(r+="\n"),r+=n[i].split("").join(a);return r}return e}function ui(){return ii||(ii=Ua(1,1).getContext("2d")),ii}function li(e,t){return ui().measureText(e).width+(e.length-1)*t}var pi={};function fi(e,t,r,n){if(-1!==e.indexOf("\n")){for(var a=e.split("\n"),i=[],o=0,s=a.length;o<s;++o)i.push(fi(a[o],t,r,n));return i.join("\n")}var u=r+","+t+","+e+","+n,l=pi[u];if(!l){var p=e.split(" ");if(p.length>1){var f=ui();f.font=t;for(var c=f.measureText("M").width*r,d="",y=[],m=0,h=p.length;m<h;++m){var v=p[m],g=d+(d?" ":"")+v;li(g,n)<=c?d=g:(d&&y.push(d),d=v)}d&&y.push(d);for(var b=0,x=y.length;b<x&&x>1;++b){var w=y[b];if(li(w,n)<.35*c){var k=b>0?li(y[b-1],n):1/0,z=b<x-1?li(y[b+1],n):1/0;y.splice(b,1),x-=1,k<z?(y[b-1]+=" "+w,b-=1):y[b]=w+" "+y[b]}}for(var M=0,S=y.length-1;M<S;++M){var q=y[M],j=y[M+1];if(li(q,n)>.7*c&&li(j,n)<.6*c){var _=q.split(" "),E=_.pop();li(E,n)<.2*c&&(y[M]=_.join(" "),y[M+1]=E+" "+j),S-=1}}l=y.join("\n")}else l=e;l=si(l,n),pi[u]=l}return l}var ci,di=/font-family: ?([^;]*);/,yi=/("|')/g;function mi(e){if(!ci){ci={};for(var t=document.styleSheets,r=0,n=t.length;r<n;++r){var a=t[r];try{var i=a.rules||a.cssRules;if(i)for(var o=0,s=i.length;o<s;++o){var u=i[o];if(5==u.type){var l=u.cssText.match(di);ci[l[1].replace(yi,"")]=!0}}}catch(Li){}}}return e in ci}var hi={};function vi(e,t){void 0===t&&(t="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css");var r=e.toString();if(r in hi)return hi[r];for(var n=[],a=0,i=e.length;a<i;++a){e[a]=e[a].replace("Arial Unicode MS","Arial");var o=e[a],u=Qn(o,1);(0,s.registerFont)(u);var l=u.split(" ");n.push([l.slice(3).join(" ").replace(/"/g,""),l[1],l[0]])}for(var p=0,f=n.length;p<f;++p){var c=n[p],d=c[0];if(!mi(d)&&100!==s.checkedFonts.get(c[2]+"\n"+c[1]+" \n"+d)){var y=t.replace("{font-family}",d.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",d.replace(/ /g,"+")).replace("{fontweight}",c[1]).replace("{-fontstyle}",c[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",c[2]);if(!document.querySelector('link[href="'+y+'"]')){var m=document.createElement("link");m.href=y,m.rel="stylesheet",document.head.appendChild(m)}}}return hi[r]=e,e}var gi,bi,xi={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},wi={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},ki=function(e,t){var r=kn(e,t);if("error"===r.result)throw new Error(r.value.map(function(e){return e.key+": "+e.message}).join(", "));return r.value},zi={},Mi={zoom:0};function Si(e,t,r,n,a,i,o){var s=e.id;i||(i={},console.warn("No functionCache provided to getValue()")),i[s]||(i[s]={});var u=i[s];if(!u[r]){var l=(e[t]||zi)[r],p=_n[t+"_"+e.type][r];void 0===l&&(l=p.default);var f=gn(l);if(!f&&hn(l)&&(l=J(l,p),f=!0),f){var c=ki(l,p);u[r]=c.evaluate.bind(c)}else"color"==p.type&&(l=V.parse(l)),u[r]=function(){return l}}return Mi.zoom=n,u[r](Mi,a,o)}function qi(e,t,r,n){return Si(e,"layout","icon-allow-overlap",t,r,n)?Si(e,"layout","icon-ignore-placement",t,r,n)?"none":"obstacle":"declutter"}function ji(e,t,r,n,a){return a||console.warn("No filterCache provided to evaluateFilter()"),e in a||(a[e]=Cn(t).filter),Mi.zoom=n,a[e](Mi,r)}var _i=!1;function Ei(e){e!==_i&&(Oa(),_i=e)}function Ci(e,t){if(e){if(!_i&&(0===e.a||0===t))return;var r=e.a;return t=void 0===t?1:t,0===r?"transparent":"rgba("+Math.round(255*e.r/r)+","+Math.round(255*e.g/r)+","+Math.round(255*e.b/r)+","+r*t+")"}return e}var Ti=/\{[^{}}]*\}/g;function Ai(e,t){return e.replace(Ti,function(e){return t[e.slice(1,-1)]||""})}var Ii=!1;function Pi(e){void 0===e&&(e=!1),Ii=e}var Di={};function Fi(s,u,l,p,f,c,d,y){if(void 0===p&&(p=Na),void 0===f&&(f=void 0),void 0===c&&(c=void 0),void 0===d&&(d=void 0),void 0===y&&(y=void 0),"string"==typeof u&&(u=JSON.parse(u)),8!=u.version)throw new Error("glStyle version 8 required.");var m,h;if(Di[Da(u,s)]=Array.from(arguments),c)if("undefined"!=typeof Image){var v=new Image;v.crossOrigin="anonymous",v.onload=function(){m=v,h=[v.width,v.height],s.changed(),v.onload=null},v.src=c}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var g=self;g.postMessage({action:"loadImage",src:c}),g.addEventListener("message",function(e){"imageLoaded"===e.data.action&&e.data.src===c&&(m=e.data.image,h=[m.width,m.height])})}for(var b,x=Bn(u.layers),w={},k=[],z={},M={},S=Fa(u),q=La(u),j=0,_=x.length;j<_;++j){var E=x[j],C=E.id;if("string"==typeof l&&E.source==l||-1!==l.indexOf(C)){var T=E["source-layer"];if(b){if(E.source!==b)throw new Error('Layer "'+C+'" does not use source "'+b)}else{b=E.source;var A=u.sources[b];if(!A)throw new Error('Source "'+b+'" is not defined');var I=A.type;if("vector"!==I&&"geojson"!==I)throw new Error('Source "'+b+'" is not of type "vector" or "geojson", but "'+I+'"')}var P=w[T];P||(P=[],w[T]=P),P.push({layer:E,index:j}),k.push(C)}}var D=new a.default,F=new t.default,O=[],L=function(l,c,v){var g=l.getProperties(),b=w[g.layer];if(b){var x=p.indexOf(c);-1==x&&(x=Ga(c,p));for(var k,j=xi[l.getGeometry().getType()],_={id:l.getId(),properties:g,type:j},E=s.get("mapbox-featurestate")[l.getId()],C=-1,T=0,A=b.length;T<A;++T){var I=b[T],P=I.layer,L=P.id;if(void 0===v||v===L){var R=P.layout||zi,N=P.paint||zi;if(!("none"===R.visibility||"minzoom"in P&&x<P.minzoom||"maxzoom"in P&&x>=P.maxzoom)){var U=P.filter;if(!U||ji(L,U,_,x,q)){k=P;var G=void 0,V=void 0,W=void 0,J=void 0,Z=void 0,$=void 0,B=I.index;if(3==j&&("fill"==P.type||"fill-extrusion"==P.type))if(V=Si(P,"paint",P.type+"-opacity",x,_,S,E),P.type+"-pattern"in N){var X=Si(P,"paint",P.type+"-pattern",x,_,S,E);if(X){var H="string"==typeof X?Ai(X,g):X.toString();if(m&&f&&f[H]){($=O[++C])&&$.getFill()&&!$.getStroke()&&!$.getText()||($=new i.default({fill:new t.default}),O[C]=$),W=$.getFill(),$.setZIndex(B);var Y=H+"."+V,K=M[Y];if(!K){var Q=f[H],ee=Ua(Q.width,Q.height),te=ee.getContext("2d");te.globalAlpha=V,te.drawImage(m,Q.x,Q.y,Q.width,Q.height,0,0,Q.width,Q.height),K=te.createPattern(ee,"repeat"),M[Y]=K}W.setColor(K)}}}else G=Ci(Si(P,"paint",P.type+"-color",x,_,S,E),V),P.type+"-outline-color"in N&&(Z=Ci(Si(P,"paint",P.type+"-outline-color",x,_,S,E),V)),Z||(Z=G),(G||Z)&&((!($=O[++C])||G&&!$.getFill()||!G&&$.getFill()||Z&&!$.getStroke()||!Z&&$.getStroke()||$.getText())&&($=new i.default({fill:G?new t.default:void 0,stroke:Z?new a.default:void 0}),O[C]=$),G&&(W=$.getFill()).setColor(G),Z&&((J=$.getStroke()).setColor(Z),J.setWidth(.5)),$.setZIndex(B));if(1!=j&&"line"==P.type){G=!("line-pattern"in N)&&"line-color"in N?Ci(Si(P,"paint","line-color",x,_,S,E),Si(P,"paint","line-opacity",x,_,S,E)):void 0;var re=Si(P,"paint","line-width",x,_,S,E);G&&re>0&&(($=O[++C])&&$.getStroke()&&!$.getFill()&&!$.getText()||($=new i.default({stroke:new a.default}),O[C]=$),(J=$.getStroke()).setLineCap(Si(P,"layout","line-cap",x,_,S,E)),J.setLineJoin(Si(P,"layout","line-join",x,_,S,E)),J.setMiterLimit(Si(P,"layout","line-miter-limit",x,_,S,E)),J.setColor(G),J.setWidth(re),J.setLineDash(N["line-dasharray"]?Si(P,"paint","line-dasharray",x,_,S,E).map(function(e){return e*re}):null),$.setZIndex(B))}var ne=!1,ae=null,ie=0,oe=void 0,se=void 0,ue=void 0;if((1==j||2==j)&&"icon-image"in R){var le=Si(P,"layout","icon-image",x,_,S,E);if(le){oe="string"==typeof le?Ai(le,g):le.toString();var pe=void 0,fe=y?y(s,oe):void 0;if(m&&f&&f[oe]||fe){var ce=Si(P,"layout","icon-rotation-alignment",x,_,S,E);if(2==j){var de=l.getGeometry();if(de.getFlatMidpoint||de.getFlatMidpoints){var ye=de.getExtent();if(Math.sqrt(Math.max(Math.pow((ye[2]-ye[0])/c,2),Math.pow((ye[3]-ye[1])/c,2)))>150){var me="MultiLineString"===de.getType()?de.getFlatMidpoints():de.getFlatMidpoint();if(bi||(gi=[NaN,NaN],bi=new n.default("Point",gi,[],{},null)),pe=bi,gi[0]=me[0],gi[1]=me[1],"line"===Si(P,"layout","symbol-placement",x,_,S,E)&&"map"===ce)for(var he=de.getStride(),ve=de.getFlatCoordinates(),ge=0,be=ve.length-he;ge<be;ge+=he){var xe=ve[ge],we=ve[ge+1],ke=ve[ge+he],ze=ve[ge+he+1],Me=Math.min(xe,ke),Se=Math.min(we,ze),qe=Math.max(xe,ke),je=Math.max(we,ze);if(me[0]>=Me&&me[0]<=qe&&me[1]>=Se&&me[1]<=je){ie=Math.atan2(we-ze,ke-xe);break}}}}}if(2!==j||pe){var _e=Si(P,"layout","icon-size",x,_,S,E),Ee=void 0!==N["icon-color"]?Si(P,"paint","icon-color",x,_,S,E):null;if(!Ee||0!==Ee.a){var Ce=Si(P,"paint","icon-halo-color",x,_,S,E),Te=Si(P,"paint","icon-halo-width",x,_,S,E),Ae=oe+"."+_e+"."+Te+"."+Ce;if(null!==Ee&&(Ae+="."+Ee),!(se=z[Ae])){var Ie=qi(P,x,_,S),Pe=void 0;"icon-offset"in R&&((Pe=Si(P,"layout","icon-offset",x,_,S,E).slice(0))[1]*=-1);var De=Ee?[255*Ee.r,255*Ee.g,255*Ee.b,Ee.a]:void 0;if(fe){var Fe={color:De,rotateWithView:"map"===ce,displacement:Pe,declutterMode:Ie};"string"==typeof fe?Fe.src=fe:(Fe.img=fe,Fe.imgSize=[fe.width,fe.height]),se=new r.default(Fe)}else{var Oe=f[oe],Le=void 0,Re=void 0,Ne=void 0,Ue=void 0;Te?Re=[(Le=Xa(m,Oe,Te,Ce)).width,Le.height]:(Le=m,Re=h,Ne=[Oe.width,Oe.height],Ue=[Oe.x,Oe.y]),se=new r.default({color:De,img:Le,imgSize:Re,size:Ne,offset:Ue,rotateWithView:"map"===ce,scale:_e/Oe.pixelRatio,displacement:Pe,declutterMode:Ie})}z[Ae]=se}}se&&(($=O[++C])&&$.getImage()&&!$.getFill()&&!$.getStroke()||($=new i.default,O[C]=$),$.setGeometry(pe),se.setRotation(ie+Ra(Si(P,"layout","icon-rotate",x,_,S,E))),se.setOpacity(Si(P,"paint","icon-opacity",x,_,S,E)),se.setAnchor(wi[Si(P,"layout","icon-anchor",x,_,S,E)]),$.setImage(se),ae=$.getText(),$.setText(void 0),$.setZIndex(B),ne=!0,ue=!1)}else ue=!0}}}if(1==j&&"circle"===P.type){($=O[++C])&&$.getImage()&&!$.getFill()&&!$.getStroke()||($=new i.default,O[C]=$);var Ge="circle-radius"in N?Si(P,"paint","circle-radius",x,_,S,E):5,Ve=Ci(Si(P,"paint","circle-stroke-color",x,_,S,E),Si(P,"paint","circle-stroke-opacity",x,_,S,E)),We=Ci(Si(P,"paint","circle-color",x,_,S,E),Si(P,"paint","circle-opacity",x,_,S,E)),Je=Si(P,"paint","circle-stroke-width",x,_,S,E),Ze=Ge+"."+Ve+"."+We+"."+Je;(se=z[Ze])||(se=new e.default({radius:Ge,stroke:Ve&&Je>0?new a.default({width:Je,color:Ve}):void 0,fill:We?new t.default({color:We}):void 0,declutterMode:"none"}),z[Ze]=se),$.setImage(se),ae=$.getText(),$.setText(void 0),$.setGeometry(void 0),$.setZIndex(B),ne=!0}var $e=void 0,Be=void 0,Xe=void 0,He=void 0,Ye=void 0,Ke=void 0;if("text-field"in R){He=Math.round(Si(P,"layout","text-size",x,_,S,E));var Qe=Si(P,"layout","text-font",x,_,S,E);Xe=Si(P,"layout","text-line-height",x,_,S,E),(Be=Qn(d?d(Qe,u.metadata?u.metadata["ol:webfonts"]:void 0):Qe,He,Xe)).includes("sans-serif")||(Be+=",sans-serif"),Ye=Si(P,"layout","text-letter-spacing",x,_,S,E),Ke=Si(P,"layout","text-max-width",x,_,S,E);var et=Si(P,"layout","text-field",x,_,S,E);$e="object"==typeof et&&et.sections?1===et.sections.length?et.toString():et.sections.reduce(function(e,t,r){var n=t.fontStack?t.fontStack.split(","):Qe,a=Qn(d?d(n):n,He*(t.scale||1),Xe),i=t.text;if("\n"===i)return e.push("\n",""),e;if(2!=j){for(var o=0,s=(i=fi(i,a,Ke,Ye).split("\n")).length;o<s;++o)o>0&&e.push("\n",""),e.push(i[o],a);return e}e.push(si(i,Ye),a)},[]):Ai(et,g).trim(),V=Si(P,"paint","text-opacity",x,_,S,E)}if($e&&V&&!ue){ne||(($=O[++C])&&$.getText()&&!$.getFill()&&!$.getStroke()||($=new i.default,O[C]=$),$.setImage(void 0),$.setGeometry(void 0)),$.getText()||$.setText(ae||new o.default({padding:[2,2,2,2]})),ae=$.getText();var tt=R["text-transform"];"uppercase"==tt?$e=Array.isArray($e)?$e.map(function(e,t){return t%2?e:e.toUpperCase()}):$e.toUpperCase():"lowercase"==tt&&($e=Array.isArray($e)?$e.map(function(e,t){return t%2?e:e.toLowerCase()}):$e.toLowerCase());var rt=Array.isArray($e)?$e:2==j?si($e,Ye):fi($e,Be,Ke,Ye);ae.setText(rt),ae.setFont(Be),ae.setRotation(Ra(Si(P,"layout","text-rotate",x,_,S,E)));var nt=Si(P,"layout","text-anchor",x,_,S,E),at=ne||1==j?"point":Si(P,"layout","symbol-placement",x,_,S,E),it=void 0;if("line-center"===at?(ae.setPlacement("line"),it="center"):ae.setPlacement(at),"line"===at&&"function"==typeof ae.setRepeat){var ot=Si(P,"layout","symbol-spacing",x,_,S,E);ae.setRepeat(2*ot)}ae.setOverflow("point"===at);var st=Si(P,"paint","text-halo-width",x,_,S,E),ut=Si(P,"layout","text-offset",x,_,S,E),lt=Si(P,"paint","text-translate",x,_,S,E),pt=0,ft=0;if("point"==at){it="center",-1!==nt.indexOf("left")?(it="left",ft=st):-1!==nt.indexOf("right")&&(it="right",ft=-st);var ct=Si(P,"layout","text-rotation-alignment",x,_,S,E);ae.setRotateWithView("map"==ct)}else ae.setMaxAngle(Ra(Si(P,"layout","text-max-angle",x,_,S,E))*$e.length/rt.length),ae.setRotateWithView(!1);ae.setTextAlign(it);var dt="middle";0==nt.indexOf("bottom")?(dt="bottom",pt=-st-.5*(Xe-1)*He):0==nt.indexOf("top")&&(dt="top",pt=st+.5*(Xe-1)*He),ae.setTextBaseline(dt);var yt=Si(P,"layout","text-justify",x,_,S,E);ae.setJustify("auto"===yt?void 0:yt),ae.setOffsetX(ut[0]*He+ft+lt[0]),ae.setOffsetY(ut[1]*He+pt+lt[1]),F.setColor(Ci(Si(P,"paint","text-color",x,_,S,E),V)),ae.setFill(F);var mt=Ci(Si(P,"paint","text-halo-color",x,_,S,E),V);if(mt){D.setColor(mt),st*=2;var ht=.5*He;D.setWidth(st<=ht?st:ht),ae.setStroke(D)}else ae.setStroke(void 0);var vt=Si(P,"layout","text-padding",x,_,S,E),gt=ae.getPadding();vt!==gt[0]&&(gt[0]=vt,gt[1]=vt,gt[2]=vt,gt[3]=vt),$.setZIndex(B)}}}}}return C>-1?(O.length=C+1,Ii&&("set"in l?l.set("mapbox-layer",k):l.getProperties()["mapbox-layer"]=k),O):void 0}};return s.setStyle(L),s.set("mapbox-source",b),s.set("mapbox-layers",k),s.set("mapbox-featurestate",s.get("mapbox-featurestate")||{}),L}function Oi(e,t,r,n){var a=r.getStyleFunction();if(3===a.length)return a(e,t,n)}
},{"ol/style/Circle.js":"D2sG","ol/style/Fill.js":"sqJC","ol/style/Icon.js":"lB4R","ol/render/Feature.js":"TTaU","ol/style/Stroke.js":"dz0b","ol/style/Style.js":"JtXZ","ol/style/Text.js":"kcKm","ol/render/canvas.js":"RKIq","ol/tileurlfunction.js":"dZ35","ol/format/GeoJSON.js":"csgN","ol/layer/Image.js":"kjaO","ol/layer/Layer.js":"Ee0U","ol/layer/Group.js":"MeSs","ol/format/MVT.js":"CAny","ol/Map.js":"ZXtR","ol/source/Raster.js":"xFSo","ol/source/Source.js":"AC87","ol/tilegrid/TileGrid.js":"JVE6","ol/source/TileJSON.js":"Lic7","ol/layer/Tile.js":"PqrZ","ol/layer/Vector.js":"AGre","ol/source/Vector.js":"v3xZ","ol/layer/VectorTile.js":"g0oQ","ol/source/VectorTile.js":"EYMU","ol/View.js":"rXL1","ol/proj.js":"VAQc","ol/loadingstrategy.js":"RDFU","ol/tilegrid.js":"gNrJ","ol/extent.js":"L0Vw","ol/util.js":"KA50"}],"OA2l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRenderPixel=l,exports.getVectorContext=a,exports.toContext=s;var e=i(require("./render/canvas/Immediate.js")),r=require("./has.js"),t=require("./transform.js"),n=require("./renderer/vector.js"),o=require("./proj.js");function i(e){return e&&e.__esModule?e:{default:e}}function s(n,o){var i=n.canvas,s=(o=o||{}).pixelRatio||r.DEVICE_PIXEL_RATIO,a=o.size;a&&(i.width=a[0]*s,i.height=a[1]*s,i.style.width=a[0]+"px",i.style.height=a[1]+"px");var l=[0,0,i.width,i.height],u=(0,t.scale)((0,t.create)(),s,s);return new e.default(n,s,l,u,0)}function a(r){if(!(r.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var i,s=r.inversePixelTransform[0],a=r.inversePixelTransform[1],l=Math.sqrt(s*s+a*a),u=r.frameState,c=(0,t.multiply)(r.inversePixelTransform.slice(),u.coordinateToPixelTransform),f=(0,n.getSquaredTolerance)(u.viewState.resolution,l),x=(0,o.getUserProjection)();return x&&(i=(0,o.getTransformFromProjections)(x,u.viewState.projection)),new e.default(r.context,l,u.extent,c,u.viewState.rotation,f,i)}function l(e,r){return(0,t.apply)(e.inversePixelTransform,r.slice(0))}
},{"./render/canvas/Immediate.js":"noax","./has.js":"mpkP","./transform.js":"Ln8D","./renderer/vector.js":"iWoQ","./proj.js":"VAQc"}],"bxBY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greatCircleArc=n,exports.meridian=e,exports.parallel=o;var t=require("../../proj.js"),a=require("../../math.js");function r(t,r,n){for(var e,o,s,i,u,p,h=[],c=t(0),M=t(1),f=r(c),g=r(M),d=[M,c],l=[g,f],v=[1,0],R={},m=1e5;--m>0&&v.length>0;)s=v.pop(),c=d.pop(),f=l.pop(),(p=s.toString())in R||(h.push(f[0],f[1]),R[p]=!0),i=v.pop(),M=d.pop(),g=l.pop(),o=r(e=t(u=(s+i)/2)),(0,a.squaredSegmentDistance)(o[0],o[1],f[0],f[1],g[0],g[1])<n?(h.push(g[0],g[1]),R[p=i.toString()]=!0):(v.push(i,u,u,s),l.push(g,o,o,f),d.push(M,e,e,c));return h}function n(n,e,o,s,i,u){var p=(0,t.get)("EPSG:4326"),h=Math.cos((0,a.toRadians)(e)),c=Math.sin((0,a.toRadians)(e)),M=Math.cos((0,a.toRadians)(s)),f=Math.sin((0,a.toRadians)(s)),g=Math.cos((0,a.toRadians)(o-n)),d=Math.sin((0,a.toRadians)(o-n)),l=c*f+h*M*g;return r(function(t){if(1<=l)return[o,s];var r=t*Math.acos(l),e=Math.cos(r),i=Math.sin(r),u=d*M,p=h*f-c*M*g,v=Math.atan2(u,p),R=Math.asin(c*e+h*i*Math.cos(v)),m=(0,a.toRadians)(n)+Math.atan2(Math.sin(v)*i*h,e-c*Math.sin(R));return[(0,a.toDegrees)(m),(0,a.toDegrees)(R)]},(0,t.getTransform)(p,i),u)}function e(a,n,e,o,s){var i=(0,t.get)("EPSG:4326");return r(function(t){return[a,n+(e-n)*t]},(0,t.getTransform)(i,o),s)}function o(a,n,e,o,s){var i=(0,t.get)("EPSG:4326");return r(function(t){return[n+(e-n)*t,a]},(0,t.getTransform)(i,o),s)}
},{"../../proj.js":"VAQc","../../math.js":"qAK2"}],"ldxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=p(require("../Collection.js")),e=p(require("../render/EventType.js")),a=p(require("../Feature.js")),i=p(require("../style/Fill.js")),r=p(require("../geom/LineString.js")),n=p(require("../geom/Point.js")),l=p(require("../style/Stroke.js")),o=p(require("../style/Style.js")),s=p(require("../style/Text.js")),h=p(require("./Vector.js")),_=p(require("../source/Vector.js")),u=require("../extent.js"),m=require("../math.js"),d=require("../coordinate.js"),f=require("../proj.js"),L=require("../render.js"),c=require("../geom/flat/geodesic.js");function p(t){return t&&t.__esModule?t:{default:t}}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,x(i.key),i)}}function y(t,e,a){return e&&v(t.prototype,e),a&&v(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function x(t){var e=S(t,"string");return"symbol"===b(e)?e:String(e)}function S(t,e){if("object"!==b(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!==b(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}function P(t,e){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function w(t){var e=T();return function(){var a,i=k(t);if(e){var r=k(this).constructor;a=Reflect.construct(i,arguments,r)}else a=i.apply(this,arguments);return M(this,a)}}function M(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return E(t)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var C=new l.default({color:"rgba(0,0,0,0.2)"}),F=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600],X=function(p){j(v,h.default);var b=w(v);function v(a){var r;g(this,v),a=a||{};var n=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},a);return delete n.maxLines,delete n.strokeStyle,delete n.targetSize,delete n.showLabels,delete n.lonLabelFormatter,delete n.latLabelFormatter,delete n.lonLabelPosition,delete n.latLabelPosition,delete n.lonLabelStyle,delete n.latLabelStyle,delete n.intervals,(r=b.call(this,n)).projection_=null,r.maxLat_=1/0,r.maxLon_=1/0,r.minLat_=-1/0,r.minLon_=-1/0,r.maxX_=1/0,r.maxY_=1/0,r.minX_=-1/0,r.minY_=-1/0,r.targetSize_=void 0!==a.targetSize?a.targetSize:100,r.maxLines_=void 0!==a.maxLines?a.maxLines:100,r.meridians_=[],r.parallels_=[],r.strokeStyle_=void 0!==a.strokeStyle?a.strokeStyle:C,r.fromLonLatTransform_=void 0,r.toLonLatTransform_=void 0,r.projectionCenterLonLat_=null,r.bottomLeft_=null,r.bottomRight_=null,r.topLeft_=null,r.topRight_=null,r.meridiansLabels_=null,r.parallelsLabels_=null,a.showLabels&&(r.lonLabelFormatter_=null==a.lonLabelFormatter?d.degreesToStringHDMS.bind(E(r),"EW"):a.lonLabelFormatter,r.latLabelFormatter_=null==a.latLabelFormatter?d.degreesToStringHDMS.bind(E(r),"NS"):a.latLabelFormatter,r.lonLabelPosition_=null==a.lonLabelPosition?0:a.lonLabelPosition,r.latLabelPosition_=null==a.latLabelPosition?1:a.latLabelPosition,r.lonLabelStyleBase_=new o.default({text:void 0!==a.lonLabelStyle?a.lonLabelStyle.clone():new s.default({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new i.default({color:"rgba(0,0,0,1)"}),stroke:new l.default({color:"rgba(255,255,255,1)",width:3})})}),r.lonLabelStyle_=function(t){var e=t.get("graticule_label");return r.lonLabelStyleBase_.getText().setText(e),r.lonLabelStyleBase_},r.latLabelStyleBase_=new o.default({text:void 0!==a.latLabelStyle?a.latLabelStyle.clone():new s.default({font:"12px Calibri,sans-serif",textAlign:"right",fill:new i.default({color:"rgba(0,0,0,1)"}),stroke:new l.default({color:"rgba(255,255,255,1)",width:3})})}),r.latLabelStyle_=function(t){var e=t.get("graticule_label");return r.latLabelStyleBase_.getText().setText(e),r.latLabelStyleBase_},r.meridiansLabels_=[],r.parallelsLabels_=[],r.addEventListener(e.default.POSTRENDER,r.drawLabels_.bind(E(r)))),r.intervals_=void 0!==a.intervals?a.intervals:F,r.setSource(new _.default({loader:r.loaderFunction.bind(E(r)),strategy:r.strategyFunction.bind(E(r)),features:new t.default,overlaps:!1,useSpatialIndex:!1,wrapX:a.wrapX})),r.featurePool_=[],r.lineStyle_=new o.default({stroke:r.strokeStyle_}),r.loadedExtent_=null,r.renderedExtent_=null,r.renderedResolution_=null,r.setRenderOrder(null),r}return y(v,[{key:"strategyFunction",value:function(t,e){var a=t.slice();return this.projection_&&this.getSource().getWrapX()&&(0,u.wrapX)(a,this.projection_),this.loadedExtent_&&((0,u.approximatelyEquals)(this.loadedExtent_,a,e)?a=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[a]}},{key:"loaderFunction",value:function(t,e,i){this.loadedExtent_=t;var r=this.getSource(),n=this.getExtent()||[-1/0,-1/0,1/0,1/0],l=(0,u.getIntersection)(n,t);if(!(this.renderedExtent_&&(0,u.equals)(this.renderedExtent_,l)&&this.renderedResolution_===e||(this.renderedExtent_=l,this.renderedResolution_=e,(0,u.isEmpty)(l)))){var o=(0,u.getCenter)(l),s=e*e/4;(!this.projection_||!(0,f.equivalent)(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(l,o,e,s);var h,_=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(_+=this.meridians_.length),this.parallelsLabels_&&(_+=this.parallels_.length);_>this.featurePool_.length;)h=new a.default,this.featurePool_.push(h);var m=r.getFeaturesCollection();m.clear();var d,L,c=0;for(d=0,L=this.meridians_.length;d<L;++d)(h=this.featurePool_[c++]).setGeometry(this.meridians_[d]),h.setStyle(this.lineStyle_),m.push(h);for(d=0,L=this.parallels_.length;d<L;++d)(h=this.featurePool_[c++]).setGeometry(this.parallels_[d]),h.setStyle(this.lineStyle_),m.push(h)}}},{key:"addMeridian_",value:function(t,e,a,i,r,l){var o=this.getMeridian_(t,e,a,i,l);if((0,u.intersects)(o.getExtent(),r)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(t);l in this.meridiansLabels_?this.meridiansLabels_[l].text=s:this.meridiansLabels_[l]={geom:new n.default([]),text:s}}this.meridians_[l++]=o}return l}},{key:"addParallel_",value:function(t,e,a,i,r,l){var o=this.getParallel_(t,e,a,i,l);if((0,u.intersects)(o.getExtent(),r)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(t);l in this.parallelsLabels_?this.parallelsLabels_[l].text=s:this.parallelsLabels_[l]={geom:new n.default([]),text:s}}this.parallels_[l++]=o}return l}},{key:"drawLabels_",value:function(t){var e=t.frameState.viewState.rotation,a=t.frameState.viewState.resolution,i=t.frameState.size,r=t.frameState.extent,n=(0,u.getCenter)(r),l=r;if(e){var o=i[0]*a,s=i[1]*a;l=[n[0]-o/2,n[1]-s/2,n[0]+o/2,n[1]+s/2]}var h=0,_=0,m=this.latLabelPosition_<.5,d=this.projection_.getExtent(),f=(0,u.getWidth)(d);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,u.containsExtent)(d,r)&&(h=Math.floor((r[0]-d[0])/f),_=Math.ceil((r[2]-d[2])/f),m=m!==Math.abs(e)>Math.PI/2);for(var c=(0,L.getVectorContext)(t),p=h;p<=_;++p){var b=this.meridians_.length+this.parallels_.length,g=void 0,v=void 0,y=void 0,x=void 0;if(this.meridiansLabels_)for(v=0,y=this.meridiansLabels_.length;v<y;++v){var S=this.meridians_[v];if(e||0!==p){var j=S.clone();j.translate(p*f,0),j.rotate(-e,n),(x=this.getMeridianPoint_(j,l,v)).rotate(e,n)}else x=this.getMeridianPoint_(S,r,v);(g=this.featurePool_[b++]).setGeometry(x),g.set("graticule_label",this.meridiansLabels_[v].text),c.drawFeature(g,this.lonLabelStyle_(g))}if(this.parallelsLabels_&&(p===h&&m||p===_&&!m))for(v=0,y=this.parallels_.length;v<y;++v){var P=this.parallels_[v];if(e||0!==p){var w=P.clone();w.translate(p*f,0),w.rotate(-e,n),(x=this.getParallelPoint_(w,l,v)).rotate(e,n)}else x=this.getParallelPoint_(P,r,v);(g=this.featurePool_[b++]).setGeometry(x),g.set("graticule_label",this.parallelsLabels_[v].text),c.drawFeature(g,this.latLabelStyle_(g))}}}},{key:"createGraticule_",value:function(t,e,a,i){var r=this.getInterval_(a);if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var n=!1,l=this.projection_.getExtent(),o=(0,u.getWidth)(l);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,u.containsExtent)(l,t)&&((0,u.getWidth)(t)>=o?(t[0]=l[0],t[2]=l[2]):n=!0);var s=[(0,m.clamp)(e[0],this.minX_,this.maxX_),(0,m.clamp)(e[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(s);isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var _,d,f,L,c=(0,m.clamp)(h[0],this.minLon_,this.maxLon_),p=(0,m.clamp)(h[1],this.minLat_,this.maxLat_),b=this.maxLines_,g=t;n||(g=[(0,m.clamp)(t[0],this.minX_,this.maxX_),(0,m.clamp)(t[1],this.minY_,this.maxY_),(0,m.clamp)(t[2],this.minX_,this.maxX_),(0,m.clamp)(t[3],this.minY_,this.maxY_)]);var v=(0,u.applyTransform)(g,this.toLonLatTransform_,void 0,8),y=v[3],x=v[2],S=v[1],j=v[0];if(n||((0,u.containsCoordinate)(g,this.bottomLeft_)&&(j=this.minLon_,S=this.minLat_),(0,u.containsCoordinate)(g,this.bottomRight_)&&(x=this.maxLon_,S=this.minLat_),(0,u.containsCoordinate)(g,this.topLeft_)&&(j=this.minLon_,y=this.maxLat_),(0,u.containsCoordinate)(g,this.topRight_)&&(x=this.maxLon_,y=this.maxLat_),y=(0,m.clamp)(y,p,this.maxLat_),x=(0,m.clamp)(x,c,this.maxLon_),S=(0,m.clamp)(S,this.minLat_,p),j=(0,m.clamp)(j,this.minLon_,c)),c=Math.floor(c/r)*r,L=(0,m.clamp)(c,this.minLon_,this.maxLon_),d=this.addMeridian_(L,S,y,i,t,0),_=0,n)for(;(L-=r)>=j&&_++<b;)d=this.addMeridian_(L,S,y,i,t,d);else for(;L!=this.minLon_&&_++<b;)L=Math.max(L-r,this.minLon_),d=this.addMeridian_(L,S,y,i,t,d);if(L=(0,m.clamp)(c,this.minLon_,this.maxLon_),_=0,n)for(;(L+=r)<=x&&_++<b;)d=this.addMeridian_(L,S,y,i,t,d);else for(;L!=this.maxLon_&&_++<b;)L=Math.min(L+r,this.maxLon_),d=this.addMeridian_(L,S,y,i,t,d);for(this.meridians_.length=d,this.meridiansLabels_&&(this.meridiansLabels_.length=d),p=Math.floor(p/r)*r,f=(0,m.clamp)(p,this.minLat_,this.maxLat_),d=this.addParallel_(f,j,x,i,t,0),_=0;f!=this.minLat_&&_++<b;)f=Math.max(f-r,this.minLat_),d=this.addParallel_(f,j,x,i,t,d);for(f=(0,m.clamp)(p,this.minLat_,this.maxLat_),_=0;f!=this.maxLat_&&_++<b;)f=Math.min(f+r,this.maxLat_),d=this.addParallel_(f,j,x,i,t,d);this.parallels_.length=d,this.parallelsLabels_&&(this.parallelsLabels_.length=d)}},{key:"getInterval_",value:function(t){for(var e=this.projectionCenterLonLat_[0],a=this.projectionCenterLonLat_[1],i=-1,r=Math.pow(this.targetSize_*t,2),n=[],l=[],o=0,s=this.intervals_.length;o<s;++o){var h=(0,m.clamp)(this.intervals_[o]/2,0,90),_=(0,m.clamp)(a,-90+h,90-h);if(n[0]=e-h,n[1]=_-h,l[0]=e+h,l[1]=_+h,this.fromLonLatTransform_(n,n),this.fromLonLatTransform_(l,l),Math.pow(l[0]-n[0],2)+Math.pow(l[1]-n[1],2)<=r)break;i=this.intervals_[o]}return i}},{key:"getMeridian_",value:function(t,e,a,i,n){var l=(0,c.meridian)(t,e,a,this.projection_,i),o=this.meridians_[n];return o?(o.setFlatCoordinates("XY",l),o.changed()):(o=new r.default(l,"XY"),this.meridians_[n]=o),o}},{key:"getMeridianPoint_",value:function(t,e,a){var i=t.getFlatCoordinates(),r=1,n=i.length-1;i[r]>i[n]&&(r=n,n=1);var l=Math.max(e[1],i[r]),o=Math.min(e[3],i[n]),s=(0,m.clamp)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,l,o),h=[i[r-1]+(i[n-1]-i[r-1])*(s-i[r])/(i[n]-i[r]),s],_=this.meridiansLabels_[a].geom;return _.setCoordinates(h),_}},{key:"getMeridians",value:function(){return this.meridians_}},{key:"getParallel_",value:function(t,e,a,i,n){var l=(0,c.parallel)(t,e,a,this.projection_,i),o=this.parallels_[n];return o?(o.setFlatCoordinates("XY",l),o.changed()):o=new r.default(l,"XY"),o}},{key:"getParallelPoint_",value:function(t,e,a){var i=t.getFlatCoordinates(),r=0,n=i.length-2;i[r]>i[n]&&(r=n,n=0);var l=Math.max(e[0],i[r]),o=Math.min(e[2],i[n]),s=(0,m.clamp)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,l,o),h=[s,i[r+1]+(i[n+1]-i[r+1])*(s-i[r])/(i[n]-i[r])],_=this.parallelsLabels_[a].geom;return _.setCoordinates(h),_}},{key:"getParallels",value:function(){return this.parallels_}},{key:"updateProjectionInfo_",value:function(t){var e=(0,f.get)("EPSG:4326"),a=t.getWorldExtent();this.maxLat_=a[3],this.maxLon_=a[2],this.minLat_=a[1],this.minLon_=a[0];var i=(0,f.getTransform)(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{var r=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,a){for(var n=i(t,e,a=a||2),l=0,o=n.length;l<o;l+=a)n[l]<r&&(n[l]+=360);return n}}this.fromLonLatTransform_=(0,f.getTransform)(e,t);var n=(0,u.applyTransform)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=n[0],this.maxX_=n[2],this.minY_=n[1],this.maxY_=n[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,u.getCenter)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}}]),v}(),q=X;exports.default=q;
},{"../Collection.js":"Kjrg","../render/EventType.js":"JwZs","../Feature.js":"E2jd","../style/Fill.js":"sqJC","../geom/LineString.js":"qAxQ","../geom/Point.js":"IIKA","../style/Stroke.js":"dz0b","../style/Style.js":"JtXZ","../style/Text.js":"kcKm","./Vector.js":"AGre","../source/Vector.js":"v3xZ","../extent.js":"L0Vw","../math.js":"qAK2","../coordinate.js":"CMtO","../proj.js":"VAQc","../render.js":"OA2l","../geom/flat/geodesic.js":"bxBY"}],"HPlr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UNSIGNED_SHORT=exports.UNSIGNED_INT=exports.UNSIGNED_BYTE=exports.STREAM_DRAW=exports.STATIC_DRAW=exports.FLOAT=exports.ELEMENT_ARRAY_BUFFER=exports.DYNAMIC_DRAW=exports.ARRAY_BUFFER=void 0,exports.getContext=_,exports.getSupportedExtensions=N;var e=require("./has.js"),r=34962;exports.ARRAY_BUFFER=r;var t=34963;exports.ELEMENT_ARRAY_BUFFER=t;var o=35040;exports.STREAM_DRAW=o;var s=35044;exports.STATIC_DRAW=s;var p=35048;exports.DYNAMIC_DRAW=p;var x=5121;exports.UNSIGNED_BYTE=x;var a=5123;exports.UNSIGNED_SHORT=a;var A=5125;exports.UNSIGNED_INT=A;var n=5126;exports.FLOAT=n;var E,R=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function _(r,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!e.SAFARI_BUG_237906},t);for(var o=R.length,s=0;s<o;++s)try{var p=r.getContext(R[s],t);if(p)return p}catch(x){}return null}function N(){if(!E){var e=_(document.createElement("canvas"));e&&(E=e.getSupportedExtensions())}return E}
},{"./has.js":"mpkP"}],"As8l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.BufferUsage=void 0,exports.getArrayClassForType=f;var r=require("../webgl.js"),t=require("../asserts.js");function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function n(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function o(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,u(n.key),n)}}function i(r,t,e){return t&&o(r.prototype,t),e&&o(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function u(r){var t=a(r,"string");return"symbol"===e(t)?t:String(t)}function a(r,t){if("object"!==e(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,t||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}var s={STATIC_DRAW:r.STATIC_DRAW,STREAM_DRAW:r.STREAM_DRAW,DYNAMIC_DRAW:r.DYNAMIC_DRAW};exports.BufferUsage=s;var y=function(){function e(o,i){n(this,e),this.array=null,this.type=o,(0,t.assert)(o===r.ARRAY_BUFFER||o===r.ELEMENT_ARRAY_BUFFER,62),this.usage=void 0!==i?i:s.STATIC_DRAW}return i(e,[{key:"ofSize",value:function(r){return this.array=new(f(this.type))(r),this}},{key:"fromArray",value:function(r){return this.array=f(this.type).from(r),this}},{key:"fromArrayBuffer",value:function(r){return this.array=new(f(this.type))(r),this}},{key:"getType",value:function(){return this.type}},{key:"getArray",value:function(){return this.array}},{key:"getUsage",value:function(){return this.usage}},{key:"getSize",value:function(){return this.array?this.array.length:0}}]),e}();function f(t){switch(t){case r.ARRAY_BUFFER:return Float32Array;case r.ELEMENT_ARRAY_BUFFER:return Uint32Array;default:return Float32Array}}var l=y;exports.default=l;
},{"../webgl.js":"HPlr","../asserts.js":"DVOE"}],"QaX3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};exports.default=e;
},{}],"i5Gt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function a(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var t=o(e,"string");return"symbol"===r(t)?t:String(t)}function o(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var u="\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n",f="\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n",T=function(){function r(e){var i=this;t(this,r),this.gl_=e.webGlContext;var a=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=a.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=a.createFramebuffer();var n=a.createShader(a.VERTEX_SHADER);a.shaderSource(n,e.vertexShader||u),a.compileShader(n);var o=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(o,e.fragmentShader||f),a.compileShader(o),this.renderTargetProgram_=a.createProgram(),a.attachShader(this.renderTargetProgram_,n),a.attachShader(this.renderTargetProgram_,o),a.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),a.STATIC_DRAW),this.renderTargetAttribLocation_=a.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=a.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=a.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=a.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(function(r){i.uniforms_.push({value:e.uniforms[r],location:a.getUniformLocation(i.renderTargetProgram_,r)})})}return a(r,[{key:"getGL",value:function(){return this.gl_}},{key:"init",value:function(e){var r=this.getGL(),t=[r.drawingBufferWidth*this.scaleRatio_,r.drawingBufferHeight*this.scaleRatio_];if(r.bindFramebuffer(r.FRAMEBUFFER,this.getFrameBuffer()),r.viewport(0,0,t[0],t[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==t[0]||this.renderTargetTextureSize_[1]!==t[1]){this.renderTargetTextureSize_=t;var i=r.RGBA,a=r.RGBA,n=r.UNSIGNED_BYTE;r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.texImage2D(r.TEXTURE_2D,0,i,t[0],t[1],0,a,n,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.renderTargetTexture_,0)}}},{key:"apply",value:function(r,t,i,a){var n=this.getGL(),o=r.size;if(n.bindFramebuffer(n.FRAMEBUFFER,t?t.getFrameBuffer():null),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),!t){var u=(0,e.getUid)(n.canvas);if(!r.renderTargets[u]){var f=n.getContextAttributes();f&&f.preserveDrawingBuffer&&(n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)),r.renderTargets[u]=!0}}n.enable(n.BLEND),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.useProgram(this.renderTargetProgram_),n.enableVertexAttribArray(this.renderTargetAttribLocation_),n.vertexAttribPointer(this.renderTargetAttribLocation_,2,n.FLOAT,!1,0,0),n.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),n.uniform1i(this.renderTargetTextureLocation_,0);var T=r.layerStatesArray[r.layerIndex].opacity;n.uniform1f(this.renderTargetOpacityLocation_,T),this.applyUniforms(r),i&&i(n,r),n.drawArrays(n.TRIANGLES,0,6),a&&a(n,r)}},{key:"getFrameBuffer",value:function(){return this.frameBuffer_}},{key:"applyUniforms",value:function(e){var r,t=this.getGL(),i=1;this.uniforms_.forEach(function(a){if((r="function"==typeof a.value?a.value(e):a.value)instanceof HTMLCanvasElement||r instanceof ImageData)a.texture||(a.texture=t.createTexture()),t.activeTexture(t["TEXTURE".concat(i)]),t.bindTexture(t.TEXTURE_2D,a.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,r.width,r.height,0,t.UNSIGNED_BYTE,new Uint8Array(r.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.uniform1i(a.location,i++);else if(Array.isArray(r))switch(r.length){case 2:return void t.uniform2f(a.location,r[0],r[1]);case 3:return void t.uniform3f(a.location,r[0],r[1],r[2]);case 4:return void t.uniform4f(a.location,r[0],r[1],r[2],r[3]);default:return}else"number"==typeof r&&t.uniform1f(a.location,r)})}}]),r}(),s=T;exports.default=s;
},{"../util.js":"KA50"}],"mf1C":[function(require,module,exports) {
"use strict";function e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e,r){return e[0]=r[0],e[1]=r[1],e[4]=r[2],e[5]=r[3],e[12]=r[4],e[13]=r[5],e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.fromTransform=r;
},{}],"ttZe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShaderType=exports.DefaultUniform=exports.AttributeType=void 0,exports.computeAttributesStride=C,exports.default=void 0;var e=u(require("../webgl/ContextEventType.js")),t=u(require("../Disposable.js")),r=u(require("./PostProcessingPass.js")),n=require("../webgl.js"),a=require("../obj.js"),o=require("../transform.js"),i=require("../vec/mat4.js"),s=require("../util.js");function u(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function _(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=m(e,"string");return"symbol"===f(t)?t:String(t)}function m(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=y();return function(){var r,n=p(e);if(t){var a=p(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b={FRAGMENT_SHADER:35632,VERTEX_SHADER:35633};exports.ShaderType=b;var R={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio"};exports.DefaultUniform=R;var S={UNSIGNED_BYTE:n.UNSIGNED_BYTE,UNSIGNED_SHORT:n.UNSIGNED_SHORT,UNSIGNED_INT:n.UNSIGNED_INT,FLOAT:n.FLOAT};exports.AttributeType=S;var P={};function L(e){return"shared/"+e}var x=0;function U(){var e="unique/"+x;return x+=1,e}function A(e){var t=P[e];if(!t){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",t={users:0,canvas:r},P[e]=t}return t.users+=1,t.canvas}function O(e){var t=P[e];if(t&&(t.users-=1,!(t.users>0))){var r=t.canvas,a=(0,n.getContext)(r).getExtension("WEBGL_lose_context");a&&a.loseContext(),delete P[e]}}var I=function(u){E(l,t.default);var f=T(l);function l(t){var a;return c(this,l),t=t||{},(a=f.call(this)).boundHandleWebGLContextLost_=a.handleWebGLContextLost.bind(d(a)),a.boundHandleWebGLContextRestored_=a.handleWebGLContextRestored.bind(d(a)),a.canvasCacheKey_=t.canvasCacheKey?L(t.canvasCacheKey):U(),a.canvas_=A(a.canvasCacheKey_),a.gl_=(0,n.getContext)(a.canvas_),a.bufferCache_={},a.extensionCache_={},a.currentProgram_=null,a.canvas_.addEventListener(e.default.LOST,a.boundHandleWebGLContextLost_),a.canvas_.addEventListener(e.default.RESTORED,a.boundHandleWebGLContextRestored_),a.offsetRotateMatrix_=(0,o.create)(),a.offsetScaleMatrix_=(0,o.create)(),a.tmpMat4_=(0,i.create)(),a.uniformLocationsByProgram_={},a.attribLocationsByProgram_={},a.uniforms_=[],t.uniforms&&a.setUniforms(t.uniforms),a.postProcessPasses_=t.postProcesses?t.postProcesses.map(function(e){return new r.default({webGlContext:a.gl_,scaleRatio:e.scaleRatio,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms})}):[new r.default({webGlContext:a.gl_})],a.shaderCompileErrors_=null,a.startTime_=Date.now(),a}return _(l,[{key:"setUniforms",value:function(e){for(var t in this.uniforms_=[],e)this.uniforms_.push({name:t,value:e[t]})}},{key:"canvasCacheKeyMatches",value:function(e){return this.canvasCacheKey_===L(e)}},{key:"getExtension",value:function(e){if(e in this.extensionCache_)return this.extensionCache_[e];var t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}},{key:"bindBuffer",value:function(e){var t=this.gl_,r=(0,s.getUid)(e),n=this.bufferCache_[r];n||(n={buffer:e,webGlBuffer:t.createBuffer()},this.bufferCache_[r]=n);t.bindBuffer(e.getType(),n.webGlBuffer)}},{key:"flushBufferData",value:function(e){var t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}},{key:"deleteBuffer",value:function(e){var t=this.gl_,r=(0,s.getUid)(e),n=this.bufferCache_[r];n&&!t.isContextLost()&&t.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]}},{key:"disposeInternal",value:function(){this.canvas_.removeEventListener(e.default.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(e.default.RESTORED,this.boundHandleWebGLContextRestored_),O(this.canvasCacheKey_),delete this.gl_,delete this.canvas_}},{key:"prepareDraw",value:function(e,t){var r=this.gl_,n=this.getCanvas(),a=e.size,o=e.pixelRatio;n.width===a[0]*o&&n.height===a[1]*o||(n.width=a[0]*o,n.height=a[1]*o,n.style.width=a[0]+"px",n.style.height=a[1]+"px");for(var i=this.postProcessPasses_.length-1;i>=0;i--)this.postProcessPasses_[i].init(e);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,t?r.ZERO:r.ONE_MINUS_SRC_ALPHA)}},{key:"bindTexture",value:function(e,t,r){var n=this.gl_;n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.uniform1i(this.getUniformLocation(r),t)}},{key:"prepareDrawToRenderTarget",value:function(e,t,r){var n=this.gl_,a=t.getSize();n.bindFramebuffer(n.FRAMEBUFFER,t.getFramebuffer()),n.viewport(0,0,a[0],a[1]),n.bindTexture(n.TEXTURE_2D,t.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA)}},{key:"drawElements",value:function(e,t){var r=this.gl_;this.getExtension("OES_element_index_uint");var n=r.UNSIGNED_INT,a=t-e,o=4*e;r.drawElements(r.TRIANGLES,a,n,o)}},{key:"finalizeDraw",value:function(e,t,r){for(var n=0,a=this.postProcessPasses_.length;n<a;n++)n===a-1?this.postProcessPasses_[n].apply(e,null,t,r):this.postProcessPasses_[n].apply(e,this.postProcessPasses_[n+1])}},{key:"getCanvas",value:function(){return this.canvas_}},{key:"getGL",value:function(){return this.gl_}},{key:"applyFrameState",value:function(e){var t=e.size,r=e.viewState.rotation,n=e.pixelRatio,a=(0,o.reset)(this.offsetScaleMatrix_);(0,o.scale)(a,2/t[0],2/t[1]);var s=(0,o.reset)(this.offsetRotateMatrix_);0!==r&&(0,o.rotate)(s,-r),this.setUniformMatrixValue(R.OFFSET_SCALE_MATRIX,(0,i.fromTransform)(this.tmpMat4_,a)),this.setUniformMatrixValue(R.OFFSET_ROTATION_MATRIX,(0,i.fromTransform)(this.tmpMat4_,s)),this.setUniformFloatValue(R.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(R.ZOOM,e.viewState.zoom),this.setUniformFloatValue(R.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(R.PIXEL_RATIO,n),this.setUniformFloatVec2(R.VIEWPORT_SIZE_PX,[t[0],t[1]])}},{key:"applyUniforms",value:function(e){var t,r=this,n=this.gl_,a=0;this.uniforms_.forEach(function(o){if((t="function"==typeof o.value?o.value(e):o.value)instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof ImageData)o.texture||(o.prevValue=void 0,o.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(a)]),n.bindTexture(n.TEXTURE_2D,o.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(!(t instanceof HTMLImageElement)||t.complete)&&o.prevValue!==t&&(o.prevValue=t,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),n.uniform1i(r.getUniformLocation(o.name),a++);else if(Array.isArray(t)&&6===t.length)r.setUniformMatrixValue(o.name,(0,i.fromTransform)(r.tmpMat4_,t));else if(Array.isArray(t)&&t.length<=4)switch(t.length){case 2:return void n.uniform2f(r.getUniformLocation(o.name),t[0],t[1]);case 3:return void n.uniform3f(r.getUniformLocation(o.name),t[0],t[1],t[2]);case 4:return void n.uniform4f(r.getUniformLocation(o.name),t[0],t[1],t[2],t[3]);default:return}else"number"==typeof t&&n.uniform1f(r.getUniformLocation(o.name),t)})}},{key:"useProgram",value:function(e,t){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(t),this.applyUniforms(t)}},{key:"compileShader",value:function(e,t){var r=this.gl_,n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}},{key:"getProgram",value:function(e,t){var r=this.gl_,n=this.compileShader(e,r.FRAGMENT_SHADER),a=this.compileShader(t,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,a),r.linkProgram(o),!r.getShaderParameter(n,r.COMPILE_STATUS)){var i="Fragment shader compilation failed: ".concat(r.getShaderInfoLog(n));throw new Error(i)}if(r.deleteShader(n),!r.getShaderParameter(a,r.COMPILE_STATUS)){var s="Vertex shader compilation failed: ".concat(r.getShaderInfoLog(a));throw new Error(s)}if(r.deleteShader(a),!r.getProgramParameter(o,r.LINK_STATUS)){var u="GL program linking failed: ".concat(r.getProgramInfoLog(o));throw new Error(u)}return o}},{key:"getUniformLocation",value:function(e){var t=(0,s.getUid)(this.currentProgram_);return void 0===this.uniformLocationsByProgram_[t]&&(this.uniformLocationsByProgram_[t]={}),void 0===this.uniformLocationsByProgram_[t][e]&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}},{key:"getAttributeLocation",value:function(e){var t=(0,s.getUid)(this.currentProgram_);return void 0===this.attribLocationsByProgram_[t]&&(this.attribLocationsByProgram_[t]={}),void 0===this.attribLocationsByProgram_[t][e]&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}},{key:"makeProjectionTransform",value:function(e,t){var r=e.size,n=e.viewState.rotation,a=e.viewState.resolution,i=e.viewState.center;return(0,o.compose)(t,0,0,2/(a*r[0]),2/(a*r[1]),-n,-i[0],-i[1]),t}},{key:"setUniformFloatValue",value:function(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}},{key:"setUniformFloatVec2",value:function(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}},{key:"setUniformFloatVec4",value:function(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}},{key:"setUniformMatrixValue",value:function(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}},{key:"enableAttributeArray_",value:function(e,t,r,n,a){var o=this.getAttributeLocation(e);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,t,r,!1,n,a))}},{key:"enableAttributes",value:function(e){for(var t=C(e),r=0,a=0;a<e.length;a++){var o=e[a];this.enableAttributeArray_(o.name,o.size,o.type||n.FLOAT,t,r),r+=o.size*N(o.type)}}},{key:"handleWebGLContextLost",value:function(){(0,a.clear)(this.bufferCache_),this.currentProgram_=null}},{key:"handleWebGLContextRestored",value:function(){}},{key:"createTexture",value:function(e,t,r){var n=this.gl_;r=r||n.createTexture();var a=n.RGBA,o=n.RGBA,i=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,r),t?n.texImage2D(n.TEXTURE_2D,0,a,o,i,t):n.texImage2D(n.TEXTURE_2D,0,a,e[0],e[1],0,o,i,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r}}]),l}();function C(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];t+=n.size*N(n.type)}return t}function N(e){switch(e){case S.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case S.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case S.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case S.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var D=I;exports.default=D;
},{"../webgl/ContextEventType.js":"QaX3","../Disposable.js":"jZkk","./PostProcessingPass.js":"i5Gt","../webgl.js":"HPlr","../obj.js":"SLsU","../transform.js":"Ln8D","../vec/mat4.js":"mf1C","../util.js":"KA50"}],"CXrm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../../layer/Property.js")),t=s(require("../Layer.js")),r=s(require("../../render/Event.js")),n=s(require("../../render/EventType.js")),o=s(require("../../webgl/Helper.js")),i=require("../../transform.js");function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=p(e,"string");return"symbol"===a(t)?t:String(t)}function p(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=y(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=O();return function(){var r,n=E(e);if(t){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(s){v(l,t.default);var a=m(l);function l(t,r){var n;return u(this,l),r=r||{},(n=a.call(this,t)).inversePixelTransform_=(0,i.create)(),n.pixelContext_=null,n.postProcesses_=r.postProcesses,n.uniforms_=r.uniforms,n.helper,t.addChangeListener(e.default.MAP,n.removeHelper.bind(P(n))),n.dispatchPreComposeEvent=n.dispatchPreComposeEvent.bind(P(n)),n.dispatchPostComposeEvent=n.dispatchPostComposeEvent.bind(P(n)),n}return f(l,[{key:"dispatchPreComposeEvent",value:function(e,t){var o=this.getLayer();if(o.hasListener(n.default.PRECOMPOSE)){var i=new r.default(n.default.PRECOMPOSE,void 0,t,e);o.dispatchEvent(i)}}},{key:"dispatchPostComposeEvent",value:function(e,t){var o=this.getLayer();if(o.hasListener(n.default.POSTCOMPOSE)){var i=new r.default(n.default.POSTCOMPOSE,void 0,t,e);o.dispatchEvent(i)}}},{key:"reset",value:function(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}},{key:"removeHelper",value:function(){this.helper&&(this.helper.dispose(),delete this.helper)}},{key:"prepareFrame",value:function(e){if(this.getLayer().getRenderSource()){for(var t,r=!0,n=-1,i=0,s=e.layerStatesArray.length;i<s;i++){var a=e.layerStatesArray[i].layer,u=a.getRenderer();if(u instanceof l){var f=a.getClassName();if((r||f!==t)&&(n+=1,r=!1),t=f,u===this)break}else r=!0}var c="map/"+e.mapId+"/group/"+n;this.helper&&this.helper.canvasCacheKeyMatches(c)||(this.removeHelper(),this.helper=new o.default({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:c}),t&&(this.helper.getCanvas().className=t),this.afterHelperCreated())}return this.prepareFrameInternal(e)}},{key:"afterHelperCreated",value:function(){}},{key:"prepareFrameInternal",value:function(e){return!0}},{key:"disposeInternal",value:function(){this.removeHelper(),h(E(l.prototype),"disposeInternal",this).call(this)}},{key:"dispatchRenderEvent_",value:function(e,t,n){var o=this.getLayer();if(o.hasListener(e)){(0,i.compose)(this.inversePixelTransform_,0,0,n.pixelRatio,-n.pixelRatio,0,0,-n.size[1]);var s=new r.default(e,this.inversePixelTransform_,n,t);o.dispatchEvent(s)}}},{key:"preRender",value:function(e,t){this.dispatchRenderEvent_(n.default.PRERENDER,e,t)}},{key:"postRender",value:function(e,t){this.dispatchRenderEvent_(n.default.POSTRENDER,e,t)}}]),l}(),R=g;exports.default=R;
},{"../../layer/Property.js":"yK6k","../Layer.js":"BfJa","../../render/Event.js":"UvWG","../../render/EventType.js":"JwZs","../../webgl/Helper.js":"ttZe","../../transform.js":"Ln8D"}],"yS04":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../array.js");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var r=u(e,"string");return"symbol"===t(r)?r:String(r)}function u(e,r){if("object"!==t(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,r||"default");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}var s=new Uint8Array(4),o=function(){function t(e,i){r(this,t),this.helper_=e;var a=e.getGL();this.texture_=a.createTexture(),this.framebuffer_=a.createFramebuffer(),this.size_=i||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return a(t,[{key:"setSize",value:function(t){(0,e.equals)(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}},{key:"getSize",value:function(){return this.size_}},{key:"clearCachedData",value:function(){this.dataCacheDirty_=!0}},{key:"readAll",value:function(){if(this.dataCacheDirty_){var e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}},{key:"readPixel",value:function(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s;this.readAll();var r=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return s[0]=this.data_[4*r],s[1]=this.data_[4*r+1],s[2]=this.data_[4*r+2],s[3]=this.data_[4*r+3],s}},{key:"getTexture",value:function(){return this.texture_}},{key:"getFramebuffer",value:function(){return this.framebuffer_}},{key:"updateSize_",value:function(){var e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(e[0]*e[1]*4)}}]),t}(),f=o;exports.default=f;
},{"../array.js":"o0G8"}],"eRlL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebGLWorkerMessageType=void 0;var E={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};exports.WebGLWorkerMessageType=E;
},{}],"vwhv":[function(require,module,exports) {
"use strict";function e(e,t,x){x=x||2;var i,u,v,o,p,a,y,h=t&&t.length,l=h?t[0]*x:e.length,s=n(e,0,l,x,!0),c=[];if(!s||s.next===s.prev)return c;if(h&&(s=f(e,t,s,x)),e.length>80*x){i=v=e[0],u=o=e[1];for(var Z=x;Z<l;Z+=x)(p=e[Z])<i&&(i=p),(a=e[Z+1])<u&&(u=a),p>v&&(v=p),a>o&&(o=a);y=0!==(y=Math.max(v-i,o-u))?32767/y:0}return r(s,c,x,i,u,y,0),c}function n(e,n,t,r,x){var i,u;if(x===D(e,n,t,r)>0)for(i=n;i<t;i+=r)u=A(i,e[i],e[i+1],u);else for(i=t-r;i>=n;i-=r)u=A(i,e[i],e[i+1],u);return u&&w(u,u.next)&&(B(u),u=u.next),u}function t(e,n){if(!e)return e;n||(n=e);var t,r=e;do{if(t=!1,r.steiner||!w(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(B(r),(r=n=r.prev)===r.next)break;t=!0}}while(t||r!==n);return n}function r(e,n,f,o,p,a,y){if(e){!y&&a&&h(e,o,p,a);for(var l,s,c=e;e.prev!==e.next;)if(l=e.prev,s=e.next,a?i(e,o,p,a):x(e))n.push(l.i/f|0),n.push(e.i/f|0),n.push(s.i/f|0),B(e),e=s.next,c=s.next;else if((e=s)===c){y?1===y?r(e=u(t(e),n,f),n,f,o,p,a,2):2===y&&v(e,n,f,o,p,a):r(t(e),n,f,o,p,a,1);break}}}function x(e){var n=e.prev,t=e,r=e.next;if(g(n,t,r)>=0)return!1;for(var x=n.x,i=t.x,u=r.x,v=n.y,f=t.y,o=r.y,p=x<i?x<u?x:u:i<u?i:u,a=v<f?v<o?v:o:f<o?f:o,y=x>i?x>u?x:u:i>u?i:u,h=v>f?v>o?v:o:f>o?f:o,l=r.next;l!==n;){if(l.x>=p&&l.x<=y&&l.y>=a&&l.y<=h&&Z(x,v,i,f,u,o,l.x,l.y)&&g(l.prev,l,l.next)>=0)return!1;l=l.next}return!0}function i(e,n,t,r){var x=e.prev,i=e,u=e.next;if(g(x,i,u)>=0)return!1;for(var v=x.x,f=i.x,o=u.x,p=x.y,a=i.y,y=u.y,h=v<f?v<o?v:o:f<o?f:o,l=p<a?p<y?p:y:a<y?a:y,c=v>f?v>o?v:o:f>o?f:o,d=p>a?p>y?p:y:a>y?a:y,w=s(h,l,n,t,r),M=s(c,d,n,t,r),z=e.prevZ,m=e.nextZ;z&&z.z>=w&&m&&m.z<=M;){if(z.x>=h&&z.x<=c&&z.y>=l&&z.y<=d&&z!==x&&z!==u&&Z(v,p,f,a,o,y,z.x,z.y)&&g(z.prev,z,z.next)>=0)return!1;if(z=z.prevZ,m.x>=h&&m.x<=c&&m.y>=l&&m.y<=d&&m!==x&&m!==u&&Z(v,p,f,a,o,y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;z&&z.z>=w;){if(z.x>=h&&z.x<=c&&z.y>=l&&z.y<=d&&z!==x&&z!==u&&Z(v,p,f,a,o,y,z.x,z.y)&&g(z.prev,z,z.next)>=0)return!1;z=z.prevZ}for(;m&&m.z<=M;){if(m.x>=h&&m.x<=c&&m.y>=l&&m.y<=d&&m!==x&&m!==u&&Z(v,p,f,a,o,y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function u(e,n,r){var x=e;do{var i=x.prev,u=x.next.next;!w(i,u)&&M(i,x,x.next,u)&&k(i,u)&&k(u,i)&&(n.push(i.i/r|0),n.push(x.i/r|0),n.push(u.i/r|0),B(x),B(x.next),x=e=u),x=x.next}while(x!==e);return t(x)}function v(e,n,x,i,u,v){var f=e;do{for(var o=f.next.next;o!==f.prev;){if(f.i!==o.i&&d(f,o)){var p=q(f,o);return f=t(f,f.next),p=t(p,p.next),r(f,n,x,i,u,v,0),void r(p,n,x,i,u,v,0)}o=o.next}f=f.next}while(f!==e)}function f(e,t,r,x){var i,u,v,f=[];for(i=0,u=t.length;i<u;i++)(v=n(e,t[i]*x,i<u-1?t[i+1]*x:e.length,x,!1))===v.next&&(v.steiner=!0),f.push(c(v));for(f.sort(o),i=0;i<f.length;i++)r=p(f[i],r);return r}function o(e,n){return e.x-n.x}function p(e,n){var r=a(e,n);if(!r)return n;var x=q(r,e);return t(x,x.next),t(r,r.next)}function a(e,n){var t,r=n,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var v=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(v<=x&&v>u&&(u=v,t=r.x<r.next.x?r:r.next,v===x))return t}r=r.next}while(r!==n);if(!t)return null;var f,o=t,p=t.x,a=t.y,h=1/0;r=t;do{x>=r.x&&r.x>=p&&x!==r.x&&Z(i<a?x:u,i,p,a,i<a?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),k(r,e)&&(f<h||f===h&&(r.x>t.x||r.x===t.x&&y(t,r)))&&(t=r,h=f)),r=r.next}while(r!==o);return t}function y(e,n){return g(e.prev,e,n.prev)<0&&g(n.next,e,e.next)<0}function h(e,n,t,r){var x=e;do{0===x.z&&(x.z=s(x.x,x.y,n,t,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,l(x)}function l(e){var n,t,r,x,i,u,v,f,o=1;do{for(t=e,e=null,i=null,u=0;t;){for(u++,r=t,v=0,n=0;n<o&&(v++,r=r.nextZ);n++);for(f=o;v>0||f>0&&r;)0!==v&&(0===f||!r||t.z<=r.z)?(x=t,t=t.nextZ,v--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;t=r}i.nextZ=null,o*=2}while(u>1);return e}function s(e,n,t,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-t)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-r)*x|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function c(e){var n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function Z(e,n,t,r,x,i,u,v){return(x-u)*(n-v)>=(e-u)*(i-v)&&(e-u)*(r-v)>=(t-u)*(n-v)&&(t-u)*(i-v)>=(x-u)*(r-v)}function d(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!b(e,n)&&(k(e,n)&&k(n,e)&&j(e,n)&&(g(e.prev,e,n.prev)||g(e,n.prev,n))||w(e,n)&&g(e.prev,e,e.next)>0&&g(n.prev,n,n.next)>0)}function g(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function w(e,n){return e.x===n.x&&e.y===n.y}function M(e,n,t,r){var x=m(g(e,n,t)),i=m(g(e,n,r)),u=m(g(t,r,e)),v=m(g(t,r,n));return x!==i&&u!==v||(!(0!==x||!z(e,t,n))||(!(0!==i||!z(e,r,n))||(!(0!==u||!z(t,e,r))||!(0!==v||!z(t,n,r)))))}function z(e,n,t){return n.x<=Math.max(e.x,t.x)&&n.x>=Math.min(e.x,t.x)&&n.y<=Math.max(e.y,t.y)&&n.y>=Math.min(e.y,t.y)}function m(e){return e>0?1:e<0?-1:0}function b(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&M(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function k(e,n){return g(e.prev,e,e.next)<0?g(e,n,e.next)>=0&&g(e,e.prev,n)>=0:g(e,n,e.prev)<0||g(e,e.next,n)<0}function j(e,n){var t=e,r=!1,x=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&x<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}function q(e,n){var t=new C(e.i,e.x,e.y),r=new C(n.i,n.x,n.y),x=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=x,x.prev=t,r.next=t,t.prev=r,i.next=r,r.prev=i,r}function A(e,n,t,r){var x=new C(e,n,t);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function C(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D(e,n,t,r){for(var x=0,i=n,u=t-r;i<t;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}module.exports=e,module.exports.default=e,e.deviation=function(e,n,t,r){var x=n&&n.length,i=x?n[0]*t:e.length,u=Math.abs(D(e,0,i,t));if(x)for(var v=0,f=n.length;v<f;v++){var o=n[v]*t,p=v<f-1?n[v+1]*t:e.length;u-=Math.abs(D(e,o,p,t))}var a=0;for(v=0;v<r.length;v+=3){var y=r[v]*t,h=r[v+1]*t,l=r[v+2]*t;a+=Math.abs((e[y]-e[l])*(e[h+1]-e[y+1])-(e[y]-e[h])*(e[l+1]-e[y+1]))}return 0===u&&0===a?0:Math.abs((a-u)/u)},e.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<n;u++)t.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,t.holes.push(r))}return t};
},{}],"jPg4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.colorDecodeId=m,exports.colorEncodeId=g,exports.getBlankImageData=y,exports.writeLineSegmentToBuffers=d,exports.writePointFeatureToBuffers=h,exports.writePolygonTrianglesToBuffers=v;var t=n(require("earcut")),r=require("../../transform.js"),e=require("../../math.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return l(t)||i(t)||u(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,r){if(t){if("string"==typeof t)return s(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,r):void 0}}function i(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function l(t){if(Array.isArray(t))return s(t)}function s(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var c=[],p={vertexPosition:0,indexPosition:0};function f(t,r,e,n,o){t[r+0]=e,t[r+1]=n,t[r+2]=o}function h(t,r,e,n,o,a){var u=3+o,i=t[r+0],l=t[r+1],s=c;s.length=o;for(var h=0;h<s.length;h++)s[h]=t[r+2+h];var d=a?a.vertexPosition:0,v=a?a.indexPosition:0,y=d/u;return f(e,d,i,l,0),s.length&&e.set(s,d+3),f(e,d+=u,i,l,1),s.length&&e.set(s,d+3),f(e,d+=u,i,l,2),s.length&&e.set(s,d+3),f(e,d+=u,i,l,3),s.length&&e.set(s,d+3),d+=u,n[v++]=y,n[v++]=y+1,n[v++]=y+3,n[v++]=y+1,n[v++]=y+2,n[v++]=y+3,p.vertexPosition=d,p.indexPosition=v,p}function d(t,n,a,u,i,l,s,c,p,f){var h=5+c.length,d=l.length/h,v=[t[n+0],t[n+1]],y=[t[a],t[a+1]],g=(0,r.apply)(f,[].concat(v)),m=(0,r.apply)(f,[].concat(y));function M(t,r,e){return Math.round(1500*r)+1e4*Math.round(1500*e)+1e4*t*1e4}function x(t,r,n){var o=Math.sqrt((r[0]-t[0])*(r[0]-t[0])+(r[1]-t[1])*(r[1]-t[1])),a=[(r[0]-t[0])/o,(r[1]-t[1])/o],u=[-a[1],a[0]],i=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),l=[(n[0]-t[0])/i,(n[1]-t[1])/i],s=0===o||0===i?0:Math.acos((0,e.clamp)(l[0]*a[0]+l[1]*a[1],-1,1));return l[0]*u[0]+l[1]*u[1]>0?s:2*Math.PI-s}var b=null!==i,P=0,A=0;if(null!==u){var I=[t[u],t[u+1]];P=x(g,m,(0,r.apply)(f,[].concat(I)))}if(b){var w=[t[i],t[i+1]];A=x(m,g,(0,r.apply)(f,[].concat(w)))}l.push(v[0],v[1],y[0],y[1],M(0,P,A)),l.push.apply(l,o(c)),l.push(v[0],v[1],y[0],y[1],M(1,P,A)),l.push.apply(l,o(c)),l.push(v[0],v[1],y[0],y[1],M(2,P,A)),l.push.apply(l,o(c)),l.push(v[0],v[1],y[0],y[1],M(3,P,A)),l.push.apply(l,o(c)),s.push(d,d+1,d+2,d+1,d+3,d+2)}function v(r,e,n,a,u){var i=2+u,l=e,s=r.slice(l,l+u);l+=u;for(var c=r[l++],p=0,f=new Array(c-1),h=0;h<c;h++)p+=r[l++],h<c-1&&(f[h]=p);for(var d=r.slice(l,l+2*p),v=(0,t.default)(d,f,2),y=0;y<v.length;y++)a.push(v[y]+n.length/i);for(var g=0;g<d.length;g+=2)n.push.apply(n,[d[g],d[g+1]].concat(o(s)));return l+2*p}function y(){var t=document.createElement("canvas").getContext("2d").createImageData(1,1);return t.data[0]=255,t.data[1]=255,t.data[2]=255,t.data[3]=255,t}function g(t,r){return(r=r||[])[0]=Math.floor(t/256/256/256)/255,r[1]=Math.floor(t/256/256)%256/255,r[2]=Math.floor(t/256)%256/255,r[3]=t%256/255,r}function m(t){var r=0;return r+=Math.round(256*t[0]*256*256*255),r+=Math.round(256*t[1]*256*255),r+=Math.round(256*t[2]*255),r+=Math.round(255*t[3])}
},{"earcut":"vwhv","../../transform.js":"Ln8D","../../math.js":"qAK2"}],"aLwy":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;function t(){var t='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS",r={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:\'`renderMode` must be `"hybrid"` or `"vector"`\',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class o extends Error{constructor(e){const t=r[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}var i=o;function a(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function s(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new i(t)}(0!==n,32);const o=t[0],a=t[1],s=t[2],u=t[3],f=t[4],x=t[5];return e[0]=u/n,e[1]=-a/n,e[2]=-s/n,e[3]=o/n,e[4]=(s*x-u*f)/n,e[5]=-(o*x-a*f)/n,e}function u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var f={exports:{}};function x(e,t,n){n=n||2;var r,o,i,a,s,u,f,x=t&&t.length,h=x?t[0]*n:e.length,v=l(e,0,h,n,!0),d=[];if(!v||v.next===v.prev)return d;if(x&&(v=function(e,t,n,r){var o,i,a,s=[];for(o=0,i=t.length;o<i;o++)(a=l(e,t[o]*r,o<i-1?t[o+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(A(a));for(s.sort(b),o=0;o<s.length;o++)n=g(s[o],n);return n}(e,t,v,n)),e.length>80*n){r=i=e[0],o=a=e[1];for(var y=n;y<h;y+=n)(s=e[y])<r&&(r=s),(u=e[y+1])<o&&(o=u),s>i&&(i=s),u>a&&(a=u);f=0!==(f=Math.max(i-r,a-o))?32767/f:0}return c(v,d,n,r,o,f,0),d}function l(e,t,n,r,o){var i,a;if(o===P(e,t,n,r)>0)for(i=t;i<n;i+=r)a=k(i,e[i],e[i+1],a);else for(i=n-r;i>=t;i-=r)a=k(i,e[i],e[i+1],a);return a&&F(a,a.next)&&(R(a),a=a.next),a}function h(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!F(r,r.next)&&0!==Z(r.prev,r,r.next))r=r.next;else{if(R(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function c(e,t,n,r,o,i,a){if(e){!a&&i&&function(e,t,n,r){var o=e;do{0===o.z&&(o.z=w(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,r,o,i,a,s,u,f=1;do{for(n=e,e=null,i=null,a=0;n;){for(a++,r=n,s=0,t=0;t<f&&(s++,r=r.nextZ);t++);for(u=f;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(o=n,n=n.nextZ,s--):(o=r,r=r.nextZ,u--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;n=r}i.nextZ=null,f*=2}while(a>1)}(o)}(e,r,o,i);for(var s,u,f=e;e.prev!==e.next;)if(s=e.prev,u=e.next,i?d(e,r,o,i):v(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),R(e),e=u.next,f=u.next;else if((e=u)===f){a?1===a?c(e=y(h(e),t,n),t,n,r,o,i,2):2===a&&p(e,t,n,r,o,i):c(h(e),t,n,r,o,i,1);break}}}function v(e){var t=e.prev,n=e,r=e.next;if(Z(t,n,r)>=0)return!1;for(var o=t.x,i=n.x,a=r.x,s=t.y,u=n.y,f=r.y,x=o<i?o<a?o:a:i<a?i:a,l=s<u?s<f?s:f:u<f?u:f,h=o>i?o>a?o:a:i>a?i:a,c=s>u?s>f?s:f:u>f?u:f,v=r.next;v!==t;){if(v.x>=x&&v.x<=h&&v.y>=l&&v.y<=c&&E(o,s,i,u,a,f,v.x,v.y)&&Z(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function d(e,t,n,r){var o=e.prev,i=e,a=e.next;if(Z(o,i,a)>=0)return!1;for(var s=o.x,u=i.x,f=a.x,x=o.y,l=i.y,h=a.y,c=s<u?s<f?s:f:u<f?u:f,v=x<l?x<h?x:h:l<h?l:h,d=s>u?s>f?s:f:u>f?u:f,y=x>l?x>h?x:h:l>h?l:h,p=w(c,v,t,n,r),b=w(d,y,t,n,r),g=e.prevZ,m=e.nextZ;g&&g.z>=p&&m&&m.z<=b;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&E(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;if(g=g.prevZ,m.x>=c&&m.x<=d&&m.y>=v&&m.y<=y&&m!==o&&m!==a&&E(s,x,u,l,f,h,m.x,m.y)&&Z(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;g&&g.z>=p;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&E(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;m&&m.z<=b;){if(m.x>=c&&m.x<=d&&m.y>=v&&m.y<=y&&m!==o&&m!==a&&E(s,x,u,l,f,h,m.x,m.y)&&Z(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function y(e,t,n){var r=e;do{var o=r.prev,i=r.next.next;!F(o,i)&&T(o,r,r.next,i)&&z(o,i)&&z(i,o)&&(t.push(o.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),R(r),R(r.next),r=e=i),r=r.next}while(r!==e);return h(r)}function p(e,t,n,r,o,i){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&M(a,s)){var u=U(a,s);return a=h(a,a.next),u=h(u,u.next),c(a,t,n,r,o,i,0),void c(u,t,n,r,o,i,0)}s=s.next}a=a.next}while(a!==e)}function b(e,t){return e.x-t.x}function g(e,t){var n=function(e,t){var n,r=t,o=e.x,i=e.y,a=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===o))return n}r=r.next}while(r!==t);if(!n)return null;var u,f=n,x=n.x,l=n.y,h=1/0;r=n;do{o>=r.x&&r.x>=x&&o!==r.x&&E(i<l?o:a,i,x,l,i<l?a:o,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(o-r.x),z(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&m(n,r)))&&(n=r,h=u)),r=r.next}while(r!==f);return n}(e,t);if(!n)return t;var r=U(n,e);return h(r,r.next),h(n,n.next)}function m(e,t){return Z(e.prev,e,t.prev)<0&&Z(t.next,e,e.next)<0}function w(e,t,n,r,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function A(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function E(e,t,n,r,o,i,a,s){return(o-a)*(t-s)>=(e-a)*(i-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(i-s)>=(o-a)*(r-s)}function M(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&T(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Z(e.prev,e,t.prev)||Z(e,t.prev,t))||F(e,t)&&Z(e.prev,e,e.next)>0&&Z(t.prev,t,t.next)>0)}function Z(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function F(e,t){return e.x===t.x&&e.y===t.y}function T(e,t,n,r){var o=S(Z(e,t,n)),i=S(Z(e,t,r)),a=S(Z(n,r,e)),s=S(Z(n,r,t));return o!==i&&a!==s||(!(0!==o||!I(e,n,t))||(!(0!==i||!I(e,r,t))||(!(0!==a||!I(n,e,r))||!(0!==s||!I(n,t,r)))))}function I(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function S(e){return e>0?1:e<0?-1:0}function z(e,t){return Z(e.prev,e,e.next)<0?Z(e,t,e.next)>=0&&Z(e,e.prev,t)>=0:Z(e,t,e.prev)<0||Z(e,e.next,t)<0}function U(e,t){var n=new B(e.i,e.x,e.y),r=new B(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function k(e,t,n,r){var o=new B(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function R(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function B(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(e,t,n,r){for(var o=0,i=t,a=n-r;i<n;i+=r)o+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return o}f.exports=x,f.exports.default=x,x.deviation=function(e,t,n,r){var o=t&&t.length,i=o?t[0]*n:e.length,a=Math.abs(P(e,0,i,n));if(o)for(var s=0,u=t.length;s<u;s++){var f=t[s]*n,x=s<u-1?t[s+1]*n:e.length;a-=Math.abs(P(e,f,x,n))}var l=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,c=r[s+1]*n,v=r[s+2]*n;l+=Math.abs((e[h]-e[v])*(e[c+1]-e[h+1])-(e[h]-e[c])*(e[v+1]-e[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},x.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var a=0;a<t;a++)n.vertices.push(e[o][i][a]);o>0&&(r+=e[o-1].length,n.holes.push(r))}return n};var N=u(f.exports);const _=[],O={vertexPosition:0,indexPosition:0};function q(e,t,n,r,o){e[t+0]=n,e[t+1]=r,e[t+2]=o}function L(e,t,n,r,o,i){const a=3+o,s=e[t+0],u=e[t+1],f=_;f.length=o;for(let n=0;n<f.length;n++)f[n]=e[t+2+n];let x=i?i.vertexPosition:0,l=i?i.indexPosition:0;const h=x/a;return q(n,x,s,u,0),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,1),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,2),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,3),f.length&&n.set(f,x+3),x+=a,r[l++]=h,r[l++]=h+1,r[l++]=h+3,r[l++]=h+1,r[l++]=h+2,r[l++]=h+3,O.vertexPosition=x,O.indexPosition=l,O}function C(e,t,n,r,o,i,s,u,f,x){const l=5+u.length,h=i.length/l,c=[e[t+0],e[t+1]],v=[e[n],e[n+1]],d=a(x,[...c]),y=a(x,[...v]);function p(e,t,n){const r=1e4;return Math.round(1500*t)+Math.round(1500*n)*r+e*r*r}function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),o=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-o[1],o[0]],a=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),s=[(n[0]-e[0])/a,(n[1]-e[1])/a],u=0===r||0===a?0:Math.acos((f=s[0]*o[0]+s[1]*o[1],x=-1,l=1,Math.min(Math.max(f,x),l)));var f,x,l;return s[0]*i[0]+s[1]*i[1]>0?u:2*Math.PI-u}const g=null!==o;let m=0,w=0;if(null!==r){m=b(d,y,a(x,[...[e[r],e[r+1]]]))}if(g){w=b(y,d,a(x,[...[e[o],e[o+1]]]))}i.push(c[0],c[1],v[0],v[1],p(0,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(1,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(2,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(3,m,w)),i.push(...u),s.push(h,h+1,h+2,h+1,h+3,h+2)}function G(e,t,n,r,o){const i=2+o;let a=t;const s=e.slice(a,a+o);a+=o;const u=e[a++];let f=0;const x=new Array(u-1);for(let t=0;t<u;t++)f+=e[a++],t<u-1&&(x[t]=f);const l=e.slice(a,a+2*f),h=N(l,x,2);for(let e=0;e<h.length;e++)r.push(h[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...s);return a+2*f}const j=self;j.onmessage=r=>{const o=r.data;switch(o.type){case t:{const e=3,t=2,n=o.customAttributesSize,r=t+n,i=new Float32Array(o.renderInstructions),a=i.length/r,s=4*a*(n+e),u=new Uint32Array(6*a),f=new Float32Array(s);let x;for(let e=0;e<i.length;e+=r)x=L(i,e,f,u,n,x);const l=Object.assign({vertexBuffer:f.buffer,indexBuffer:u.buffer,renderInstructions:i.buffer},o);j.postMessage(l,[f.buffer,u.buffer,i.buffer]);break}case n:{const e=[],t=[],n=o.customAttributesSize,r=2,i=new Float32Array(o.renderInstructions);let a=0;const u=o.renderInstructionsTransform,f=[1,0,0,1,0,0];let x,l;for(s(f,u);a<i.length;){l=Array.from(i.slice(a,a+n)),a+=n,x=i[a++];for(let n=0;n<x-1;n++)C(i,a+n*r,a+(n+1)*r,n>0?a+(n-1)*r:null,n<x-2?a+(n+2)*r:null,e,t,l,0,f);a+=x*r}const h=Uint32Array.from(t),c=Float32Array.from(e),v=Object.assign({vertexBuffer:c.buffer,indexBuffer:h.buffer,renderInstructions:i.buffer},o);j.postMessage(v,[c.buffer,h.buffer,i.buffer]);break}case e:{const e=[],t=[],n=o.customAttributesSize,r=new Float32Array(o.renderInstructions);let i=0;for(;i<r.length;)i=G(r,i,e,t,n);const a=Uint32Array.from(t),s=Float32Array.from(e),u=Object.assign({vertexBuffer:s.buffer,indexBuffer:a.buffer,renderInstructions:r.buffer},o);j.postMessage(u,[s.buffer,a.buffer,r.buffer]);break}}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+e.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=t;
},{"buffer":"dskh"}],"Wctp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("../../layer/BaseVector.js")),t=y(require("../../source/VectorEventType.js")),r=y(require("../../ViewHint.js")),i=y(require("../../webgl/Buffer.js")),n=y(require("./Layer.js")),s=y(require("../../webgl/RenderTarget.js")),o=require("../../webgl.js"),a=require("../../webgl/Helper.js"),u=require("../../render/webgl/constants.js"),h=require("../../transform.js"),f=require("../../asserts.js"),c=require("../../extent.js"),l=require("../../render/webgl/utils.js"),d=require("../../worker/webgl.js"),p=require("../../util.js"),_=require("../../events.js");function y(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,R(i.key),i)}}function v(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function R(e){var t=T(e,"string");return"symbol"===m(t)?t:String(t)}function T(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==m(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function A(){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=E(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=j();return function(){var r,i=P(e);if(t){var n=P(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return F(this,r)}}function F(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(y){I(b,n.default);var m=S(b);function b(e,r){var n;g(this,b);var s=r.uniforms||{},f=(0,h.create)();s[a.DefaultUniform.PROJECTION_MATRIX]=f,(n=m.call(this,e,{uniforms:s,postProcesses:r.postProcesses})).sourceRevision_=-1,n.verticesBuffer_=new i.default(o.ARRAY_BUFFER,o.DYNAMIC_DRAW),n.hitVerticesBuffer_=new i.default(o.ARRAY_BUFFER,o.DYNAMIC_DRAW),n.indicesBuffer_=new i.default(o.ELEMENT_ARRAY_BUFFER,o.DYNAMIC_DRAW),n.vertexShader_=r.vertexShader,n.fragmentShader_=r.fragmentShader,n.program_,n.hitDetectionEnabled_=!(!r.hitFragmentShader||!r.hitVertexShader),n.hitVertexShader_=r.hitVertexShader,n.hitFragmentShader_=r.hitFragmentShader,n.hitProgram_;var l=r.attributes?r.attributes.map(function(e){return{name:"a_"+e.name,size:1,type:a.AttributeType.FLOAT}}):[];n.attributes=[{name:"a_position",size:2,type:a.AttributeType.FLOAT},{name:"a_index",size:1,type:a.AttributeType.FLOAT}].concat(l),n.hitDetectionAttributes=[{name:"a_position",size:2,type:a.AttributeType.FLOAT},{name:"a_index",size:1,type:a.AttributeType.FLOAT},{name:"a_hitColor",size:4,type:a.AttributeType.FLOAT},{name:"a_featureUid",size:1,type:a.AttributeType.FLOAT}].concat(l),n.customAttributes=r.attributes?r.attributes:[],n.previousExtent_=(0,c.createEmpty)(),n.currentTransform_=f,n.renderTransform_=(0,h.create)(),n.invertRenderTransform_=(0,h.create)(),n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_,n.lastSentId=0,n.worker_=(0,d.create)(),n.worker_.addEventListener("message",function(e){var t=e.data;if(t.type===u.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS){var r=t.projectionTransform;t.hitDetection?(n.hitVerticesBuffer_.fromArrayBuffer(t.vertexBuffer),n.helper.flushBufferData(n.hitVerticesBuffer_)):(n.verticesBuffer_.fromArrayBuffer(t.vertexBuffer),n.helper.flushBufferData(n.verticesBuffer_)),n.indicesBuffer_.fromArrayBuffer(t.indexBuffer),n.helper.flushBufferData(n.indicesBuffer_),n.renderTransform_=r,(0,h.makeInverse)(n.invertRenderTransform_,n.renderTransform_),t.hitDetection?n.hitRenderInstructions_=new Float32Array(e.data.renderInstructions):(n.renderInstructions_=new Float32Array(e.data.renderInstructions),t.id===n.lastSentId&&(n.ready=!0)),n.getLayer().changed()}}),n.featureCache_={},n.featureCount_=0;var y=n.getLayer().getSource();return n.sourceListenKeys_=[(0,_.listen)(y,t.default.ADDFEATURE,n.handleSourceFeatureAdded_,B(n)),(0,_.listen)(y,t.default.CHANGEFEATURE,n.handleSourceFeatureChanged_,B(n)),(0,_.listen)(y,t.default.REMOVEFEATURE,n.handleSourceFeatureDelete_,B(n)),(0,_.listen)(y,t.default.CLEAR,n.handleSourceFeatureClear_,B(n))],y.forEachFeature(function(e){n.featureCache_[(0,p.getUid)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},n.featureCount_++}),n}return v(b,[{key:"afterHelperCreated",value:function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitProgram_=this.helper.getProgram(this.hitFragmentShader_,this.hitVertexShader_),this.hitRenderTarget_=new s.default(this.helper))}},{key:"handleSourceFeatureAdded_",value:function(e){var t=e.feature;this.featureCache_[(0,p.getUid)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}},{key:"handleSourceFeatureChanged_",value:function(e){var t=e.feature;this.featureCache_[(0,p.getUid)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}}},{key:"handleSourceFeatureDelete_",value:function(e){var t=e.feature;delete this.featureCache_[(0,p.getUid)(t)],this.featureCount_--}},{key:"handleSourceFeatureClear_",value:function(){this.featureCache_={},this.featureCount_=0}},{key:"renderFrame",value:function(e){var t=this.helper.getGL();this.preRender(t,e);var r=e.viewState.projection,i=this.getLayer().getSource().getWrapX()&&r.canWrapX(),n=r.getExtent(),s=e.extent,o=i?(0,c.getWidth)(n):null,a=i?Math.ceil((s[2]-n[2])/o)+1:1,u=i?Math.floor((s[0]-n[0])/o):0,f=u,l=this.indicesBuffer_.getSize();do{this.helper.makeProjectionTransform(e,this.currentTransform_),(0,h.translate)(this.currentTransform_,f*o,0),(0,h.multiply)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.drawElements(0,l)}while(++f<a);this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var d=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderHitDetection(e,u,a,o),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),d}},{key:"prepareFrameInternal",value:function(t){var i=this.getLayer(),n=i.getSource(),s=t.viewState,o=!t.viewHints[r.default.ANIMATING]&&!t.viewHints[r.default.INTERACTING],a=!(0,c.equals)(this.previousExtent_,t.extent),u=this.sourceRevision_<n.getRevision();if(u&&(this.sourceRevision_=n.getRevision()),o&&(a||u)){var h=s.projection,f=s.resolution,l=i instanceof e.default?i.getRenderBuffer():0,d=(0,c.buffer)(t.extent,l*f);n.loadFeatures(d,f,h),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}},{key:"rebuildBuffers_",value:function(e){var t=(0,h.create)();this.helper.makeProjectionTransform(e,t);var r,i,n=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===n||(this.renderInstructions_=new Float32Array(n)),this.hitDetectionEnabled_){var s=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===s||(this.hitRenderInstructions_=new Float32Array(s))}var o,a=[],f=[],c=0,d=0;for(var p in this.featureCache_)if((i=(r=this.featureCache_[p]).geometry)&&"Point"===i.getType()){a[0]=i.getFlatCoordinates()[0],a[1]=i.getFlatCoordinates()[1],(0,h.apply)(t,a),o=(0,l.colorEncodeId)(d+6,f),this.renderInstructions_[c++]=a[0],this.renderInstructions_[c++]=a[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[d++]=a[0],this.hitRenderInstructions_[d++]=a[1],this.hitRenderInstructions_[d++]=o[0],this.hitRenderInstructions_[d++]=o[1],this.hitRenderInstructions_[d++]=o[2],this.hitRenderInstructions_[d++]=o[3],this.hitRenderInstructions_[d++]=Number(p));for(var _=void 0,y=0;y<this.customAttributes.length;y++)_=this.customAttributes[y].callback(r.feature,r.properties),this.renderInstructions_[c++]=_,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[d++]=_)}var m={id:++this.lastSentId,type:u.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:this.customAttributes.length};if(m.projectionTransform=t,this.ready=!1,this.worker_.postMessage(m,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var g={id:0,type:u.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesSize:5+this.customAttributes.length};g.projectionTransform=t,g.hitDetection=!0,this.worker_.postMessage(g,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,i,n){if((0,f.assert)(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var s=(0,h.apply)(t.coordinateToPixelTransform,e.slice()),o=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),a=[o[0]/255,o[1]/255,o[2]/255,o[3]/255],u=(0,l.colorDecodeId)(a),c=this.hitRenderInstructions_[u],d=Math.floor(c).toString(),p=this.getLayer().getSource().getFeatureByUid(d);return p?i(p,this.getLayer(),null):void 0}}},{key:"renderHitDetection",value:function(e,t,r,i){if(this.hitVerticesBuffer_.getSize()){var n=t;this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.useProgram(this.hitProgram_,e),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),(0,h.translate)(this.currentTransform_,n*i,0),(0,h.multiply)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e);var s=this.indicesBuffer_.getSize();this.helper.drawElements(0,s)}while(++n<r)}}},{key:"disposeInternal",value:function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){(0,_.unlistenByKey)(e)}),this.sourceListenKeys_=null,A(P(b.prototype),"disposeInternal",this).call(this)}}]),b}(),D=C;exports.default=D;
},{"../../layer/BaseVector.js":"sJYl","../../source/VectorEventType.js":"fn6i","../../ViewHint.js":"DfOy","../../webgl/Buffer.js":"As8l","./Layer.js":"CXrm","../../webgl/RenderTarget.js":"yS04","../../webgl.js":"HPlr","../../webgl/Helper.js":"ttZe","../../render/webgl/constants.js":"eRlL","../../transform.js":"Ln8D","../../asserts.js":"DVOE","../../extent.js":"L0Vw","../../render/webgl/utils.js":"jPg4","../../worker/webgl.js":"aLwy","../../util.js":"KA50","../../events.js":"MGag"}],"FiPw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./BaseVector.js")),t=o(require("../renderer/webgl/PointsLayer.js")),n=require("../math.js"),r=require("../dom.js");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function f(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=s(e,"string");return"symbol"===i(t)?t:String(t)}function s(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=p();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},m=["#00f","#0ff","#0f0","#ff0","#f00"],x=function(r){c(i,e.default);var o=v(i);function i(e){var t;a(this,i),e=e||{};var n=Object.assign({},e);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,(t=o.call(this,n)).gradient_=null,t.addChangeListener(y.GRADIENT,t.handleGradientChanged_),t.setGradient(e.gradient?e.gradient:m),t.setBlur(void 0!==e.blur?e.blur:15),t.setRadius(void 0!==e.radius?e.radius:8);var r=e.weight?e.weight:"weight";return t.weightFunction_="string"==typeof r?function(e){return e.get(r)}:r,t.setRenderOrder(null),t}return f(i,[{key:"getBlur",value:function(){return this.get(y.BLUR)}},{key:"getGradient",value:function(){return this.get(y.GRADIENT)}},{key:"getRadius",value:function(){return this.get(y.RADIUS)}},{key:"handleGradientChanged_",value:function(){this.gradient_=b(this.getGradient())}},{key:"setBlur",value:function(e){this.set(y.BLUR,e)}},{key:"setGradient",value:function(e){this.set(y.GRADIENT,e)}},{key:"setRadius",value:function(e){this.set(y.RADIUS,e)}},{key:"createRenderer",value:function(){var e=this;return new t.default(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var r=e.weightFunction_(t);return void 0!==r?(0,n.clamp)(r,0,1):1}}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(e.get(y.RADIUS)+e.get(y.BLUR))},u_blurSlope:function(){return e.get(y.RADIUS)/Math.max(1,e.get(y.BLUR))}},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return e.gradient_},u_opacity:function(){return e.getOpacity()}}}]})}},{key:"renderDeclutter",value:function(){}}]),i}();function b(e){for(var t=(0,r.createCanvasContext2D)(1,256),n=t.createLinearGradient(0,0,1,256),o=1/(e.length-1),i=0,a=e.length;i<a;++i)n.addColorStop(i*o,e[i]);return t.fillStyle=n,t.fillRect(0,0,1,256),t.canvas}var C=x;exports.default=C;
},{"./BaseVector.js":"sJYl","../renderer/webgl/PointsLayer.js":"Wctp","../math.js":"qAK2","../dom.js":"FYLQ"}],"pIP7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../events/Event.js")),t=u(require("../events/EventType.js")),r=u(require("../format/MVT.js")),n=u(require("../layer/VectorTile.js")),o=u(require("../source/VectorTile.js")),i=require("ol-mapbox-style");function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function l(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=f(e,"string");return"symbol"===c(t)?t:String(t)}function f(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=h();return function(){var r,n=O(e);if(t){var o=O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(r){d(o,e.default);var n=b(o);function o(e){var r;return p(this,o),(r=n.call(this,t.default.ERROR)).error=e,r}return l(o)}(),j=function(e){d(u,n.default);var t=b(u);function u(e){var n;p(this,u);var c=!("declutter"in e)||e.declutter,a=new o.default({state:"loading",format:new r.default});n=t.call(this,{source:a,background:e.background,declutter:c,className:e.className,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,minResolution:e.minResolution,maxResolution:e.maxResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,renderOrder:e.renderOrder,renderBuffer:e.renderBuffer,renderMode:e.renderMode,map:e.map,updateWhileAnimating:e.updateWhileAnimating,updateWhileInteracting:e.updateWhileInteracting,preload:e.preload,useInterimTilesOnError:e.useInterimTilesOnError,properties:e.properties}),e.accessToken&&(n.accessToken=e.accessToken);var l=e.styleUrl;return(0,i.applyStyle)(v(n),l,e.layers||e.source,{accessToken:n.accessToken}).then(function(){a.setState("ready")}).catch(function(e){n.dispatchEvent(new g(e)),n.getSource().setState("error")}),void 0===n.getBackground()&&(0,i.applyBackground)(v(n),e.styleUrl,{accessToken:n.accessToken}),n}return l(u)}(),w=j;exports.default=w;
},{"../events/Event.js":"M1Cf","../events/EventType.js":"GUXn","../format/MVT.js":"CAny","../layer/VectorTile.js":"g0oQ","../source/VectorTile.js":"EYMU","ol-mapbox-style":"Pq51"}],"dEhx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("./ImageLayer.js")),t=l(require("./VectorLayer.js")),r=l(require("../../events/EventType.js")),n=l(require("../../ImageCanvas.js")),o=l(require("../../ImageState.js")),i=l(require("rbush")),a=l(require("../../ViewHint.js")),u=require("../../transform.js"),c=require("../../extent.js");function l(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=v(e,"string");return"symbol"===s(t)?t:String(t)}function v(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=b(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=T();return function(){var r,n=w(e);if(t){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(l){m(p,e.default);var s=_(p);function p(e){var r;return f(this,p),(r=s.call(this,e)).vectorRenderer_=new t.default(e),r.layerImageRatio_=e.getImageRatio(),r.coordinateToVectorPixelTransform_=(0,u.create)(),r.renderedPixelToCoordinateTransform_=null,r}return d(p,[{key:"disposeInternal",value:function(){this.vectorRenderer_.dispose(),h(w(p.prototype),"disposeInternal",this).call(this)}},{key:"getFeatures",value:function(e){if(!this.vectorRenderer_)return Promise.resolve([]);var t=(0,u.apply)(this.coordinateToVectorPixelTransform_,(0,u.apply)(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)}},{key:"handleFontsChanged",value:function(){this.vectorRenderer_.handleFontsChanged()}},{key:"prepareFrame",value:function(e){var t=this,l=e.pixelRatio,s=e.viewState,f=s.resolution,p=e.viewHints,d=this.vectorRenderer_,y=e.extent;1!==this.layerImageRatio_&&(y=y.slice(0),(0,c.scaleFromCenter)(y,this.layerImageRatio_));var v=(0,c.getWidth)(y)/f,h=(0,c.getHeight)(y)/f;if(!p[a.default.ANIMATING]&&!p[a.default.INTERACTING]&&!(0,c.isEmpty)(y)){d.useContainer(null,null);var b=d.context,m=e.layerStatesArray[e.layerIndex];b.globalAlpha=m.opacity;var g=Object.assign({},m,{opacity:1}),_=Object.assign({},e,{declutterTree:new i.default(9),extent:y,size:[v,h],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[g],layerIndex:0}),R=!0,j=new n.default(y,f,l,b.canvas,function(e){d.prepareFrame(_)&&d.replayGroupChanged&&(d.clipping=!1,d.renderFrame(_,null)&&(d.renderDeclutter(_),R=!1),e())});j.addEventListener(r.default.CHANGE,function(){if(j.getState()===o.default.LOADED){t.image_=R?null:j;var e=j.getResolution(),r=j.getPixelRatio(),n=e*l/r;t.renderedResolution=n,t.coordinateToVectorPixelTransform_=(0,u.compose)(t.coordinateToVectorPixelTransform_,v/2,h/2,1/n,-1/n,0,-s.center[0],-s.center[1])}}),j.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}},{key:"preRender",value:function(){}},{key:"postRender",value:function(){}},{key:"renderDeclutter",value:function(){}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,r,n,o):h(w(p.prototype),"forEachFeatureAtCoordinate",this).call(this,e,t,r,n,o)}}]),p}(),P=O;exports.default=P;
},{"./ImageLayer.js":"tvPe","./VectorLayer.js":"QaCa","../../events/EventType.js":"GUXn","../../ImageCanvas.js":"ZO7P","../../ImageState.js":"FoaO","rbush":"CzwG","../../ViewHint.js":"DfOy","../../transform.js":"Ln8D","../../extent.js":"L0Vw"}],"MrKT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./BaseVector.js")),e=r(require("../renderer/canvas/VectorImageLayer.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===n(e)?e:String(e)}function f(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(r){a(i,t.default);var n=s(i);function i(t){var e;o(this,i),t=t||{};var r=Object.assign({},t);return delete r.imageRatio,(e=n.call(this,r)).imageRatio_=void 0!==t.imageRatio?t.imageRatio:1,e}return u(i,[{key:"getImageRatio",value:function(){return this.imageRatio_}},{key:"createRenderer",value:function(){return new e.default(this)}}]),i}(),m=d;exports.default=m;
},{"./BaseVector.js":"sJYl","../renderer/canvas/VectorImageLayer.js":"dEhx"}],"qF0S":[function(require,module,exports) {
"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function t(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,r(o.key),o)}}function o(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}function r(e){var t=i(e,"string");return"symbol"===n(t)?t:String(t)}function i(e,t){if("object"!==n(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShaderBuilder=void 0;var a="uniform mat4 u_projectionMatrix;\nuniform mat4 u_screenToWorldMatrix;\nuniform vec2 u_viewportSizePx;\nuniform float u_pixelRatio;\nuniform float u_globalAlpha;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\nuniform vec4 u_renderExtent;",s=function(){function n(){e(this,n),this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.symbolSizeExpression_="vec2(1.0)",this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_="vec4(1.0)",this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.strokeWidthExpression_="1.0",this.strokeColorExpression_="vec4(1.0)",this.fillColorExpression_="vec4(1.0)",this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}return o(n,[{key:"addUniform",value:function(n){return this.uniforms_.push(n),this}},{key:"addAttribute",value:function(n){return this.attributes_.push(n),this}},{key:"addVarying",value:function(n,e,t){return this.varyings_.push({name:n,type:e,expression:t}),this}},{key:"setSymbolSizeExpression",value:function(n){return this.symbolSizeExpression_=n,this}},{key:"setSymbolRotationExpression",value:function(n){return this.symbolRotationExpression_=n,this}},{key:"setSymbolOffsetExpression",value:function(n){return this.symbolOffsetExpression_=n,this}},{key:"setSymbolColorExpression",value:function(n){return this.symbolColorExpression_=n,this}},{key:"setTextureCoordinateExpression",value:function(n){return this.texCoordExpression_=n,this}},{key:"setFragmentDiscardExpression",value:function(n){return this.discardExpression_=n,this}},{key:"setSymbolRotateWithView",value:function(n){return this.symbolRotateWithView_=n,this}},{key:"setStrokeWidthExpression",value:function(n){return this.strokeWidthExpression_=n,this}},{key:"setStrokeColorExpression",value:function(n){return this.strokeColorExpression_=n,this}},{key:"setFillColorExpression",value:function(n){return this.fillColorExpression_=n,this}},{key:"addVertexShaderFunction",value:function(n){this.vertexShaderFunctions_.includes(n)||this.vertexShaderFunctions_.push(n)}},{key:"addFragmentShaderFunction",value:function(n){this.fragmentShaderFunctions_.includes(n)||this.fragmentShaderFunctions_.push(n)}},{key:"getSymbolVertexShader",value:function(n){var e=this.symbolRotateWithView_?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix",t=this.attributes_,o=this.varyings_;return n&&(t=t.concat("vec4 a_hitColor"),o=o.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\n").concat(t.map(function(n){return"attribute "+n+";"}).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(o.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),"\nvoid main(void) {\n  mat4 offsetMatrix = ").concat(e,";\n  vec2 halfSize = ").concat(this.symbolSizeExpression_," * 0.5;\n  vec2 offset = ").concat(this.symbolOffsetExpression_,";\n  float angle = ").concat(this.symbolRotationExpression_,";\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ").concat(this.texCoordExpression_,";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n").concat(o.map(function(n){return"  "+n.name+" = "+n.expression+";"}).join("\n"),"\n}")}},{key:"getSymbolFragmentShader",value:function(n){var e=n?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",t=this.varyings_;return n&&(t=t.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(t.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\nvoid main(void) {\n  if (").concat(this.discardExpression_,") { discard; }\n  gl_FragColor = ").concat(this.symbolColorExpression_,";\n  gl_FragColor.rgb *= gl_FragColor.a;\n").concat(e,"\n}")}},{key:"getStrokeVertexShader",value:function(n){var e=this.attributes_,t=this.varyings_;return n&&(e=e.concat("vec4 a_hitColor"),t=t.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n".concat(a,"\n").concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec2 a_segmentStart;\nattribute vec2 a_segmentEnd;\nattribute float a_parameters;\n").concat(e.map(function(n){return"attribute "+n+";"}).join("\n"),"\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\n").concat(t.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),"\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvec4 pxToScreen(vec2 pxPos) {\n  vec2 screenPos = pxPos * 4.0 / u_viewportSizePx;\n  return vec4(screenPos.xy, 0.0, 0.0);\n}\n\nvec2 getOffsetDirection(vec2 normalPx, vec2 tangentPx, float joinAngle) {\n  if (cos(joinAngle) > 0.93) return normalPx - tangentPx;\n  float halfAngle = joinAngle / 2.0;\n  vec2 angleBisectorNormal = vec2(\n    sin(halfAngle) * normalPx.x + cos(halfAngle) * normalPx.y,\n    -cos(halfAngle) * normalPx.x + sin(halfAngle) * normalPx.y\n  );\n  float length = 1.0 / sin(halfAngle);\n  return angleBisectorNormal * length;\n}\n\nvoid main(void) {\n  float lineWidth = ").concat(this.strokeWidthExpression_,";\n  float anglePrecision = 1500.0;\n  float paramShift = 10000.0;\n  v_angleStart = fract(a_parameters / paramShift) * paramShift / anglePrecision;\n  v_angleEnd = fract(floor(a_parameters / paramShift + 0.5) / paramShift) * paramShift / anglePrecision;\n  float vertexNumber = floor(a_parameters / paramShift / paramShift + 0.0001);\n  vec2 tangentPx = worldToPx(a_segmentEnd) - worldToPx(a_segmentStart);\n  tangentPx = normalize(tangentPx);\n  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);\n  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;\n  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;\n  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;\n  vec2 offsetPx = getOffsetDirection(normalPx * normalDir, tangentDir * tangentPx, angle) * lineWidth * 0.5;\n  vec2 position =  vertexNumber < 1.5 ? a_segmentStart : a_segmentEnd;\n  gl_Position = u_projectionMatrix * vec4(position, 0.0, 1.0) + pxToScreen(offsetPx);\n  v_segmentStart = worldToPx(a_segmentStart);\n  v_segmentEnd = worldToPx(a_segmentEnd);\n  v_width = lineWidth;\n").concat(t.map(function(n){return"  "+n.name+" = "+n.expression+";"}).join("\n"),"\n}")}},{key:"getStrokeFragmentShader",value:function(n){var e=n?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",t=this.varyings_;return n&&(t=t.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n".concat(a,"\n").concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\n").concat(t.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nfloat segmentDistanceField(vec2 point, vec2 start, vec2 end, float radius) {\n  vec2 startToPoint = point - start;\n  vec2 startToEnd = end - start;\n  float ratio = clamp(dot(startToPoint, startToEnd) / dot(startToEnd, startToEnd), 0.0, 1.0);\n  float dist = length(startToPoint - ratio * startToEnd);\n  return 1.0 - smoothstep(radius - 1.0, radius, dist);\n}\n\nvoid main(void) {\n  vec2 v_currentPoint = gl_FragCoord.xy / u_pixelRatio;\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 v_worldPos = pxToWorld(v_currentPoint);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      v_worldPos[0] < u_renderExtent[0] ||\n      v_worldPos[1] < u_renderExtent[1] ||\n      v_worldPos[0] > u_renderExtent[2] ||\n      v_worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (").concat(this.discardExpression_,") { discard; }\n  gl_FragColor = ").concat(this.strokeColorExpression_," * u_globalAlpha;\n  gl_FragColor *= segmentDistanceField(v_currentPoint, v_segmentStart, v_segmentEnd, v_width);\n").concat(e,"\n}")}},{key:"getFillVertexShader",value:function(n){var e=this.attributes_,t=this.varyings_;return n&&(e=e.concat("vec4 a_hitColor"),t=t.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n".concat(a,"\n").concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\nattribute vec2 a_position;\n").concat(e.map(function(n){return"attribute "+n+";"}).join("\n"),"\n").concat(t.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),"\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n").concat(t.map(function(n){return"  "+n.name+" = "+n.expression+";"}).join("\n"),"\n}")}},{key:"getFillFragmentShader",value:function(n){var e=n?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",t=this.varyings_;return n&&(t=t.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n".concat(a,"\n").concat(this.uniforms_.map(function(n){return"uniform "+n+";"}).join("\n"),"\n").concat(t.map(function(n){return"varying "+n.type+" "+n.name+";"}).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nvoid main(void) {\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 v_worldPos = pxToWorld(gl_FragCoord.xy / u_pixelRatio);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      v_worldPos[0] < u_renderExtent[0] ||\n      v_worldPos[1] < u_renderExtent[1] ||\n      v_worldPos[0] > u_renderExtent[2] ||\n      v_worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (").concat(this.discardExpression_,") { discard; }\n  gl_FragColor = ").concat(this.fillColorExpression_," * u_globalAlpha;\n").concat(e,"\n}")}}]),n}();exports.ShaderBuilder=s;
},{}],"M1py":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(e){var r=o(e,"string");return"symbol"===t(r)?r:String(r)}function o(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,r||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=function(){function t(r,n){e(this,t),this.name=r,this.data=n,this.texture_=null}return n(t,[{key:"getTexture",value:function(t){if(!this.texture_){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}}]),t}(),a=u;exports.default=a;
},{}],"PCNG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asArrayLike=m,exports.asImageLike=b,exports.default=void 0,exports.toArray=_;var t=n(require("./Tile.js")),e=n(require("./TileState.js")),r=require("./dom.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===o(e)?e:String(e)}function f(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=h();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return p(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?t:null}function m(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}var g=null;function _(t){g||(g=(0,r.createCanvasContext2D)(t.width,t.height,void 0,{willReadFrequently:!0}));var e=g.canvas,n=t.width;e.width!==n&&(e.width=n);var o=t.height;return e.height!==o&&(e.height=o),g.clearRect(0,0,n,o),g.drawImage(t,0,0),g.getImageData(0,0,n,o).data}var w=[256,256],O=function(r){l(o,t.default);var n=d(o);function o(t){var r;i(this,o);var a=e.default.IDLE;return(r=n.call(this,t.tileCoord,a,{transition:t.transition,interpolate:t.interpolate})).loader_=t.loader,r.data_=null,r.error_=null,r.size_=t.size||null,r}return u(o,[{key:"getSize",value:function(){if(this.size_)return this.size_;var t=b(this.data_);return t?[t.width,t.height]:w}},{key:"getData",value:function(){return this.data_}},{key:"getError",value:function(){return this.error_}},{key:"load",value:function(){if(this.state===e.default.IDLE||this.state===e.default.ERROR){this.state=e.default.LOADING,this.changed();var t=this;this.loader_().then(function(r){t.data_=r,t.state=e.default.LOADED,t.changed()}).catch(function(r){t.error_=r,t.state=e.default.ERROR,t.changed()})}}}]),o}(),j=O;exports.default=j;
},{"./Tile.js":"iz3u","./TileState.js":"FoaO","./dom.js":"FYLQ"}],"DpUU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=p(require("../DataTile.js")),r=c(require("../events/EventType.js")),i=c(require("../TileState.js")),o=c(require("./Triangulation.js")),n=require("../reproj.js"),a=require("../math.js"),u=require("../dom.js"),s=require("../extent.js"),l=require("../events.js");function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_(i.key),i)}}function y(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e){var t=v(e,"string");return"symbol"===d(t)?t:String(t)}function v(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=w();return function(){var r,i=x(e);if(t){var o=x(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return j(this,r)}}function j(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(c){T(p,t.default);var f=E(p);function p(t){var r;h(this,p),(r=f.call(this,{tileCoord:t.tileCoord,loader:function(){return Promise.resolve(new Uint8Array(4))},interpolate:t.interpolate,transition:t.transition})).pixelRatio_=t.pixelRatio,r.gutter_=t.gutter,r.reprojData_=null,r.reprojError_=null,r.reprojSize_=void 0,r.sourceTileGrid_=t.sourceTileGrid,r.targetTileGrid_=t.targetTileGrid,r.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,r.sourceTiles_=[],r.sourcesListenerKeys_=null,r.sourceZ_=0;var u=r.targetTileGrid_.getTileCoordExtent(r.wrappedTileCoord_),l=r.targetTileGrid_.getExtent(),c=r.sourceTileGrid_.getExtent(),d=l?(0,s.getIntersection)(u,l):u;if(0===(0,s.getArea)(d))return r.state=i.default.EMPTY,j(r);var g=t.sourceProj,y=g.getExtent();y&&(c=c?(0,s.getIntersection)(c,y):y);var _=r.targetTileGrid_.getResolution(r.wrappedTileCoord_[0]),v=t.targetProj,T=(0,n.calculateSourceExtentResolution)(g,v,d,_);if(!isFinite(T)||T<=0)return r.state=i.default.EMPTY,j(r);var b=void 0!==t.errorThreshold?t.errorThreshold:e.ERROR_THRESHOLD;if(r.triangulation_=new o.default(g,v,d,c,T*b,_),0===r.triangulation_.getTriangles().length)return r.state=i.default.EMPTY,j(r);r.sourceZ_=r.sourceTileGrid_.getZForResolution(T);var E=r.triangulation_.calculateSourceExtent();if(c&&(g.canWrapX()?(E[1]=(0,a.clamp)(E[1],c[1],c[3]),E[3]=(0,a.clamp)(E[3],c[1],c[3])):E=(0,s.getIntersection)(E,c)),(0,s.getArea)(E)){for(var m=r.sourceTileGrid_.getTileRangeForExtentAndZ(E,r.sourceZ_),w=t.getTileFunction,x=m.minX;x<=m.maxX;x++)for(var O=m.minY;O<=m.maxY;O++){var P=w(r.sourceZ_,x,O,r.pixelRatio_);P&&r.sourceTiles_.push(P)}0===r.sourceTiles_.length&&(r.state=i.default.EMPTY)}else r.state=i.default.EMPTY;return r}return y(p,[{key:"getSize",value:function(){return this.reprojSize_}},{key:"getData",value:function(){return this.reprojData_}},{key:"getError",value:function(){return this.reprojError_}},{key:"reproject_",value:function(){var e=this,r=[];if(this.sourceTiles_.forEach(function(o){if(o&&o.getState()===i.default.LOADED){var n,a=o.getSize(),u=e.gutter_,s=(0,t.asArrayLike)(o.getData());n=s||(0,t.toArray)((0,t.asImageLike)(o.getData()));var l=[a[0]+2*u,a[1]+2*u],c=n instanceof Float32Array,f=l[0]*l[1],p=c?Float32Array:Uint8Array,d=new p(n.buffer),h=p.BYTES_PER_ELEMENT,g=h*d.length/f,y=d.byteLength/l[1],_=Math.floor(y/h/l[0]),v=f*_,T=d;if(d.length!==v){T=new p(v);for(var b=0,E=0,j=l[0]*_,m=0;m<l[1];++m){for(var w=0;w<j;++w)T[b++]=d[E+w];E+=y/h}}r.push({extent:e.sourceTileGrid_.getTileCoordExtent(o.tileCoord),data:new Uint8Array(T.buffer),dataType:p,bytesPerPixel:g,pixelSize:l})}}),this.sourceTiles_.length=0,0===r.length)this.state=i.default.ERROR;else{for(var o,a,s=this.wrappedTileCoord_[0],l=this.targetTileGrid_.getTileSize(s),c="number"==typeof l?l:l[0],f="number"==typeof l?l:l[1],p=this.targetTileGrid_.getResolution(s),d=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),g=r[0].bytesPerPixel,y=Math.ceil(g/3)-1;y>=0;--y){for(var _=[],v=0,T=r.length;v<T;++v){for(var b=r[v],E=b.data,j=b.pixelSize,m=j[0],w=j[1],x=(0,u.createCanvasContext2D)(m,w,n.canvasPool),O=x.createImageData(m,w),P=O.data,R=3*y,S=0,D=P.length;S<D;S+=4)P[S]=E[R],P[S+1]=E[R+1],P[S+2]=E[R+2],P[S+3]=255,R+=g;x.putImageData(O,0,0),_.push({extent:b.extent,image:x.canvas})}for(var C=(0,n.render)(c,f,this.pixelRatio_,d,this.sourceTileGrid_.getExtent(),p,h,this.triangulation_,_,this.gutter_,!1,!1),G=0,L=_.length;G<L;++G){var A=_[G].image.getContext("2d");(0,u.releaseCanvas)(A),n.canvasPool.push(A.canvas)}var M=C.getContext("2d"),k=M.getImageData(0,0,C.width,C.height);(0,u.releaseCanvas)(M),n.canvasPool.push(C),o||(a=new Uint8Array(g*k.width*k.height),o=new r[0].dataType(a.buffer));for(var I=k.data,q=3*y,Y=0,z=I.length;Y<z;Y+=4)255===I[Y+3]?(a[q]=I[Y],a[q+1]=I[Y+1],a[q+2]=I[Y+2]):(a[q]=0,a[q+1]=0,a[q+2]=0),q+=g}this.reprojData_=o,this.reprojSize_=[Math.round(c*this.pixelRatio_),Math.round(f*this.pixelRatio_)],this.state=i.default.LOADED}this.changed()}},{key:"load",value:function(){var e=this;if(this.state===i.default.IDLE||this.state===i.default.ERROR){this.state=i.default.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(o){var n=o.getState();if(n===i.default.IDLE||n===i.default.LOADING){t++;var a=(0,l.listen)(o,r.default.CHANGE,function(){var e=o.getState();e!=i.default.LOADED&&e!=i.default.ERROR&&e!=i.default.EMPTY||((0,l.unlistenByKey)(a),0===--t&&(this.unlistenSources_(),this.reproject_()))},e);e.sourcesListenerKeys_.push(a)}}),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e){e.getState()==i.default.IDLE&&e.load()})}}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(l.unlistenByKey),this.sourcesListenerKeys_=null}}]),p}(),P=O;exports.default=P;
},{"./common.js":"bYOC","../DataTile.js":"PCNG","../events/EventType.js":"GUXn","../TileState.js":"FoaO","./Triangulation.js":"gmdY","../reproj.js":"BOkO","../math.js":"qAK2","../dom.js":"FYLQ","../extent.js":"L0Vw","../events.js":"MGag"}],"vTtL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("../events/Target.js")),t=i(require("../events/EventType.js")),r=i(require("../ImageTile.js")),n=i(require("../TileState.js")),o=require("../util.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function f(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=s(e,"string");return"symbol"===u(t)?t:String(t)}function s(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=b();return function(){var r,n=g(e);if(t){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(i){d(a,e.default);var u=y(a);function a(e){var t;return l(this,a),(t=u.call(this)).tile,t.handleTileChange_=t.handleTileChange_.bind(v(t)),t.gutter_=e.gutter||0,t.helper_=e.helper,t.loaded=!1,t.ready=!1,t}return f(a,[{key:"setTile",value:function(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(t.default.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===n.default.LOADED,this.loaded)this.uploadTile();else{if(e instanceof r.default){var o=e.getImage();o instanceof Image&&!o.crossOrigin&&(o.crossOrigin="anonymous")}e.addEventListener(t.default.CHANGE,this.handleTileChange_)}}},{key:"uploadTile",value:function(){(0,o.abstract)()}},{key:"setReady",value:function(){this.ready=!0,this.dispatchEvent(t.default.CHANGE)}},{key:"handleTileChange_",value:function(){this.tile.getState()===n.default.LOADED&&(this.loaded=!0,this.uploadTile())}},{key:"disposeInternal",value:function(){this.tile.removeEventListener(t.default.CHANGE,this.handleTileChange_)}}]),a}(),O=m;exports.default=O;
},{"../events/Target.js":"KnPA","../events/EventType.js":"GUXn","../ImageTile.js":"j3TM","../TileState.js":"FoaO","../util.js":"KA50"}],"CdtE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("./BaseTileRepresentation.js")),t=f(require("../DataTile.js")),r=c(require("../events/EventType.js")),n=c(require("../ImageTile.js")),i=c(require("../reproj/Tile.js")),a=c(require("./Buffer.js")),o=require("../webgl.js"),u=require("../dom.js"),l=require("../size.js");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function c(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function y(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=_(e,"string");return"symbol"===h(t)?t:String(t)}function _(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=R();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r){var n=r?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)}function A(e,t,r,n){P(e,t,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}function w(e,t,r,n,i,a){var o,u,l=e.getGL();r instanceof Float32Array?(o=l.FLOAT,e.getExtension("OES_texture_float"),u=null!==e.getExtension("OES_texture_float_linear")):(o=l.UNSIGNED_BYTE,u=!0);P(l,t,a&&u);var s,f=r.byteLength/n[1],c=1;switch(f%8==0?c=8:f%4==0?c=4:f%2==0&&(c=2),i){case 1:s=l.LUMINANCE;break;case 2:s=l.LUMINANCE_ALPHA;break;case 3:s=l.RGB;break;case 4:s=l.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(i))}var h=l.getParameter(l.UNPACK_ALIGNMENT);l.pixelStorei(l.UNPACK_ALIGNMENT,c),l.texImage2D(l.TEXTURE_2D,0,s,n[0],n[1],0,s,o,r),l.pixelStorei(l.UNPACK_ALIGNMENT,h)}var D=null;function j(){D=(0,u.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})}var O=function(u){b(f,e.default);var s=E(f);function f(e){var t;p(this,f),(t=s.call(this,e)).textures=[],t.renderSize_=(0,l.toSize)(e.grid.getTileSize(e.tile.tileCoord[0])),t.bandCount=NaN;var r=new a.default(o.ARRAY_BUFFER,o.STATIC_DRAW);return r.fromArray([0,1,1,1,1,0,0,0]),t.helper_.flushBufferData(r),t.coords=r,t.setTile(e.tile),t}return y(f,[{key:"uploadTile",value:function(){var e,r=this.helper_,a=r.getGL(),o=this.tile;this.textures.length=0,e=o instanceof n.default||o instanceof i.default?o.getImage():o.getData();var u=(0,t.asImageLike)(e);if(u){var l=a.createTexture();return this.textures.push(l),this.bandCount=4,A(a,l,u,o.interpolate),void this.setReady()}e=(0,t.asArrayLike)(e);var s=o.getSize(),f=[s[0]+2*this.gutter_,s[1]+2*this.gutter_],c=e instanceof Float32Array,h=f[0]*f[1],p=c?Float32Array:Uint8Array,d=p.BYTES_PER_ELEMENT,y=e.byteLength/f[1];this.bandCount=Math.floor(y/d/f[0]);var v=Math.ceil(this.bandCount/4);if(1===v){var _=a.createTexture();return this.textures.push(_),w(r,_,e,f,this.bandCount,o.interpolate),void this.setReady()}for(var b=new Array(v),g=0;g<v;++g){var E=a.createTexture();this.textures.push(E);var T=g<v-1?4:(this.bandCount-1)%4+1;b[g]=new p(h*T)}for(var m=0,R=0,x=f[0]*this.bandCount,P=0;P<f[1];++P){for(var D=0;D<x;++D){var j=e[R+D],O=Math.floor(m/this.bandCount),S=D%this.bandCount,C=b[Math.floor(S/4)];C[O*(C.length/h)+S%4]=j,++m}R+=y/d}for(var I=0;I<v;++I){var N=this.textures[I],L=b[I];w(r,N,L,f,L.length/h,o.interpolate)}this.setReady()}},{key:"disposeInternal",value:function(){var e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t]);this.tile.removeEventListener(r.default.CHANGE,this.handleTileChange_)}},{key:"getImagePixelData_",value:function(e,t,r){var n=this.gutter_,i=this.renderSize_[0],a=this.renderSize_[1];D||j(),D.clearRect(0,0,1,1);var o,u=e.width-2*n,l=e.height-2*n,s=n+Math.floor(u*(t/i)),f=n+Math.floor(l*(r/a));try{D.drawImage(e,s,f,1,1,0,0,1,1),o=D.getImageData(0,0,1,1).data}catch(c){return D=null,null}return o}},{key:"getArrayPixelData_",value:function(e,t,r,n){var i=this.gutter_,a=this.renderSize_[0],o=this.renderSize_[1],u=t[0],l=t[1],s=u+2*i,f=l+2*i,c=i+Math.floor(u*(r/a)),h=i+Math.floor(l*(n/o));if(e instanceof DataView){var p=e.byteLength/(s*f),d=p*(h*s+c),y=e.buffer.slice(d,d+p);return new DataView(y)}var v=this.bandCount*(h*s+c);return e.slice(v,v+this.bandCount)}},{key:"getPixelData",value:function(e,r){if(!this.loaded)return null;if(this.tile instanceof t.default){var n=this.tile.getData(),i=(0,t.asArrayLike)(n);if(i){var a=this.tile.getSize();return this.getArrayPixelData_(i,a,e,r)}return this.getImagePixelData_((0,t.asImageLike)(n),e,r)}return this.getImagePixelData_(this.tile.getImage(),e,r)}}]),f}(),S=O;exports.default=S;
},{"./BaseTileRepresentation.js":"vTtL","../DataTile.js":"PCNG","../events/EventType.js":"GUXn","../ImageTile.js":"j3TM","../reproj/Tile.js":"o8Mp","./Buffer.js":"As8l","../webgl.js":"HPlr","../dom.js":"FYLQ","../size.js":"d9VJ"}],"KYIn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Uniforms=void 0,exports.getCacheKey=Z,exports.newTileRepresentationLookup=k;var e=h(require("../../structs/LRUCache.js")),t=h(require("../../reproj/DataTile.js")),r=h(require("../../reproj/Tile.js")),n=h(require("../../TileRange.js")),i=h(require("../../TileState.js")),o=h(require("./Layer.js")),a=require("../../util.js"),l=require("../../array.js"),s=require("../../vec/mat4.js"),u=require("../../tilecoord.js"),c=require("../../transform.js"),f=require("../../proj.js"),p=require("../../extent.js"),d=require("../../size.js");function h(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=g(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}function g(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function b(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function R(e){var t=_(e,"string");return"symbol"===y(t)?t:String(t)}function _(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function S(){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=w(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function x(e,t){return(x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=A();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};exports.Uniforms=M;var q={};function L(e){return 2*(1-1/(e+1))-1}function k(){return{tileIds:new Set,representationsByZ:{}}}function D(e,t){return e.tileIds.has((0,a.getUid)(t))}function z(e,t,r){var n=e.representationsByZ;r in n||(n[r]=new Set),n[r].add(t),e.tileIds.add((0,a.getUid)(t.tile))}function F(e,t){var r=e.layerStatesArray[e.layerIndex];r.extent&&(t=(0,p.getIntersection)(t,(0,f.fromUserExtent)(r.extent,e.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var i=n.getTileGridForProjection(e.viewState.projection).getExtent();i&&(t=(0,p.getIntersection)(t,i))}return t}function Z(e,t){return"".concat(e.getKey(),",").concat((0,u.getKey)(t))}var U=function(f){O(y,o.default);var h=E(y);function y(t,r){var i;T(this,y),(i=h.call(this,t,{uniforms:r.uniforms,postProcesses:r.postProcesses})).renderComplete=!1,i.tileTransform_=(0,c.create)(),i.tempMat4=(0,s.create)(),i.tempTileRange_=new n.default(0,0,0,0),i.tempTileCoord_=(0,u.createOrUpdate)(0,0,0),i.tempSize_=[0,0];var o=void 0!==r.cacheSize?r.cacheSize:512;return i.tileRepresentationCache=new e.default(o),i.frameState=null,i.projection_=void 0,i}return b(y,[{key:"reset",value:function(e){S(I(y.prototype),"reset",this).call(this,{uniforms:e.uniforms})}},{key:"isDrawableTile_",value:function(e){var t=this.getLayer(),r=e.getState(),n=t.getUseInterimTilesOnError();return r==i.default.LOADED||r==i.default.EMPTY||r==i.default.ERROR&&!n}},{key:"prepareFrameInternal",value:function(e){this.projection_?e.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=e.viewState.projection):this.projection_=e.viewState.projection;var t=this.getLayer().getRenderSource();return!!t&&(!(0,p.isEmpty)(F(e,e.extent))&&"ready"===t.getState())}},{key:"createTileRepresentation",value:function(e){return(0,a.abstract)()}},{key:"enqueueTiles",value:function(e,t,r,n,o){var l=e.viewState,s=this.getLayer(),c=s.getRenderSource(),f=c.getTileGridForProjection(l.projection),p=c.getGutterForProjection(l.projection),d=(0,a.getUid)(c);d in e.wantedTiles||(e.wantedTiles[d]={});for(var h=e.wantedTiles[d],y=this.tileRepresentationCache,v=s.getMapInternal(),g=Math.max(r-o,f.getMinZoom(),f.getZForResolution(Math.min(s.getMaxResolution(),v?v.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):f.getResolution(0)),c.zDirection)),m=r;m>=g;--m)for(var T=f.getTileRangeForExtentAndZ(t,m,this.tempTileRange_),j=f.getResolution(m),b=T.minX;b<=T.maxX;++b)for(var R=T.minY;R<=T.maxY;++R){var _=(0,u.createOrUpdate)(m,b,R,this.tempTileCoord_),S=Z(c,_),w=void 0,O=void 0;if(y.containsKey(S)&&(O=(w=y.get(S)).tile),w&&w.tile.key===c.getKey()||(O=c.getTile(m,b,R,e.pixelRatio,l.projection)),!D(n,O)){if(w)if(this.isDrawableTile_(O))w.setTile(O);else{var x=O.getInterimTile();w.setTile(x)}else w=this.createTileRepresentation({tile:O,grid:f,helper:this.helper,gutter:p}),y.set(S,w);z(n,w,m);var E=O.getKey();h[E]=!0,O.getState()===i.default.IDLE&&(e.tileQueue.isKeyQueued(E)||e.tileQueue.enqueue([O,d,f.getTileCoordCenter(_),j]))}}}},{key:"beforeTilesRender",value:function(e,t){this.helper.prepareDraw(this.frameState,!t)}},{key:"renderTile",value:function(e,t,r,n,i,o,a,l,s,u,c){}},{key:"renderFrame",value:function(e){var n=this;this.frameState=e,this.renderComplete=!0;var o=this.helper.getGL();this.preRender(o,e);var s=e.viewState,f=this.getLayer(),p=f.getRenderSource(),h=p.getTileGridForProjection(s.projection),y=p.getGutterForProjection(s.projection),g=F(e,e.extent),m=h.getZForResolution(s.resolution,p.zDirection),T=k(),j=f.getPreload();if(e.nextExtent){var b=h.getZForResolution(s.nextResolution,p.zDirection),R=F(e,e.nextExtent);this.enqueueTiles(e,R,b,T,j)}this.enqueueTiles(e,g,m,T,0),j>0&&setTimeout(function(){n.enqueueTiles(e,g,m-1,T,j-1)},0);var _,S={},w=(0,a.getUid)(this),O=e.time,x=!1,E=v(T.representationsByZ[m]);try{for(E.s();!(_=E.n()).done;){var C=_.value,P=C.tile;if(!(P instanceof r.default||P instanceof t.default)||P.getState()!==i.default.EMPTY){var A=P.tileCoord;if(C.loaded){var I=P.getAlpha(w,O);if(1===I){P.endTransition(w);continue}x=!0,S[(0,u.getKey)(A)]=I}if(this.renderComplete=!1,!this.findAltTiles_(h,A,m+1,T))for(var M=h.getMinZoom(),D=m-1;D>=M;--D){if(this.findAltTiles_(h,A,D,T))break}}}}catch(he){E.e(he)}finally{E.f()}this.beforeTilesRender(e,x);for(var z=T.representationsByZ,Z=Object.keys(z).map(Number).sort(l.ascending),U=0,K=Z.length;U<K;++U){var N,X=Z[U],B=v(z[X]);try{for(B.s();!(N=B.n()).done;){var G=N.value;if(G.loaded){var Y=G.tile.tileCoord,H=(0,u.getKey)(Y),Q=H in S?S[H]:1;Q<1&&(e.animate=!0);var W=h.getResolution(X),J=(0,d.toSize)(h.getTileSize(X),this.tempSize_),V=h.getOrigin(X),$=h.getTileCoordExtent(Y),ee=L(X),te=e.viewState,re=te.center[0],ne=te.center[1],ie=J[0]+2*y,oe=J[1]+2*y,ae=ie/oe,le=(re-V[0])/(J[0]*W),se=(V[1]-ne)/(J[1]*W),ue=te.resolution/W,ce=Y[1],fe=Y[2];(0,c.reset)(this.tileTransform_),(0,c.scale)(this.tileTransform_,2/(e.size[0]*ue/ie),-2/(e.size[1]*ue/ie)),(0,c.rotate)(this.tileTransform_,te.rotation),(0,c.scale)(this.tileTransform_,1,1/ae),(0,c.translate)(this.tileTransform_,(J[0]*(ce-le)-y)/ie,(J[1]*(fe-se)-y)/oe),this.renderTile(G,this.tileTransform_,e,g,W,J,V,$,ee,y,Q)}}}catch(he){B.e(he)}finally{B.f()}}this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var pe=this.helper.getCanvas(),de=this.tileRepresentationCache;de.canExpireCache();){de.pop().dispose()}return e.postRenderFunctions.push(function(e,t){p.updateCacheSize(.1,t.viewState.projection),p.expireCache(t.viewState.projection,q)}),this.postRender(o,e),pe}},{key:"findAltTiles_",value:function(e,t,r,n){var i=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!i)return!1;for(var o=!0,a=this.tileRepresentationCache,l=this.getLayer().getRenderSource(),s=i.minX;s<=i.maxX;++s)for(var u=i.minY;u<=i.maxY;++u){var c=Z(l,[r,s,u]),f=!1;if(a.containsKey(c)){var p=a.get(c);p.loaded&&!D(n,p.tile)&&(z(n,p,r),f=!0)}f||(o=!1)}return o}},{key:"clearCache",value:function(){var e=this.tileRepresentationCache;e.forEach(function(e){return e.dispose()}),e.clear()}},{key:"removeHelper",value:function(){this.helper&&this.clearCache(),S(I(y.prototype),"removeHelper",this).call(this)}},{key:"disposeInternal",value:function(){S(I(y.prototype),"disposeInternal",this).call(this),delete this.frameState}}]),y}(),K=U;exports.default=K;
},{"../../structs/LRUCache.js":"UtOR","../../reproj/DataTile.js":"DpUU","../../reproj/Tile.js":"o8Mp","../../TileRange.js":"m5CX","../../TileState.js":"FoaO","./Layer.js":"CXrm","../../util.js":"KA50","../../array.js":"o0G8","../../vec/mat4.js":"mf1C","../../tilecoord.js":"NPSy","../../transform.js":"Ln8D","../../proj.js":"VAQc","../../extent.js":"L0Vw","../../size.js":"d9VJ"}],"Yziv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Uniforms=exports.Attributes=void 0;var e=y(require("../../reproj/DataTile.js")),t=y(require("../../reproj/Tile.js")),r=y(require("../../TileState.js")),n=y(require("../../webgl/TileTexture.js")),i=y(require("../../webgl/Buffer.js")),o=d(require("./TileLayerBase.js")),u=require("../../webgl/Helper.js"),a=require("../../webgl.js"),l=require("../../transform.js"),s=require("../../extent.js"),f=require("../../proj.js"),c=require("../../vec/mat4.js"),p=require("../../size.js");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function y(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X(n.key),n)}}function _(e,t,r){return t&&T(e.prototype,t),r&&T(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=O(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=x();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function I(e,t,r){return(t=X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e){var t=A(e,"string");return"symbol"===b(t)?t:String(t)}function A(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var D=U(U({},o.Uniforms),{},{TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"});exports.Uniforms=D;var L={TEXTURE_COORD:"a_textureCoord"};exports.Attributes=L;var F=[{name:L.TEXTURE_COORD,size:2,type:u.AttributeType.FLOAT}],k=function(u){m(d,o.default);var h=j(d);function d(e,t){var r;return g(this,d),(r=h.call(this,e,t)).program_,r.vertexShader_=t.vertexShader,r.fragmentShader_=t.fragmentShader,r.indices_=new i.default(a.ELEMENT_ARRAY_BUFFER,a.STATIC_DRAW),r.indices_.fromArray([0,1,3,1,2,3]),r.paletteTextures_=t.paletteTextures||[],r}return _(d,[{key:"reset",value:function(e){v(S(d.prototype),"reset",this).call(this,e),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}},{key:"afterHelperCreated",value:function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}},{key:"createTileRepresentation",value:function(e){return new n.default(e)}},{key:"beforeTilesRender",value:function(e,t){v(S(d.prototype),"beforeTilesRender",this).call(this,e,t),this.helper.useProgram(this.program_,e)}},{key:"renderTile",value:function(e,t,r,n,i,o,u,a,l,f,p){var h=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(F);for(var d=0;d<e.textures.length;){var y="".concat(D.TILE_TEXTURE_ARRAY,"[").concat(d,"]");this.helper.bindTexture(e.textures[d],d,y),++d}for(var b=0;b<this.paletteTextures_.length;++b){var g=this.paletteTextures_[b],T=g.getTexture(h);this.helper.bindTexture(T,d,g.name),++d}var _=r.viewState,v=o[0]+2*f,O=o[1]+2*f,m=e.tile.tileCoord,E=m[1],j=m[2];this.helper.setUniformMatrixValue(D.TILE_TRANSFORM,(0,c.fromTransform)(this.tempMat4,t)),this.helper.setUniformFloatValue(D.TRANSITION_ALPHA,p),this.helper.setUniformFloatValue(D.DEPTH,l);var R=n;f>0&&(R=a,(0,s.getIntersection)(R,n,R)),this.helper.setUniformFloatVec4(D.RENDER_EXTENT,R),this.helper.setUniformFloatValue(D.RESOLUTION,_.resolution),this.helper.setUniformFloatValue(D.ZOOM,_.zoom),this.helper.setUniformFloatValue(D.TEXTURE_PIXEL_WIDTH,v),this.helper.setUniformFloatValue(D.TEXTURE_PIXEL_HEIGHT,O),this.helper.setUniformFloatValue(D.TEXTURE_RESOLUTION,i),this.helper.setUniformFloatValue(D.TEXTURE_ORIGIN_X,u[0]+E*o[0]*i-f*i),this.helper.setUniformFloatValue(D.TEXTURE_ORIGIN_Y,u[1]-j*o[1]*i+f*i),this.helper.drawElements(0,this.indices_.getSize())}},{key:"getData",value:function(n){if(!this.helper.getGL())return null;var i=this.frameState;if(!i)return null;var u=this.getLayer(),a=(0,l.apply)(i.pixelToCoordinateTransform,n.slice()),c=i.viewState,h=u.getExtent();if(h&&!(0,s.containsCoordinate)((0,f.fromUserExtent)(h,c.projection),a))return null;var d,y,b,g=u.getSources((0,s.boundingExtent)([a]),c.resolution);for(d=g.length-1;d>=0;--d)if("ready"===(y=g[d]).getState()){if(b=y.getTileGridForProjection(c.projection),y.getWrapX())break;var T=b.getExtent();if(!T||(0,s.containsCoordinate)(T,a))break}if(d<0)return null;for(var _=this.tileRepresentationCache,v=b.getZForResolution(c.resolution);v>=b.getMinZoom();--v){var O=b.getTileCoordForCoordAndZ(a,v),m=(0,o.getCacheKey)(y,O);if(_.containsKey(m)){var E=_.get(m),j=E.tile;if((j instanceof t.default||j instanceof e.default)&&j.getState()===r.default.EMPTY)return null;if(E.loaded){var R=b.getOrigin(v),P=(0,p.toSize)(b.getTileSize(v)),x=b.getResolution(v),S=(a[0]-R[0])/x-O[1]*P[0],w=(R[1]-a[1])/x-O[2]*P[1];return E.getPixelData(S,w)}}}return null}},{key:"disposeInternal",value:function(){var e=this.helper;e&&(e.getGL().deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_));v(S(d.prototype),"disposeInternal",this).call(this),delete this.indices_}}]),d}(),C=k;exports.default=C;
},{"../../reproj/DataTile.js":"DpUU","../../reproj/Tile.js":"o8Mp","../../TileState.js":"FoaO","../../webgl/TileTexture.js":"CdtE","../../webgl/Buffer.js":"As8l","./TileLayerBase.js":"KYIn","../../webgl/Helper.js":"ttZe","../../webgl.js":"HPlr","../../transform.js":"Ln8D","../../extent.js":"L0Vw","../../proj.js":"VAQc","../../vec/mat4.js":"mf1C","../../size.js":"d9VJ"}],"gI9l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ValueTypes=exports.PALETTE_TEXTURE_ARRAY=exports.Operators=void 0,exports.arrayToGlsl=h,exports.colorToGlsl=v,exports.expressionToGlsl=T,exports.getStringNumberEquivalent=N,exports.getValueType=g,exports.isTypeUnique=y,exports.numberToGlsl=E,exports.stringToGlsl=O,exports.uniformNameForVariable=_;var t=r(require("../webgl/PaletteTexture.js")),n=require("../renderer/webgl/TileLayer.js"),e=require("../color.js");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return i(t)||u(t)||a(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,n){if(t){if("string"==typeof t)return l(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,n):void 0}}function u(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function i(t){if(Array.isArray(t))return l(t)}function l(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var f={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0};function s(t){switch(t){case"string":return f.STRING;case"color":return f.COLOR;case"number":return f.NUMBER;case"boolean":return f.BOOLEAN;case"number[]":return f.NUMBER_ARRAY;default:throw new Error("Unrecognized type hint: ".concat(t))}}exports.ValueTypes=f;var p={};function g(t){if("number"==typeof t)return f.NUMBER;if("boolean"==typeof t)return f.BOOLEAN;if("string"==typeof t)return(0,e.isStringColor)(t)?f.COLOR|f.STRING:f.STRING;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var n=t;if(n.every(function(t){return"number"==typeof t}))return 3===n.length||4===n.length?f.COLOR|f.NUMBER_ARRAY:f.NUMBER_ARRAY;if("string"!=typeof n[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(n)));var r=p[n[0]];if(void 0===r)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return r.getReturnType(n.slice(1))}function y(t){return Math.log2(t)%1==0}function R(t){var n=[];return(t&f.NUMBER)>0&&n.push("number"),(t&f.COLOR)>0&&n.push("color"),(t&f.BOOLEAN)>0&&n.push("boolean"),(t&f.NUMBER_ARRAY)>0&&n.push("number[]"),(t&f.STRING)>0&&n.push("string"),n.length>0?n.join(", "):"(no type)"}function E(t){var n=t.toString();return n.includes(".")?n:n+".0"}function h(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map(E).join(", "),")")}function v(t){var n=(0,e.asArray)(t),r=n.length>3?n[3]:1;return h([n[0]/255*r,n[1]/255*r,n[2]/255*r,r])}function N(t,n){return void 0===t.stringLiteralsMap[n]&&(t.stringLiteralsMap[n]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[n]}function O(t,n){return E(N(t,n))}function T(t,n,e){var r=void 0!==e?e:f.NUMBER;if(Array.isArray(n)&&"string"==typeof n[0]){var o=p[n[0]];if(void 0===o)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(n)));return o.toGlsl(t,n.slice(1),r)}var c=g(n)&r;if(M(n,c,""),(c&f.NUMBER)>0)return E(n);if((c&f.BOOLEAN)>0)return n.toString();if((c&f.STRING)>0)return O(t,n.toString());if((c&f.COLOR)>0)return v(n);if((c&f.NUMBER_ARRAY)>0)return h(n);throw new Error("Unexpected expression ".concat(n," (expected type ").concat(R(r),")"))}function w(t){if(0==(g(t)&f.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function d(t){for(var n=0;n<t.length;n++)w(t[n])}function A(t){if(0==(g(t)&f.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function m(t){if(0==(g(t)&f.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function B(t,n){if(t.length!==n)throw new Error("Exactly ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function x(t,n){if(t.length<n)throw new Error("At least ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function b(t,n){if(t.length>n)throw new Error("At most ".concat(n," arguments were expected, got ").concat(t.length," instead"))}function U(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got ".concat(JSON.stringify(t)," instead"))}function G(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got ".concat(JSON.stringify(t)," instead"))}function M(t,n,e){if(n===f.NONE)throw new Error("No matching type was found for the following expression ".concat(e,": ").concat(JSON.stringify(t)))}function L(t,n,e){if(M(t,n,e),!y(n))throw new Error("Expected to have a unique type for the following expression ".concat(e,": ").concat(JSON.stringify(t),"\nGot the following types instead: ").concat(R(n)))}function S(t,n,e,r){if((n&e)===f.NONE)throw new Error("Expected the ".concat(r," type of the following expression: ").concat(JSON.stringify(t)," to be of the following types: ").concat(R(e),"\nGot these types instead: ").concat(R(n)))}function _(t){return"u_var_"+t}exports.Operators=p,p.get={getReturnType:function(t){return 2===t.length?s(t[1]):f.ANY},toGlsl:function(t,n,e){x(n,1),b(n,2),A(n[0]);var r=e&p.get.getReturnType(n);L(["get"].concat(o(n)),r,"");var c=n[0].toString(),a=t.attributes.find(function(t){return t.name===c});if(a){if(r!==a.type)throw new Error("The following attribute was used in different places with incompatible types: ".concat(c,"\nTypes were: ").concat(R(a.type)," and ").concat(R(r)))}else t.attributes.push({name:c,type:r});return(t.inFragmentShader?"v_":"a_")+c}},p.var={getReturnType:function(){return f.ANY},toGlsl:function(t,n,e){B(n,1),A(n[0]);var r=n[0].toString();if(!t.style.variables||void 0===t.style.variables[r])throw new Error("The following variable is missing from the style: ".concat(r));var c=e&g(t.style.variables[r]);L(["var"].concat(o(n)),c,"");var a=t.variables.find(function(t){return t.name===r});if(a){if(c!==a.type)throw new Error("The following variable was used in different places with incompatible types: ".concat(r,"\nTypes were: ").concat(R(a.type)," and ").concat(R(c)))}else t.variables.push({name:r,type:c});return _(r)}};var I="u_paletteTextures";exports.PALETTE_TEXTURE_ARRAY=I,p.palette={getReturnType:function(){return f.COLOR},toGlsl:function(n,r){B(r,2),w(r[0]);var o=T(n,r[0]),c=r[1];if(!Array.isArray(c))throw new Error("The second argument of palette must be an array");for(var a=c.length,u=new Uint8Array(4*a),i=0;i<a;i++){var l=c[i],f=void 0;if("string"==typeof l)f=(0,e.fromString)(l);else{if(!Array.isArray(l))throw new Error("The second argument of palette must be an array of strings or colors");var s=l.length;if(4===s)f=l;else{if(3!==s)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(s));f=[l[0],l[1],l[2],1]}}var p=4*i;u[p]=f[0],u[p+1]=f[1],u[p+2]=f[2],u[p+3]=255*f[3]}n.paletteTextures||(n.paletteTextures=[]);var g="".concat(I,"[").concat(n.paletteTextures.length,"]"),y=new t.default(g,u);return n.paletteTextures.push(y),"texture2D(".concat(g,", vec2((").concat(o," + 0.5) / ").concat(a,".0, 0.5))")}};var j="getBandValue";function C(t){return{getReturnType:function(){return f.BOOLEAN},toGlsl:function(n,e){B(e,2);for(var r=f.ANY,o=0;o<e.length;o++)r&=g(e[o]);if(r===f.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(e)," instead"));return r&=~f.COLOR,"(".concat(T(n,e[0],r)," ").concat(t," ").concat(T(n,e[1],r),")")}}}function Y(t){return{getReturnType:function(){return f.BOOLEAN},toGlsl:function(n,e){x(e,2);for(var r=0;r<e.length;r++)m(e[r]);var o=e.map(function(t){return T(n,t,f.BOOLEAN)}).join(" ".concat(t," "));return o="(".concat(o,")")}}}p.band={getReturnType:function(){return f.NUMBER},toGlsl:function(t,e){x(e,1),b(e,3);var r=e[0];if(!(j in t.functions)){for(var o="",c=t.bandCount||1,a=0;a<c;a++){var u=Math.floor(a/4),i=a%4;a===c-1&&1===i&&(i=3);var l="".concat(n.Uniforms.TILE_TEXTURE_ARRAY,"[").concat(u,"]");o+="\n          if (band == ".concat(a+1,".0) {\n            return texture2D(").concat(l,", v_textureCoord + vec2(dx, dy))[").concat(i,"];\n          }\n        ")}t.functions[j]="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(n.Uniforms.TEXTURE_PIXEL_WIDTH,";\n          float dy = yOffset / ").concat(n.Uniforms.TEXTURE_PIXEL_HEIGHT,";\n          ").concat(o,"\n        }\n      ")}var f=T(t,r),s=T(t,e[1]||0),p=T(t,e[2]||0);return"".concat(j,"(").concat(f,", ").concat(s,", ").concat(p,")")}},p.time={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,0),"u_time"}},p.zoom={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,0),"u_zoom"}},p.resolution={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,0),"u_resolution"}},p["*"]={getReturnType:function(t){for(var n=f.NUMBER|f.COLOR,e=0;e<t.length;e++)n&=g(t[e]);return n},toGlsl:function(t,n,e){x(n,2);for(var r=e,o=0;o<n.length;o++)r&=g(n[o]);return S(n,r,f.NUMBER|f.COLOR,"output"),"(".concat(n.map(function(n){return T(t,n,r)}).join(" * "),")")}},p["/"]={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,2),d(n),"(".concat(T(t,n[0])," / ").concat(T(t,n[1]),")")}},p["+"]={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return x(n,2),d(n),"(".concat(n.map(function(n){return T(t,n)}).join(" + "),")")}},p["-"]={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,2),d(n),"(".concat(T(t,n[0])," - ").concat(T(t,n[1]),")")}},p.clamp={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){B(n,3),d(n);var e=T(t,n[1]),r=T(t,n[2]);return"clamp(".concat(T(t,n[0]),", ").concat(e,", ").concat(r,")")}},p["%"]={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,2),d(n),"mod(".concat(T(t,n[0]),", ").concat(T(t,n[1]),")")}},p["^"]={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,2),d(n),"pow(".concat(T(t,n[0]),", ").concat(T(t,n[1]),")")}},p.abs={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,1),d(n),"abs(".concat(T(t,n[0]),")")}},p.floor={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,1),d(n),"floor(".concat(T(t,n[0]),")")}},p.round={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,1),d(n),"floor(".concat(T(t,n[0])," + 0.5)")}},p.ceil={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,1),d(n),"ceil(".concat(T(t,n[0]),")")}},p.sin={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,1),d(n),"sin(".concat(T(t,n[0]),")")}},p.cos={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return B(n,1),d(n),"cos(".concat(T(t,n[0]),")")}},p.atan={getReturnType:function(){return f.NUMBER},toGlsl:function(t,n){return x(n,1),b(n,2),d(n),2===n.length?"atan(".concat(T(t,n[0]),", ").concat(T(t,n[1]),")"):"atan(".concat(T(t,n[0]),")")}},p[">"]={getReturnType:function(){return f.BOOLEAN},toGlsl:function(t,n){return B(n,2),d(n),"(".concat(T(t,n[0])," > ").concat(T(t,n[1]),")")}},p[">="]={getReturnType:function(){return f.BOOLEAN},toGlsl:function(t,n){return B(n,2),d(n),"(".concat(T(t,n[0])," >= ").concat(T(t,n[1]),")")}},p["<"]={getReturnType:function(){return f.BOOLEAN},toGlsl:function(t,n){return B(n,2),d(n),"(".concat(T(t,n[0])," < ").concat(T(t,n[1]),")")}},p["<="]={getReturnType:function(){return f.BOOLEAN},toGlsl:function(t,n){return B(n,2),d(n),"(".concat(T(t,n[0])," <= ").concat(T(t,n[1]),")")}},p["=="]=C("=="),p["!="]=C("!="),p["!"]={getReturnType:function(){return f.BOOLEAN},toGlsl:function(t,n){return B(n,1),m(n[0]),"(!".concat(T(t,n[0],f.BOOLEAN),")")}},p.all=Y("&&"),p.any=Y("||"),p.between={getReturnType:function(){return f.BOOLEAN},toGlsl:function(t,n){B(n,3),d(n);var e=T(t,n[1]),r=T(t,n[2]),o=T(t,n[0]);return"(".concat(o," >= ").concat(e," && ").concat(o," <= ").concat(r,")")}},p.array={getReturnType:function(){return f.NUMBER_ARRAY},toGlsl:function(t,n){x(n,2),b(n,4),d(n);var e=n.map(function(n){return T(t,n)});return"vec".concat(n.length,"(").concat(e.join(", "),")")}},p.color={getReturnType:function(){return f.COLOR},toGlsl:function(t,n){x(n,3),b(n,4),d(n);var e=n.slice(0,3).map(function(n){return"".concat(T(t,n)," / 255.0")});if(3===n.length)return"vec4(".concat(e.join(", "),", 1.0)");var r=T(t,n[3]);return"(".concat(r," * vec4(").concat(e.join(", "),", 1.0))")}},p.interpolate={getReturnType:function(t){for(var n=f.COLOR|f.NUMBER,e=3;e<t.length;e+=2)n&=g(t[e]);return n},toGlsl:function(t,n,e){U(n),x(n,6);var r,c=n[0];switch(c[0]){case"linear":r=1;break;case"exponential":r=c[1];break;default:r=null}if(!r)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(c)));var a=f.NUMBER,u=p.interpolate.getReturnType(n)&e;L(["interpolate"].concat(o(n)),u,"output");for(var i=T(t,n[1],a),l=E(r),s="",g=2;g<n.length-2;g+=2){var y=T(t,n[g],a),R=s||T(t,n[g+1],u),h=T(t,n[g+2],a),v=T(t,n[g+3],u);s="mix(".concat(R,", ").concat(v,", pow(clamp((").concat(i," - ").concat(y,") / (").concat(h," - ").concat(y,"), 0.0, 1.0), ").concat(l,"))")}return s}},p.match={getReturnType:function(t){for(var n=f.ANY,e=2;e<t.length;e+=2)n&=g(t[e]);return n&=g(t[t.length-1])},toGlsl:function(t,n,e){U(n),x(n,4);for(var r=g(n[0]),c=1;c<n.length-1;c+=2)r&=g(n[c]);S(["match"].concat(o(n)),r,f.STRING|f.NUMBER|f.BOOLEAN,"input"),r=(f.STRING|f.NUMBER|f.BOOLEAN)&r;var a=p.match.getReturnType(n)&e;L(["match"].concat(o(n)),a,"output");for(var u=T(t,n[0],r),i=T(t,n[n.length-1],a),l=null,s=n.length-3;s>=1;s-=2){var y=T(t,n[s],r),R=T(t,n[s+1],a);l="(".concat(u," == ").concat(y," ? ").concat(R," : ").concat(l||i,")")}return l}},p.case={getReturnType:function(t){for(var n=f.ANY,e=1;e<t.length;e+=2)n&=g(t[e]);return n&=g(t[t.length-1])},toGlsl:function(t,n,e){G(n),x(n,3);var r=p.case.getReturnType(n)&e;L(["case"].concat(o(n)),r,"output");for(var c=0;c<n.length-1;c+=2)m(n[c]);for(var a=T(t,n[n.length-1],r),u=null,i=n.length-3;i>=0;i-=2){var l=T(t,n[i],f.BOOLEAN),s=T(t,n[i+1],r);u="(".concat(l," ? ").concat(s," : ").concat(u||a,")")}return u}};
},{"../webgl/PaletteTexture.js":"M1py","../renderer/webgl/TileLayer.js":"Yziv","../color.js":"XaHX"}],"MXdK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSymbolOpacityGlslFunction=m,exports.packColor=d,exports.parseLiteralStyle=h;var e=require("./ShaderBuilder.js"),r=require("../style/expressions.js"),t=require("../color.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach(function(r){i(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function i(e,r,t){return(r=s(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e){var r=c(e,"string");return"symbol"===o(r)?r:String(r)}function c(e,r){if("object"!==o(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function u(e){return f(e)||y(e)||p(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,r){if(e){if("string"==typeof e)return b(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b(e,r):void 0}}function y(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){if(Array.isArray(e))return b(e)}function b(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function m(e,r){switch(e){case"square":case"image":return"1.0";case"circle":return"(1.0-smoothstep(1.-4./".concat(r,",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))");case"triangle":var t="(v_quadCoord*2.-1.)",o="(atan(".concat(t,".x,").concat(t,".y))");return"(1.0-smoothstep(.5-3./".concat(r,",.5,cos(floor(.5+").concat(o,"/2.094395102)*2.094395102-").concat(o,")*length(").concat(t,")))");default:throw new Error("Unexpected symbol type: ".concat(e))}}function d(e){var r=(0,t.asArray)(e);return[256*r[0]+r[1],256*r[2]+Math.round(255*r[3])]}var v="vec4 unpackColor(vec2 packedColor) {\n  return fract(packedColor[1] / 256.0) * vec4(\n    fract(floor(packedColor[0] / 256.0) / 256.0),\n    fract(packedColor[0] / 256.0),\n    fract(floor(packedColor[1] / 256.0) / 256.0),\n    1.0\n  );\n}";function O(e){return e===r.ValueTypes.COLOR?2:e===r.ValueTypes.NUMBER_ARRAY?4:1}function g(e){var r=O(e);return r>1?"vec".concat(r):"float"}function T(e,t,o,n,a){if(!("symbol"in e))return!1;var i=e.symbol,s=void 0!==i.size?i.size:1,c=i.color||"white",u=i.textureCoord||[0,0,1,1],l=i.offset||[0,0],p=void 0!==i.opacity?i.opacity:1,y=void 0!==i.rotation?i.rotation:0,f=(0,r.expressionToGlsl)(n,s,r.ValueTypes.NUMBER_ARRAY|r.ValueTypes.NUMBER),b=(0,r.expressionToGlsl)(n,l,r.ValueTypes.NUMBER_ARRAY),d=(0,r.expressionToGlsl)(n,u,r.ValueTypes.NUMBER_ARRAY),v=(0,r.expressionToGlsl)(n,y,r.ValueTypes.NUMBER),O=(0,r.expressionToGlsl)(a,c,r.ValueTypes.COLOR),g=(0,r.expressionToGlsl)(a,p,r.ValueTypes.NUMBER),T="vec2(".concat((0,r.expressionToGlsl)(a,s,r.ValueTypes.NUMBER_ARRAY|r.ValueTypes.NUMBER),").x"),x=m(i.symbolType,T),S="vec4(".concat(O,".rgb, ").concat(O,".a * ").concat(g," * ").concat(x,")");if(t.setSymbolSizeExpression("vec2(".concat(f,")")).setSymbolRotationExpression(v).setSymbolOffsetExpression(b).setTextureCoordinateExpression(d).setSymbolRotateWithView(!!i.rotateWithView).setSymbolColorExpression(S),"image"===i.symbolType&&i.src){var h=new Image;h.crossOrigin=void 0===i.crossOrigin?"anonymous":i.crossOrigin,h.src=i.src,t.addUniform("sampler2D u_texture").setSymbolColorExpression("".concat(S," * texture2D(u_texture, v_texCoord)")),o.u_texture=h}return!0}function x(e,t,o,n,a){if(!("stroke-color"in e||"stroke-width"in e))return!1;var i=e["stroke-color"]||"white",s=e["stroke-width"]||1,c=(0,r.expressionToGlsl)(a,i,r.ValueTypes.COLOR),u=(0,r.expressionToGlsl)(n,s,r.ValueTypes.NUMBER);return t.setStrokeColorExpression(c).setStrokeWidthExpression(u),!0}function S(e,t,o,n,a){if(!("fill-color"in e))return!1;var i=e["fill-color"]||"rgba(255, 255, 255, 0.3)",s=(0,r.expressionToGlsl)(a,i,r.ValueTypes.COLOR);return t.setFillColorExpression(s),!0}function h(o){var n={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{},functions:{},style:o},s={inFragmentShader:!0,variables:n.variables,attributes:[],stringLiteralsMap:n.stringLiteralsMap,functions:{},style:o},c=new e.ShaderBuilder,l={},p=T(o,c,l,n,s),y=x(o,c,l,n,s),f=S(o,c,l,n,s);if(o.filter){var b=(0,r.expressionToGlsl)(s,o.filter,r.ValueTypes.BOOLEAN);c.setFragmentDiscardExpression("!".concat(b))}s.variables.forEach(function(e){var a,i=(0,r.uniformNameForVariable)(e.name);c.addUniform("".concat(g(e.type)," ").concat(i)),a=e.type===r.ValueTypes.STRING?function(){return(0,r.getStringNumberEquivalent)(n,o.variables[e.name])}:e.type===r.ValueTypes.COLOR?function(){return d(u((0,t.asArray)(o.variables[e.name]||"#eee")))}:e.type===r.ValueTypes.BOOLEAN?function(){return o.variables[e.name]?1:0}:function(){return o.variables[e.name]},l[i]=a}),s.attributes.forEach(function(e){n.attributes.find(function(r){return r.name===e.name})||n.attributes.push(e);var t=g(e.type),o="a_".concat(e.name);e.type===r.ValueTypes.COLOR&&(t="vec4",o="unpackColor(".concat(o,")"),c.addVertexShaderFunction(v)),c.addVarying("v_".concat(e.name),t,o)}),n.attributes.forEach(function(e){c.addAttribute("".concat(g(e.type)," a_").concat(e.name))});var m=n.attributes.map(function(e){var o;return o=e.type===r.ValueTypes.STRING?function(t){return(0,r.getStringNumberEquivalent)(n,t.get(e.name))}:e.type===r.ValueTypes.COLOR?function(r){return d(u((0,t.asArray)(r.get(e.name)||"#eee")))}:e.type===r.ValueTypes.BOOLEAN?function(r){return r.get(e.name)?1:0}:function(r){return r.get(e.name)},{name:e.name,size:O(e.type),callback:o}});return{builder:c,hasSymbol:p,hasStroke:y,hasFill:f,attributes:m.reduce(function(e,r){return a(a({},e),{},i({},r.name,{callback:r.callback,size:r.size}))},{}),uniforms:l}}
},{"./ShaderBuilder.js":"qF0S","../style/expressions.js":"gI9l","../color.js":"XaHX"}],"RLC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./Layer.js")),t=n(require("../renderer/webgl/PointsLayer.js")),r=require("../webgl/styleparser.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=b(e,"string");return"symbol"===o(t)?t:String(t)}function b(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=v();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(n){p(i,e.default);var o=d(i);function i(e){var t;c(this,i);var n=Object.assign({},e);return(t=o.call(this,n)).parseResult_=(0,r.parseLiteralStyle)(e.style),t.styleVariables_=e.style.variables||{},t.hitDetectionDisabled_=!!e.disableHitDetection,t}return l(i,[{key:"createRenderer",value:function(){var e=this,r=Object.keys(this.parseResult_.attributes).map(function(t){return u({name:t},e.parseResult_.attributes[t])});return new t.default(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitVertexShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolFragmentShader(!0),uniforms:this.parseResult_.uniforms,attributes:r})}},{key:"updateStyleVariables",value:function(e){Object.assign(this.styleVariables_,e),this.changed()}}]),i}(),g=j;exports.default=g;
},{"./Layer.js":"Ee0U","../renderer/webgl/PointsLayer.js":"Wctp","../webgl/styleparser.js":"MXdK"}],"x1In":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./BaseTile.js")),t=i(require("../layer/Property.js")),r=a(require("../renderer/webgl/TileLayer.js")),n=require("../style/expressions.js");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function i(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function l(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=v(e,"string");return"symbol"===c(t)?t:String(t)}function v(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=y();return function(){var r,n=E(e);if(t){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){var o="\n    attribute vec2 ".concat(r.Attributes.TEXTURE_COORD,";\n    uniform mat4 ").concat(r.Uniforms.TILE_TRANSFORM,";\n    uniform float ").concat(r.Uniforms.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(r.Uniforms.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(r.Uniforms.TEXTURE_RESOLUTION,";\n    uniform float ").concat(r.Uniforms.TEXTURE_ORIGIN_X,";\n    uniform float ").concat(r.Uniforms.TEXTURE_ORIGIN_Y,";\n    uniform float ").concat(r.Uniforms.DEPTH,";\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ").concat(r.Attributes.TEXTURE_COORD,";\n      v_mapCoord = vec2(\n        ").concat(r.Uniforms.TEXTURE_ORIGIN_X," + ").concat(r.Uniforms.TEXTURE_RESOLUTION," * ").concat(r.Uniforms.TEXTURE_PIXEL_WIDTH," * v_textureCoord[0],\n        ").concat(r.Uniforms.TEXTURE_ORIGIN_Y," - ").concat(r.Uniforms.TEXTURE_RESOLUTION," * ").concat(r.Uniforms.TEXTURE_PIXEL_HEIGHT," * v_textureCoord[1]\n      );\n      gl_Position = ").concat(r.Uniforms.TILE_TRANSFORM," * vec4(").concat(r.Attributes.TEXTURE_COORD,", ").concat(r.Uniforms.DEPTH,", 1.0);\n    }\n  "),a={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:t,style:e},i=[];if(void 0!==e.color){var c=(0,n.expressionToGlsl)(a,e.color,n.ValueTypes.COLOR);i.push("color = ".concat(c,";"))}if(void 0!==e.contrast){var s=(0,n.expressionToGlsl)(a,e.contrast,n.ValueTypes.NUMBER);i.push("color.rgb = clamp((".concat(s," + 1.0) * color.rgb - (").concat(s," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==e.exposure){var u=(0,n.expressionToGlsl)(a,e.exposure,n.ValueTypes.NUMBER);i.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==e.saturation){var l=(0,n.expressionToGlsl)(a,e.saturation,n.ValueTypes.NUMBER);i.push("\n      float saturation = ".concat(l," + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    "))}if(void 0!==e.gamma){var f=(0,n.expressionToGlsl)(a,e.gamma,n.ValueTypes.NUMBER);i.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(f,"));"))}if(void 0!==e.brightness){var v=(0,n.expressionToGlsl)(a,e.brightness,n.ValueTypes.NUMBER);i.push("color.rgb = clamp(color.rgb + ".concat(v,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var d={},p=a.variables.length;if(p>1&&!e.variables)throw new Error("Missing variables in style (expected ".concat(a.variables,")"));for(var m=function(){var t=a.variables[_];if(!(t.name in e.variables))throw new Error("Missing '".concat(t.name,"' in style variables"));var r=(0,n.uniformNameForVariable)(t.name);d[r]=function(){var r=e.variables[t.name];return"string"==typeof r&&(r=(0,n.getStringNumberEquivalent)(a,r)),void 0!==r?r:-9999999}},_=0;_<p;++_)m();var h=Object.keys(d).map(function(e){return"uniform float ".concat(e,";")}),y=Math.ceil(t/4);h.push("uniform sampler2D ".concat(r.Uniforms.TILE_TEXTURE_ARRAY,"[").concat(y,"];")),a.paletteTextures&&h.push("uniform sampler2D ".concat(n.PALETTE_TEXTURE_ARRAY,"[").concat(a.paletteTextures.length,"];"));var E=Object.keys(a.functions).map(function(e){return a.functions[e]});return{vertexShader:o,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ".concat(r.Uniforms.RENDER_EXTENT,";\n    uniform float ").concat(r.Uniforms.TRANSITION_ALPHA,";\n    uniform float ").concat(r.Uniforms.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(r.Uniforms.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(r.Uniforms.RESOLUTION,";\n    uniform float ").concat(r.Uniforms.ZOOM,";\n\n    ").concat(h.join("\n"),"\n\n    ").concat(E.join("\n"),"\n\n    void main() {\n      if (\n        v_mapCoord[0] < ").concat(r.Uniforms.RENDER_EXTENT,"[0] ||\n        v_mapCoord[1] < ").concat(r.Uniforms.RENDER_EXTENT,"[1] ||\n        v_mapCoord[0] > ").concat(r.Uniforms.RENDER_EXTENT,"[2] ||\n        v_mapCoord[1] > ").concat(r.Uniforms.RENDER_EXTENT,"[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(").concat(r.Uniforms.TILE_TEXTURE_ARRAY,"[0],  v_textureCoord);\n\n      ").concat(i.join("\n"),"\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ").concat(r.Uniforms.TRANSITION_ALPHA,";\n    }"),uniforms:d,paletteTextures:a.paletteTextures}}var g=function(n){d(a,e.default);var o=m(a);function a(e){var r;s(this,a);var n=(e=e?Object.assign({},e):{}).style||{};delete e.style;var i=e.cacheSize;return delete e.cacheSize,(r=o.call(this,e)).sources_=e.sources,r.renderedSource_=null,r.renderedResolution_=NaN,r.style_=n,r.cacheSize_=i,r.styleVariables_=r.style_.variables||{},r.addChangeListener(t.default.SOURCE,r.handleSourceUpdate_),r}return l(a,[{key:"getSources",value:function(e,t){var r=this.getSource();return this.sources_?"function"==typeof this.sources_?this.sources_(e,t):this.sources_:r?[r]:[]}},{key:"getRenderSource",value:function(){return this.renderedSource_||this.getSource()}},{key:"getSourceState",value:function(){var e=this.getRenderSource();return e?e.getState():"undefined"}},{key:"handleSourceUpdate_",value:function(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}},{key:"getSourceBandCount_",value:function(){var e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}},{key:"createRenderer",value:function(){var e=T(this.style_,this.getSourceBandCount_());return new r.default(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.cacheSize_,paletteTextures:e.paletteTextures})}},{key:"renderSources",value:function(e,t){for(var r,n=this.getRenderer(),o=0,a=t.length;o<a;++o)this.renderedSource_=t[o],n.prepareFrame(e)&&(r=n.renderFrame(e));return r}},{key:"render",value:function(e,t){var r=this;this.rendered=!0;for(var n=e.viewState,o=this.getSources(e.extent,n.resolution),a=!0,i=function(){var e=o[c],t=e.getState();if("loading"==t){e.addEventListener("change",function t(){"ready"==e.getState()&&(e.removeEventListener("change",t),r.changed())})}a=a&&"ready"==t},c=0,s=o.length;c<s;++c)i();var u=this.renderSources(e,o);if(this.getRenderer().renderComplete&&a)return this.renderedResolution_=n.resolution,u;if(this.renderedResolution_>.5*n.resolution){var l=this.getSources(e.extent,this.renderedResolution_).filter(function(e){return!o.includes(e)});if(l.length>0)return this.renderSources(e,l)}return u}},{key:"setStyle",value:function(e){this.styleVariables_=e.variables||{},this.style_=e;var t=T(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms}),this.changed()}},{key:"updateStyleVariables",value:function(e){Object.assign(this.styleVariables_,e),this.changed()}}]),a}();g.prototype.dispose;var b=g;exports.default=b;
},{"./BaseTile.js":"mRAJ","../layer/Property.js":"yK6k","../renderer/webgl/TileLayer.js":"Yziv","../style/expressions.js":"gI9l"}],"x523":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Graticule",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Group",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Heatmap",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"MapboxVector",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Vector",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"VectorImage",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"WebGLPoints",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"WebGLTile",{enumerable:!0,get:function(){return p.default}});var e=b(require("./layer/Graticule.js")),r=b(require("./layer/Group.js")),t=b(require("./layer/Heatmap.js")),u=b(require("./layer/Image.js")),n=b(require("./layer/Layer.js")),o=b(require("./layer/MapboxVector.js")),a=b(require("./layer/Tile.js")),i=b(require("./layer/Vector.js")),l=b(require("./layer/VectorImage.js")),f=b(require("./layer/VectorTile.js")),c=b(require("./layer/WebGLPoints.js")),p=b(require("./layer/WebGLTile.js"));function b(e){return e&&e.__esModule?e:{default:e}}
},{"./layer/Graticule.js":"ldxL","./layer/Group.js":"MeSs","./layer/Heatmap.js":"FiPw","./layer/Image.js":"kjaO","./layer/Layer.js":"Ee0U","./layer/MapboxVector.js":"pIP7","./layer/Tile.js":"PqrZ","./layer/Vector.js":"AGre","./layer/VectorImage.js":"MrKT","./layer/VectorTile.js":"g0oQ","./layer/WebGLPoints.js":"RLC4","./layer/WebGLTile.js":"x1In"}],"QZ5i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.quadKey=j;var e=a(require("./TileImage.js")),t=require("../extent.js"),r=require("../tileurlfunction.js"),o=require("../tilecoord.js"),i=require("../tilegrid.js"),n=require("../proj.js");function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,f(o.key),o)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=p(e,"string");return"symbol"===u(t)?t:String(t)}function p(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=g();return function(){var r,o=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){var t,r,o=e[0],i=new Array(o),n=1<<o-1;for(t=0;t<o;++t)r=48,e[1]&n&&(r+=1),e[2]&n&&(r+=2),i[t]=String.fromCharCode(r),n>>=1;return i.join("")}var S='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>',_=function(a){m(s,e.default);var u=y(s);function s(e){var t;c(this,s);var r=void 0!==e.hidpi&&e.hidpi;(t=u.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:!0,projection:(0,n.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})).hidpi_=r,t.culture_=void 0!==e.culture?e.culture:"en-us",t.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,t.apiKey_=e.key,t.imagerySet_=e.imagerySet;var o="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+t.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+t.apiKey_+"&c="+t.culture_;return fetch(o).then(function(e){return e.json()}).then(function(e){return t.handleImageryMetadataResponse(e)}),t}return l(s,[{key:"getApiKey",value:function(){return this.apiKey_}},{key:"getImagerySet",value:function(){return this.imagerySet_}},{key:"handleImageryMetadataResponse",value:function(e){var a=this;if(200==e.statusCode&&"OK"==e.statusDescription&&"ValidCredentials"==e.authenticationResultCode&&1==e.resourceSets.length&&1==e.resourceSets[0].resources.length){var u=e.resourceSets[0].resources[0],c=-1==this.maxZoom_?u.zoomMax:this.maxZoom_,s=this.getProjection(),l=(0,i.extentFromProjection)(s),f=this.hidpi_?2:1,p=u.imageWidth==u.imageHeight?u.imageWidth/f:[u.imageWidth/f,u.imageHeight/f],m=(0,i.createXYZ)({extent:l,minZoom:u.zoomMin,maxZoom:c,tileSize:p});this.tileGrid=m;var d=this.culture_,y=this.hidpi_;if(this.tileUrlFunction=(0,r.createFromTileUrlFunctions)(u.imageUrlSubdomains.map(function(e){var t=[0,0,0],r=u.imageUrl.replace("{subdomain}",e).replace("{culture}",d);return function(e,i,n){if(e){(0,o.createOrUpdate)(e[0],e[1],e[2],t);var a=r;return y&&(a+="&dpi=d1&device=mobile"),a.replace("{quadkey}",j(t))}}})),u.imageryProviders){var h=(0,n.getTransformFromProjections)((0,n.get)("EPSG:4326"),this.getProjection());this.setAttributions(function(e){var r=[],o=e.viewState,i=a.getTileGrid(),n=i.getZForResolution(o.resolution,a.zDirection),c=i.getTileCoordForCoordAndZ(o.center,n)[0];return u.imageryProviders.map(function(o){for(var i=!1,n=o.coverageAreas,a=0,u=n.length;a<u;++a){var s=n[a];if(c>=s.zoomMin&&c<=s.zoomMax){var l=s.bbox,f=[l[1],l[0],l[3],l[2]],p=(0,t.applyTransform)(f,h);if((0,t.intersects)(p,e.extent)){i=!0;break}}}i&&r.push(o.attribution)}),r.push(S),r})}this.setState("ready")}else this.setState("error")}}]),s}(),w=_;exports.default=w;
},{"./TileImage.js":"rQ5G","../extent.js":"L0Vw","../tileurlfunction.js":"dZ35","../tilecoord.js":"NPSy","../tilegrid.js":"gNrJ","../proj.js":"VAQc"}],"DGMa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./TileImage.js")),e=require("../tilegrid.js");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,c(o.key),o)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=l(t,"string");return"symbol"===o(e)?e:String(e)}function l(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=b();return function(){var r,o=d(t);if(e){var n=d(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(r){a(i,t.default);var o=s(i);function i(t){var r;n(this,i);var u=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",c=void 0!==t.tileGrid?t.tileGrid:(0,e.createXYZ)({extent:(0,e.extentFromProjection)(u),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});return(r=o.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:u,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:c,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})).gutter_=void 0!==t.gutter?t.gutter:0,r}return u(i,[{key:"getGutter",value:function(){return this.gutter_}}]),i}(),v=m;exports.default=v;
},{"./TileImage.js":"rQ5G","../tilegrid.js":"gNrJ"}],"O76m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./XYZ.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=u(t,"string");return"symbol"===n(e)?e:String(e)}function u(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=y();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(e){c(o,t.default);var n=f(o);function o(t){var e;return r(this,o),(e=n.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection})).account_=t.account,e.mapId_=t.map||"",e.config_=t.config||{},e.templateCache_={},e.initializeMap_(),e}return i(o,[{key:"getConfig",value:function(){return this.config_}},{key:"updateConfig",value:function(t){Object.assign(this.config_,t),this.initializeMap_()}},{key:"setConfig",value:function(t){this.config_=t||{},this.initializeMap_()}},{key:"initializeMap_",value:function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var n=new XMLHttpRequest;n.addEventListener("load",this.handleInitResponse_.bind(this,t)),n.addEventListener("error",this.handleInitError_.bind(this)),n.open("POST",e),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(this.config_))}}},{key:"handleInitResponse_",value:function(t,e){var n=e.target;if(!n.status||n.status>=200&&n.status<300){var r;try{r=JSON.parse(n.responseText)}catch(o){return void this.setState("error")}this.applyTemplate_(r),this.templateCache_[t]=r,this.setState("ready")}else this.setState("error")}},{key:"handleInitError_",value:function(t){this.setState("error")}},{key:"applyTemplate_",value:function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)}}]),o}(),m=d;exports.default=m;
},{"./XYZ.js":"DGMa"}],"L7CC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("../events/EventType.js")),t=a(require("../Feature.js")),r=a(require("../geom/Point.js")),n=a(require("./Vector.js")),i=require("../coordinate.js"),o=require("../asserts.js"),u=require("../extent.js"),s=require("../util.js");function a(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function h(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e){var t=y(e,"string");return"symbol"===c(t)?t:String(t)}function y(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=v(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=w();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(a){b(l,n.default);var c=g(l);function l(e){var t;return f(this,l),(t=c.call(this,{attributions:e.attributions,wrapX:e.wrapX})).resolution=void 0,t.distance=void 0!==e.distance?e.distance:20,t.minDistance=e.minDistance||0,t.interpolationRatio=0,t.features=[],t.geometryFunction=e.geometryFunction||function(e){var t=e.getGeometry();return(0,o.assert)("Point"==t.getType(),10),t},t.createCustomCluster_=e.createCluster,t.source=null,t.boundRefresh_=t.refresh.bind(O(t)),t.updateDistance(t.distance,t.minDistance),t.setSource(e.source||null),t}return h(l,[{key:"clear",value:function(e){this.features.length=0,d(_(l.prototype),"clear",this).call(this,e)}},{key:"getDistance",value:function(){return this.distance}},{key:"getSource",value:function(){return this.source}},{key:"loadFeatures",value:function(e,t,r){this.source.loadFeatures(e,t,r),t!==this.resolution&&(this.resolution=t,this.refresh())}},{key:"setDistance",value:function(e){this.updateDistance(e,this.minDistance)}},{key:"setMinDistance",value:function(e){this.updateDistance(this.distance,e)}},{key:"getMinDistance",value:function(){return this.minDistance}},{key:"setSource",value:function(t){this.source&&this.source.removeEventListener(e.default.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(e.default.CHANGE,this.boundRefresh_),this.refresh()}},{key:"refresh",value:function(){this.clear(),this.cluster(),this.addFeatures(this.features)}},{key:"updateDistance",value:function(e,t){var r=0===e?0:Math.min(t,e)/e,n=e!==this.distance||this.interpolationRatio!==r;this.distance=e,this.minDistance=t,this.interpolationRatio=r,n&&this.refresh()}},{key:"cluster",value:function(){if(void 0!==this.resolution&&this.source)for(var e=(0,u.createEmpty)(),t=this.distance*this.resolution,r=this.source.getFeatures(),n={},i=0,o=r.length;i<o;i++){var a=r[i];if(!((0,s.getUid)(a)in n)){var c=this.geometryFunction(a);if(c){var f=c.getCoordinates();(0,u.createOrUpdateFromCoordinate)(f,e),(0,u.buffer)(e,t,e);var l=this.source.getFeaturesInExtent(e).filter(function(e){var t=(0,s.getUid)(e);return!(t in n)&&(n[t]=!0,!0)});this.features.push(this.createCluster(l,e))}}}}},{key:"createCluster",value:function(e,n){for(var o=[0,0],s=e.length-1;s>=0;--s){var a=this.geometryFunction(e[s]);a?(0,i.add)(o,a.getCoordinates()):e.splice(s,1)}(0,i.scale)(o,1/e.length);var c=(0,u.getCenter)(n),f=this.interpolationRatio,l=new r.default([o[0]*(1-f)+c[0]*f,o[1]*(1-f)+c[1]*f]);return this.createCustomCluster_?this.createCustomCluster_(l,e):new t.default({geometry:l,features:e})}}]),l}(),D=C;exports.default=D;
},{"../events/EventType.js":"GUXn","../Feature.js":"E2jd","../geom/Point.js":"IIKA","./Vector.js":"v3xZ","../coordinate.js":"CMtO","../asserts.js":"DVOE","../extent.js":"L0Vw","../util.js":"KA50"}],"VF6g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=y(require("../DataTile.js")),t=y(require("../events/EventType.js")),i=y(require("../reproj/DataTile.js")),r=y(require("../TileCache.js")),o=y(require("./TileEventType.js")),n=d(require("./Tile.js")),l=y(require("../TileState.js")),u=require("../tilegrid.js"),a=require("../proj.js"),c=require("../tilecoord.js"),s=require("../util.js"),f=require("../functions.js"),h=require("../size.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(p=function(e){return e?i:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=p(t);if(i&&i.has(e))return i.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=o?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(r,n,l):r[n]=e[n]}return r.default=e,i&&i.set(e,r),r}function y(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function b(e,t,i){return t&&j(e.prototype,t),i&&j(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e){var t=_(e,"string");return"symbol"===v(t)?t:String(t)}function _(e,t){if("object"!==v(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function T(){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}}).apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=z();return function(){var i,r=G(e);if(t){var o=G(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return w(this,i)}}function w(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return F(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(p){C(y,n.default);var d=m(y);function y(e){var t;g(this,y);var i=void 0===e.projection?"EPSG:3857":e.projection,r=e.tileGrid;return void 0===r&&i&&(r=(0,u.createXYZ)({extent:(0,u.extentFromProjection)(i),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),(t=d.call(this,{cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:i,tileGrid:r,opaque:e.opaque,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate})).gutter_=void 0!==e.gutter?e.gutter:0,t.tileSize_=e.tileSize?(0,h.toSize)(e.tileSize):null,t.tileSizes_=null,t.tileLoadingKeys_={},t.loader_=e.loader,t.handleTileChange_=t.handleTileChange_.bind(F(t)),t.bandCount=void 0===e.bandCount?4:e.bandCount,t.tileGridForProjection_={},t.tileCacheForProjection_={},t}return b(y,[{key:"setTileSizes",value:function(e){this.tileSizes_=e}},{key:"getTileSize",value:function(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;var t=this.getTileGrid();return t?(0,h.toSize)(t.getTileSize(e)):[256,256]}},{key:"getGutterForProjection",value:function(e){var t=this.getProjection();return!t||(0,a.equivalent)(t,e)?this.gutter_:0}},{key:"setLoader",value:function(e){this.loader_=e}},{key:"getReprojTile_",value:function(e,t,r,o,n){var l=this,u=this.getTileCacheForProjection(o),a=(0,c.getKeyZXY)(e,t,r);if(u.containsKey(a)){var s=u.get(a);if(s&&s.key==this.getKey())return s}var f=this.getTileGrid(),p=Math.max.apply(null,f.getResolutions().map(function(e,t){var i=(0,h.toSize)(f.getTileSize(t)),r=l.getTileSize(t);return Math.max(r[0]/i[0],r[1]/i[1])})),d=this.getTileGridForProjection(n),y=this.getTileGridForProjection(o),v=[e,t,r],g=this.getTileCoordForTileUrlFunction(v,o),j=Object.assign({sourceProj:n,sourceTileGrid:d,targetProj:o,targetTileGrid:y,tileCoord:v,wrappedTileCoord:g,pixelRatio:p,gutter:this.getGutterForProjection(n),getTileFunction:function(e,t,i,r){return l.getTile(e,t,i,r,n)}},this.tileOptions),b=new i.default(j);return b.key=this.getKey(),b}},{key:"getTile",value:function(i,r,o,n,l){var u=this.getProjection();if(u&&l&&!(0,a.equivalent)(u,l))return this.getReprojTile_(i,r,o,l,u);var s=this.getTileSize(i),h=(0,c.getKeyZXY)(i,r,o);if(this.tileCache.containsKey(h))return this.tileCache.get(h);var p=this.loader_;var d=Object.assign({tileCoord:[i,r,o],loader:function(){return(0,f.toPromise)(function(){return p(i,r,o)})},size:s},this.tileOptions),y=new e.default(d);return y.key=this.getKey(),y.addEventListener(t.default.CHANGE,this.handleTileChange_),this.tileCache.set(h,y),y}},{key:"handleTileChange_",value:function(e){var t,i=e.target,r=(0,s.getUid)(i),u=i.getState();u==l.default.LOADING?(this.tileLoadingKeys_[r]=!0,t=o.default.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],t=u==l.default.ERROR?o.default.TILELOADERROR:u==l.default.LOADED?o.default.TILELOADEND:void 0),t&&this.dispatchEvent(new n.TileSourceEvent(t,i))}},{key:"getTileGridForProjection",value:function(e){var t=this.getProjection();if(this.tileGrid&&(!t||(0,a.equivalent)(t,e)))return this.tileGrid;var i=(0,s.getUid)(e);return i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=(0,u.getForProjection)(e)),this.tileGridForProjection_[i]}},{key:"setTileGridForProjection",value:function(e,t){var i=(0,a.get)(e);if(i){var r=(0,s.getUid)(i);r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=t)}}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();if(!t||(0,a.equivalent)(t,e))return this.tileCache;var i=(0,s.getUid)(e);return i in this.tileCacheForProjection_||(this.tileCacheForProjection_[i]=new r.default(.1)),this.tileCacheForProjection_[i]}},{key:"expireCache",value:function(e,t){var i=this.getTileCacheForProjection(e);for(var r in this.tileCache.expireCache(this.tileCache==i?t:{}),this.tileCacheForProjection_){var o=this.tileCacheForProjection_[r];o.expireCache(o==i?t:{})}}},{key:"clear",value:function(){for(var e in T(G(y.prototype),"clear",this).call(this),this.tileCacheForProjection_)this.tileCacheForProjection_[e].clear()}}]),y}(),k=R;exports.default=k;
},{"../DataTile.js":"PCNG","../events/EventType.js":"GUXn","../reproj/DataTile.js":"DpUU","../TileCache.js":"zj1M","./TileEventType.js":"qsHJ","./Tile.js":"MN9s","../TileState.js":"FoaO","../tilegrid.js":"gNrJ","../proj.js":"VAQc","../tilecoord.js":"NPSy","../util.js":"KA50","../functions.js":"pDAE","../size.js":"d9VJ"}],"ZDWy":[function(require,module,exports) {
var t=function(t){"use strict";const n="This is not an object",r="This is not a Float16Array object",e="This constructor is not a subclass of Float16Array",o="The constructor property value is not an object",i="Species constructor didn't return TypedArray object",s="Derived constructor created TypedArray object which was too small length",u="Attempting to access detached ArrayBuffer",f="Cannot convert undefined or null to object",c="Cannot mix BigInt and other types, use explicit conversions",h="@@iterator property is not callable",l="Reduce of empty array with no initial value",a="The comparison function must be either a function or undefined",w="Offset is out of bounds";function y(t){return(n,...r)=>g(t,n,r)}function p(t,n){return y(A(t,n).get)}const{apply:g,construct:d,defineProperty:v,get:b,getOwnPropertyDescriptor:A,getPrototypeOf:_,has:E,ownKeys:T,set:x,setPrototypeOf:m}=Reflect,S=Proxy,{MAX_SAFE_INTEGER:O,isFinite:j,isNaN:P}=Number,{iterator:F,species:B,toStringTag:L,for:R}=Symbol,k=Object,{create:I,defineProperty:M,freeze:N,is:U}=k,D=k.prototype,W=D.__lookupGetter__?y(D.__lookupGetter__):(t,n)=>{if(null==t)throw Ut(f);let r=k(t);do{const t=A(r,n);if(void 0!==t)return G(t,"get")?t.get:void 0}while(null!==(r=_(r)))},G=k.hasOwn||y(D.hasOwnProperty),C=Array,V=C.isArray,Y=C.prototype,z=y(Y.join),K=y(Y.push),X=y(Y.toLocaleString),q=Y[F],H=y(q),{abs:J,floor:Q,log2:Z,pow:$,sign:tt,trunc:nt}=Math,rt=ArrayBuffer,et=rt.isView,ot=rt.prototype,it=y(ot.slice),st=p(ot,"byteLength"),ut="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null,ft=ut&&p(ut.prototype,"byteLength"),ct=_(Uint8Array),ht=ct.from,lt=ct.prototype,at=lt[F],wt=y(lt.keys),yt=y(lt.values),pt=y(lt.entries),gt=y(lt.set),dt=y(lt.reverse),vt=y(lt.fill),bt=y(lt.copyWithin),At=y(lt.sort),_t=y(lt.slice),Et=y(lt.subarray),Tt=p(lt,"buffer"),xt=p(lt,"byteOffset"),mt=p(lt,"length"),St=p(lt,L),Ot=Uint16Array,jt=(...t)=>g(ht,Ot,t),Pt=Uint32Array,Ft=Float32Array,Bt=_([][F]()),Lt=y(Bt.next),Rt=y(function*(){}().next),kt=_(Bt),It=DataView.prototype,Mt=y(It.getUint16),Nt=y(It.setUint16),Ut=TypeError,Dt=RangeError,Wt=WeakSet,Gt=Wt.prototype,Ct=y(Gt.add),Vt=y(Gt.has),Yt=WeakMap,zt=Yt.prototype,Kt=y(zt.get),Xt=y(zt.has),qt=y(zt.set),Ht=new Yt,Jt=I(null,{next:{value:function(){const t=Kt(Ht,this);return Lt(t)}},[F]:{value:function(){return this}}});function Qt(t){if(t[F]===q&&Bt.next===Lt)return t;const n=I(Jt);return qt(Ht,n,H(t)),n}const Zt=new Yt,$t=I(kt,{next:{value:function(){const t=Kt(Zt,this);return Rt(t)},writable:!0,configurable:!0}});for(const Dn of T(Bt))"next"!==Dn&&M($t,Dn,A(Bt,Dn));function tn(t){const n=I($t);return qt(Zt,n,t),n}function nn(t){return null!==t&&"object"==typeof t||"function"==typeof t}function rn(t){return null!==t&&"object"==typeof t}function en(t){return void 0!==St(t)}function on(t){const n=St(t);return"BigInt64Array"===n||"BigUint64Array"===n}function sn(t){return!!V(t)&&(t[F]===q&&Bt.next===Lt)}function un(t){if("string"!=typeof t)return!1;const n=+t;return t===n+""&&(!!j(n)&&n===nt(n))}const fn=R("__Float16Array__");function cn(t){const n=nt(t),r=n%2!=0,e=J(t-n);return e>.5||.5===e&&r?n+tt(t):n}const hn=31,ln=15,an=10,wn=1023;function yn(t){const n=J(t),r=t<0||U(t,-0)?1:0;let e,o;if(j(n)){let t=Q(Z(n)),r=$(2,-t);n*r<1&&(--t,r*=2),n*r>=2&&(++t,r/=2),t+ln>=hn?(e=0,o=hn):t+ln>=1?(e=cn(1024*(n*r-1))&wn,o=t+ln):(e=cn(16777216*n)&wn,o=0)}else e=P(n)?512:0,o=hn;return r<<15|o<<an|e}const pn=new rt(4),gn=new Ft(pn),dn=new Pt(pn),vn=new Pt(2048);for(let Dn=1;Dn<1024;++Dn){let t=Dn<<13,n=0;for(;0==(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,vn[Dn]=t|n}for(let Dn=1024;Dn<2048;++Dn)vn[Dn]=939524096+(Dn-1024<<13);const bn=new Pt(64);for(let Dn=1;Dn<31;++Dn)bn[Dn]=Dn<<23;bn[31]=1199570944,bn[32]=2147483648;for(let Dn=33;Dn<63;++Dn)bn[Dn]=2147483648+(Dn-32<<23);bn[63]=3347054592;const An=new Ot(64);for(let Dn=1;Dn<64;++Dn)32!==Dn&&(An[Dn]=1024);function _n(t){const n=t>>10;return dn[0]=vn[An[n]+(1023&t)]+bn[n],gn[0]}function En(t){const n=+t;return P(n)||0===n?0:nt(n)}function Tn(t){const n=En(t);return n<0?0:n<O?n:O}function xn(t,r){if(!nn(t))throw Ut(n);const e=t.constructor;if(void 0===e)return r;if(!nn(e))throw Ut(o);const i=e[B];return null==i?r:i}function mn(t){if(function(t){if(null===ut)return!1;try{return ft(t),!0}catch(n){return!1}}(t))return!1;try{return it(t,0,0),!1}catch(n){}return!0}function Sn(t,n){const r=P(t),e=P(n);if(r&&e)return 0;if(r)return 1;if(e)return-1;if(t<n)return-1;if(t>n)return 1;if(0===t&&0===n){const r=U(t,0),e=U(n,0);if(!r&&e)return-1;if(r&&!e)return 1}return 0}const On=2,jn=new Yt;function Pn(t){return Xt(jn,t)||!et(t)&&function(t){if(!rn(t))return!1;const n=_(t);if(!rn(n))return!1;const r=n.constructor;if(void 0===r)return!1;if(!nn(r))throw Ut(o);return E(r,fn)}(t)}function Fn(t){if(!Pn(t))throw Ut(r)}function Bn(t,n){const r=Pn(t),e=en(t);if(!r&&!e)throw Ut(i);if("number"==typeof n){let e;if(r){const n=Ln(t);e=mt(n)}else e=mt(t);if(e<n)throw Ut(s)}if(on(t))throw Ut(c)}function Ln(t){const n=Kt(jn,t);if(void 0!==n){if(mn(Tt(n)))throw Ut(u);return n}const r=t.buffer;if(mn(r))throw Ut(u);const e=d(Mn,[r,t.byteOffset,t.length],t.constructor);return Kt(jn,e)}function Rn(t){const n=mt(t),r=[];for(let e=0;e<n;++e)r[e]=_n(t[e]);return r}const kn=new Wt;for(const Dn of T(lt)){if(Dn===L)continue;const t=A(lt,Dn);G(t,"get")&&"function"==typeof t.get&&Ct(kn,t.get)}const In=N({get:(t,n,r)=>un(n)&&G(t,n)?_n(b(t,n)):Vt(kn,W(t,n))?b(t,n):b(t,n,r),set:(t,n,r,e)=>un(n)&&G(t,n)?x(t,n,yn(r)):x(t,n,r,e),getOwnPropertyDescriptor(t,n){if(un(n)&&G(t,n)){const r=A(t,n);return r.value=_n(r.value),r}return A(t,n)},defineProperty:(t,n,r)=>un(n)&&G(t,n)&&G(r,"value")?(r.value=yn(r.value),v(t,n,r)):v(t,n,r)});class Mn{constructor(t,n,r){let e;if(Pn(t))e=d(Ot,[Ln(t)],new.target);else if(nn(t)&&!function(t){try{return st(t),!0}catch(n){return!1}}(t)){let n,r;if(en(t)){if(n=t,r=mt(t),mn(Tt(t)))throw Ut(u);if(on(t))throw Ut(c);const o=new rt(r*On);e=d(Ot,[o],new.target)}else{const o=t[F];if(null!=o&&"function"!=typeof o)throw Ut(h);null!=o?sn(t)?(n=t,r=t.length):r=(n=[...t]).length:r=Tn((n=t).length),e=d(Ot,[r],new.target)}for(let t=0;t<r;++t)e[t]=yn(n[t])}else e=d(Ot,arguments,new.target);const o=new S(e,In);return qt(jn,o,e),o}static from(t,...n){if(!E(this,fn))throw Ut(e);if(this===Mn){if(Pn(t)&&0===n.length){const n=Ln(t),r=new Ot(Tt(n),xt(n),mt(n));return new Mn(Tt(_t(r)))}if(0===n.length)return new Mn(Tt(jt(t,yn)));const r=n[0],e=n[1];return new Mn(Tt(jt(t,function(t,...n){return yn(g(r,this,[t,...Qt(n)]))},e)))}let r,o;const i=t[F];if(null!=i&&"function"!=typeof i)throw Ut(h);if(null!=i)sn(t)?(r=t,o=t.length):en(s=t)&&s[F]===at&&Bt.next===Lt?(r=t,o=mt(t)):o=(r=[...t]).length;else{if(null==t)throw Ut(f);o=Tn((r=k(t)).length)}var s;const u=new this(o);if(0===n.length)for(let e=0;e<o;++e)u[e]=r[e];else{const t=n[0],e=n[1];for(let n=0;n<o;++n)u[n]=g(t,e,[r[n],n])}return u}static of(...t){if(!E(this,fn))throw Ut(e);const n=t.length;if(this===Mn){const r=new Mn(n),e=Ln(r);for(let o=0;o<n;++o)e[o]=yn(t[o]);return r}const r=new this(n);for(let e=0;e<n;++e)r[e]=t[e];return r}keys(){Fn(this);const t=Ln(this);return wt(t)}values(){Fn(this);const t=Ln(this);return tn(function*(){for(const n of yt(t))yield _n(n)}())}entries(){Fn(this);const t=Ln(this);return tn(function*(){for(const[n,r]of pt(t))yield[n,_n(r)]}())}at(t){Fn(this);const n=Ln(this),r=mt(n),e=En(t),o=e>=0?e:r+e;if(!(o<0||o>=r))return _n(n[o])}with(t,n){Fn(this);const r=Ln(this),e=mt(r),o=En(t),i=o>=0?o:e+o,s=+n;if(i<0||i>=e)throw Dt(w);const u=new Ot(Tt(r),xt(r),mt(r)),f=new Mn(Tt(_t(u)));return Ln(f)[i]=yn(s),f}map(t,...n){Fn(this);const r=Ln(this),e=mt(r),o=n[0],i=xn(r,Mn);if(i===Mn){const n=new Mn(e),i=Ln(n);for(let s=0;s<e;++s){const n=_n(r[s]);i[s]=yn(g(t,o,[n,s,this]))}return n}const s=new i(e);Bn(s,e);for(let u=0;u<e;++u){const n=_n(r[u]);s[u]=g(t,o,[n,u,this])}return s}filter(t,...n){Fn(this);const r=Ln(this),e=mt(r),o=n[0],i=[];for(let u=0;u<e;++u){const n=_n(r[u]);g(t,o,[n,u,this])&&K(i,n)}const s=new(xn(r,Mn))(i);return Bn(s),s}reduce(t,...n){Fn(this);const r=Ln(this),e=mt(r);if(0===e&&0===n.length)throw Ut(l);let o,i;0===n.length?(o=_n(r[0]),i=1):(o=n[0],i=0);for(let s=i;s<e;++s)o=t(o,_n(r[s]),s,this);return o}reduceRight(t,...n){Fn(this);const r=Ln(this),e=mt(r);if(0===e&&0===n.length)throw Ut(l);let o,i;0===n.length?(o=_n(r[e-1]),i=e-2):(o=n[0],i=e-1);for(let s=i;s>=0;--s)o=t(o,_n(r[s]),s,this);return o}forEach(t,...n){Fn(this);const r=Ln(this),e=mt(r),o=n[0];for(let i=0;i<e;++i)g(t,o,[_n(r[i]),i,this])}find(t,...n){Fn(this);const r=Ln(this),e=mt(r),o=n[0];for(let i=0;i<e;++i){const n=_n(r[i]);if(g(t,o,[n,i,this]))return n}}findIndex(t,...n){Fn(this);const r=Ln(this),e=mt(r),o=n[0];for(let i=0;i<e;++i){const n=_n(r[i]);if(g(t,o,[n,i,this]))return i}return-1}findLast(t,...n){Fn(this);const r=Ln(this),e=mt(r),o=n[0];for(let i=e-1;i>=0;--i){const n=_n(r[i]);if(g(t,o,[n,i,this]))return n}}findLastIndex(t,...n){Fn(this);const r=Ln(this),e=mt(r),o=n[0];for(let i=e-1;i>=0;--i){const n=_n(r[i]);if(g(t,o,[n,i,this]))return i}return-1}every(t,...n){Fn(this);const r=Ln(this),e=mt(r),o=n[0];for(let i=0;i<e;++i)if(!g(t,o,[_n(r[i]),i,this]))return!1;return!0}some(t,...n){Fn(this);const r=Ln(this),e=mt(r),o=n[0];for(let i=0;i<e;++i)if(g(t,o,[_n(r[i]),i,this]))return!0;return!1}set(t,...n){Fn(this);const r=Ln(this),e=En(n[0]);if(e<0)throw Dt(w);if(null==t)throw Ut(f);if(on(t))throw Ut(c);if(Pn(t))return gt(Ln(this),Ln(t),e);if(en(t)){if(mn(Tt(t)))throw Ut(u)}const o=mt(r),i=k(t),s=Tn(i.length);if(e===1/0||s+e>o)throw Dt(w);for(let u=0;u<s;++u)r[u+e]=yn(i[u])}reverse(){Fn(this);const t=Ln(this);return dt(t),this}toReversed(){Fn(this);const t=Ln(this),n=new Ot(Tt(t),xt(t),mt(t)),r=new Mn(Tt(_t(n))),e=Ln(r);return dt(e),r}fill(t,...n){Fn(this);const r=Ln(this);return vt(r,yn(t),...Qt(n)),this}copyWithin(t,n,...r){Fn(this);const e=Ln(this);return bt(e,t,n,...Qt(r)),this}sort(t){Fn(this);const n=Ln(this),r=void 0!==t?t:Sn;return At(n,(t,n)=>r(_n(t),_n(n))),this}toSorted(t){Fn(this);const n=Ln(this);if(void 0!==t&&"function"!=typeof t)throw new Ut(a);const r=void 0!==t?t:Sn,e=new Ot(Tt(n),xt(n),mt(n)),o=new Mn(Tt(_t(e))),i=Ln(o);return At(i,(t,n)=>r(_n(t),_n(n))),o}slice(t,n){Fn(this);const r=Ln(this),e=xn(r,Mn);if(e===Mn){const e=new Ot(Tt(r),xt(r),mt(r));return new Mn(Tt(_t(e,t,n)))}const o=mt(r),i=En(t),s=void 0===n?o:En(n);let f,c;const h=(c=s===-1/0?0:s<0?o+s>0?o+s:0:o<s?o:s)-(f=i===-1/0?0:i<0?o+i>0?o+i:0:o<i?o:i)>0?c-f:0,l=new e(h);if(Bn(l,h),0===h)return l;if(mn(Tt(r)))throw Ut(u);let a=0;for(;f<c;)l[a]=_n(r[f]),++f,++a;return l}subarray(t,n){Fn(this);const r=Ln(this),e=xn(r,Mn),o=new Ot(Tt(r),xt(r),mt(r)),i=Et(o,t,n),s=new e(Tt(i),xt(i),mt(i));return Bn(s),s}indexOf(t,...n){Fn(this);const r=Ln(this),e=mt(r);let o=En(n[0]);if(o===1/0)return-1;o<0&&(o+=e)<0&&(o=0);for(let i=o;i<e;++i)if(G(r,i)&&_n(r[i])===t)return i;return-1}lastIndexOf(t,...n){Fn(this);const r=Ln(this),e=mt(r);let o=n.length>=1?En(n[0]):e-1;if(o===-1/0)return-1;o>=0?o=o<e-1?o:e-1:o+=e;for(let i=o;i>=0;--i)if(G(r,i)&&_n(r[i])===t)return i;return-1}includes(t,...n){Fn(this);const r=Ln(this),e=mt(r);let o=En(n[0]);if(o===1/0)return!1;o<0&&(o+=e)<0&&(o=0);const i=P(t);for(let s=o;s<e;++s){const n=_n(r[s]);if(i&&P(n))return!0;if(n===t)return!0}return!1}join(t){Fn(this);const n=Rn(Ln(this));return z(n,t)}toLocaleString(...t){Fn(this);const n=Rn(Ln(this));return X(n,...Qt(t))}get[L](){if(Pn(this))return"Float16Array"}}M(Mn,"BYTES_PER_ELEMENT",{value:On}),M(Mn,fn,{}),m(Mn,ct);const Nn=Mn.prototype;function Un(t){const n=+t;return j(n)&&0!==n?_n(yn(n)):n}return M(Nn,"BYTES_PER_ELEMENT",{value:On}),M(Nn,F,{value:Nn.values,writable:!0,configurable:!0}),m(Nn,lt),t.Float16Array=Mn,t.f16round=Un,t.getFloat16=function(t,n,...r){return _n(Mt(t,n,...Qt(r)))},t.hfround=Un,t.isFloat16Array=Pn,t.isTypedArray=function(t){return en(t)||Pn(t)},t.setFloat16=function(t,n,r,...e){return Nt(t,n,yn(r),...Qt(e))},Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t}({});
},{}],"gJ2f":[function(require,module,exports) {
function e(e,o,t){const l=t&&t.debug||!1;l&&console.log("[xml-utils] getting "+o+" in "+e);const n="object"==typeof e?e.outer:e,s=n.slice(0,n.indexOf(">")+1),c=['"',"'"];for(let u=0;u<c.length;u++){const e=c[u],t=o+"\\="+e+"([^"+e+"]*)"+e;l&&console.log("[xml-utils] pattern:",t);const n=new RegExp(t).exec(s);if(l&&console.log("[xml-utils] match:",n),n)return n[1]}}module.exports=e,module.exports.default=e;
},{}],"hL3V":[function(require,module,exports) {
function e(e,n,o){const t=new RegExp(n).exec(e.slice(o));return t?o+t.index:-1}module.exports=e,module.exports.default=e;
},{}],"dYXQ":[function(require,module,exports) {
function e(e,n,t){const o=new RegExp(n).exec(e.slice(t));return o?t+o.index+o[0].length-1:-1}module.exports=e,module.exports.default=e;
},{}],"X4rP":[function(require,module,exports) {
function e(e,t){const n=new RegExp(t,"g"),o=e.match(n);return o?o.length:0}module.exports=e,module.exports.default=e;
},{}],"xswX":[function(require,module,exports) {
const e=require("./index-of-match.js"),t=require("./index-of-match-end.js"),n=require("./count-substring.js");function s(s,l,o){const i=o&&o.debug||!1,r=!(o&&!1===typeof o.nested),u=o&&o.startIndex||0;i&&console.log("[xml-utils] starting findTagByName with",l," and ",o);const c=e(s,`<${l}[ \n>/]`,u);if(i&&console.log("[xml-utils] start:",c),-1===c)return;const d=s.slice(c+l.length);let f=t(d,"^[^<]*[ /]>",0);const a=-1!==f&&"/"===d[f-1];if(i&&console.log("[xml-utils] selfClosing:",a),!1===a)if(r){let e=0,s=1,o=0;for(;-1!==(f=t(d,"[ /]"+l+">",e));){const t=d.substring(e,f+1);if(s+=n(t,"<"+l+"[ \n\t>]"),(o+=n(t,"</"+l+">"))>=s)break;e=f}}else f=t(d,"[ /]"+l+">",0);const g=c+l.length+f+1;if(i&&console.log("[xml-utils] end:",g),-1===g)return;const x=s.slice(c,g);let m;return{inner:m=a?null:x.slice(x.indexOf(">")+1,x.lastIndexOf("<")),outer:x,start:c,end:g}}module.exports=s,module.exports.default=s;
},{"./index-of-match.js":"hL3V","./index-of-match-end.js":"dYXQ","./count-substring.js":"X4rP"}],"lL7e":[function(require,module,exports) {
const e=require("./find-tag-by-name.js");function t(t,n,o){const s=[],d=o&&o.debug||!1,a=!o||"boolean"!=typeof o.nested||o.nested;let r,u=o&&o.startIndex||0;for(;r=e(t,n,{debug:d,startIndex:u});)u=a?r.start+1+n.length:r.end,s.push(r);return d&&console.log("findTagsByName found",s.length,"tags"),s}module.exports=t,module.exports.default=t;
},{"./find-tag-by-name.js":"xswX"}],"QETr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.photometricInterpretations=exports.geoKeys=exports.geoKeyNames=exports.fieldTypes=exports.fieldTypeNames=exports.fieldTags=exports.fieldTagTypes=exports.fieldTagNames=exports.arrayFields=exports.LercParameters=exports.LercAddCompression=exports.ExtraSamplesValues=void 0;var e={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"};exports.fieldTagNames=e;var o={};for(var r in exports.fieldTags=o,e)e.hasOwnProperty(r)&&(o[e[r]]=parseInt(r,10));var t={256:"SHORT",257:"SHORT",258:"SHORT",259:"SHORT",262:"SHORT",273:"LONG",274:"SHORT",277:"SHORT",278:"LONG",279:"LONG",282:"RATIONAL",283:"RATIONAL",284:"SHORT",286:"SHORT",287:"RATIONAL",296:"SHORT",297:"SHORT",305:"ASCII",306:"ASCII",338:"SHORT",339:"SHORT",513:"LONG",514:"LONG",1024:"SHORT",1025:"SHORT",2048:"SHORT",2049:"ASCII",3072:"SHORT",3073:"ASCII",33550:"DOUBLE",33922:"DOUBLE",34665:"LONG",34735:"SHORT",34737:"ASCII",42113:"ASCII"};exports.fieldTagTypes=t;var i=[o.BitsPerSample,o.ExtraSamples,o.SampleFormat,o.StripByteCounts,o.StripOffsets,o.StripRowCounts,o.TileByteCounts,o.TileOffsets,o.SubIFDs];exports.arrayFields=i;var a={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"};exports.fieldTypeNames=a;var s={};for(var n in exports.fieldTypes=s,a)a.hasOwnProperty(n)&&(s[a[n]]=parseInt(n,10));var l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9};exports.photometricInterpretations=l;var p={Unspecified:0,Assocalpha:1,Unassalpha:2};exports.ExtraSamplesValues=p;var G={Version:0,AddCompression:1};exports.LercParameters=G;var y={None:0,Deflate:1};exports.LercAddCompression=y;var S={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};exports.geoKeyNames=S;var T={};for(var g in exports.geoKeys=T,S)S.hasOwnProperty(g)&&(T[S[g]]=parseInt(g,10));
},{}],"xJBr":[function(require,module,exports) {
"use strict";function t(t,r){for(var e,n=t.width,h=t.height,o=new Uint8Array(n*h*3),a=0,i=0;a<t.length;++a,i+=3)e=256-t[a]/r*256,o[i]=e,o[i+1]=e,o[i+2]=e;return o}function r(t,r){for(var e,n=t.width,h=t.height,o=new Uint8Array(n*h*3),a=0,i=0;a<t.length;++a,i+=3)e=t[a]/r*256,o[i]=e,o[i+1]=e,o[i+2]=e;return o}function e(t,r){for(var e=t.width,n=t.height,h=new Uint8Array(e*n*3),o=r.length/3,a=r.length/3*2,i=0,f=0;i<t.length;++i,f+=3){var u=t[i];h[f]=r[u]/65536*256,h[f+1]=r[u+o]/65536*256,h[f+2]=r[u+a]/65536*256}return h}function n(t){for(var r=t.width,e=t.height,n=new Uint8Array(r*e*3),h=0,o=0;h<t.length;h+=4,o+=3){var a=t[h],i=t[h+1],f=t[h+2],u=t[h+3];n[o]=(255-a)/256*255*((255-u)/256),n[o+1]=(255-i)/256*255*((255-u)/256),n[o+2]=(255-f)/256*255*((255-u)/256)}return n}function h(t){for(var r=t.width,e=t.height,n=new Uint8ClampedArray(r*e*3),h=0,o=0;h<t.length;h+=3,o+=3){var a=t[h],i=t[h+1],f=t[h+2];n[o]=a+1.402*(f-128),n[o+1]=a-.34414*(i-128)-.71414*(f-128),n[o+2]=a+1.772*(i-128)}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromBlackIsZero=r,exports.fromCIELab=f,exports.fromCMYK=n,exports.fromPalette=e,exports.fromWhiteIsZero=t,exports.fromYCbCr=h;var o=.95047,a=1,i=1.08883;function f(t){for(var r=t.width,e=t.height,n=new Uint8Array(r*e*3),h=0,f=0;h<t.length;h+=3,f+=3){var u=(t[h+0]+16)/116,v=(t[h+1]<<24>>24)/500+u,w=u-(t[h+2]<<24>>24)/200,g=void 0,l=void 0,m=void 0;l=-.9689*(v=o*(v*v*v>.008856?v*v*v:(v-16/116)/7.787))+1.8758*(u=a*(u*u*u>.008856?u*u*u:(u-16/116)/7.787))+.0415*(w=i*(w*w*w>.008856?w*w*w:(w-16/116)/7.787)),m=.0557*v+-.204*u+1.057*w,g=(g=3.2406*v+-1.5372*u+-.4986*w)>.0031308?1.055*Math.pow(g,1/2.4)-.055:12.92*g,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:12.92*l,m=m>.0031308?1.055*Math.pow(m,1/2.4)-.055:12.92*m,n[f]=255*Math.max(0,Math.min(1,g)),n[f+1]=255*Math.max(0,Math.min(1,l)),n[f+2]=255*Math.max(0,Math.min(1,m))}return n}
},{}],"FheM":[function(require,module,exports) {
var t=null;function e(){return t||(t=n()),t}function n(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return r(t[0])}return"/"}function r(t){return(""+t).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}exports.getBundleURL=e,exports.getBaseURL=r;
},{}],"TUK3":[function(require,module,exports) {
var r=require("./bundle-url").getBundleURL;function e(r){Array.isArray(r)||(r=[r]);var e=r[r.length-1];try{return Promise.resolve(require(e))}catch(n){if("MODULE_NOT_FOUND"===n.code)return new s(function(n,i){t(r.slice(0,-1)).then(function(){return require(e)}).then(n,i)});throw n}}function t(r){return Promise.all(r.map(u))}var n={};function i(r,e){n[r]=e}module.exports=exports=e,exports.load=t,exports.register=i;var o={};function u(e){var t;if(Array.isArray(e)&&(t=e[1],e=e[0]),o[e])return o[e];var i=(e.substring(e.lastIndexOf(".")+1,e.length)||e).toLowerCase(),u=n[i];return u?o[e]=u(r()+e).then(function(r){return r&&module.bundle.register(t,r),r}).catch(function(r){throw delete o[e],r}):void 0}function s(r){this.executor=r,this.promise=null}s.prototype.then=function(r,e){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.then(r,e)},s.prototype.catch=function(r){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.catch(r)};
},{"./bundle-url":"FheM"}],"iicZ":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return e};var e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(P){l=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,u=Object.create(o.prototype),a=new q(n||[]);return i(u,"_invoke",{value:L(t,e,a)}),u}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(P){return{type:"throw",arg:P}}}e.wrap=s;var p={};function d(){}function v(){}function y(){}var g={};l(g,a,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(k([])));w&&w!==n&&o.call(w,a)&&(g=w);var b=y.prototype=d.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(r){l(t,r,function(t){return this._invoke(r,t)})})}function _(r,e){var n;i(this,"_invoke",{value:function(i,u){function a(){return new e(function(n,a){!function n(i,u,a,c){var f=h(r[i],r,u);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==t(s)&&o.call(s,"__await")?e.resolve(s.__await).then(function(t){n("next",t,a,c)},function(t){n("throw",t,a,c)}):e.resolve(s).then(function(t){l.value=t,a(l)},function(t){return n("throw",t,a,c)})}c(f.arg)}(i,u,n,a)})}return n=n?n.then(a,a):a()}})}function L(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(e.method=o,e.arg=i;;){var u=e.delegate;if(u){var a=E(u,e);if(a){if(a===p)continue;return a}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=h(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function E(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,E(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function j(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:S}}function S(){return{value:void 0,done:!0}}return v.prototype=y,i(b,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,f,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,f,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},x(_.prototype),l(_.prototype,c,function(){return this}),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var u=new _(s(t,r,n,o),i);return e.isGeneratorFunction(r)?u:u.next().then(function(t){return t.done?t.value:u.next()})},x(b),l(b,f,"Generator"),l(b,a,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return u.type="throw",u.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],u=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(u)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:k(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},e}function e(t,r,e,n,o,i,u){try{var a=t[i](u),c=a.value}catch(f){return void e(f)}a.done?r(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var r=this,n=arguments;return new Promise(function(o,i){var u=t.apply(r,n);function a(t){e(u,o,i,a,c,"next",t)}function c(t){e(u,o,i,a,c,"throw",t)}a(void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.addDecoder=i,exports.getDecoder=u;var o=new Map;function i(t,r){Array.isArray(t)||(t=[t]),t.forEach(function(t){return o.set(t,r)})}function u(t){return a.apply(this,arguments)}function a(){return(a=n(r().mark(function t(e){var n,i;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.get(e.Compression)){t.next=3;break}throw new Error("Unknown compression method identifier: ".concat(e.Compression));case 3:return t.next=5,n();case 5:return i=t.sent,t.abrupt("return",new i(e));case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}i([void 0,1],function(){return require("_bundle_loader")(require.resolve("./raw.js")).then(function(t){return t.default})}),i(5,function(){return require("_bundle_loader")(require.resolve("./lzw.js")).then(function(t){return t.default})}),i(6,function(){throw new Error("old style JPEG compression is not supported.")}),i(7,function(){return require("_bundle_loader")(require.resolve("./jpeg.js")).then(function(t){return t.default})}),i([8,32946],function(){return require("_bundle_loader")(require.resolve("./deflate.js")).then(function(t){return t.default})}),i(32773,function(){return require("_bundle_loader")(require.resolve("./packbits.js")).then(function(t){return t.default})}),i(34887,function(){return require("_bundle_loader")(require.resolve("./lerc.js")).then(function(t){return t.default})}),i(50001,function(){return require("_bundle_loader")(require.resolve("./webimage.js")).then(function(t){return t.default})});
},{"_bundle_loader":"TUK3","./raw.js":[["raw.84346b0d.js","Veiw"],"raw.84346b0d.js.map","Veiw"],"./lzw.js":[["lzw.2d70a32a.js","PQ35"],"lzw.2d70a32a.js.map","PQ35"],"./jpeg.js":[["jpeg.c9463dfc.js","pvDe"],"jpeg.c9463dfc.js.map","pvDe"],"./deflate.js":[["deflate.2dd7c7e7.js","UNA0"],"deflate.2dd7c7e7.js.map","UNA0"],"./packbits.js":[["packbits.2d8561ac.js","RNYP"],"packbits.2d8561ac.js.map","RNYP"],"./lerc.js":[["lerc.67c5888c.js","eyc4"],"lerc.67c5888c.js.map","eyc4"],"./webimage.js":[["webimage.0747b024.js","MHQG"],"webimage.0747b024.js.map","MHQG"]}],"XciQ":[function(require,module,exports) {
"use strict";function r(r,e,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(r).constructor)(e*t*a)}function e(e,t,a,n,o){var i=t/n,s=a/o;return e.map(function(e){for(var u=r(e,n,o),l=0;l<o;++l)for(var c=Math.min(Math.round(s*l),a-1),h=0;h<n;++h){var f=Math.min(Math.round(i*h),t-1),v=e[c*t+f];u[l*n+h]=v}return u})}function t(r,e,t){return(1-t)*r+t*e}function a(e,a,n,o,i){var s=a/o,u=n/i;return e.map(function(e){for(var l=r(e,o,i),c=0;c<i;++c)for(var h=u*c,f=Math.floor(h),v=Math.min(Math.ceil(h),n-1),p=0;p<o;++p){var M=s*p,m=M%1,d=Math.floor(M),w=Math.min(Math.ceil(M),a-1),x=e[f*a+d],g=e[f*a+w],b=e[v*a+d],I=e[v*a+w],O=t(t(x,g,m),t(b,I,m),h%1);l[c*o+p]=O}return l})}function n(r,t,n,o,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(s.toLowerCase()){case"nearest":return e(r,t,n,o,i);case"bilinear":case"linear":return a(r,t,n,o,i);default:throw new Error("Unsupported resampling method: '".concat(s,"'"))}}function o(e,t,a,n,o,i){for(var s=t/n,u=a/o,l=r(e,n,o,i),c=0;c<o;++c)for(var h=Math.min(Math.round(u*c),a-1),f=0;f<n;++f)for(var v=Math.min(Math.round(s*f),t-1),p=0;p<i;++p){var M=e[h*t*i+v*i+p];l[c*n*i+f*i+p]=M}return l}function i(e,a,n,o,i,s){for(var u=a/o,l=n/i,c=r(e,o,i,s),h=0;h<i;++h)for(var f=l*h,v=Math.floor(f),p=Math.min(Math.ceil(f),n-1),M=0;M<o;++M)for(var m=u*M,d=m%1,w=Math.floor(m),x=Math.min(Math.ceil(m),a-1),g=0;g<s;++g){var b=e[v*a*s+w*s+g],I=e[v*a*s+x*s+g],O=e[p*a*s+w*s+g],j=e[p*a*s+x*s+g],y=t(t(b,I,d),t(O,j,d),f%1);c[h*o*s+M*s+g]=y}return c}function s(r,e,t,a,n,s){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(u.toLowerCase()){case"nearest":return o(r,e,t,a,n,s);case"bilinear":case"linear":return i(r,e,t,a,n,s);default:throw new Error("Unsupported resampling method: '".concat(u,"'"))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.resample=n,exports.resampleBilinear=a,exports.resampleBilinearInterleaved=i,exports.resampleInterleaved=s,exports.resampleNearest=e,exports.resampleNearestInterleaved=o;
},{}],"sIme":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@petamoriken/float16"),e=l(require("xml-utils/get-attribute.js")),r=l(require("xml-utils/find-tags-by-name.js")),i=require("./globals.js"),n=require("./rgb.js"),o=require("./compression/index.js"),a=require("./resample.js");function l(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return g(t)||p(t,e)||h(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function p(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,o,a,l=[],s=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);s=!0);}catch(c){u=!0,n=c}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}function g(t){if(Array.isArray(t))return t}function y(){y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(A){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof p?e:p,a=Object.create(o.prototype),l=new T(n||[]);return i(a,"_invoke",{value:D(t,r,l)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(A){return{type:"throw",arg:A}}}t.wrap=c;var f={};function p(){}function g(){}function d(){}var v={};u(v,o,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(I([])));w&&w!==e&&r.call(w,o)&&(v=w);var b=d.prototype=p.prototype=Object.create(v);function x(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function k(t,e){var n;i(this,"_invoke",{value:function(i,o){function a(){return new e(function(n,a){!function i(n,o,a,l){var u=h(t[n],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==s(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){i("next",t,a,l)},function(t){i("throw",t,a,l)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return i("throw",t,a,l)})}l(u.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}})}function D(t,e,r){var i="suspendedStart";return function(n,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===n)throw o;return E()}for(r.method=n,r.arg=o;;){var a=r.delegate;if(a){var l=S(a,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var s=h(t,e,r);if("normal"===s.type){if(i=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i="completed",r.method="throw",r.arg=s.arg)}}}function S(t,e){var r=e.method,i=t.iterator[r];if(void 0===i)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var n=h(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function I(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:E}}function E(){return{value:void 0,done:!0}}return g.prototype=d,i(b,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:g,configurable:!0}),g.displayName=u(d,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(k.prototype),u(k.prototype,a,function(){return this}),t.AsyncIterator=k,t.async=function(e,r,i,n,o){void 0===o&&(o=Promise);var a=new k(c(e,r,i,n),o);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),u(b,l,"Generator"),u(b,o,function(){return this}),u(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var i in e)r.push(i);return r.reverse(),function t(){for(;r.length;){var i=r.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(r,i){return a.type="throw",a.arg=t,e.next=r,i&&(e.method="next",e.arg=void 0),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;M(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function d(t,e,r,i,n,o,a){try{var l=t[o](a),s=l.value}catch(u){return void r(u)}l.done?e(s):Promise.resolve(s).then(i,n)}function v(t){return function(){var e=this,r=arguments;return new Promise(function(i,n){var o=t.apply(e,r);function a(t){d(o,i,n,a,l,"next",t)}function l(t){d(o,i,n,a,l,"throw",t)}a(void 0)})}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,x(i.key),i)}}function b(t,e,r){return e&&w(t.prototype,e),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function x(t){var e=k(t,"string");return"symbol"===s(e)?e:String(e)}function k(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function D(t,e,r){for(var i=0,n=e;n<r;++n)i+=t[n];return i}function S(t,e,r){switch(t){case 1:if(e<=8)return new Uint8Array(r);if(e<=16)return new Uint16Array(r);if(e<=32)return new Uint32Array(r);break;case 2:if(8===e)return new Int8Array(r);if(16===e)return new Int16Array(r);if(32===e)return new Int32Array(r);break;case 3:switch(e){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}function P(t,e){return(1!==t&&2!==t||!(e<=32)||e%8!=0)&&(3!==t||16!==e&&32!==e&&64!==e)}function M(t,e,r,i,n,o,a){var l=new DataView(t),s=2===r?1:i,u=S(e,n,2===r?a*o:a*o*i),c=parseInt("1".repeat(n),2);if(1===e){var h=o*(1===r?i*n:n);0!=(7&h)&&(h=h+7&-8);for(var f=0;f<a;++f)for(var p=f*h,g=0;g<o;++g)for(var y=p+g*s*n,d=0;d<s;++d){var v=y+d*n,m=(f*o+g)*s+d,w=Math.floor(v/8),b=v%8;if(b+n<=8)u[m]=l.getUint8(w)>>8-n-b&c;else if(b+n<=16)u[m]=l.getUint16(w)>>16-n-b&c;else if(b+n<=24){var x=l.getUint16(w)<<8|l.getUint8(w+2);u[m]=x>>24-n-b&c}else u[m]=l.getUint32(w)>>32-n-b&c}}return u.buffer}var T=function(){function l(t,e,r,i,n,o){m(this,l),this.fileDirectory=t,this.geoKeys=e,this.dataView=r,this.littleEndian=i,this.tiles=n?{}:null,this.isTiled=!t.StripOffsets;var a=t.PlanarConfiguration;if(this.planarConfiguration=void 0===a?1:a,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}return b(l,[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBlockWidth",value:function(){return this.getTileWidth()}},{key:"getBlockHeight",value:function(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}},{key:"getBytesPerPixel",value:function(){for(var t=0,e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}},{key:"getSampleByteSize",value:function(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(t," is out of range."));return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}},{key:"getReaderForSample",value:function(e){var r=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,i=this.fileDirectory.BitsPerSample[e];switch(r){case 1:if(i<=8)return DataView.prototype.getUint8;if(i<=16)return DataView.prototype.getUint16;if(i<=32)return DataView.prototype.getUint32;break;case 2:if(i<=8)return DataView.prototype.getInt8;if(i<=16)return DataView.prototype.getInt16;if(i<=32)return DataView.prototype.getInt32;break;case 3:switch(i){case 16:return function(e,r){return(0,t.getFloat16)(this,e,r)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getSampleFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}},{key:"getBitsPerSample",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fileDirectory.BitsPerSample[t]}},{key:"getArrayForSample",value:function(t,e){return S(this.getSampleFormat(t),this.getBitsPerSample(t),e)}},{key:"getTileOrStrip",value:function(){var t=v(y().mark(function t(e,r,i,n,o){var a,l,s,u,c,h,f,p,g=this;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=Math.ceil(this.getWidth()/this.getTileWidth()),l=Math.ceil(this.getHeight()/this.getTileHeight()),u=this.tiles,1===this.planarConfiguration?s=r*a+e:2===this.planarConfiguration&&(s=i*a*l+r*a+e),this.isTiled?(c=this.fileDirectory.TileOffsets[s],h=this.fileDirectory.TileByteCounts[s]):(c=this.fileDirectory.StripOffsets[s],h=this.fileDirectory.StripByteCounts[s]),t.next=7,this.source.fetch([{offset:c,length:h}],o);case 7:return f=t.sent[0],null!==u&&u[s]?p=u[s]:(p=v(y().mark(function t(){var e,i,o;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.decode(g.fileDirectory,f);case 2:return e=t.sent,i=g.getSampleFormat(),o=g.getBitsPerSample(),P(i,o)&&(e=M(e,i,g.planarConfiguration,g.getSamplesPerPixel(),o,g.getTileWidth(),g.getBlockHeight(r))),t.abrupt("return",e);case 7:case"end":return t.stop()}},t)}))(),null!==u&&(u[s]=p)),t.t0=e,t.t1=r,t.t2=i,t.next=14,p;case 14:return t.t3=t.sent,t.abrupt("return",{x:t.t0,y:t.t1,sample:t.t2,data:t.t3});case 16:case"end":return t.stop()}},t,this)}));return function(e,r,i,n,o){return t.apply(this,arguments)}}()},{key:"_readRaster",value:function(){var t=v(y().mark(function t(e,r,i,n,o,l,s,u,c){var h,f,p,g,d,v,m,w,b,x,k,S,P,M,T,I,E,A,L,j,B=this;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(h=this.getTileWidth(),f=this.getTileHeight(),p=this.getWidth(),g=this.getHeight(),d=Math.max(Math.floor(e[0]/h),0),v=Math.min(Math.ceil(e[2]/h),Math.ceil(p/h)),m=Math.max(Math.floor(e[1]/f),0),w=Math.min(Math.ceil(e[3]/f),Math.ceil(g/f)),b=e[2]-e[0],x=this.getBytesPerPixel(),k=[],S=[],P=0;P<r.length;++P)1===this.planarConfiguration?k.push(D(this.fileDirectory.BitsPerSample,0,r[P])/8):k.push(0),S.push(this.getReaderForSample(r[P]));M=[],T=this.littleEndian,I=m;case 16:if(!(I<w)){t.next=32;break}E=d;case 18:if(!(E<v)){t.next=29;break}A=y().mark(function t(){var a,l,s;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=L,l=r[L],2===B.planarConfiguration&&(x=B.getSampleByteSize(L)),s=B.getTileOrStrip(E,I,l,o,c).then(function(t){for(var o=t.data,l=new DataView(o),s=B.getBlockHeight(t.y),u=t.y*f,c=t.x*h,y=u+s,d=(t.x+1)*h,v=S[a],m=Math.min(s,s-(y-e[3]),g-u),w=Math.min(h,h-(d-e[2]),p-c),D=Math.max(0,e[1]-u);D<m;++D)for(var P=Math.max(0,e[0]-c);P<w;++P){var M=(D*h+P)*x,I=v.call(l,M+k[a],T),E=void 0;n?(E=(D+u-e[1])*b*r.length+(P+c-e[0])*r.length+a,i[E]=I):(E=(D+u-e[1])*b+P+c-e[0],i[a][E]=I)}}),M.push(s);case 5:case"end":return t.stop()}},t)}),L=0;case 21:if(!(L<r.length)){t.next=26;break}return t.delegateYield(A(),"t0",23);case 23:++L,t.next=21;break;case 26:++E,t.next=18;break;case 29:++I,t.next=16;break;case 32:return t.next=34,Promise.all(M);case 34:if(!(l&&e[2]-e[0]!==l||s&&e[3]-e[1]!==s)){t.next=39;break}return(j=n?(0,a.resampleInterleaved)(i,e[2]-e[0],e[3]-e[1],l,s,r.length,u):(0,a.resample)(i,e[2]-e[0],e[3]-e[1],l,s,u)).width=l,j.height=s,t.abrupt("return",j);case 39:return i.width=l||e[2]-e[0],i.height=s||e[3]-e[1],t.abrupt("return",i);case 42:case"end":return t.stop()}},t,this)}));return function(e,r,i,n,o,a,l,s,u){return t.apply(this,arguments)}}()},{key:"readRasters",value:function(){var t=v(y().mark(function t(){var e,r,i,n,a,l,s,u,c,h,f,p,g,d,v,m,w,b,x,k,D,P,M,T,I,E,A=arguments;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=A.length>0&&void 0!==A[0]?A[0]:{},r=e.window,i=e.samples,n=void 0===i?[]:i,a=e.interleave,l=e.pool,s=void 0===l?null:l,u=e.width,c=e.height,h=e.resampleMethod,f=e.fillValue,p=e.signal,!((g=r||[0,0,this.getWidth(),this.getHeight()])[0]>g[2]||g[1]>g[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if(d=g[2]-g[0],v=g[3]-g[1],m=d*v,w=this.getSamplesPerPixel(),n&&n.length){t.next=12;break}for(b=0;b<w;++b)n.push(b);t.next=19;break;case 12:x=0;case 13:if(!(x<n.length)){t.next=19;break}if(!(n[x]>=w)){t.next=16;break}return t.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(n[x],"'."))));case 16:++x,t.next=13;break;case 19:if(a)D=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,P=Math.max.apply(null,this.fileDirectory.BitsPerSample),k=S(D,P,m*n.length),f&&k.fill(f);else for(k=[],M=0;M<n.length;++M)T=this.getArrayForSample(n[M],m),Array.isArray(f)&&M<f.length?T.fill(f[M]):f&&!Array.isArray(f)&&T.fill(f),k.push(T);if(t.t0=s,t.t0){t.next=25;break}return t.next=24,(0,o.getDecoder)(this.fileDirectory);case 24:t.t0=t.sent;case 25:return I=t.t0,t.next=28,this._readRaster(g,n,k,a,I,u,c,h,p);case 28:return E=t.sent,t.abrupt("return",E);case 30:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"readRGB",value:function(){var t=v(y().mark(function t(){var e,r,o,a,l,s,u,c,h,f,p,g,d,v,m,w,b,x,k,D,S,P,M,T,I,E,A,L=arguments;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=L.length>0&&void 0!==L[0]?L[0]:{},r=e.window,o=e.interleave,a=void 0===o||o,l=e.pool,s=void 0===l?null:l,u=e.width,c=e.height,h=e.resampleMethod,f=e.enableAlpha,p=void 0!==f&&f,g=e.signal,!((d=r||[0,0,this.getWidth(),this.getHeight()])[0]>d[2]||d[1]>d[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if((v=this.fileDirectory.PhotometricInterpretation)!==i.photometricInterpretations.RGB){t.next=9;break}if(m=[0,1,2],this.fileDirectory.ExtraSamples!==i.ExtraSamplesValues.Unspecified&&p)for(m=[],w=0;w<this.fileDirectory.BitsPerSample.length;w+=1)m.push(w);return t.abrupt("return",this.readRasters({window:r,interleave:a,samples:m,pool:s,width:u,height:c,resampleMethod:h,signal:g}));case 9:t.t0=v,t.next=t.t0===i.photometricInterpretations.WhiteIsZero?12:t.t0===i.photometricInterpretations.BlackIsZero?12:t.t0===i.photometricInterpretations.Palette?12:t.t0===i.photometricInterpretations.CMYK?14:t.t0===i.photometricInterpretations.YCbCr?16:t.t0===i.photometricInterpretations.CIELab?16:18;break;case 12:return b=[0],t.abrupt("break",19);case 14:return b=[0,1,2,3],t.abrupt("break",19);case 16:return b=[0,1,2],t.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return x={window:d,interleave:!0,samples:b,pool:s,width:u,height:c,resampleMethod:h,signal:g},k=this.fileDirectory,t.next=23,this.readRasters(x);case 23:D=t.sent,S=Math.pow(2,this.fileDirectory.BitsPerSample[0]),t.t1=v,t.next=t.t1===i.photometricInterpretations.WhiteIsZero?28:t.t1===i.photometricInterpretations.BlackIsZero?30:t.t1===i.photometricInterpretations.Palette?32:t.t1===i.photometricInterpretations.CMYK?34:t.t1===i.photometricInterpretations.YCbCr?36:t.t1===i.photometricInterpretations.CIELab?38:40;break;case 28:return P=(0,n.fromWhiteIsZero)(D,S),t.abrupt("break",41);case 30:return P=(0,n.fromBlackIsZero)(D,S),t.abrupt("break",41);case 32:return P=(0,n.fromPalette)(D,k.ColorMap),t.abrupt("break",41);case 34:return P=(0,n.fromCMYK)(D),t.abrupt("break",41);case 36:return P=(0,n.fromYCbCr)(D),t.abrupt("break",41);case 38:return P=(0,n.fromCIELab)(D),t.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:if(!a){for(M=new Uint8Array(P.length/3),T=new Uint8Array(P.length/3),I=new Uint8Array(P.length/3),E=0,A=0;E<P.length;E+=3,++A)M[A]=P[E],T[A]=P[E+1],I[A]=P[E+2];P=[M,T,I]}return P.width=D.width,P.height=D.height,t.abrupt("return",P);case 45:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var t=[],e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}},{key:"getGDALMetadata",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i={};if(!this.fileDirectory.GDAL_METADATA)return null;var n=this.fileDirectory.GDAL_METADATA,o=(0,r.default)(n,"Item");o=null===t?o.filter(function(t){return void 0===(0,e.default)(t,"sample")}):o.filter(function(r){return Number((0,e.default)(r,"sample"))===t});for(var a=0;a<o.length;++a){var l=o[a];i[(0,e.default)(l,"name")]=l.inner}return i}},{key:"getGDALNoData",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}},{key:"getOrigin",value:function(){var t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(r)return[r[0],r[5],r[10]];if(t){var i=u(t.getResolution(),3),n=i[0],o=i[1],a=i[2];return[n*t.getWidth()/this.getWidth(),o*t.getHeight()/this.getHeight(),a*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var t=this.getOrigin(),e=this.getResolution(),r=t[0],i=t[1],n=r+e[0]*this.getWidth(),o=i+e[1]*this.getHeight();return[Math.min(r,n),Math.min(i,o),Math.max(r,n),Math.max(i,o)]}}]),l}(),I=T;exports.default=I;
},{"@petamoriken/float16":"ZDWy","xml-utils/get-attribute.js":"gJ2f","xml-utils/find-tags-by-name.js":"lL7e","./globals.js":"QETr","./rgb.js":"xJBr","./compression/index.js":"iicZ","./resample.js":"XciQ"}],"j0go":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@petamoriken/float16");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t){var n=a(t,"string");return"symbol"===e(n)?n:String(n)}function a(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}var u=function(){function e(t){n(this,e),this._dataView=new DataView(t)}return i(e,[{key:"buffer",get:function(){return this._dataView.buffer}},{key:"getUint64",value:function(t,e){var n,r=this.getUint32(t,e),i=this.getUint32(t+4,e);if(e){if(n=r+Math.pow(2,32)*i,!Number.isSafeInteger(n))throw new Error("".concat(n," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}if(n=Math.pow(2,32)*r+i,!Number.isSafeInteger(n))throw new Error("".concat(n," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return n}},{key:"getInt64",value:function(t,e){for(var n=0,r=(128&this._dataView.getUint8(t+(e?7:0)))>0,i=!0,o=0;o<8;o++){var a=this._dataView.getUint8(t+(e?o:7-o));r&&(i?0!==a&&(a=255&~(a-1),i=!1):a=255&~a),n+=a*Math.pow(256,o)}return r&&(n=-n),n}},{key:"getUint8",value:function(t,e){return this._dataView.getUint8(t,e)}},{key:"getInt8",value:function(t,e){return this._dataView.getInt8(t,e)}},{key:"getUint16",value:function(t,e){return this._dataView.getUint16(t,e)}},{key:"getInt16",value:function(t,e){return this._dataView.getInt16(t,e)}},{key:"getUint32",value:function(t,e){return this._dataView.getUint32(t,e)}},{key:"getInt32",value:function(t,e){return this._dataView.getInt32(t,e)}},{key:"getFloat16",value:function(e,n){return(0,t.getFloat16)(this._dataView,e,n)}},{key:"getFloat32",value:function(t,e){return this._dataView.getFloat32(t,e)}},{key:"getFloat64",value:function(t,e){return this._dataView.getFloat64(t,e)}}]),e}();exports.default=u;
},{"@petamoriken/float16":"ZDWy"}],"g6Ki":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(e){var i=s(e,"string");return"symbol"===t(i)?i:String(i)}function s(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,i||"default");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=function(){function t(i,n,r,s){e(this,t),this._dataView=new DataView(i),this._sliceOffset=n,this._littleEndian=r,this._bigTiff=s}return n(t,[{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}},{key:"covers",value:function(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}},{key:"readUint8",value:function(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(t){var e,i=this.readUint32(t),n=this.readUint32(t+4);if(this._littleEndian){if(e=i+Math.pow(2,32)*n,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return e}if(e=Math.pow(2,32)*i+n,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. ")+"Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues");return e}},{key:"readInt64",value:function(t){for(var e=0,i=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0,n=!0,r=0;r<8;r++){var s=this._dataView.getUint8(t+(this._littleEndian?r:7-r));i&&(n?0!==s&&(s=255&~(s-1),n=!1):s=255&~s),e+=s*Math.pow(256,r)}return i&&(e=-e),e}},{key:"readOffset",value:function(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}]),t}();exports.default=a;
},{}],"dZzl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./compression/index.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){r=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(N){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),u=new O(n||[]);return i(a,"_invoke",{value:k(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(N){return{type:"throw",arg:N}}}t.wrap=l;var d={};function v(){}function p(){}function y(){}var g={};f(g,u,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(P([])));w&&w!==n&&o.call(w,u)&&(g=w);var b=y.prototype=v.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function L(t,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var s=h(t[i],t,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==e(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(l).then(function(t){f.value=t,u(f)},function(t){return n("throw",t,u,c)})}c(s.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=E(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function P(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=y,i(b,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:p,configurable:!0}),p.displayName=f(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(L.prototype),f(L.prototype,c,function(){return this}),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),f(b,s,"Generator"),f(b,u,function(){return this}),f(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=P,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var r=s(t,"string");return"symbol"===e(r)?r:String(r)}function s(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}var f="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,l=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1?arguments[1]:void 0;i(this,e),this.workers=null,this._awaitingDecoder=null,this.size=r,this.messageId=0,r&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise(function(t){require("_bundle_loader")(require.resolve("./worker/decoder.js")).then(function(e){t(e.create)})}),this._awaitingDecoder.then(function(e){t._awaitingDecoder=null,t.workers=[];for(var n=0;n<r;n++)t.workers.push({worker:e(),idle:!0})}))}return u(e,[{key:"decode",value:function(){var e=o(r().mark(function e(n,o){var i=this;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._awaitingDecoder){e.next=3;break}return e.next=3,this._awaitingDecoder;case 3:return e.abrupt("return",0===this.size?(0,t.getDecoder)(n).then(function(t){return t.decode(n,o)}):new Promise(function(t){var e=i.workers.find(function(t){return t.idle})||i.workers[Math.floor(Math.random()*i.size)];e.idle=!1;var r=i.messageId++;e.worker.addEventListener("message",function n(o){o.data.id===r&&(e.idle=!0,t(o.data.decoded),e.worker.removeEventListener("message",n))}),e.worker.postMessage({fileDirectory:n,buffer:o,id:r},[o])}));case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){this.workers&&(this.workers.forEach(function(t){t.worker.terminate()}),this.workers=null)}}]),e}(),h=l;exports.default=h;
},{"./compression/index.js":"iicZ","_bundle_loader":"TUK3","./worker/decoder.js":[["decoder.8050d010.js","MAEd"],"decoder.8050d010.js.map","MAEd"]}],"IP94":[function(require,module,exports) {
"use strict";function t(t){return a(t)||r(t)||u(t)||e()}function r(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function n(t,r){return a(t)||o(t,r)||u(t,r)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,r){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,o,a,i,u=[],l=!0,f=!1;try{if(a=(n=n.call(t)).next,0===r){if(Object(n)!==n)return;l=!1}else for(;!(l=(e=a.call(n)).done)&&(u.push(e.value),u.length!==r);l=!0);}catch(s){f=!0,o=s}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(f)throw o}}return u}}function a(t){if(Array.isArray(t))return t}function i(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=u(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){l=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function u(t,r){if(t){if("string"==typeof t)return l(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,r):void 0}}function l(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseByteRanges=p,exports.parseContentRange=d,exports.parseContentType=y;var f="\r\n\r\n";function s(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t);var r,e={},o=i(t);try{for(o.s();!(r=o.n()).done;){var a=n(r.value,2),u=a[0],l=a[1];e[u.toLowerCase()]=l}}catch(f){o.e(f)}finally{o.f()}return e}function c(t){return s(t.split("\r\n").map(function(t){var r=t.split(":").map(function(t){return t.trim()});return r[0]=r[0].toLowerCase(),r}))}function y(r){var n=t(r.split(";").map(function(t){return t.trim()}));return{type:n[0],params:s(n.slice(1).map(function(t){return t.split("=")}))}}function d(t){var r,e,o;if(t){var a=n(t.match(/bytes (\d+)-(\d+)\/(\d+)/),4);r=a[1],e=a[2],o=a[3],r=parseInt(r,10),e=parseInt(e,10),o=parseInt(o,10)}return{start:r,end:e,total:o}}function p(t,r){for(var n=null,e=new TextDecoder("ascii"),o=[],a="--".concat(r),i="".concat(a,"--"),u=0;u<10;++u){e.decode(new Uint8Array(t,u,a.length))===a&&(n=u)}if(null===n)throw new Error("Could not find initial boundary");for(;n<t.byteLength;){var l=e.decode(new Uint8Array(t,n,Math.min(a.length+1024,t.byteLength-n)));if(0===l.length||l.startsWith(i))break;if(!l.startsWith(a))throw new Error("Part does not start with boundary");var s=l.substr(a.length+2);if(0===s.length)break;var y=s.indexOf(f),p=c(s.substr(0,y)),h=d(p["content-range"]),b=h.start,m=h.end,v=h.total,g=n+a.length+y+f.length,w=parseInt(m,10)+1-parseInt(b,10);o.push({headers:p,data:t.slice(g,g+w),offset:b,length:w,fileSize:v}),n=g+w+4}return o}
},{}],"BczW":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return e};var e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(N){l=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof v?r:v,a=Object.create(o.prototype),c=new _(n||[]);return i(a,"_invoke",{value:E(t,e,c)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(N){return{type:"throw",arg:N}}}e.wrap=s;var p={};function v(){}function y(){}function d(){}var m={};l(m,c,function(){return this});var g=Object.getPrototypeOf,w=g&&g(g(k([])));w&&w!==n&&o.call(w,c)&&(m=w);var b=d.prototype=v.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(r){l(t,r,function(t){return this._invoke(r,t)})})}function L(r,e){var n;i(this,"_invoke",{value:function(i,a){function c(){return new e(function(n,c){!function n(i,a,c,u){var f=h(r[i],r,a);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==t(s)&&o.call(s,"__await")?e.resolve(s.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(s).then(function(t){l.value=t,c(l)},function(t){return n("throw",t,c,u)})}u(f.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function E(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=S(a,e);if(c){if(c===p)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=h(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}function S(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,S(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function j(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function k(t){if(t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,i(b,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:y,configurable:!0}),y.displayName=l(d,f,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,f,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},x(L.prototype),l(L.prototype,u,function(){return this}),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),l(b,f,"Generator"),l(b,c,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:k(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},e}function e(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(f){return void e(f)}c.done?r(u):Promise.resolve(u).then(n,o)}function n(t){return function(){var r=this,n=arguments;return new Promise(function(o,i){var a=t.apply(r,n);function c(t){e(a,o,i,c,u,"next",t)}function u(t){e(a,o,i,c,u,"throw",t)}c(void 0)})}}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function i(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function a(t,r,e){return r&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(r){var e=u(r,"string");return"symbol"===t(e)?e:String(e)}function u(r,e){if("object"!==t(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseSource=void 0;var f=function(){function t(){o(this,t)}return a(t,[{key:"fetch",value:function(){var t=n(r().mark(function t(e){var n,o=this,i=arguments;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:void 0,t.abrupt("return",Promise.all(e.map(function(t){return o.fetchSlice(t,n)})));case 2:case"end":return t.stop()}},t)}));return function(r){return t.apply(this,arguments)}}()},{key:"fetchSlice",value:function(){var t=n(r().mark(function t(e){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("fetching of slice ".concat(e," not possible, not implemented"));case 1:case"end":return t.stop()}},t)}));return function(r){return t.apply(this,arguments)}}()},{key:"fileSize",get:function(){return null}},{key:"close",value:function(){var t=n(r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}]),t}();exports.BaseSource=f;
},{}],"yx8A":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e){return i(e)||n(e)||l(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function i(e){if(Array.isArray(e))return h(e)}function o(){o=function(){return t};var t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(A){f=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),c=new I(n||[]);return i(a,"_invoke",{value:_(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(A){return{type:"throw",arg:A}}}t.wrap=l;var p={};function v(){}function y(){}function d(){}var b={};f(b,c,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(j([])));g&&g!==r&&n.call(g,c)&&(b=g);var x=d.prototype=v.prototype=Object.create(b);function w(e){["next","throw","return"].forEach(function(t){f(e,t,function(e){return this._invoke(t,e)})})}function k(t,r){var o;i(this,"_invoke",{value:function(i,a){function c(){return new r(function(o,c){!function i(o,a,c,u){var s=h(t[o],t,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==e(l)&&n.call(l,"__await")?r.resolve(l.__await).then(function(e){i("next",e,c,u)},function(e){i("throw",e,c,u)}):r.resolve(l).then(function(e){f.value=e,c(f)},function(e){return i("throw",e,c,u)})}u(s.arg)}(i,a,o,c)})}return o=o?o.then(c,c):c()}})}function _(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return L()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var i=h(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return y.prototype=d,i(x,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:y,configurable:!0}),y.displayName=f(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,f(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},w(k.prototype),f(k.prototype,u,function(){return this}),t.AsyncIterator=k,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},w(x),f(x,s,"Generator"),f(x,c,function(){return this}),f(x,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function a(e,t){return s(e)||u(e,t)||l(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,c=[],u=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(f){s=!0,i=f}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw i}}return c}}function s(e){if(Array.isArray(e))return e}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=l(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function y(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(t){var r=b(t,"string");return"symbol"===e(r)?r:String(r)}function b(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}function g(e){var t=E();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){var t="function"==typeof Map?new Map:void 0;return(k=function(e){if(null===e||!S(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _(e,arguments,I(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),O(r,e)})(e)}function _(e,t,r){return(_=E()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&O(i,r.prototype),i}).apply(null,arguments)}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function S(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function O(e,t){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var j=function(e,r,n){m(c,e);var i=g(c);function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(p(this,c),e=i.call(this),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof t.maxAge&&0===t.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");return e.maxSize=t.maxSize,e.maxAge=t.maxAge||Number.POSITIVE_INFINITY,e.onEviction=t.onEviction,e.cache=new Map,e.oldCache=new Map,e._size=0,e}return y(c,[{key:"_emitEvictions",value:function(e){if("function"==typeof this.onEviction){var t,r=f(e);try{for(r.s();!(t=r.n()).done;){var n=a(t.value,2),i=n[0],o=n[1];this.onEviction(i,o.value)}}catch(c){r.e(c)}finally{r.f()}}}},{key:"_deleteIfExpired",value:function(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}},{key:"_getOrDeleteIfExpired",value:function(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}},{key:"_getItemValue",value:function(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}},{key:"_peek",value:function(e,t){var r=t.get(e);return this._getItemValue(e,r)}},{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}},{key:"_moveToRecent",value:function(e,t){this.oldCache.delete(e),this._set(e,t)}},{key:"_entriesAscending",value:o().mark(function e(){var t,r,n,i,c,u,s,l,h,p,v,y;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=f(this.oldCache),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=13;break}if(n=r.value,i=a(n,2),c=i[0],u=i[1],this.cache.has(c)){e.next=11;break}if(!1!==this._deleteIfExpired(c,u)){e.next=11;break}return e.next=11,n;case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:s=f(this.cache),e.prev=22,s.s();case 24:if((l=s.n()).done){e.next=33;break}if(h=l.value,p=a(h,2),v=p[0],y=p[1],!1!==this._deleteIfExpired(v,y)){e.next=31;break}return e.next=31,h;case 31:e.next=24;break;case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(22),s.e(e.t1);case 38:return e.prev=38,s.f(),e.finish(38);case 41:case"end":return e.stop()}},e,this,[[1,15,18,21],[22,35,38,41]])})},{key:"get",value:function(e){if(this.cache.has(e)){var t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){var r=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,r))return this._moveToRecent(e,r),r.value}}},{key:"set",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).maxAge,n=void 0===r?this.maxAge:r,i="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i})}},{key:"has",value:function(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}},{key:"peek",value:function(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"resize",value:function(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");var r=t(this._entriesAscending()),n=r.length-e;n<0?(this.cache=new Map(r),this.oldCache=new Map,this._size=r.length):(n>0&&this._emitEvictions(r.slice(0,n)),this.oldCache=new Map(r.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}},{key:"keys",value:o().mark(function e(){var t,r,n,i;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=f(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=a(r.value,1),i=n[0],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})},{key:"values",value:o().mark(function e(){var t,r,n,i;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=f(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=a(r.value,2),i=n[1],e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})},{key:r,value:o().mark(function(){var e,t,r,n,i,c,u,s,l,h,p,v;return o().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=f(this.cache),o.prev=1,e.s();case 3:if((t=e.n()).done){o.next=12;break}if(r=t.value,n=a(r,2),i=n[0],c=n[1],!1!==this._deleteIfExpired(i,c)){o.next=10;break}return o.next=10,[i,c.value];case 10:o.next=3;break;case 12:o.next=17;break;case 14:o.prev=14,o.t0=o.catch(1),e.e(o.t0);case 17:return o.prev=17,e.f(),o.finish(17);case 20:u=f(this.oldCache),o.prev=21,u.s();case 23:if((s=u.n()).done){o.next=33;break}if(l=s.value,h=a(l,2),p=h[0],v=h[1],this.cache.has(p)){o.next=31;break}if(!1!==this._deleteIfExpired(p,v)){o.next=31;break}return o.next=31,[p,v.value];case 31:o.next=23;break;case 33:o.next=38;break;case 35:o.prev=35,o.t1=o.catch(21),u.e(o.t1);case 38:return o.prev=38,u.f(),o.finish(38);case 41:case"end":return o.stop()}},c,this,[[1,14,17,20],[21,35,38,41]])})},{key:"entriesDescending",value:o().mark(function e(){var r,n,i,c,u,s,f,l,h,p,v;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t(this.cache),n=r.length-1;case 2:if(!(n>=0)){e.next=12;break}if(i=r[n],c=a(i,2),u=c[0],s=c[1],!1!==this._deleteIfExpired(u,s)){e.next=9;break}return e.next=9,[u,s.value];case 9:--n,e.next=2;break;case 12:r=t(this.oldCache),f=r.length-1;case 14:if(!(f>=0)){e.next=25;break}if(l=r[f],h=a(l,2),p=h[0],v=h[1],this.cache.has(p)){e.next=22;break}if(!1!==this._deleteIfExpired(p,v)){e.next=22;break}return e.next=22,[p,v.value];case 22:--f,e.next=14;break;case 25:case"end":return e.stop()}},e,this)})},{key:"entriesAscending",value:o().mark(function e(){var t,r,n,i,c;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=f(this._entriesAscending()),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return n=a(r.value,2),i=n[0],c=n[1],e.next=7,[i,c.value];case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})},{key:"size",get:function(){if(!this._size)return this.oldCache.size;var e,t=0,r=f(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||t++}}catch(i){r.e(i)}finally{r.f()}return Math.min(this._size+t,this.maxSize)}},{key:"entries",value:function(){return this.entriesAscending()}},{key:"forEach",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=f(this.entriesAscending());try{for(n.s();!(t=n.n()).done;){var i=a(t.value,2),o=i[0],c=i[1];e.call(r,c,o,this)}}catch(u){n.e(u)}finally{n.f()}}},{key:n,get:function(){return JSON.stringify(t(this.entriesAscending()))}}]),c}(k(Map),Symbol.iterator,Symbol.toStringTag);exports.default=j;
},{}],"TyJR":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return e};var e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(k){l=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof y?r:y,u=Object.create(o.prototype),a=new P(n||[]);return i(u,"_invoke",{value:O(t,e,a)}),u}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(k){return{type:"throw",arg:k}}}e.wrap=s;var h={};function y(){}function v(){}function d(){}var g={};l(g,a,function(){return this});var m=Object.getPrototypeOf,b=m&&m(m(S([])));b&&b!==n&&o.call(b,a)&&(g=b);var w=d.prototype=y.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(r){l(t,r,function(t){return this._invoke(r,t)})})}function E(r,e){var n;i(this,"_invoke",{value:function(i,u){function a(){return new e(function(n,a){!function n(i,u,a,c){var f=p(r[i],r,u);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==t(s)&&o.call(s,"__await")?e.resolve(s.__await).then(function(t){n("next",t,a,c)},function(t){n("throw",t,a,c)}):e.resolve(s).then(function(t){l.value=t,a(l)},function(t){return n("throw",t,a,c)})}c(f.arg)}(i,u,n,a)})}return n=n?n.then(a,a):a()}})}function O(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return A()}for(e.method=o,e.arg=i;;){var u=e.delegate;if(u){var a=j(u,e);if(a){if(a===h)continue;return a}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=p(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function j(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,j(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),h;var o=p(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function L(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function _(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=d,i(w,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=l(d,f,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,f,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},x(E.prototype),l(E.prototype,c,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var u=new E(s(t,r,n,o),i);return e.isGeneratorFunction(r)?u:u.next().then(function(t){return t.done?t.value:u.next()})},x(w),l(w,f,"Generator"),l(w,a,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=S,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return u.type="throw",u.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],u=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=r,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(u)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),_(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:S(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),h}},e}function e(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function n(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(r){var e=i(r,"string");return"symbol"===t(e)?e:String(e)}function i(r,e){if("object"!==t(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}function u(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function a(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&v(t,r)}function c(t){var r=h();return function(){var e,n=d(t);if(r){var o=d(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return f(this,e)}}function f(r,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(r)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){var r="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||!y(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return p(t,arguments,d(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),v(e,t)})(t)}function p(t,r,e){return(p=h()?Reflect.construct.bind():function(t,r,e){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(t,n));return e&&v(o,e.prototype),o}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function v(t,r){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,r,e,n,o,i,u){try{var a=t[i](u),c=a.value}catch(f){return void e(f)}a.done?r(c):Promise.resolve(c).then(n,o)}function m(t){return function(){var r=this,e=arguments;return new Promise(function(n,o){var i=t.apply(r,e);function u(t){g(i,n,o,u,a,"next",t)}function a(t){g(i,n,o,u,a,"throw",t)}u(void 0)})}}function b(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])}function w(t,r){for(var e=[],n=t.length,o=0;o<n;o+=r){for(var i=[],u=o;u<o+r;u++)i.push(t[u]);e.push(i)}return e}function x(t,r){return!(t.length<r.length)&&t.substr(t.length-r.length)===r}function E(t,r){for(var e=t.length,n=0;n<e;n++)r(t[n],n)}function O(t){var r={};for(var e in t){if(t.hasOwnProperty(e))r[t[e]]=e}return r}function j(t){for(var r=[],e=0;e<t;e++)r.push(e);return r}function L(t,r){for(var e=[],n=0;n<t;n++)e.push(r(n));return e}function _(t){for(var r=[],e=t.length,n=0;n<e;n++)r.push(t[n]);return r}function P(t){return t.length?_(t).map(P):t}function S(t){if(!t)return null;if("string"!=typeof t)throw new Error("invalid argument");var r=function(t){return Number.parseInt(t,10)},e=t.match(/^(\w*) /),n=e&&e[1];return(e=t.match(/(\d+)-(\d+)\/(\d+|\*)/))?{unit:n,first:r(e[1]),last:r(e[2]),length:"*"===e[3]?null:r(e[3])}:(e=t.match(/(\d+|\*)/))?{unit:n,first:null,last:null,length:"*"===e[1]?null:r(e[1])}:null}function A(t){return k.apply(this,arguments)}function k(){return(k=m(r().mark(function t(e){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){return setTimeout(t,e)}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function T(t,r){var e=Array.isArray(t)?t:Array.from(t),n=Array.isArray(r)?r:Array.from(r);return e.map(function(t,r){return[t,n[r]]})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomAggregateError=exports.AggregateError=exports.AbortError=void 0,exports.assign=b,exports.chunk=w,exports.endsWith=x,exports.forEach=E,exports.invert=O,exports.parseContentRange=S,exports.range=j,exports.times=L,exports.toArray=_,exports.toArrayRecursively=P,exports.wait=A,exports.zip=T;var N=function(t){a(e,s(Error));var r=c(e);function e(t){var n;return u(this,e),n=r.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(l(n),e),n.name="AbortError",n}return n(e)}();exports.AbortError=N;var R=function(t){a(e,s(Error));var r=c(e);function e(t,n){var o;return u(this,e),(o=r.call(this,n)).errors=t,o.message=n,o.name="AggregateError",o}return n(e)}();exports.CustomAggregateError=R;var G=R;exports.AggregateError=G;
},{}],"MV2F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlockedSource=void 0;var t=n(require("quick-lru")),e=require("./basesource.js"),r=require("../utils.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(){o=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(z){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new L(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(z){return{type:"throw",arg:z}}}t.wrap=l;var h={};function p(){}function v(){}function d(){}var y={};s(y,a,function(){return this});var g=Object.getPrototypeOf,m=g&&g(g(_([])));m&&m!==e&&r.call(m,a)&&(y=m);var w=d.prototype=p.prototype=Object.create(y);function k(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function S(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e(function(o,a){!function n(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==b(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,a,c)},function(t){n("throw",t,a,c)}):e.resolve(l).then(function(t){s.value=t,a(s)},function(t){return n("throw",t,a,c)})}c(u.arg)}(n,i,o,a)})}return o=o?o.then(a,a):a()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function _(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:v,configurable:!0}),v.displayName=s(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},k(S.prototype),s(S.prototype,c,function(){return this}),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},k(w),s(w,u,"Generator"),s(w,a,function(){return this}),s(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=a(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){u=!0,i=t},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw i}}}}function a(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,c,"next",t)}function c(t){u(i,n,o,a,c,"throw",t)}a(void 0)})}}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=d();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k(n.key),n)}}function w(t,e,r){return e&&m(t.prototype,e),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function k(t){var e=S(t,"string");return"symbol"===b(e)?e:String(e)}function S(t,e){if("object"!==b(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var x=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;g(this,t),this.offset=e,this.length=r,this.data=n}return w(t,[{key:"top",get:function(){return this.offset+this.length}}]),t}(),E=w(function t(e,r,n){g(this,t),this.offset=e,this.length=r,this.blockIds=n}),j=function(n){l(c,e.BaseSource);var a=h(c);function c(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.blockSize,i=void 0===o?65536:o,u=n.cacheSize,s=void 0===u?100:u;return g(this,c),(r=a.call(this)).source=e,r.blockSize=i,r.blockCache=new t.default({maxSize:s,onEviction:function(t,e){r.evictedBlocks.set(t,e)}}),r.evictedBlocks=new Map,r.blockRequests=new Map,r.blockIdsToFetch=new Set,r.abortedBlockIds=new Set,r}return w(c,[{key:"fileSize",get:function(){return this.source.fileSize}},{key:"fetch",value:function(){var t=s(o().mark(function t(e,n){var a,c,u,s,l,f,h,p,v,d,y,b,g,m,w,k,S,x,E,j,O,L,_,P,z,B,I=this;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[],c=[],u=[],this.evictedBlocks.clear(),s=i(e);try{for(s.s();!(l=s.n()).done;)for(f=l.value,h=f.offset,p=f.length,v=h+p,null!==(d=this.fileSize)&&(v=Math.min(v,d)),y=Math.floor(h/this.blockSize)*this.blockSize,b=y;b<v;b+=this.blockSize)g=Math.floor(b/this.blockSize),this.blockCache.has(g)||this.blockRequests.has(g)||(this.blockIdsToFetch.add(g),c.push(g)),this.blockRequests.has(g)&&a.push(this.blockRequests.get(g)),u.push(g)}catch(o){s.e(o)}finally{s.f()}return t.next=8,(0,r.wait)();case 8:for(this.fetchBlocks(n),m=[],w=0,k=c;w<k.length;w++)S=k[w],this.blockRequests.has(S)&&m.push(this.blockRequests.get(S));return t.next=13,Promise.allSettled(a);case 13:return t.next=15,Promise.allSettled(m);case 15:if(x=[],(E=u.filter(function(t){return I.abortedBlockIds.has(t)||!I.blockCache.has(t)})).forEach(function(t){return I.blockIdsToFetch.add(t)}),!(E.length>0&&n)||n.aborted){t.next=41;break}this.fetchBlocks(null),j=i(E),t.prev=21,j.s();case 23:if((O=j.n()).done){t.next=31;break}if(L=O.value,_=this.blockRequests.get(L)){t.next=28;break}throw new Error("Block ".concat(L," is not in the block requests"));case 28:x.push(_);case 29:t.next=23;break;case 31:t.next=36;break;case 33:t.prev=33,t.t0=t.catch(21),j.e(t.t0);case 36:return t.prev=36,j.f(),t.finish(36);case 39:return t.next=41,Promise.allSettled(x);case 41:if(!n||!n.aborted){t.next=43;break}throw new r.AbortError("Request was aborted");case 43:if(P=u.map(function(t){return I.blockCache.get(t)||I.evictedBlocks.get(t)}),!(z=P.filter(function(t){return!t})).length){t.next=47;break}throw new r.AggregateError(z,"Request failed");case 47:return B=new Map((0,r.zip)(u,P)),t.abrupt("return",this.readSliceData(e,B));case 49:case"end":return t.stop()}},t,this,[[21,33,36,39]])}));return function(e,r){return t.apply(this,arguments)}}()},{key:"fetchBlocks",value:function(t){var e=this;if(this.blockIdsToFetch.size>0){for(var r=this.groupBlocks(this.blockIdsToFetch),n=this.source.fetch(r,t),a=function(a){var c,u=i(r[a].blockIds);try{var l=function(){var r=c.value;e.blockRequests.set(r,s(o().mark(function i(){var c,u,s,l,f,h;return o().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,n;case 3:o.t0=a,c=o.sent[o.t0],u=r*e.blockSize,s=u-c.offset,l=Math.min(s+e.blockSize,c.data.byteLength),f=c.data.slice(s,l),h=new x(u,f.byteLength,f,r),e.blockCache.set(r,h),e.abortedBlockIds.delete(r),o.next=23;break;case 14:if(o.prev=14,o.t1=o.catch(0),"AbortError"!==o.t1.name){o.next=22;break}o.t1.signal=t,e.blockCache.delete(r),e.abortedBlockIds.add(r),o.next=23;break;case 22:throw o.t1;case 23:return o.prev=23,e.blockRequests.delete(r),o.finish(23);case 26:case"end":return o.stop()}},i,null,[[0,14,23,26]])}))())};for(u.s();!(c=u.n()).done;)l()}catch(f){u.e(f)}finally{u.f()}},c=0;c<r.length;++c)a(c);this.blockIdsToFetch.clear()}}},{key:"groupBlocks",value:function(t){var e=Array.from(t).sort(function(t,e){return t-e});if(0===e.length)return[];var r,n=[],o=null,a=[],c=i(e);try{for(c.s();!(r=c.n()).done;){var u=r.value;null===o||o+1===u?(n.push(u),o=u):(a.push(new E(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[u],o=u)}}catch(s){c.e(s)}finally{c.f()}return a.push(new E(n[0]*this.blockSize,n.length*this.blockSize,n)),a}},{key:"readSliceData",value:function(t,e){var r=this;return t.map(function(t){var n=t.offset+t.length;null!==r.fileSize&&(n=Math.min(r.fileSize,n));for(var o=Math.floor(t.offset/r.blockSize),i=Math.floor(n/r.blockSize),a=new ArrayBuffer(t.length),c=new Uint8Array(a),u=o;u<=i;++u){var s=e.get(u),l=s.offset-t.offset,f=0,h=0,p=void 0;l<0?f=-l:l>0&&(h=l),p=s.top-n<0?s.length-f:n-s.offset-f;var v=new Uint8Array(s.data,f,p);c.set(v,h)}return a})}}]),c}();exports.BlockedSource=j;
},{"quick-lru":"yx8A","./basesource.js":"BczW","../utils.js":"TyJR"}],"fFjA":[function(require,module,exports) {
"use strict";function t(r){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function r(){r=function(){return e};var e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},"")}catch(N){s=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof v?r:v,a=Object.create(o.prototype),u=new _(n||[]);return i(a,"_invoke",{value:L(t,e,u)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var p={};function v(){}function y(){}function d(){}var m={};s(m,u,function(){return this});var g=Object.getPrototypeOf,w=g&&g(g(S([])));w&&w!==n&&o.call(w,u)&&(m=w);var b=d.prototype=v.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(r){s(t,r,function(t){return this._invoke(r,t)})})}function E(r,e){var n;i(this,"_invoke",{value:function(i,a){function u(){return new e(function(n,u){!function n(i,a,u,c){var f=h(r[i],r,a);if("throw"!==f.type){var s=f.arg,l=s.value;return l&&"object"==t(l)&&o.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(l).then(function(t){s.value=t,u(s)},function(t){return n("throw",t,u,c)})}c(f.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function L(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=j(a,e);if(u){if(u===p)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=h(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function j(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,j(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function k(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function S(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return y.prototype=d,i(b,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:y,configurable:!0}),y.displayName=s(d,f,"GeneratorFunction"),e.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,f,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},x(E.prototype),s(E.prototype,c,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),s(b,f,"Generator"),s(b,u,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),e.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:S(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},e}function e(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(f){return void e(f)}u.done?r(c):Promise.resolve(c).then(n,o)}function n(t){return function(){var r=this,n=arguments;return new Promise(function(o,i){var a=t.apply(r,n);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)})}}function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function i(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function a(t,r,e){return r&&i(t.prototype,r),e&&i(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(r){var e=c(r,"string");return"symbol"===t(e)?e:String(e)}function c(r,e){if("object"!==t(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseResponse=exports.BaseClient=void 0;var f=function(){function t(){o(this,t)}return a(t,[{key:"ok",get:function(){return this.status>=200&&this.status<=299}},{key:"status",get:function(){throw new Error("not implemented")}},{key:"getHeader",value:function(t){throw new Error("not implemented")}},{key:"getData",value:function(){var t=n(r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("not implemented");case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}]),t}();exports.BaseResponse=f;var s=function(){function t(r){o(this,t),this.url=r}return a(t,[{key:"request",value:function(){var t=n(r().mark(function t(){var e,n=arguments;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw e=n.length>0&&void 0!==n[0]?n[0]:{},e.headers,e.credentials,e.signal,new Error("request is not implemented");case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}]),t}();exports.BaseClient=s;
},{}],"mQE4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FetchClient=void 0;var t=require("./base.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(){r=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(N){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),u=new P(n||[]);return i(a,"_invoke",{value:j(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(N){return{type:"throw",arg:N}}}t.wrap=l;var p={};function y(){}function v(){}function d(){}var g={};s(g,u,function(){return this});var m=Object.getPrototypeOf,b=m&&m(m(k([])));b&&b!==n&&o.call(b,u)&&(g=b);var w=d.prototype=y.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function O(t,r){var n;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(n,u){!function n(i,a,u,c){var f=h(t[i],t,a);if("throw"!==f.type){var s=f.arg,l=s.value;return l&&"object"==e(l)&&o.call(l,"__await")?r.resolve(l.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):r.resolve(l).then(function(t){s.value=t,u(s)},function(t){return n("throw",t,u,c)})}c(f.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function j(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=L(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function k(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:S}}function S(){return{value:void 0,done:!0}}return v.prototype=d,i(w,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=s(d,f,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,f,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(O.prototype),s(O.prototype,c,function(){return this}),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),s(w,f,"Generator"),s(w,u,function(){return this}),s(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(f){return void r(f)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise(function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var r=f(t,"string");return"symbol"===e(r)?r:String(r)}function f(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=v();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(e){s(a,t.BaseResponse);var n=h(a);function a(t){var e;return i(this,a),(e=n.call(this)).response=t,e}return u(a,[{key:"status",get:function(){return this.response.status}},{key:"getHeader",value:function(t){return this.response.headers.get(t)}},{key:"getData",value:function(){var t=o(r().mark(function t(){var e;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.response.arrayBuffer){t.next=6;break}return t.next=3,this.response.arrayBuffer();case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,this.response.buffer();case 8:t.t0=t.sent.buffer;case 9:return e=t.t0,t.abrupt("return",e);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),a}(),m=function(e){s(a,t.BaseClient);var n=h(a);function a(t,e){var r;return i(this,a),(r=n.call(this,t)).credentials=e,r}return u(a,[{key:"request",value:function(){var t=o(r().mark(function t(){var e,n,o,i,a,u=arguments;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:{},n=e.headers,o=e.credentials,i=e.signal,t.next=3,fetch(this.url,{headers:n,credentials:o,signal:i});case 3:return a=t.sent,t.abrupt("return",new g(a));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),a}();exports.FetchClient=m;
},{"./base.js":"fFjA"}],"SXB5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.XHRClient=void 0;var t=require("./base.js"),r=require("../../utils.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,r){return c(t)||u(t,r)||i(t,r)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,r){if(t){if("string"==typeof t)return a(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,r):void 0}}function a(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function u(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,u=[],c=!0,f=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;c=!1}else for(;!(c=(n=i.call(e)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(l){f=!0,o=l}finally{try{if(!c&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(f)throw o}}return u}}function c(t){if(Array.isArray(t))return t}function f(){f=function(){return t};var t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,r,e){t[r]=e.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(R){l=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var i=r&&r.prototype instanceof y?r:y,a=Object.create(i.prototype),u=new P(n||[]);return o(a,"_invoke",{value:O(t,e,u)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(R){return{type:"throw",arg:R}}}t.wrap=s;var p={};function y(){}function v(){}function d(){}var b={};l(b,a,function(){return this});var g=Object.getPrototypeOf,m=g&&g(g(S([])));m&&m!==r&&n.call(m,a)&&(b=m);var w=d.prototype=y.prototype=Object.create(b);function x(t){["next","throw","return"].forEach(function(r){l(t,r,function(t){return this._invoke(r,t)})})}function j(t,r){var i;o(this,"_invoke",{value:function(o,a){function u(){return new r(function(i,u){!function o(i,a,u,c){var f=h(t[i],t,a);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==e(s)&&n.call(s,"__await")?r.resolve(s.__await).then(function(t){o("next",t,u,c)},function(t){o("throw",t,u,c)}):r.resolve(s).then(function(t){l.value=t,u(l)},function(t){return o("throw",t,u,c)})}c(f.arg)}(o,a,i,u)})}return i=i?i.then(u,u):u()}})}function O(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=E(a,e);if(u){if(u===p)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=h(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function E(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,E(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function L(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function _(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,o=function r(){for(;++e<t.length;)if(n.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=d,o(w,"constructor",{value:d,configurable:!0}),o(d,"constructor",{value:v,configurable:!0}),v.displayName=l(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(j.prototype),l(j.prototype,u,function(){return this}),t.AsyncIterator=j,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new j(s(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),l(w,c,"Generator"),l(w,a,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),_(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:S(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},t}function l(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(f){return void e(f)}u.done?r(c):Promise.resolve(c).then(n,o)}function s(t){return function(){var r=this,e=arguments;return new Promise(function(n,o){var i=t.apply(r,e);function a(t){l(i,n,o,a,u,"next",t)}function u(t){l(i,n,o,a,u,"throw",t)}a(void 0)})}}function h(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function p(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function y(t,r,e){return r&&p(t.prototype,r),e&&p(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t){var r=d(t,"string");return"symbol"===e(r)?r:String(r)}function d(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function b(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&g(t,r)}function g(t,r){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}function m(t){var r=j();return function(){var e,n=O(t);if(r){var o=O(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return w(this,e)}}function w(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return x(t)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E=function(r){b(n,t.BaseResponse);var e=m(n);function n(t,r){var o;return h(this,n),(o=e.call(this)).xhr=t,o.data=r,o}return y(n,[{key:"status",get:function(){return this.xhr.status}},{key:"getHeader",value:function(t){return this.xhr.getResponseHeader(t)}},{key:"getData",value:function(){var t=s(f().mark(function t(){return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.data);case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),n}(),L=function(e){b(i,t.BaseClient);var o=m(i);function i(){return h(this,i),o.apply(this,arguments)}return y(i,[{key:"constructRequest",value:function(t,e){var o=this;return new Promise(function(i,a){var u=new XMLHttpRequest;u.open("GET",o.url),u.responseType="arraybuffer";for(var c=0,f=Object.entries(t);c<f.length;c++){var l=n(f[c],2),s=l[0],h=l[1];u.setRequestHeader(s,h)}u.onload=function(){var t=u.response;i(new E(u,t))},u.onerror=a,u.onabort=function(){return a(new r.AbortError("Request aborted"))},u.send(),e&&(e.aborted&&u.abort(),e.addEventListener("abort",function(){return u.abort()}))})}},{key:"request",value:function(){var t=s(f().mark(function t(){var r,e,n,o,i=arguments;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:{},e=r.headers,n=r.signal,t.next=3,this.constructRequest(e,n);case 3:return o=t.sent,t.abrupt("return",o);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),i}();exports.XHRClient=L;
},{"./base.js":"fFjA","../../utils.js":"TyJR"}],"aXFF":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var t,e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.HttpClient=void 0;var r=a(require("http")),n=a(require("https")),o=a(require("url")),i=require("./base.js"),u=require("../../utils.js");function a(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach(function(e){l(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function l(t,e,r){return(e=g(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(){"use strict";p=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(q){f=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof y?e:y,u=Object.create(i.prototype),a=new _(o||[]);return n(u,"_invoke",{value:x(t,r,a)}),u}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(q){return{type:"throw",arg:q}}}t.wrap=s;var h={};function y(){}function v(){}function d(){}var b={};f(b,i,function(){return this});var g=Object.getPrototypeOf,m=g&&g(g(S([])));m&&m!==e&&r.call(m,i)&&(b=m);var w=d.prototype=y.prototype=Object.create(b);function O(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function j(t,e){var o;n(this,"_invoke",{value:function(n,i){function u(){return new e(function(o,u){!function n(o,i,u,a){var f=l(t[o],t,i);if("throw"!==f.type){var s=f.arg,p=s.value;return p&&"object"==c(p)&&r.call(p,"__await")?e.resolve(p.__await).then(function(t){n("next",t,u,a)},function(t){n("throw",t,u,a)}):e.resolve(p).then(function(t){s.value=t,u(s)},function(t){return n("throw",t,u,a)})}a(f.arg)}(n,i,o,u)})}return o=o?o.then(u,u):u()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var u=r.delegate;if(u){var a=P(u,r);if(a){if(a===h)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function P(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,P(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:v,configurable:!0}),v.displayName=f(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,f(t,a,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(j.prototype),f(j.prototype,u,function(){return this}),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var u=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?u:u.next().then(function(t){return t.done?t.value:u.next()})},O(w),f(w,a,"Generator"),f(w,i,function(){return this}),f(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return u.type="throw",u.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function h(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(f){return void r(f)}a.done?e(c):Promise.resolve(c).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function u(t){h(i,n,o,u,a,"next",t)}function a(t){h(i,n,o,u,a,"throw",t)}u(void 0)})}}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function b(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t){var e=m(t,"string");return"symbol"===c(e)?e:String(e)}function m(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}function O(t,e){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function j(t){var e=E();return function(){var r,n=L(t);if(e){var o=L(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return x(this,r)}}function x(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return P(t)}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){w(r,i.BaseResponse);var e=j(r);function r(t,n){var o;return v(this,r),(o=e.call(this)).response=t,o.dataPromise=n,o}return b(r,[{key:"status",get:function(){return this.response.statusCode}},{key:"getHeader",value:function(t){return this.response.headers[t]}},{key:"getData",value:function(){var t=y(p().mark(function t(){var e;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.dataPromise;case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),r}(),S=function(t){w(c,i.BaseClient);var a=j(c);function c(t){var e;return v(this,c),(e=a.call(this,t)).parsedUrl=o.default.parse(e.url),e.httpApi="http:"===e.parsedUrl.protocol?r.default:n.default,e}return b(c,[{key:"constructRequest",value:function(t,r){var n=this;return new Promise(function(o,i){var a=n.httpApi.get(s(s({},n.parsedUrl),{},{headers:t}),function(t){var r=new Promise(function(r){var n=[];t.on("data",function(t){n.push(t)}),t.on("end",function(){var t=e.concat(n).buffer;r(t)}),t.on("error",i)});o(new _(t,r))});a.on("error",i),r&&(r.aborted&&a.destroy(new u.AbortError("Request aborted")),r.addEventListener("abort",function(){return a.destroy(new u.AbortError("Request aborted"))}))})}},{key:"request",value:function(){var t=y(p().mark(function t(){var e,r,n,o,i=arguments;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},r=e.headers,n=e.signal,t.next=3,this.constructRequest(r,n);case 3:return o=t.sent,t.abrupt("return",o);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),c}();exports.HttpClient=S;
},{"http":"vFY1","https":"vFY1","url":"vFY1","./base.js":"fFjA","../../utils.js":"TyJR","buffer":"dskh"}],"Ck99":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeFetchSource=D,exports.makeHttpSource=T,exports.makeRemoteSource=q,exports.makeXHRSource=H;var t=require("./httputils.js"),e=require("./basesource.js"),r=require("./blockedsource.js"),n=require("./client/fetch.js"),o=require("./client/xhr.js"),i=require("./client/http.js"),a=["headers","credentials","maxRanges","allowFullFile"],c=["headers","maxRanges","allowFullFile"],u=["headers","maxRanges","allowFullFile"],l=["forceXHR"];function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(null==t)return{};var r,n,o=h(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function h(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach(function(e){v(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function v(t,e,r){return(e=O(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(){d=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(R){u=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(R){return{type:"throw",arg:R}}}t.wrap=l;var h={};function p(){}function y(){}function v(){}var g={};u(g,i,function(){return this});var b=Object.getPrototypeOf,m=b&&b(b(L([])));m&&m!==e&&r.call(m,i)&&(g=m);var w=v.prototype=p.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e(function(o,a){!function n(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==s(h)&&r.call(h,"__await")?e.resolve(h.__await).then(function(t){n("next",t,a,c)},function(t){n("throw",t,a,c)}):e.resolve(h).then(function(t){l.value=t,a(l)},function(t){return n("throw",t,a,c)})}c(u.arg)}(n,i,o,a)})}return o=o?o.then(a,a):a()}})}function j(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return _()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return y.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(O.prototype),u(O.prototype,a,function(){return this}),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),u(w,c,"Generator"),u(w,i,function(){return this}),u(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function g(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(l){return void r(l)}c.done?e(u):Promise.resolve(u).then(n,o)}function b(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){g(i,n,o,a,c,"next",t)}function c(t){g(i,n,o,a,c,"throw",t)}a(void 0)})}}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O(n.key),n)}}function x(t,e,r){return e&&w(t.prototype,e),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function O(t){var e=j(t,"string");return"symbol"===s(e)?e:String(e)}function j(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}function k(t,e){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function E(t){var e=_();return function(){var r,n=R(t);if(e){var o=R(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return P(this,r)}}function P(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return L(t)}function L(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(r){S(o,e.BaseSource);var n=E(o);function o(t,e,r,i){var a;return m(this,o),(a=n.call(this)).client=t,a.headers=e,a.maxRanges=r,a.allowFullFile=i,a._fileSize=null,a}return x(o,[{key:"fetch",value:function(){var t=b(d().mark(function t(e,r){var n=this;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.maxRanges>=e.length)){t.next=4;break}return t.abrupt("return",this.fetchSlices(e,r));case 4:this.maxRanges>0&&e.length;case 5:return t.abrupt("return",Promise.all(e.map(function(t){return n.fetchSlice(t,r)})));case 6:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"fetchSlices",value:function(){var e=b(d().mark(function e(r,n){var o,i,a,c,u,l,s,f,h,p,v,g,b,m=this;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.request({headers:y(y({},this.headers),{},{Range:"bytes=".concat(r.map(function(t){var e=t.offset,r=t.length;return"".concat(e,"-").concat(e+r)}).join(","))}),signal:n});case 2:if((o=e.sent).ok){e.next=7;break}throw new Error("Error fetching data.");case 7:if(206!==o.status){e.next=32;break}if(i=(0,t.parseContentType)(o.getHeader("content-type")),a=i.type,c=i.params,"multipart/byteranges"!==a){e.next=18;break}return e.t0=t.parseByteRanges,e.next=13,o.getData();case 13:return e.t1=e.sent,e.t2=c.boundary,u=(0,e.t0)(e.t1,e.t2),this._fileSize=u[0].fileSize||null,e.abrupt("return",u);case 18:return e.next=20,o.getData();case 20:if(l=e.sent,s=(0,t.parseContentRange)(o.getHeader("content-range")),f=s.start,h=s.end,p=s.total,this._fileSize=p||null,v=[{data:l,offset:f,length:h-f}],!(r.length>1)){e.next=29;break}return e.next=27,Promise.all(r.slice(1).map(function(t){return m.fetchSlice(t,n)}));case 27:return g=e.sent,e.abrupt("return",v.concat(g));case 29:return e.abrupt("return",v);case 32:if(this.allowFullFile){e.next=34;break}throw new Error("Server responded with full file");case 34:return e.next=36,o.getData();case 36:return b=e.sent,this._fileSize=b.byteLength,e.abrupt("return",[{data:b,offset:0,length:b.byteLength}]);case 39:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchSlice",value:function(){var e=b(d().mark(function e(r,n){var o,i,a,c,u,l,s;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.offset,i=r.length,e.next=3,this.client.request({headers:y(y({},this.headers),{},{Range:"bytes=".concat(o,"-").concat(o+i)}),signal:n});case 3:if((a=e.sent).ok){e.next=8;break}throw new Error("Error fetching data.");case 8:if(206!==a.status){e.next=17;break}return e.next=11,a.getData();case 11:return c=e.sent,u=(0,t.parseContentRange)(a.getHeader("content-range")),l=u.total,this._fileSize=l||null,e.abrupt("return",{data:c,offset:o,length:i});case 17:if(this.allowFullFile){e.next=19;break}throw new Error("Server responded with full file");case 19:return e.next=21,a.getData();case 21:return s=e.sent,this._fileSize=s.byteLength,e.abrupt("return",{data:s,offset:0,length:s.byteLength});case 24:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"fileSize",get:function(){return this._fileSize}}]),o}();function z(t,e){var n=e.blockSize,o=e.cacheSize;return null===n?t:new r.BlockedSource(t,{blockSize:n,cacheSize:o})}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.headers,o=void 0===r?{}:r,i=e.credentials,c=e.maxRanges,u=void 0===c?0:c,l=e.allowFullFile,s=void 0!==l&&l,h=f(e,a),p=new n.FetchClient(t,i);return z(new F(p,o,u,s),h)}function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.headers,n=void 0===r?{}:r,i=e.maxRanges,a=void 0===i?0:i,u=e.allowFullFile,l=void 0!==u&&u,s=f(e,c),h=new o.XHRClient(t);return z(new F(h,n,a,l),s)}function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.headers,n=void 0===r?{}:r,o=e.maxRanges,a=void 0===o?0:o,c=e.allowFullFile,l=void 0!==c&&c,s=f(e,u),h=new i.HttpClient(t);return z(new F(h,n,a,l),s)}function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.forceXHR,n=void 0!==r&&r,o=f(e,l);return"function"!=typeof fetch||n?"undefined"!=typeof XMLHttpRequest?H(t,o):T(t,o):D(t,o)}
},{"./httputils.js":"IP94","./basesource.js":"BczW","./blockedsource.js":"MV2F","./client/fetch.js":"mQE4","./client/xhr.js":"SXB5","./client/http.js":"aXFF"}],"UYbn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeBufferSource=h;var t=require("./basesource.js"),e=require("../utils.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=f(t,"string");return"symbol"===r(e)?e:String(e)}function f(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=p();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(r){c(i,t.BaseSource);var o=l(i);function i(t){var e;return n(this,i),(e=o.call(this)).arrayBuffer=t,e}return u(i,[{key:"fetchSlice",value:function(t,r){if(r&&r.aborted)throw new e.AbortError("Request aborted");return this.arrayBuffer.slice(t.offset,t.offset+t.length)}}]),i}();function h(t){return new v(t)}
},{"./basesource.js":"BczW","../utils.js":"TyJR"}],"B3Dh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeFileReaderSource=g;var t=require("./basesource.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(){e=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(N){l=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof y?r:y,a=Object.create(o.prototype),u=new P(n||[]);return i(a,"_invoke",{value:L(t,e,u)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(N){return{type:"throw",arg:N}}}t.wrap=s;var p={};function y(){}function v(){}function d(){}var m={};l(m,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(S([])));b&&b!==n&&o.call(b,u)&&(m=b);var w=d.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(r){l(t,r,function(t){return this._invoke(r,t)})})}function O(t,e){var n;i(this,"_invoke",{value:function(i,a){function u(){return new e(function(n,u){!function n(i,a,u,c){var f=h(t[i],t,a);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==r(s)&&o.call(s,"__await")?e.resolve(s.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(s).then(function(t){l.value=t,u(l)},function(t){return n("throw",t,u,c)})}c(f.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function L(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=j(a,e);if(u){if(u===p)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=h(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function j(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,j(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function _(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=d,i(w,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=l(d,f,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,f,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(O.prototype),l(O.prototype,c,function(){return this}),t.AsyncIterator=O,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new O(s(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),l(w,f,"Generator"),l(w,u,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),_(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;_(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:S(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(f){return void e(f)}u.done?r(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var r=this,e=arguments;return new Promise(function(o,i){var a=t.apply(r,e);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)})}}function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function a(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,r,e){return r&&a(t.prototype,r),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===r(e)?e:String(e)}function f(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&s(t,r)}function s(t,r){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}function h(t){var r=v();return function(){var e,n=d(t);if(r){var o=d(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return p(this,e)}}function p(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(r){l(a,t.BaseSource);var n=h(a);function a(t){var r;return i(this,a),(r=n.call(this)).file=t,r}return u(a,[{key:"fetchSlice",value:function(){var t=o(e().mark(function t(r,n){var o=this;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,e){var i=o.file.slice(r.offset,r.offset+r.length),a=new FileReader;a.onload=function(r){return t(r.target.result)},a.onerror=e,a.onabort=e,a.readAsArrayBuffer(i),n&&n.addEventListener("abort",function(){return a.abort()})}));case 1:case"end":return t.stop()}},t)}));return function(r,e){return t.apply(this,arguments)}}()}]),a}();function g(t){return new m(t)}
},{"./basesource.js":"BczW"}],"lZIP":[function(require,module,exports) {
var define;
var Buffer = require("buffer").Buffer;
var t,e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeFileSource=E;var r=o(require("fs")),n=require("./basesource.js");function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){"use strict";u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",f=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(R){l=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof y?e:y,u=Object.create(i.prototype),a=new P(o||[]);return n(u,"_invoke",{value:j(t,r,a)}),u}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(R){return{type:"throw",arg:R}}}t.wrap=s;var p={};function y(){}function v(){}function d(){}var m={};l(m,a,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(S([])));b&&b!==e&&r.call(b,a)&&(m=b);var w=d.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function O(t,e){var o;n(this,"_invoke",{value:function(n,u){function a(){return new e(function(o,a){!function n(o,u,a,c){var f=h(t[o],t,u);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==i(s)&&r.call(s,"__await")?e.resolve(s.__await).then(function(t){n("next",t,a,c)},function(t){n("throw",t,a,c)}):e.resolve(s).then(function(t){l.value=t,a(l)},function(t){return n("throw",t,a,c)})}c(f.arg)}(n,u,o,a)})}return o=o?o.then(a,a):a()}})}function j(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var u=r.delegate;if(u){var a=L(u,r);if(a){if(a===p)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=h(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:v,configurable:!0}),v.displayName=l(d,f,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,f,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(O.prototype),l(O.prototype,c,function(){return this}),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var u=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?u:u.next().then(function(t){return t.done?t.value:u.next()})},x(w),l(w,f,"Generator"),l(w,a,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return u.type="throw",u.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function a(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(f){return void r(f)}a.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function u(t){a(i,n,o,u,c,"next",t)}function c(t){a(i,n,o,u,c,"throw",t)}u(void 0)})}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function s(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t){var e=p(t,"string");return"symbol"===i(e)?e:String(e)}function p(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=b();return function(){var r,n=w(t);if(e){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t){return new Promise(function(e,n){r.default.close(t,function(t){t?n(t):e()})})}function O(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new Promise(function(o,i){r.default.open(t,e,n,function(t,e){t?i(t):o(e)})})}function j(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Promise(function(t,n){r.default.read.apply(r.default,e.concat([function(e,r,o){e?n(e):t({bytesRead:r,buffer:o})}]))})}var L=function(t){y(o,n.BaseSource);var r=d(o);function o(t){var e;return f(this,o),(e=r.call(this)).path=t,e.openRequest=O(t,"r"),e}return s(o,[{key:"fetchSlice",value:function(){var t=c(u().mark(function t(r){var n,o,i;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.openRequest;case 2:return n=t.sent,t.next=5,j(n,e.alloc(r.length),0,r.length,r.offset);case 5:return o=t.sent,i=o.buffer,t.abrupt("return",i.buffer);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"close",value:function(){var t=c(u().mark(function t(){var e;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.openRequest;case 2:return e=t.sent,t.next=5,x(e);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),o}();function E(t){return new L(t)}
},{"fs":"vFY1","./basesource.js":"BczW","buffer":"dskh"}],"Wl7W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.writeGeotiff=d;var e=require("./globals.js"),t=require("./utils.js");function r(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,f=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){f=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(f)throw a}}}}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=(0,t.invert)(e.fieldTagNames),a=(0,t.invert)(e.geoKeyNames),u={};(0,t.assign)(u,o),(0,t.assign)(u,a);var f=(0,t.invert)(e.fieldTypeNames),c=1e3,s={nextZero:function(e,t){for(var r=t;0!==e[r];)r++;return r},readUshort:function(e,t){return e[t]<<8|e[t+1]},readShort:function(e,t){var r=s.ui8;return r[0]=e[t+1],r[1]=e[t+0],s.i16[0]},readInt:function(e,t){var r=s.ui8;return r[0]=e[t+3],r[1]=e[t+2],r[2]=e[t+1],r[3]=e[t+0],s.i32[0]},readUint:function(e,t){var r=s.ui8;return r[0]=e[t+3],r[1]=e[t+2],r[2]=e[t+1],r[3]=e[t+0],s.ui32[0]},readASCII:function(e,t,r){return r.map(function(r){return String.fromCharCode(e[t+r])}).join("")},readFloat:function(e,r){var n=s.ui8;return(0,t.times)(4,function(t){n[t]=e[r+3-t]}),s.fl32[0]},readDouble:function(e,r){var n=s.ui8;return(0,t.times)(8,function(t){n[t]=e[r+7-t]}),s.fl64[0]},writeUshort:function(e,t,r){e[t]=r>>8&255,e[t+1]=255&r},writeUint:function(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=r>>0&255},writeASCII:function(e,r,n){(0,t.times)(n.length,function(t){e[r+t]=n.charCodeAt(t)})},ui8:new Uint8Array(8)};s.fl64=new Float64Array(s.ui8.buffer),s.writeDouble=function(e,r,n){s.fl64[0]=n,(0,t.times)(8,function(t){e[r+t]=s.ui8[7-t]})};var l=function(n,i,o,a){var u=o,c=Object.keys(a).filter(function(e){return null!=e&&"undefined"!==e});n.writeUshort(i,u,c.length);var s,l=(u+=2)+12*c.length+4,h=r(c);try{var y=function(){var r=s.value,o=null;"number"==typeof r?o=r:"string"==typeof r&&(o=parseInt(r,10));var c=e.fieldTagTypes[o],h=f[c];if(null==c||void 0===c||void 0===c)throw new Error("unknown type of tag: ".concat(o));var y=a[r];if(void 0===y)throw new Error("failed to get value for key ".concat(r));"ASCII"===c&&"string"==typeof y&&!1===(0,t.endsWith)(y,"\0")&&(y+="\0");var p=y.length;n.writeUshort(i,u,o),u+=2,n.writeUshort(i,u,h),u+=2,n.writeUint(i,u,p);var m=[-1,1,1,2,4,8,0,0,0,0,0,0,8][h]*p,g=u+=4;m>4&&(n.writeUint(i,u,l),g=l),"ASCII"===c?n.writeASCII(i,g,y):"SHORT"===c?(0,t.times)(p,function(e){n.writeUshort(i,g+2*e,y[e])}):"LONG"===c?(0,t.times)(p,function(e){n.writeUint(i,g+4*e,y[e])}):"RATIONAL"===c?(0,t.times)(p,function(e){n.writeUint(i,g+8*e,Math.round(1e4*y[e])),n.writeUint(i,g+8*e+4,1e4)}):"DOUBLE"===c&&(0,t.times)(p,function(e){n.writeDouble(i,g+8*e,y[e])}),m>4&&(l+=m+=1&m),u+=4};for(h.s();!(s=h.n()).done;)y()}catch(p){h.e(p)}finally{h.f()}return[u,l]},h=function(e){var t=new Uint8Array(c),r=4,n=s;t[0]=77,t[1]=77,t[3]=42;var i=8;if(n.writeUint(t,r,i),r+=4,e.forEach(function(r,o){var a=l(n,t,i,r);i=a[1],o<e.length-1&&n.writeUint(t,a[0],i)}),t.slice)return t.slice(0,i).buffer;for(var o=new Uint8Array(i),a=0;a<i;a++)o[a]=t[a];return o.buffer},y=function(e,r,n,i){if(null==n)throw new Error("you passed into encodeImage a width of type ".concat(n));if(null==r)throw new Error("you passed into encodeImage a width of type ".concat(r));var o={256:[r],257:[n],273:[c],278:[n],305:"geotiff.js"};if(i)for(var a in i)i.hasOwnProperty(a)&&(o[a]=i[a]);var u=new Uint8Array(h([o])),f=new Uint8Array(e),s=o[277],l=new Uint8Array(c+r*n*s);return(0,t.times)(u.length,function(e){l[e]=u[e]}),(0,t.forEach)(f,function(e,t){l[c+t]=e}),l.buffer},p=function(e){var t={};for(var r in e)"StripOffsets"!==r&&(u[r]||console.error(r,"not in name2code:",Object.keys(u)),t[u[r]]=e[r]);return t},m=function(e){return Array.isArray(e)?e:[e]},g=[["Compression",1],["PlanarConfiguration",1],["ExtraSamples",0]];function d(r,n){var i,o,a,f;"number"==typeof r[0]?(i=n.height||n.ImageLength,a=n.width||n.ImageWidth,o=r.length/(i*a),f=r):(o=r.length,i=r[0].length,a=r[0][0].length,f=[],(0,t.times)(i,function(e){(0,t.times)(a,function(n){(0,t.times)(o,function(t){f.push(r[t][e][n])})})})),n.ImageLength=i,delete n.height,n.ImageWidth=a,delete n.width,n.BitsPerSample||(n.BitsPerSample=(0,t.times)(o,function(){return 8})),g.forEach(function(e){var t=e[0];if(!n[t]){var r=e[1];n[t]=r}}),n.PhotometricInterpretation||(n.PhotometricInterpretation=3===n.BitsPerSample.length?2:1),n.SamplesPerPixel||(n.SamplesPerPixel=[o]),n.StripByteCounts||(n.StripByteCounts=[o*i*a]),n.ModelPixelScale||(n.ModelPixelScale=[360/a,180/i,0]),n.SampleFormat||(n.SampleFormat=(0,t.times)(o,function(){return 1})),n.hasOwnProperty("GeographicTypeGeoKey")||n.hasOwnProperty("ProjectedCSTypeGeoKey")||(n.GeographicTypeGeoKey=4326,n.ModelTiepoint=[0,0,0,-180,90,0],n.GeogCitationGeoKey="WGS 84",n.GTModelTypeGeoKey=2);var c=Object.keys(n).filter(function(e){return(0,t.endsWith)(e,"GeoKey")}).sort(function(e,t){return u[e]-u[t]});if(!n.GeoAsciiParams){var s="";c.forEach(function(t){var r=Number(u[t]);"ASCII"===e.fieldTagTypes[r]&&(s+="".concat(n[t].toString(),"\0"))}),s.length>0&&(n.GeoAsciiParams=s)}if(!n.GeoKeyDirectory){var l=[1,1,0,c.length];c.forEach(function(t){var r,i,o,a=Number(u[t]);l.push(a),"SHORT"===e.fieldTagTypes[a]?(r=1,i=0,o=n[t]):"GeogCitationGeoKey"===t?(r=n.GeoAsciiParams.length,i=Number(u.GeoAsciiParams),o=0):console.log("[geotiff.js] couldn't get TIFFTagLocation for ".concat(t)),l.push(i),l.push(r),l.push(o)}),n.GeoKeyDirectory=l}for(var h in c)c.hasOwnProperty(h)&&delete n[h];["Compression","ExtraSamples","GeographicTypeGeoKey","GTModelTypeGeoKey","GTRasterTypeGeoKey","ImageLength","ImageWidth","Orientation","PhotometricInterpretation","ProjectedCSTypeGeoKey","PlanarConfiguration","ResolutionUnit","SamplesPerPixel","XPosition","YPosition"].forEach(function(e){n[e]&&(n[e]=m(n[e]))});var d=p(n);return y(f,a,i,d)}
},{"./globals.js":"QETr","./utils.js":"TyJR"}],"EXBN":[function(require,module,exports) {
"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function n(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(r){var t=u(r,"string");return"symbol"===e(t)?t:String(t)}function u(r,t){if("object"!==e(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,t||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.debug=l,exports.error=v,exports.info=p,exports.log=c,exports.setLogger=f,exports.time=s,exports.timeEnd=b,exports.warn=y;var i=function(){function e(){r(this,e)}return n(e,[{key:"log",value:function(){}},{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}},{key:"time",value:function(){}},{key:"timeEnd",value:function(){}}]),e}(),a=new i;function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i;a=e}function l(){var e;return(e=a).debug.apply(e,arguments)}function c(){var e;return(e=a).log.apply(e,arguments)}function p(){var e;return(e=a).info.apply(e,arguments)}function y(){var e;return(e=a).warn.apply(e,arguments)}function v(){var e;return(e=a).error.apply(e,arguments)}function s(){var e;return(e=a).time.apply(e,arguments)}function b(){var e;return(e=a).timeEnd.apply(e,arguments)}
},{}],"eV3Z":[function(require,module,exports) {
"use strict";function r(r,e){var t=r.length-e,o=0;do{for(var n=e;n>0;n--)r[o+e]+=r[o],o++;t-=e}while(t>0)}function e(r,e,t){for(var o=0,n=r.length,a=n/t;n>e;){for(var i=e;i>0;--i)r[o+e]+=r[o],++o;n-=e}for(var l=r.slice(),s=0;s<a;++s)for(var c=0;c<t;++c)r[t*s+c]=l[(t-c-1)*a+s]}function t(t,o,n,a,i,l){if(!o||1===o)return t;for(var s=0;s<i.length;++s){if(i[s]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(i[s]!==i[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var c=i[0]/8,f=2===l?1:i.length,h=0;h<a&&!(h*f*n*c>=t.byteLength);++h){var w=void 0;if(2===o){switch(i[0]){case 8:w=new Uint8Array(t,h*f*n*c,f*n*c);break;case 16:w=new Uint16Array(t,h*f*n*c,f*n*c/2);break;case 32:w=new Uint32Array(t,h*f*n*c,f*n*c/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(i[0]," bits per sample."))}r(w,f,c)}else 3===o&&e(w=new Uint8Array(t,h*f*n*c,f*n*c),f,c)}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyPredictor=t;
},{}],"Fktz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../predictor.js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(){e=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(N){l=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof v?r:v,a=Object.create(o.prototype),u=new S(n||[]);return i(a,"_invoke",{value:E(t,e,u)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(N){return{type:"throw",arg:N}}}t.wrap=s;var p={};function v(){}function y(){}function d(){}var g={};l(g,u,function(){return this});var m=Object.getPrototypeOf,w=m&&m(m(_([])));w&&w!==n&&o.call(w,u)&&(g=w);var b=d.prototype=v.prototype=Object.create(g);function x(t){["next","throw","return"].forEach(function(r){l(t,r,function(t){return this._invoke(r,t)})})}function L(t,e){var n;i(this,"_invoke",{value:function(i,a){function u(){return new e(function(n,u){!function n(i,a,u,c){var f=h(t[i],t,a);if("throw"!==f.type){var l=f.arg,s=l.value;return s&&"object"==r(s)&&o.call(s,"__await")?e.resolve(s.__await).then(function(t){n("next",t,u,c)},function(t){n("throw",t,u,c)}):e.resolve(s).then(function(t){l.value=t,u(l)},function(t){return n("throw",t,u,c)})}c(f.arg)}(i,a,n,u)})}return n=n?n.then(u,u):u()}})}function E(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=j(a,e);if(u){if(u===p)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=h(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function j(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,j(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function P(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function _(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return y.prototype=d,i(b,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:y,configurable:!0}),y.displayName=l(d,f,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,f,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(L.prototype),l(L.prototype,c,function(){return this}),t.AsyncIterator=L,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new L(s(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),l(b,f,"Generator"),l(b,u,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:_(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,r,e,n,o,i,a){try{var u=t[i](a),c=u.value}catch(f){return void e(f)}u.done?r(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var r=this,e=arguments;return new Promise(function(o,i){var a=t.apply(r,e);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)})}}function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function a(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,r,e){return r&&a(t.prototype,r),e&&a(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===r(e)?e:String(e)}function f(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var l=function(){function r(){i(this,r)}return u(r,[{key:"decode",value:function(){var r=o(e().mark(function r(n,o){var i,a,u,c,f;return e().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.decodeBlock(o);case 2:if(i=r.sent,1===(a=n.Predictor||1)){r.next=9;break}return u=!n.StripOffsets,c=u?n.TileWidth:n.ImageWidth,f=u?n.TileLength:n.RowsPerStrip||n.ImageLength,r.abrupt("return",(0,t.applyPredictor)(i,a,c,f,n.BitsPerSample,n.PlanarConfiguration));case 9:return r.abrupt("return",i);case 10:case"end":return r.stop()}},r,this)}));return function(t,e){return r.apply(this,arguments)}}()}]),r}();exports.default=l;
},{"../predictor.js":"eV3Z"}],"qMBw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"BaseDecoder",{enumerable:!0,get:function(){return h.default}}),exports.GeoTIFF=void 0,Object.defineProperty(exports,"GeoTIFFImage",{enumerable:!0,get:function(){return e.default}}),exports.MultiGeoTIFF=void 0,Object.defineProperty(exports,"Pool",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"addDecoder",{enumerable:!0,get:function(){return l.addDecoder}}),exports.default=void 0,exports.fromArrayBuffer=re,exports.fromBlob=ae,exports.fromFile=ie,exports.fromUrl=ee,exports.fromUrls=se,Object.defineProperty(exports,"getDecoder",{enumerable:!0,get:function(){return l.getDecoder}}),exports.rgb=exports.globals=void 0,Object.defineProperty(exports,"setLogger",{enumerable:!0,get:function(){return p.setLogger}}),exports.writeArrayBuffer=fe;var e=v(require("./geotiffimage.js")),t=v(require("./dataview64.js")),r=v(require("./dataslice.js")),n=v(require("./pool.js")),i=require("./source/remote.js"),o=require("./source/arraybuffer.js"),a=require("./source/filereader.js"),u=require("./source/file.js"),s=y(require("./globals.js"));exports.globals=s;var c=require("./geotiffwriter.js"),f=y(require("./rgb.js"));exports.rgb=f;var l=require("./compression/index.js"),p=require("./logging.js"),h=v(require("./compression/basedecoder.js"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function v(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(){g=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var o=t&&t.prototype instanceof p?t:p,a=Object.create(o.prototype),u=new S(i||[]);return n(a,"_invoke",{value:O(e,r,u)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var l={};function p(){}function h(){}function d(){}var y={};s(y,o,function(){return this});var v=Object.getPrototypeOf,w=v&&v(v(F([])));w&&w!==t&&r.call(w,o)&&(y=w);var m=d.prototype=p.prototype=Object.create(y);function x(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var i;n(this,"_invoke",{value:function(n,o){function a(){return new t(function(i,a){!function n(i,o,a,u){var s=f(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==b(l)&&r.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,a,u)},function(e){n("throw",e,a,u)}):t.resolve(l).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,u)})}u(s.arg)}(n,o,i,a)})}return i=i?i.then(a,a):a()}})}function O(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return E()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=T(a,r);if(u){if(u===l)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=f(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function T(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var i=f(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,l;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function F(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=d,n(m,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},x(k.prototype),s(k.prototype,a,function(){return this}),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(c(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},x(m),s(m,u,"Generator"),s(m,o,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=F,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;j(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:F(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){x(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function x(e,t,r){return(t=M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){return S(e)||j(e,t)||T(e,t)||O()}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(f){c=!0,i=f}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}function S(e){if(Array.isArray(e))return e}function F(e,t,r,n,i,o,a){try{var u=e[o](a),s=u.value}catch(c){return void r(c)}u.done?t(s):Promise.resolve(s).then(n,i)}function E(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){F(o,n,i,a,u,"next",e)}function u(e){F(o,n,i,a,u,"throw",e)}a(void 0)})}}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}function D(e){var t=_();return function(){var r,n=G(e);if(t){var i=G(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return L(this,r)}}function L(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){var t="function"==typeof Map?new Map:void 0;return(R=function(e){if(null===e||!U(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return N(e,arguments,G(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),q(r,e)})(e)}function N(e,t,r){return(N=_()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&q(i,r.prototype),i}).apply(null,arguments)}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function U(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function q(e,t){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function B(e,t,r){return t&&C(e.prototype,t),r&&C(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function M(e){var t=V(e,"string");return"symbol"===b(t)?t:String(t)}function V(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e){switch(e){case s.fieldTypes.BYTE:case s.fieldTypes.ASCII:case s.fieldTypes.SBYTE:case s.fieldTypes.UNDEFINED:return 1;case s.fieldTypes.SHORT:case s.fieldTypes.SSHORT:return 2;case s.fieldTypes.LONG:case s.fieldTypes.SLONG:case s.fieldTypes.FLOAT:case s.fieldTypes.IFD:return 4;case s.fieldTypes.RATIONAL:case s.fieldTypes.SRATIONAL:case s.fieldTypes.DOUBLE:case s.fieldTypes.LONG8:case s.fieldTypes.SLONG8:case s.fieldTypes.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(e))}}function W(e){var t=e.GeoKeyDirectory;if(!t)return null;for(var r={},n=4;n<=4*t[3];n+=4){var i=s.geoKeyNames[t[n]],o=t[n+1]?s.fieldTagNames[t[n+1]]:null,a=t[n+2],u=t[n+3],c=null;if(o){if(null==(c=e[o]))throw new Error("Could not get value of geoKey '".concat(i,"'."));"string"==typeof c?c=c.substring(u,u+a-1):c.subarray&&(c=c.subarray(u,u+a),1===a&&(c=c[0]))}else c=u;r[i]=c}return r}function H(e,t,r,n){var i=null,o=null,a=K(t);switch(t){case s.fieldTypes.BYTE:case s.fieldTypes.ASCII:case s.fieldTypes.UNDEFINED:i=new Uint8Array(r),o=e.readUint8;break;case s.fieldTypes.SBYTE:i=new Int8Array(r),o=e.readInt8;break;case s.fieldTypes.SHORT:i=new Uint16Array(r),o=e.readUint16;break;case s.fieldTypes.SSHORT:i=new Int16Array(r),o=e.readInt16;break;case s.fieldTypes.LONG:case s.fieldTypes.IFD:i=new Uint32Array(r),o=e.readUint32;break;case s.fieldTypes.SLONG:i=new Int32Array(r),o=e.readInt32;break;case s.fieldTypes.LONG8:case s.fieldTypes.IFD8:i=new Array(r),o=e.readUint64;break;case s.fieldTypes.SLONG8:i=new Array(r),o=e.readInt64;break;case s.fieldTypes.RATIONAL:i=new Uint32Array(2*r),o=e.readUint32;break;case s.fieldTypes.SRATIONAL:i=new Int32Array(2*r),o=e.readInt32;break;case s.fieldTypes.FLOAT:i=new Float32Array(r),o=e.readFloat32;break;case s.fieldTypes.DOUBLE:i=new Float64Array(r),o=e.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(t))}if(t!==s.fieldTypes.RATIONAL&&t!==s.fieldTypes.SRATIONAL)for(var u=0;u<r;++u)i[u]=o.call(e,n+u*a);else for(var c=0;c<r;c+=2)i[c]=o.call(e,n+c*a),i[c+1]=o.call(e,n+(c*a+4));return t===s.fieldTypes.ASCII?new TextDecoder("utf-8").decode(i):i}var X=B(function e(t,r,n){Y(this,e),this.fileDirectory=t,this.geoKeyDirectory=r,this.nextIFDByteOffset=n}),z=function(e){A(r,R(Error));var t=D(r);function r(e){var n;return Y(this,r),(n=t.call(this,"No image at index ".concat(e))).index=e,n}return B(r)}(),Z=function(){function e(){Y(this,e)}return B(e,[{key:"readRasters",value:function(){var e=E(g().mark(function e(){var t,r,n,i,o,a,u,s,c,f,l,p,h,d,y,v,b,w,x,O,T,I,j,S,F,E,A,D,L,P,R,N,_,U,q,G,C,B,M,V=arguments;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=V.length>0&&void 0!==V[0]?V[0]:{},r=t.window,n=t.width,i=t.height,o=t.resX,a=t.resY,u=t.bbox,e.next=5,this.getImage();case 5:return s=e.sent,c=s,e.next=9,this.getImageCount();case 9:if(f=e.sent,l=s.getBoundingBox(),!r||!u){e.next=13;break}throw new Error('Both "bbox" and "window" passed.');case 13:if(!n&&!i){e.next=24;break}if(r&&(p=s.getOrigin(),h=k(p,2),d=h[0],y=h[1],v=s.getResolution(),b=k(v,2),w=b[0],x=b[1],u=[d+r[0]*w,y+r[1]*x,d+r[2]*w,y+r[3]*x]),O=u||l,!n){e.next=20;break}if(!o){e.next=19;break}throw new Error("Both width and resX passed");case 19:o=(O[2]-O[0])/n;case 20:if(!i){e.next=24;break}if(!a){e.next=23;break}throw new Error("Both width and resY passed");case 23:a=(O[3]-O[1])/i;case 24:if(!o&&!a){e.next=48;break}T=[],I=0;case 27:if(!(I<f)){e.next=36;break}return e.next=30,this.getImage(I);case 30:j=e.sent,S=j.fileDirectory,F=S.SubfileType,E=S.NewSubfileType,(0===I||2===F||1&E)&&T.push(j);case 33:++I,e.next=27;break;case 36:T.sort(function(e,t){return e.getWidth()-t.getWidth()}),A=0;case 38:if(!(A<T.length)){e.next=48;break}if(D=T[A],L=(l[2]-l[0])/D.getWidth(),P=(l[3]-l[1])/D.getHeight(),c=D,!(o&&o>L||a&&a>P)){e.next=45;break}return e.abrupt("break",48);case 45:++A,e.next=38;break;case 48:return R=r,u&&(N=s.getOrigin(),_=k(N,2),U=_[0],q=_[1],G=c.getResolution(s),C=k(G,2),B=C[0],M=C[1],R=[Math.round((u[0]-U)/B),Math.round((u[1]-q)/M),Math.round((u[2]-U)/B),Math.round((u[3]-q)/M)],R=[Math.min(R[0],R[2]),Math.min(R[1],R[3]),Math.max(R[0],R[2]),Math.max(R[1],R[3])]),e.abrupt("return",c.readRasters(m(m({},t),{},{window:R})));case 51:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),$=function(n){A(o,Z);var i=D(o);function o(e,t,r,n){var a,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return Y(this,o),(a=i.call(this)).source=e,a.littleEndian=t,a.bigTiff=r,a.firstIFDOffset=n,a.cache=u.cache||!1,a.ifdRequests=[],a.ghostValues=null,a}return B(o,[{key:"getSlice",value:function(){var e=E(g().mark(function e(t,n){var i;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.bigTiff?4048:1024,e.t0=r.default,e.next=4,this.source.fetch([{offset:t,length:void 0!==n?n:i}]);case 4:return e.t1=e.sent[0],e.t2=t,e.t3=this.littleEndian,e.t4=this.bigTiff,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 9:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"parseFileDirectoryAt",value:function(){var e=E(g().mark(function e(t){var r,n,i,o,a,u,c,f,l,p,h,d,y,v,b,w,m,x,k,O;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.bigTiff?20:12,n=this.bigTiff?8:2,e.next=4,this.getSlice(t);case 4:if(i=e.sent,o=this.bigTiff?i.readUint64(t):i.readUint16(t),a=o*r+(this.bigTiff?16:6),i.covers(t,a)){e.next=11;break}return e.next=10,this.getSlice(t,a);case 10:i=e.sent;case 11:u={},c=t+(this.bigTiff?8:2),f=0;case 14:if(!(f<o)){e.next=41;break}if(l=i.readUint16(c),p=i.readUint16(c+2),h=this.bigTiff?i.readUint64(c+4):i.readUint32(c+4),d=void 0,y=void 0,v=K(p),b=c+(this.bigTiff?12:8),!(v*h<=(this.bigTiff?8:4))){e.next=26;break}d=H(i,p,h,b),e.next=36;break;case 26:if(w=i.readOffset(b),m=K(p)*h,!i.covers(w,m)){e.next=32;break}d=H(i,p,h,w),e.next=36;break;case 32:return e.next=34,this.getSlice(w,m);case 34:x=e.sent,d=H(x,p,h,w);case 36:y=1===h&&-1===s.arrayFields.indexOf(l)&&p!==s.fieldTypes.RATIONAL&&p!==s.fieldTypes.SRATIONAL?d[0]:d,u[s.fieldTagNames[l]]=y;case 38:c+=r,++f,e.next=14;break;case 41:return k=W(u),O=i.readOffset(t+n+r*o),e.abrupt("return",new X(u,k,O));case 44:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"requestIFD",value:function(){var e=E(g().mark(function e(t){var r=this;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ifdRequests[t]){e.next=4;break}return e.abrupt("return",this.ifdRequests[t]);case 4:if(0!==t){e.next=9;break}return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),e.abrupt("return",this.ifdRequests[t]);case 9:if(this.ifdRequests[t-1]){e.next=19;break}e.prev=10,this.ifdRequests[t-1]=this.requestIFD(t-1),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(10),!(e.t0 instanceof z)){e.next=18;break}throw new z(t);case 18:throw e.t0;case 19:return this.ifdRequests[t]=E(g().mark(function e(){var n;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ifdRequests[t-1];case 2:if(0!==(n=e.sent).nextIFDByteOffset){e.next=5;break}throw new z(t);case 5:return e.abrupt("return",r.parseFileDirectoryAt(n.nextIFDByteOffset));case 6:case"end":return e.stop()}},e)}))(),e.abrupt("return",this.ifdRequests[t]);case 21:case"end":return e.stop()}},e,this,[[10,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getImage",value:function(){var t=E(g().mark(function t(){var r,n,i=arguments;return g().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:0,t.next=3,this.requestIFD(r);case 3:return n=t.sent,t.abrupt("return",new e.default(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getImageCount",value:function(){var e=E(g().mark(function e(){var t,r;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0,r=!0;case 2:if(!r){e.next=18;break}return e.prev=3,e.next=6,this.requestIFD(t);case 6:++t,e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof z)){e.next=15;break}r=!1,e.next=16;break;case 15:throw e.t0;case 16:e.next=2;break;case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}},e,this,[[3,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"getGhostValues",value:function(){var e=E(g().mark(function e(){var t,r,n,i,o,a,u,c,f=this;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.bigTiff?16:8,!this.ghostValues){e.next=3;break}return e.abrupt("return",this.ghostValues);case 3:return n=(r="GDAL_STRUCTURAL_METADATA_SIZE=").length+100,e.next=7,this.getSlice(t,n);case 7:if(i=e.sent,r!==H(i,s.fieldTypes.ASCII,r.length,t)){e.next=19;break}if(o=H(i,s.fieldTypes.ASCII,n,t),a=o.split("\n")[0],!((u=Number(a.split("=")[1].split(" ")[0])+a.length)>n)){e.next=16;break}return e.next=15,this.getSlice(t,u);case 15:i=e.sent;case 16:c=H(i,s.fieldTypes.ASCII,u,t),this.ghostValues={},c.split("\n").filter(function(e){return e.length>0}).map(function(e){return e.split("=")}).forEach(function(e){var t=k(e,2),r=t[0],n=t[1];f.ghostValues[r]=n});case 19:return e.abrupt("return",this.ghostValues);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){return"function"==typeof this.source.close&&this.source.close()}}],[{key:"fromSource",value:function(){var e=E(g().mark(function e(r,n,i){var a,u,s,c,f,l,p;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fetch([{offset:0,length:1024}],i);case 2:if(a=e.sent[0],u=new t.default(a),18761!==(s=u.getUint16(0,0))){e.next=9;break}c=!0,e.next=14;break;case 9:if(19789!==s){e.next=13;break}c=!1,e.next=14;break;case 13:throw new TypeError("Invalid byte order value.");case 14:if(42!==(f=u.getUint16(2,c))){e.next=19;break}l=!1,e.next=27;break;case 19:if(43!==f){e.next=26;break}if(l=!0,8===u.getUint16(4,c)){e.next=24;break}throw new Error("Unsupported offset byte-size.");case 24:e.next=27;break;case 26:throw new TypeError("Invalid magic number.");case 27:return p=l?u.getUint64(8,c):u.getUint32(4,c),e.abrupt("return",new o(r,c,l,p,n));case 29:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}()}]),o}();exports.GeoTIFF=$;var J=$;exports.default=J;var Q=function(t){A(n,Z);var r=D(n);function n(e,t){var i;return Y(this,n),(i=r.call(this)).mainFile=e,i.overviewFiles=t,i.imageFiles=[e].concat(t),i.fileDirectoriesPerFile=null,i.fileDirectoriesPerFileParsing=null,i.imageCount=null,i}return B(n,[{key:"parseFileDirectoriesPerFile",value:function(){var e=E(g().mark(function e(){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(function(e){return e.parseFileDirectoryAt(e.firstIFDOffset)})),e.next=3,Promise.all(t);case 3:return this.fileDirectoriesPerFile=e.sent,e.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getImage",value:function(){var t=E(g().mark(function t(){var r,n,i,o,a,u,s,c=arguments;return g().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:0,t.next=3,this.getImageCount();case 3:return t.next=5,this.parseFileDirectoriesPerFile();case 5:n=0,i=0,o=0;case 8:if(!(o<this.imageFiles.length)){t.next=26;break}a=this.imageFiles[o],u=0;case 11:if(!(u<this.imageCounts[o])){t.next=22;break}if(r!==n){t.next=17;break}return t.next=15,a.requestIFD(i);case 15:return s=t.sent,t.abrupt("return",new e.default(s.fileDirectory,s.geoKeyDirectory,a.dataView,a.littleEndian,a.cache,a.source));case 17:n++,i++;case 19:u++,t.next=11;break;case 22:i=0;case 23:o++,t.next=8;break;case 26:throw new RangeError("Invalid image index");case 27:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getImageCount",value:function(){var e=E(g().mark(function e(){var t;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.imageCount){e.next=2;break}return e.abrupt("return",this.imageCount);case 2:return t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(function(e){return e.getImageCount()})),e.next=5,Promise.all(t);case 5:return this.imageCounts=e.sent,this.imageCount=this.imageCounts.reduce(function(e,t){return e+t},0),e.abrupt("return",this.imageCount);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),n}();function ee(e){return te.apply(this,arguments)}function te(){return(te=E(g().mark(function e(t){var r,n,o=arguments;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2?o[2]:void 0,e.abrupt("return",$.fromSource((0,i.makeRemoteSource)(t,r),n));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e,t){return ne.apply(this,arguments)}function ne(){return(ne=E(g().mark(function e(t,r){return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.fromSource((0,o.makeBufferSource)(t),r));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ie(e,t){return oe.apply(this,arguments)}function oe(){return(oe=E(g().mark(function e(t,r){return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.fromSource((0,u.makeFileSource)(t),r));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(e,t){return ue.apply(this,arguments)}function ue(){return(ue=E(g().mark(function e(t,r){return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.fromSource((0,a.makeFileReaderSource)(t),r));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(e){return ce.apply(this,arguments)}function ce(){return(ce=E(g().mark(function e(t){var r,n,o,a,u,s=arguments;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:[],n=s.length>2&&void 0!==s[2]?s[2]:{},o=s.length>3?s[3]:void 0,e.next=5,$.fromSource((0,i.makeRemoteSource)(t,n),o);case 5:return a=e.sent,e.next=8,Promise.all(r.map(function(e){return $.fromSource((0,i.makeRemoteSource)(e,n))}));case 8:return u=e.sent,e.abrupt("return",new Q(a,u));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(e,t){return(0,c.writeGeotiff)(e,t)}exports.MultiGeoTIFF=Q;
},{"./geotiffimage.js":"sIme","./dataview64.js":"j0go","./dataslice.js":"g6Ki","./pool.js":"dZzl","./source/remote.js":"Ck99","./source/arraybuffer.js":"UYbn","./source/filereader.js":"B3Dh","./source/file.js":"lZIP","./globals.js":"QETr","./geotiffwriter.js":"Wl7W","./rgb.js":"xJBr","./compression/index.js":"iicZ","./logging.js":"EXBN","./compression/basedecoder.js":"Fktz"}],"bHRM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./DataTile.js")),r=u(require("../tilegrid/TileGrid.js")),t=require("geotiff"),n=require("../proj.js"),o=require("../math.js"),i=require("../extent.js"),a=require("../console.js"),s=require("../proj/Units.js");function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function f(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function h(e,r,t){return r&&f(e.prototype,r),t&&f(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var r=y(e,"string");return"symbol"===c(r)?r:String(r)}function y(e,r){if("object"!==c(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function p(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&v(e,r)}function v(e,r){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e})(e,r)}function g(e){var r=b();return function(){var t,n=w(e);if(r){var o=w(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return m(this,t)}}function m(e,r){if(r&&("object"===c(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){return 4==(4&(e.fileDirectory.NewSubfileType||0))}function j(e,r){if(!e)return!1;if(!0===e)return!0;if(3!==r.getSamplesPerPixel())return!1;var n=r.fileDirectory.PhotometricInterpretation,o=t.globals.photometricInterpretations;return n===o.CMYK||n===o.YCbCr||n===o.CIELab||n===o.ICCLab}var P,I="STATISTICS_MAXIMUM",T="STATISTICS_MINIMUM",S=256;function G(){return P||(P=new t.Pool),P}function O(e){try{return e.getBoundingBox()}catch(r){return[0,0,e.getWidth(),e.getHeight()]}}function x(e){try{return e.getOrigin().slice(0,2)}catch(r){return[0,e.getHeight()]}}function C(e,r){try{return e.getResolution(r)}catch(t){return[r.getWidth()/e.getWidth(),r.getHeight()/e.getHeight()]}}function M(e){var r=e.geoKeys;if(!r)return null;if(r.ProjectedCSTypeGeoKey&&32767!==r.ProjectedCSTypeGeoKey){var t="EPSG:"+r.ProjectedCSTypeGeoKey,o=(0,n.get)(t);if(!o){var i=(0,s.fromCode)(r.ProjLinearUnitsGeoKey);i&&(o=new n.Projection({code:t,units:i}))}return o}if(r.GeographicTypeGeoKey&&32767!==r.GeographicTypeGeoKey){var a="EPSG:"+r.GeographicTypeGeoKey,u=(0,n.get)(a);if(!u){var c=(0,s.fromCode)(r.GeogAngularUnitsGeoKey);c&&(u=new n.Projection({code:a,units:c}))}return u}return null}function R(e){return e.getImageCount().then(function(r){for(var t=new Array(r),n=0;n<r;++n)t[n]=e.getImage(n);return Promise.all(t)})}function k(e,r){return(e.blob?(0,t.fromBlob)(e.blob):e.overviews?(0,t.fromUrls)(e.url,e.overviews,r):(0,t.fromUrl)(e.url,r)).then(R)}function E(e,r,t,n,o){if(Array.isArray(e)){var i=e.length;if(!Array.isArray(r)||i!=r.length){var a=new Error(n);throw o(a),a}for(var s=0;s<i;++s)E(e[s],r[s],t,n,o)}else if(r=r,Math.abs(e-r)>t*e)throw new Error(n)}function U(e){return e instanceof Int8Array?-128:e instanceof Int16Array?-32768:e instanceof Int32Array?-2147483648:e instanceof Float32Array?1.2e-38:0}function K(e){return e instanceof Int8Array?127:e instanceof Uint8Array?255:e instanceof Uint8ClampedArray?255:e instanceof Int16Array?32767:e instanceof Uint16Array?65535:e instanceof Int32Array?2147483647:e instanceof Uint32Array?4294967295:e instanceof Float32Array?3.4e38:255}var q=function(t){p(u,e.default);var s=g(u);function u(e){var r;l(this,u),(r=s.call(this,{state:"loading",tileGrid:null,projection:null,opaque:e.opaque,transition:e.transition,interpolate:!1!==e.interpolate,wrapX:e.wrapX})).sourceInfo_=e.sources;var t=r.sourceInfo_.length;r.sourceOptions_=e.sourceOptions,r.sourceImagery_=new Array(t),r.sourceMasks_=new Array(t),r.resolutionFactors_=new Array(t),r.samplesPerPixel_,r.nodataValues_,r.metadata_,r.normalize_=!1!==e.normalize,r.addAlpha_=!1,r.error_=null,r.convertToRGB_=e.convertToRGB||!1,r.setKey(r.sourceInfo_.map(function(e){return e.url}).join(","));for(var n=_(r),o=new Array(t),i=0;i<t;++i)o[i]=k(r.sourceInfo_[i],r.sourceOptions_);return Promise.all(o).then(function(e){n.configure_(e)}).catch(function(e){(0,a.error)(e),n.error_=e,n.setState("error")}),r}return h(u,[{key:"getError",value:function(){return this.error_}},{key:"determineProjection",value:function(e){for(var r=e[0],t=r.length-1;t>=0;--t){var n=M(r[t]);if(n){this.projection=n;break}}}},{key:"configure_",value:function(e){for(var t,o,a,s,u,c=this,l=new Array(e.length),f=new Array(e.length),h=new Array(e.length),d=0,y=e.length,p=function(){var r=[],n=[];e[v].forEach(function(e){A(e)?n.push(e):r.push(e)});var y,p,g=r.length;if(n.length>0&&n.length!==g)throw new Error("Expected one mask per image found ".concat(n.length," masks and ").concat(g," images"));var m=new Array(g),_=new Array(g),b=new Array(g);f[v]=new Array(g),h[v]=new Array(g);for(var w=0;w<g;++w){var j=r[w],P=j.getGDALNoData();h[v][w]=j.getGDALMetadata(0),f[v][w]=P;var I=c.sourceInfo_[v].bands;l[v]=I?I.length:j.getSamplesPerPixel();var T=g-(w+1);y||(y=O(j)),p||(p=x(j));var G=C(j,r[0]);b[T]=G[0];var M=[j.getTileWidth(),j.getTileHeight()];M[0]!==M[1]&&M[1]<S&&(M[0]=S,M[1]=S),m[T]=M;var R=G[0]/Math.abs(G[1]);_[T]=[M[0],M[1]/R]}if(t?(0,i.getIntersection)(t,y,t):t=y,o){var k="Origin mismatch for source ".concat(v,", got [").concat(p,"] but expected [").concat(o,"]");E(o,p,0,k,c.viewRejector)}else o=p;if(u){u.length-d>b.length&&(d=u.length-b.length);var U=u[u.length-1]/b[b.length-1];c.resolutionFactors_[v]=U;var K=b.map(function(e){return e*U}),q="Resolution mismatch for source ".concat(v,", got [").concat(K,"] but expected [").concat(u,"]");E(u.slice(d,u.length),K,.02,q,c.viewRejector)}else u=b,c.resolutionFactors_[v]=1;a?E(a.slice(d,a.length),_,.01,"Tile size mismatch for source ".concat(v),c.viewRejector):a=_,s?E(s.slice(d,s.length),m,0,"Tile size mismatch for source ".concat(v),c.viewRejector):s=m,c.sourceImagery_[v]=r.reverse(),c.sourceMasks_[v]=n.reverse()},v=0;v<y;++v)p();for(var g=0,m=this.sourceImagery_.length;g<m;++g)for(var _=this.sourceImagery_[g];_.length<u.length;)_.unshift(void 0);this.getProjection()||this.determineProjection(e),this.samplesPerPixel_=l,this.nodataValues_=f,this.metadata_=h;e:for(var b=0;b<y;++b){if(void 0!==this.sourceInfo_[b].nodata){this.addAlpha_=!0;break}if(this.sourceMasks_[b].length){this.addAlpha_=!0;break}var w=f[b],j=this.sourceInfo_[b].bands;if(j){for(var P=0;P<j.length;++P)if(null!==w[j[P]-1]){this.addAlpha_=!0;break e}}else for(var I=0;I<w.length;++I)if(null!==w[I]){this.addAlpha_=!0;break e}}for(var T=this.addAlpha_?1:0,G=0;G<y;++G)T+=l[G];this.bandCount=T;var M=new r.default({extent:t,minZoom:d,origin:o,resolutions:u,tileSizes:a});this.tileGrid=M,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");2===u.length?u=[u[0],u[1],u[1]/2]:1===u.length&&(u=[2*u[0],u[0],u[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:u,center:(0,n.toUserCoordinate)((0,i.getCenter)(t),this.projection),extent:(0,n.toUserExtent)(t,this.projection),zoom:1})}},{key:"loadTile_",value:function(e,r,t){for(var n=this,o=this.getTileSize(e),i=this.sourceImagery_.length,s=new Array(2*i),u=this.nodataValues_,c=this.sourceInfo_,l=G(),f=function(a){var f,h,d=c[a],y=n.resolutionFactors_[a],p=[Math.round(r*(o[0]*y)),Math.round(t*(o[1]*y)),Math.round((r+1)*(o[0]*y)),Math.round((t+1)*(o[1]*y))],v=n.sourceImagery_[a][e];d.bands&&(f=d.bands.map(function(e){return e-1})),h="nodata"in d&&null!==d.nodata?d.nodata:f?f.map(function(e){return u[a][e]}):u[a];var g={window:p,width:o[0],height:o[1],samples:f,fillValue:h,pool:l,interleave:!1};j(n.convertToRGB_,v)?s[a]=v.readRGB(g):s[a]=v.readRasters(g);var m=i+a,_=n.sourceMasks_[a][e];if(!_)return s[m]=Promise.resolve(null),"continue";s[m]=_.readRasters({window:p,width:o[0],height:o[1],samples:[0],pool:l,interleave:!1})},h=0;h<i;++h)f(h);return Promise.all(s).then(this.composeTile_.bind(this,o)).catch(function(e){throw(0,a.error)(e),e})}},{key:"composeTile_",value:function(e,r){var t,n=this.metadata_,i=this.sourceInfo_,a=this.sourceImagery_.length,s=this.bandCount,u=this.samplesPerPixel_,c=this.nodataValues_,l=this.normalize_,f=this.addAlpha_,h=e[0]*e[1],d=h*s;t=l?new Uint8Array(d):new Float32Array(d);for(var y=0,p=0;p<h;++p){for(var v=f,g=0;g<a;++g){var m=i[g],_=m.min,b=m.max,w=void 0,A=void 0;if(l){var j=n[g][0];void 0===_&&(_=j&&T in j?parseFloat(j[T]):U(r[g][0])),void 0===b&&(b=j&&I in j?parseFloat(j[I]):K(r[g][0])),A=-_*(w=255/(b-_))}for(var P=0;P<u[g];++P){var S=r[g][P][p],G=void 0;if(G=l?(0,o.clamp)(w*S+A,0,255):S,f){var O=m.nodata;if(void 0===O){var x=void 0;x=m.bands?m.bands[P]-1:P,O=c[g][x]}var C=isNaN(O);(!C&&S!==O||C&&!isNaN(S))&&(v=!1,t[y]=G)}else t[y]=G;y++}if(!v){var M=r[a+g];M&&!M[0][p]&&(v=!0)}}f&&(v||(t[y]=255),y++)}return t}}]),u}();q.prototype.getView;var F=q;exports.default=F;
},{"./DataTile.js":"VF6g","../tilegrid/TileGrid.js":"JVE6","geotiff":"qMBw","../proj.js":"VAQc","../math.js":"qAK2","../extent.js":"L0Vw","../console.js":"xtlK","../proj/Units.js":"TVqV"}],"uHyH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CustomTile=void 0;var e=require("../tilegrid/common.js"),t=f(require("../ImageTile.js")),r=f(require("../tilegrid/TileGrid.js")),n=f(require("./TileImage.js")),i=f(require("../TileState.js")),o=require("../asserts.js"),u=require("../dom.js"),l=require("../tileurlfunction.js"),a=require("../extent.js"),c=require("../size.js");function f(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=v(e,"string");return"symbol"===s(t)?t:String(t)}function v(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=m(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=z();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){g(n,t.default);var r=O(n);function n(e,t,i,o,u,l,a){var c;return p(this,n),(c=r.call(this,t,i,o,u,l,a)).zoomifyImage_=null,c.tileSize_=e,c}return d(n,[{key:"getImage",value:function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=b(S(n.prototype),"getImage",this).call(this);if(this.state==i.default.LOADED){var t=this.tileSize_;if(e.width==t[0]&&e.height==t[1])return this.zoomifyImage_=e,e;var r=(0,u.createCanvasContext2D)(t[0],t[1]);return r.drawImage(e,0,0),this.zoomifyImage_=r.canvas,r.canvas}return e}}]),n}();exports.CustomTile=T;var x=function(t){g(u,n.default);var i=O(u);function u(t){var n;p(this,u);var f=t.size,s=void 0!==t.tierSizeCalculation?t.tierSizeCalculation:"default",y=t.tilePixelRatio||1,d=f[0],h=f[1],v=[],b=t.tileSize||e.DEFAULT_TILE_SIZE,m=b*y;switch(s){case"default":for(;d>m||h>m;)v.push([Math.ceil(d/m),Math.ceil(h/m)]),m+=m;break;case"truncated":for(var g=d,j=h;g>m||j>m;)v.push([Math.ceil(g/m),Math.ceil(j/m)]),g>>=1,j>>=1;break;default:(0,o.assert)(!1,53)}v.push([1,1]),v.reverse();for(var O=[y],w=[0],_=1,z=v.length;_<z;_++)O.push(y<<_),w.push(v[_-1][0]*v[_-1][1]+w[_-1]);O.reverse();var S=new r.default({tileSize:b,extent:t.extent||[0,-h,d,0],resolutions:O}),x=t.url;!x||x.includes("{TileGroup}")||x.includes("{tileIndex}")||(x+="{TileGroup}/{z}-{x}-{y}.jpg");var P=(0,l.expandUrl)(x),I=b*y;var E=(0,l.createFromTileUrlFunctions)(P.map(function(e){return function(t,r,n){if(t){var i=t[0],o=t[1],u=t[2],l=o+u*v[i][0],a={z:i,x:o,y:u,tileIndex:l,TileGroup:"TileGroup"+((l+w[i])/I|0)};return e.replace(/\{(\w+?)\}/g,function(e,t){return a[t]})}}})),R=T.bind(null,(0,c.toSize)(b*y));(n=i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,tilePixelRatio:y,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:R,tileGrid:S,tileUrlFunction:E,transition:t.transition})).zDirection=t.zDirection;var C=E(S.getTileCoordForCoordAndResolution((0,a.getCenter)(S.getExtent()),O[O.length-1]),1,null),q=new Image;return q.addEventListener("error",function(){I=b,n.changed()}),q.src=C,n}return d(u)}(),P=x;exports.default=P;
},{"../tilegrid/common.js":"exM9","../ImageTile.js":"j3TM","../tilegrid/TileGrid.js":"JVE6","./TileImage.js":"rQ5G","../TileState.js":"FoaO","../asserts.js":"DVOE","../dom.js":"FYLQ","../tileurlfunction.js":"dZ35","../extent.js":"L0Vw","../size.js":"d9VJ"}],"HiIJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Versions=void 0;var e=require("../asserts.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function o(e,i){for(var t=0;t<i.length;t++){var o=i[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function r(e,i,t){return i&&o(e.prototype,i),t&&o(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var t=a(e,"string");return"symbol"===i(t)?t:String(t)}function a(e,t){if("object"!==i(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function s(e){return m(e)||u(e)||l(e)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,i){if(e){if("string"==typeof e)return p(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,i):void 0}}function u(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e){if(Array.isArray(e))return p(e)}function p(e,i){(null==i||i>e.length)&&(i=e.length);for(var t=0,o=new Array(i);t<i;t++)o[t]=e[t];return o}var g={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"};exports.Versions=g;var c={};c[g.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},c[g.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},c[g.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},c.none={none:{supports:[],formats:[],qualities:[]}};var v=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,d=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,y=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function I(e){var i=e.getComplianceLevelSupportedFeatures();return void 0===i&&(i=c[g.VERSION1].level0),{url:void 0===e.imageInfo["@id"]?void 0:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:i.supports,formats:[].concat(s(i.formats),[void 0===e.imageInfo.formats?[]:e.imageInfo.formats]),qualities:[].concat(s(i.qualities),[void 0===e.imageInfo.qualities?[]:e.imageInfo.qualities]),resolutions:e.imageInfo.scale_factors,tileSize:void 0!==e.imageInfo.tile_width?void 0!==e.imageInfo.tile_height?[e.imageInfo.tile_width,e.imageInfo.tile_height]:[e.imageInfo.tile_width,e.imageInfo.tile_width]:null!=e.imageInfo.tile_height?[e.imageInfo.tile_height,e.imageInfo.tile_height]:void 0}}function h(e){var i=e.getComplianceLevelSupportedFeatures(),t=Array.isArray(e.imageInfo.profile)&&e.imageInfo.profile.length>1,o=t&&e.imageInfo.profile[1].supports?e.imageInfo.profile[1].supports:[],r=t&&e.imageInfo.profile[1].formats?e.imageInfo.profile[1].formats:[],n=t&&e.imageInfo.profile[1].qualities?e.imageInfo.profile[1].qualities:[];return{url:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map(function(e){return[e.width,e.height]}),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map(function(e){return e.width})[0],e.imageInfo.tiles.map(function(e){return void 0===e.height?e.width:e.height})[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map(function(e){return e.scaleFactors})[0],supports:[].concat(s(i.supports),s(o)),formats:[].concat(s(i.formats),s(r)),qualities:[].concat(s(i.qualities),s(n))}}function S(e){var i=e.getComplianceLevelSupportedFeatures(),t=void 0===e.imageInfo.extraFormats?i.formats:[].concat(s(i.formats),s(e.imageInfo.extraFormats)),o=void 0!==e.imageInfo.preferredFormats&&Array.isArray(e.imageInfo.preferredFormats)&&e.imageInfo.preferredFormats.length>0?e.imageInfo.preferredFormats.filter(function(e){return["jpg","png","gif"].includes(e)}).reduce(function(e,i){return void 0===e&&t.includes(i)?i:e},void 0):void 0;return{url:e.imageInfo.id,sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map(function(e){return[e.width,e.height]}),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map(function(e){return e.width})[0],e.imageInfo.tiles.map(function(e){return e.height})[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map(function(e){return e.scaleFactors})[0],supports:void 0===e.imageInfo.extraFeatures?i.supports:[].concat(s(i.supports),s(e.imageInfo.extraFeatures)),formats:t,qualities:void 0===e.imageInfo.extraQualities?i.qualities:[].concat(s(i.qualities),s(e.imageInfo.extraQualities)),preferredFormat:o}}var z={};z[g.VERSION1]=I,z[g.VERSION2]=h,z[g.VERSION3]=S;var b=function(){function i(e){t(this,i),this.setImageInfo(e)}return r(i,[{key:"setImageInfo",value:function(e){this.imageInfo="string"==typeof e?JSON.parse(e):e}},{key:"getImageApiVersion",value:function(){if(void 0!==this.imageInfo){var i=this.imageInfo["@context"]||"ol-no-context";"string"==typeof i&&(i=[i]);for(var t=0;t<i.length;t++)switch(i[t]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return g.VERSION1;case"http://iiif.io/api/image/2/context.json":return g.VERSION2;case"http://iiif.io/api/image/3/context.json":return g.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(g.VERSION1)&&this.imageInfo.identifier)return g.VERSION1}(0,e.assert)(!1,61)}}},{key:"getComplianceLevelEntryFromProfile",value:function(e){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===e&&(e=this.getImageApiVersion()),e){case g.VERSION1:if(v.test(this.imageInfo.profile))return this.imageInfo.profile;break;case g.VERSION3:if(y.test(this.imageInfo.profile))return this.imageInfo.profile;break;case g.VERSION2:if("string"==typeof this.imageInfo.profile&&d.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&d.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}}},{key:"getComplianceLevelFromProfile",value:function(e){var i=this.getComplianceLevelEntryFromProfile(e);if(void 0!==i){var t=i.match(/level[0-2](?:\.json)?$/g);return Array.isArray(t)?t[0].replace(".json",""):void 0}}},{key:"getComplianceLevelSupportedFeatures",value:function(){if(void 0!==this.imageInfo){var e=this.getImageApiVersion(),i=this.getComplianceLevelFromProfile(e);return void 0===i?c.none.none:c[e][i]}}},{key:"getTileSourceOptions",value:function(e){var i=e||{},t=this.getImageApiVersion();if(void 0!==t){var o=void 0===t?void 0:z[t](this);if(void 0!==o)return{url:o.url,version:t,size:[this.imageInfo.width,this.imageInfo.height],sizes:o.sizes,format:void 0!==i.format&&o.formats.includes(i.format)?i.format:void 0!==o.preferredFormat?o.preferredFormat:"jpg",supports:o.supports,quality:i.quality&&o.qualities.includes(i.quality)?i.quality:o.qualities.includes("native")?"native":"default",resolutions:Array.isArray(o.resolutions)?o.resolutions.sort(function(e,i){return i-e}):void 0,tileSize:o.tileSize}}}}]),i}(),B=b;exports.default=B;
},{"../asserts.js":"DVOE"}],"DRde":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../tilegrid/TileGrid.js")),t=s(require("./TileImage.js")),r=require("./Zoomify.js"),n=require("../tilegrid/common.js"),i=require("../format/IIIFInfo.js"),o=require("../asserts.js"),u=require("../extent.js"),l=require("../size.js");function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){return h(e)||p(e)||y(e)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function p(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){if(Array.isArray(e))return d(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function m(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=g(e,"string");return"symbol"===a(t)?t:String(t)}function g(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=w();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e){return e.toLocaleString("en",{maximumFractionDigits:10})}var A=function(s){S(f,t.default);var a=I(f);function f(t){var s;j(this,f);var y=t||{},p=y.url||"";p+=p.lastIndexOf("/")===p.length-1||""===p?"":"/";var h=y.version||i.Versions.VERSION2,d=y.sizes||[],b=y.size;(0,o.assert)(null!=b&&Array.isArray(b)&&2==b.length&&!isNaN(b[0])&&b[0]>0&&!isNaN(b[1])&&b[1]>0,60);var m,v,g,S=b[0],O=b[1],I=y.tileSize,P=y.tilePixelRatio||1,M=y.format||"jpg",w=y.quality||(y.version==i.Versions.VERSION1?"native":"default"),x=y.resolutions||[],A=y.supports||[],E=y.extent||[0,-O,S,0],N=null!=d&&Array.isArray(d)&&d.length>0,_=void 0!==I&&("number"==typeof I&&Number.isInteger(I)&&I>0||Array.isArray(I)&&I.length>0),B=null!=A&&Array.isArray(A)&&(A.includes("regionByPx")||A.includes("regionByPct"))&&(A.includes("sizeByWh")||A.includes("sizeByH")||A.includes("sizeByW")||A.includes("sizeByPct"));if(x.sort(function(e,t){return t-e}),_||B)if(null!=I&&("number"==typeof I&&Number.isInteger(I)&&I>0?(m=I,v=I):Array.isArray(I)&&I.length>0&&((1==I.length||null==I[1]&&Number.isInteger(I[0]))&&(m=I[0],v=I[0]),2==I.length&&(Number.isInteger(I[0])&&Number.isInteger(I[1])?(m=I[0],v=I[1]):null==I[0]&&Number.isInteger(I[1])&&(m=I[1],v=I[1])))),void 0!==m&&void 0!==v||(m=n.DEFAULT_TILE_SIZE,v=n.DEFAULT_TILE_SIZE),0==x.length)for(var T=g=Math.max(Math.ceil(Math.log(S/m)/Math.LN2),Math.ceil(Math.log(O/v)/Math.LN2));T>=0;T--)x.push(Math.pow(2,T));else{var R=Math.max.apply(Math,c(x));g=Math.round(Math.log(R)/Math.LN2)}else if(m=S,v=O,x=[],N){d.sort(function(e,t){return e[0]-t[0]}),g=-1;for(var V=[],q=0;q<d.length;q++){var L=S/d[q][0];x.length>0&&x[x.length-1]==L?V.push(q):(x.push(L),g++)}if(V.length>0)for(var C=0;C<V.length;C++)d.splice(V[C]-C,1)}else x.push(1),d.push([S,O]),g=0;var D=new e.default({tileSize:[m,v],extent:E,origin:(0,u.getTopLeft)(E),resolutions:x}),F=r.CustomTile.bind(null,(0,l.toSize)(I||256).map(function(e){return e*P}));return(s=a.call(this,{attributions:y.attributions,attributionsCollapsible:y.attributionsCollapsible,cacheSize:y.cacheSize,crossOrigin:y.crossOrigin,interpolate:y.interpolate,projection:y.projection,reprojectionErrorThreshold:y.reprojectionErrorThreshold,state:y.state,tileClass:F,tileGrid:D,tilePixelRatio:y.tilePixelRatio,tileUrlFunction:function(e,t,r){var n,o,u=e[0];if(!(u>g)){var l=e[1],s=e[2],a=x[u];if(!(void 0===l||void 0===s||void 0===a||l<0||Math.ceil(S/a/m)<=l||s<0||Math.ceil(O/a/v)<=s)){if(B||_){var c=l*m*a,f=s*v*a,y=m*a,b=v*a,j=m,I=v;c+y>S&&(y=S-c),f+b>O&&(b=O-f),c+m*a>S&&(j=Math.floor((S-c+a-1)/a)),f+v*a>O&&(I=Math.floor((O-f+a-1)/a)),0==c&&y==S&&0==f&&b==O?n="full":!B||A.includes("regionByPx")?n=c+","+f+","+y+","+b:A.includes("regionByPct")&&(n="pct:"+z(c/S*100)+","+z(f/O*100)+","+z(y/S*100)+","+z(b/O*100)),h!=i.Versions.VERSION3||B&&!A.includes("sizeByWh")?!B||A.includes("sizeByW")?o=j+",":A.includes("sizeByH")?o=","+I:A.includes("sizeByWh")?o=j+","+I:A.includes("sizeByPct")&&(o="pct:"+z(100/a)):o=j+","+I}else if(n="full",N){var P=d[u][0],E=d[u][1];o=h==i.Versions.VERSION3?P==S&&E==O?"max":P+","+E:P==S?"full":P+","}else o=h==i.Versions.VERSION3?"max":"full";return p+n+"/"+o+"/0/"+w+"."+M}}},transition:y.transition})).zDirection=y.zDirection,s}return m(f)}(),E=A;exports.default=E;
},{"../tilegrid/TileGrid.js":"JVE6","./TileImage.js":"rQ5G","./Zoomify.js":"uHyH","../tilegrid/common.js":"exM9","../format/IIIFInfo.js":"HiIJ","../asserts.js":"DVOE","../extent.js":"L0Vw","../size.js":"d9VJ"}],"xJ6k":[function(require,module,exports) {
"use strict";function e(e,n){var o=[];Object.keys(n).forEach(function(e){null!==n[e]&&void 0!==n[e]&&o.push(e+"="+encodeURIComponent(n[e]))});var r=o.join("&");return e=e.replace(/[?&]$/,""),(e+=e.includes("?")?"&":"?")+r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appendParams=e;
},{}],"ABAf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("../events/EventType.js")),t=s(require("./Image.js")),r=c(require("../Image.js")),n=require("../uri.js"),i=require("../asserts.js"),o=require("../extent.js"),a=require("../dom.js");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=g(e,"string");return"symbol"===l(t)?t:String(t)}function g(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=O();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(u){v(c,t.default);var s=m(c);function c(e){var r;return f(this,c),e=e||{},(r=s.call(this,{attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions})).context_=(0,a.createCanvasContext2D)(1,1),r.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,r.hidpi_=void 0===e.hidpi||e.hidpi,r.url_=e.url,r.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:t.defaultImageLoadFunction,r.params_=e.params||{},r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==e.ratio?e.ratio:1.5,r}return d(c,[{key:"getParams",value:function(){return this.params_}},{key:"getImageInternal",value:function(t,n,i,a){if(void 0===this.url_)return null;n=this.findNearestResolution(n),i=this.hidpi_?i:1;var u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==n&&u.getPixelRatio()==i&&(0,o.containsExtent)(u.getExtent(),t))return u;var s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(s,this.params_);var c=((t=t.slice())[0]+t[2])/2,l=(t[1]+t[3])/2;if(1!=this.ratio_){var f=this.ratio_*(0,o.getWidth)(t)/2,p=this.ratio_*(0,o.getHeight)(t)/2;t[0]=c-f,t[1]=l-p,t[2]=c+f,t[3]=l+p}var d=n/i,h=Math.ceil((0,o.getWidth)(t)/d),g=Math.ceil((0,o.getHeight)(t)/d);t[0]=c-d*h/2,t[2]=c+d*h/2,t[1]=l-d*g/2,t[3]=l+d*g/2,this.imageSize_[0]=h,this.imageSize_[1]=g;var v=this.getRequestUrl_(t,this.imageSize_,i,a,s);return this.image_=new r.default(t,n,i,v,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(e.default.CHANGE,this.handleImageChange.bind(this)),this.image_}},{key:"getImageLoadFunction",value:function(){return this.imageLoadFunction_}},{key:"getRequestUrl_",value:function(e,t,r,o,a){var u=o.getCode().split(/:(?=\d+$)/).pop();a.SIZE=t[0]+","+t[1],a.BBOX=e.join(","),a.BBOXSR=u,a.IMAGESR=u,a.DPI=Math.round(90*r);var s=this.url_,c=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return c==s&&(0,i.assert)(!1,50),(0,n.appendParams)(c,a)}},{key:"getUrl",value:function(){return this.url_}},{key:"setImageLoadFunction",value:function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()}},{key:"setUrl",value:function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.image_=null,this.changed()}}]),c}(),R=P;exports.default=R;
},{"../events/EventType.js":"GUXn","./Image.js":"X7eW","../Image.js":"yR82","../uri.js":"xJ6k","../asserts.js":"DVOE","../extent.js":"L0Vw","../dom.js":"FYLQ"}],"OQvd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../ImageCanvas.js")),e=n(require("./Image.js")),r=require("../extent.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function c(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=s(t,"string");return"symbol"===o(e)?e:String(e)}function s(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=b();return function(){var r,n=d(t);if(e){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(n){f(u,e.default);var o=p(u);function u(t){var e;return i(this,u),t=t||{},(e=o.call(this,{attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions,state:t.state})).canvasFunction_=t.canvasFunction,e.canvas_=null,e.renderedRevision_=0,e.ratio_=void 0!==t.ratio?t.ratio:1.5,e}return c(u,[{key:"getImageInternal",value:function(e,n,o,i){n=this.findNearestResolution(n);var u=this.canvas_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==n&&u.getPixelRatio()==o&&(0,r.containsExtent)(u.getExtent(),e))return u;e=e.slice(),(0,r.scaleFromCenter)(e,this.ratio_);var c=[(0,r.getWidth)(e)/n*o,(0,r.getHeight)(e)/n*o],a=this.canvasFunction_.call(this,e,n,o,c,i);return a&&(u=new t.default(e,n,o,a)),this.canvas_=u,this.renderedRevision_=this.getRevision(),u}}]),u}(),m=h;exports.default=m;
},{"../ImageCanvas.js":"ZO7P","./Image.js":"X7eW","../extent.js":"L0Vw"}],"HHDy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../events/EventType.js")),t=a(require("./Image.js")),r=s(require("../Image.js")),n=require("../uri.js"),i=require("../extent.js"),o=require("../dom.js");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=y(e,"string");return"symbol"===c(t)?t:String(t)}function y(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=b();return function(){var r,n=O(e);if(t){var i=O(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(u){h(s,t.default);var a=g(s);function s(e){var r;return l(this,s),(r=a.call(this,{interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions})).context_=(0,o.createCanvasContext2D)(1,1),r.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,r.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,r.params_=e.params||{},r.url_=e.url,r.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:t.defaultImageLoadFunction,r.hidpi_=void 0===e.hidpi||e.hidpi,r.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,r.ratio_=void 0!==e.ratio?e.ratio:1,r.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,r.image_=null,r.renderedRevision_=0,r}return p(s,[{key:"getParams",value:function(){return this.params_}},{key:"getImageInternal",value:function(t,n,o,u){n=this.findNearestResolution(n),o=this.hidpi_?o:1;var a=this.image_;if(a&&this.renderedRevision_==this.getRevision()&&a.getResolution()==n&&a.getPixelRatio()==o&&(0,i.containsExtent)(a.getExtent(),t))return a;1!=this.ratio_&&(t=t.slice(),(0,i.scaleFromCenter)(t,this.ratio_));var s=[(0,i.getWidth)(t)/n*o,(0,i.getHeight)(t)/n*o];if(void 0!==this.url_){var c=this.getUrl(this.url_,this.params_,t,s,u);(a=new r.default(t,n,o,c,this.crossOrigin_,this.imageLoadFunction_,this.context_)).addEventListener(e.default.CHANGE,this.handleImageChange.bind(this))}else a=null;return this.image_=a,this.renderedRevision_=this.getRevision(),a}},{key:"getImageLoadFunction",value:function(){return this.imageLoadFunction_}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.changed()}},{key:"getUrl",value:function(e,t,r,o,u){var a=P(r,o,this.metersPerUnit_,this.displayDpi_),s=(0,i.getCenter)(r),c={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(o[0]),SETDISPLAYHEIGHT:Math.round(o[1]),SETVIEWSCALE:a,SETVIEWCENTERX:s[0],SETVIEWCENTERY:s[1]};return Object.assign(c,t),(0,n.appendParams)(e,c)}},{key:"setImageLoadFunction",value:function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()}}]),s}();function P(e,t,r,n){var o=(0,i.getWidth)(e),u=(0,i.getHeight)(e),a=t[0],s=t[1],c=.0254/n;return s*o>a*u?o*r/(a*c):u*r/(s*c)}var j=E;exports.default=j;
},{"../events/EventType.js":"GUXn","./Image.js":"X7eW","../Image.js":"yR82","../uri.js":"xJ6k","../extent.js":"L0Vw","../dom.js":"FYLQ"}],"Fsb2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../events/EventType.js")),t=c(require("./Image.js")),r=f(require("../ImageState.js")),n=f(require("../Image.js")),o=require("../dom.js"),i=require("../extent.js"),a=require("../proj.js");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function f(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function g(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=d(e,"string");return"symbol"===l(t)?t:String(t)}function d(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function m(){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=h(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(this,arguments)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=w();return function(){var r,n=P(e);if(t){var o=P(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(u){v(f,t.default);var c=j(f);function f(r){var i;s(this,f);var u=void 0!==r.crossOrigin?r.crossOrigin:null,l=void 0!==r.imageLoadFunction?r.imageLoadFunction:t.defaultImageLoadFunction;return(i=c.call(this,{attributions:r.attributions,interpolate:r.interpolate,projection:(0,a.get)(r.projection)})).url_=r.url,i.imageExtent_=r.imageExtent,i.image_=new n.default(i.imageExtent_,void 0,1,i.url_,u,l,(0,o.createCanvasContext2D)(1,1)),i.imageSize_=r.imageSize?r.imageSize:null,i.image_.addEventListener(e.default.CHANGE,i.handleImageChange.bind(O(i))),i}return g(f,[{key:"getImageExtent",value:function(){return this.imageExtent_}},{key:"getImageInternal",value:function(e,t,r,n){return(0,i.intersects)(e,this.image_.getExtent())?this.image_:null}},{key:"getUrl",value:function(){return this.url_}},{key:"handleImageChange",value:function(e){if(this.image_.getState()==r.default.LOADED){var t,n,a=this.image_.getExtent(),u=this.image_.getImage();this.imageSize_?(t=this.imageSize_[0],n=this.imageSize_[1]):(t=u.width,n=u.height);var c=(0,i.getWidth)(a),l=(0,i.getHeight)(a),s=c/t,p=l/n,g=t,y=n;if(s>p?g=Math.round(c/p):y=Math.round(l/s),g!==t||y!==n){var d=(0,o.createCanvasContext2D)(g,y);this.getInterpolate()||(d.imageSmoothingEnabled=!1);var h=d.canvas;d.drawImage(u,0,0,t,n,0,0,h.width,h.height),this.image_.setImage(h)}}m(P(f.prototype),"handleImageChange",this).call(this,e)}}]),f}(),E=S;exports.default=E;
},{"../events/EventType.js":"GUXn","./Image.js":"X7eW","../ImageState.js":"FoaO","../Image.js":"yR82","../dom.js":"FYLQ","../extent.js":"L0Vw","../proj.js":"VAQc"}],"T2n1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_VERSION=void 0;var e="1.3.0";exports.DEFAULT_VERSION=e;
},{}],"eWqz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("../events/EventType.js")),t=g(require("./Image.js")),r=h(require("../Image.js")),i=require("./wms.js"),n=require("../uri.js"),o=require("../asserts.js"),a=require("../reproj.js"),s=require("../math.js"),u=require("../string.js"),c=require("../extent.js"),l=require("../dom.js"),f=require("../proj.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}function h(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,m(i.key),i)}}function y(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=O(e,"string");return"symbol"===d(t)?t:String(t)}function O(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}function R(e,t){return(R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=T();return function(){var r,i=P(e);if(t){var n=P(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return E(this,r)}}function E(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=4,A=[101,101],w=function(p){b(h,t.default);var g=S(h);function h(e){var r;return v(this,h),e=e||{},(r=g.call(this,{attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions})).context_=(0,l.createCanvasContext2D)(1,1),r.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,r.url_=e.url,r.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:t.defaultImageLoadFunction,r.params_=Object.assign({},e.params),r.v13_=!0,r.updateV13_(),r.serverType_=e.serverType,r.hidpi_=void 0===e.hidpi||e.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==e.ratio?e.ratio:1.5,r}return y(h,[{key:"getFeatureInfoUrl",value:function(e,t,r,n){if(void 0!==this.url_){var o=(0,f.get)(r),u=this.getProjection();u&&u!==o&&(t=(0,a.calculateSourceResolution)(u,o,e,t),e=(0,f.transform)(e,o,u));var l=(0,c.getForViewAndSize)(e,t,0,A),p={SERVICE:"WMS",VERSION:i.DEFAULT_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(p,this.params_,n);var g=(0,s.floor)((e[0]-l[0])/t,I),h=(0,s.floor)((l[3]-e[1])/t,I);return p[this.v13_?"I":"X"]=g,p[this.v13_?"J":"Y"]=h,this.getRequestUrl_(l,A,1,u||o,p)}}},{key:"getLegendUrl",value:function(e,t){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:i.DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===t||void 0===t.LAYER){var o=this.params_.LAYERS;if(!(!Array.isArray(o)||1===o.length))return;r.LAYER=o}if(void 0!==e){var a=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=e*a/28e-5}return Object.assign(r,t),(0,n.appendParams)(this.url_,r)}}},{key:"getParams",value:function(){return this.params_}},{key:"getImageInternal",value:function(t,n,o,a){if(void 0===this.url_)return null;n=this.findNearestResolution(n),1==o||this.hidpi_&&void 0!==this.serverType_||(o=1);var u=n/o,l=(0,c.getCenter)(t),f=(0,s.ceil)((0,c.getWidth)(t)/u,I),p=(0,s.ceil)((0,c.getHeight)(t)/u,I),g=(0,c.getForViewAndSize)(l,u,0,[f,p]),h=(0,s.ceil)(this.ratio_*(0,c.getWidth)(t)/u,I),d=(0,s.ceil)(this.ratio_*(0,c.getHeight)(t)/u,I),v=(0,c.getForViewAndSize)(l,u,0,[h,d]),_=this.image_;if(_&&this.renderedRevision_==this.getRevision()&&_.getResolution()==n&&_.getPixelRatio()==o&&(0,c.containsExtent)(_.getExtent(),g))return _;var y={SERVICE:"WMS",VERSION:i.DEFAULT_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(y,this.params_),this.imageSize_[0]=(0,s.round)((0,c.getWidth)(v)/u,I),this.imageSize_[1]=(0,s.round)((0,c.getHeight)(v)/u,I);var m=this.getRequestUrl_(v,this.imageSize_,o,a,y);return this.image_=new r.default(v,n,o,m,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(e.default.CHANGE,this.handleImageChange.bind(this)),this.image_}},{key:"getImageLoadFunction",value:function(){return this.imageLoadFunction_}},{key:"getRequestUrl_",value:function(e,t,r,i,a){if((0,o.assert)(void 0!==this.url_,9),a[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=r)switch(this.serverType_){case"geoserver":var s=90*r+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+s:a.FORMAT_OPTIONS="dpi:"+s;break;case"mapserver":a.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":a.DPI=90*r;break;default:(0,o.assert)(!1,8)}a.WIDTH=t[0],a.HEIGHT=t[1];var u,c=i.getAxisOrientation();return u=this.v13_&&"ne"==c.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,a.BBOX=u.join(","),(0,n.appendParams)(this.url_,a)}},{key:"getUrl",value:function(){return this.url_}},{key:"setImageLoadFunction",value:function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()}},{key:"setUrl",value:function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()}},{key:"updateV13_",value:function(){var e=this.params_.VERSION||i.DEFAULT_VERSION;this.v13_=(0,u.compareVersions)(e,"1.3")>=0}}]),h}(),L=w;exports.default=L;
},{"../events/EventType.js":"GUXn","./Image.js":"X7eW","../Image.js":"yR82","./wms.js":"T2n1","../uri.js":"xJ6k","../asserts.js":"DVOE","../reproj.js":"BOkO","../math.js":"qAK2","../string.js":"nqHs","../extent.js":"L0Vw","../dom.js":"FYLQ","../proj.js":"VAQc"}],"hU9v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ATTRIBUTION=void 0;var t=e(require("./XYZ.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,i(o.key),o)}}function n(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){var e=u(t,"string");return"symbol"===r(e)?e:String(e)}function u(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=y();return function(){var r,o=b(t);if(e){var n=b(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';exports.ATTRIBUTION=d;var v=function(e){a(o,t.default);var r=l(o);function o(t){var e;c(this,o),e=void 0!==(t=t||{}).attributions?t.attributions:[d];var n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",i=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";return r.call(this,{attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:i,wrapX:t.wrapX,zDirection:t.zDirection})}return n(o)}(),m=v;exports.default=m;
},{"./XYZ.js":"DGMa"}],"KYsR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./XYZ.js")),t=require("./OSM.js");function o(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function i(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=u(e,"string");return"symbol"===n(t)?t:String(t)}function u(e,t){if("object"!==n(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=m();return function(){var o,n=b(e);if(t){var r=b(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return p(this,o)}}function p(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',t.ATTRIBUTION],h={terrain:{extension:"png",opaque:!0},"terrain-background":{extension:"png",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},g={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},v=function(t){l(n,e.default);var o=f(n);function n(e){c(this,n);var t=e.layer.indexOf("-"),r=-1==t?e.layer:e.layer.slice(0,t),i=g[r],a=h[e.layer],u=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+a.extension;return o.call(this,{attributions:d,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:null!=e.maxZoom?e.maxZoom:i.maxZoom,minZoom:null!=e.minZoom?e.minZoom:i.minZoom,opaque:a.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:u,wrapX:e.wrapX,zDirection:e.zDirection})}return i(n)}(),x=v;exports.default=x;
},{"./XYZ.js":"DGMa","./OSM.js":"hU9v"}],"UtyN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./TileImage.js")),t=require("../uri.js"),r=require("../extent.js"),i=require("../math.js"),n=require("../size.js"),o=require("../tilecoord.js");function u(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,f(i.key),i)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=p(e,"string");return"symbol"===a(t)?t:String(t)}function p(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=b();return function(){var r,i=g(e);if(t){var n=g(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(u){y(s,e.default);var a=d(s);function s(e){var t;return c(this,s),e=e||{},(t=a.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})).params_=e.params||{},t.hidpi_=void 0===e.hidpi||e.hidpi,t.tmpExtent_=(0,r.createEmpty)(),t.setKey(t.getKeyForParams_()),t}return l(s,[{key:"getKeyForParams_",value:function(){var e=0,t=[];for(var r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}},{key:"getParams",value:function(){return this.params_}},{key:"getRequestUrl_",value:function(e,r,n,u,a,c){var s=this.urls;if(s){var l,f=a.getCode().split(/:(?=\d+$)/).pop();if(c.SIZE=r[0]+","+r[1],c.BBOX=n.join(","),c.BBOXSR=f,c.IMAGESR=f,c.DPI=Math.round(c.DPI?c.DPI*u:90*u),1==s.length)l=s[0];else l=s[(0,i.modulo)((0,o.hash)(e),s.length)];var p=l.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,t.appendParams)(p,c)}}},{key:"getTilePixelRatio",value:function(e){return this.hidpi_?e:1}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}},{key:"tileUrlFunction",value:function(e,t,r){var i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),!(i.getResolutions().length<=e[0])){1==t||this.hidpi_||(t=1);var o=i.getTileCoordExtent(e,this.tmpExtent_),u=(0,n.toSize)(i.getTileSize(e[0]),this.tmpSize);1!=t&&(u=(0,n.scale)(u,t,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(e,u,o,t,r,a)}}}]),s}(),_=j;exports.default=_;
},{"./TileImage.js":"rQ5G","../uri.js":"xJ6k","../extent.js":"L0Vw","../math.js":"qAK2","../size.js":"d9VJ","../tilecoord.js":"NPSy"}],"zFtQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./XYZ.js")),e=require("../dom.js"),r=require("../size.js");function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=f(t,"string");return"symbol"===o(e)?e:String(e)}function f(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=d();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(n){a(i,t.default);var o=p(i);function i(t){var n;return l(this,i),t=t||{},n=o.call(this,{opaque:!1,projection:t.projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection,url:t.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(t,o){var i=t.getTileCoord()[0],u=(0,r.toSize)(n.tileGrid.getTileSize(i)),c=(0,e.createCanvasContext2D)(u[0],u[1]);c.strokeStyle="grey",c.strokeRect(.5,.5,u[0]+.5,u[1]+.5),c.fillStyle="grey",c.strokeStyle="white",c.textAlign="center",c.textBaseline="middle",c.font="24px sans-serif",c.lineWidth=4,c.strokeText(o,u[0]/2,u[1]/2,u[0]),c.fillText(o,u[0]/2,u[1]/2,u[0]),t.setImage(c.canvas)}})}return u(i)}(),h=m;exports.default=h;
},{"./XYZ.js":"DGMa","../dom.js":"FYLQ","../size.js":"d9VJ"}],"uIuF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("./TileImage.js")),t=require("./wms.js"),r=require("../uri.js"),i=require("../asserts.js"),o=require("../extent.js"),n=require("../size.js"),s=require("../reproj.js"),a=require("../string.js"),u=require("../proj.js"),l=require("../math.js"),c=require("../tilecoord.js");function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,d(i.key),i)}}function g(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=y(e,"string");return"symbol"===p(t)?t:String(t)}function y(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=R();return function(){var r,i=T(e);if(t){var o=T(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return b(this,r)}}function b(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(f){_(v,e.default);var p=S(v);function v(e){var t;h(this,v),e=e||{};var r=Object.assign({},e.params),i=!("TRANSPARENT"in r)||r.TRANSPARENT;return(t=p.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!i,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})).gutter_=void 0!==e.gutter?e.gutter:0,t.params_=r,t.v13_=!0,t.serverType_=e.serverType,t.hidpi_=void 0===e.hidpi||e.hidpi,t.tmpExtent_=(0,o.createEmpty)(),t.updateV13_(),t.setKey(t.getKeyForParams_()),t}return g(v,[{key:"getFeatureInfoUrl",value:function(e,r,i,a){var l=(0,u.get)(i),c=this.getProjection(),f=this.getTileGrid();f||(f=this.getTileGridForProjection(l));var p=f.getZForResolution(r,this.zDirection),h=f.getTileCoordForCoordAndZ(e,p);if(!(f.getResolutions().length<=h[0])){var v=f.getResolution(h[0]),g=f.getTileCoordExtent(h,this.tmpExtent_),d=(0,n.toSize)(f.getTileSize(h[0]),this.tmpSize),y=this.gutter_;0!==y&&(d=(0,n.buffer)(d,y,this.tmpSize),g=(0,o.buffer)(g,v*y,g)),c&&c!==l&&(v=(0,s.calculateSourceResolution)(c,l,e,v),g=(0,u.transformExtent)(g,l,c),e=(0,u.transform)(e,l,c));var _={SERVICE:"WMS",VERSION:t.DEFAULT_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(_,this.params_,a);var m=Math.floor((e[0]-g[0])/v),S=Math.floor((g[3]-e[1])/v);return _[this.v13_?"I":"X"]=m,_[this.v13_?"J":"Y"]=S,this.getRequestUrl_(h,d,g,1,c||l,_)}}},{key:"getLegendUrl",value:function(e,i){if(void 0!==this.urls[0]){var o={SERVICE:"WMS",VERSION:t.DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===i||void 0===i.LAYER){var n=this.params_.LAYERS;if(!(!Array.isArray(n)||1===n.length))return;o.LAYER=n}if(void 0!==e){var s=this.getProjection()?this.getProjection().getMetersPerUnit():1;o.SCALE=e*s/28e-5}return Object.assign(o,i),(0,r.appendParams)(this.urls[0],o)}}},{key:"getGutter",value:function(){return this.gutter_}},{key:"getParams",value:function(){return this.params_}},{key:"getRequestUrl_",value:function(e,t,o,n,s,a){var u=this.urls;if(u){if(a.WIDTH=t[0],a.HEIGHT=t[1],a[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=n)switch(this.serverType_){case"geoserver":var f=90*n+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+f:a.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":a.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":a.DPI=90*n;break;default:(0,i.assert)(!1,52)}var p,h,v=s.getAxisOrientation(),g=o;if(this.v13_&&"ne"==v.substr(0,2))p=o[0],g[0]=o[1],g[1]=p,p=o[2],g[2]=o[3],g[3]=p;if(a.BBOX=g.join(","),1==u.length)h=u[0];else h=u[(0,l.modulo)((0,c.hash)(e),u.length)];return(0,r.appendParams)(h,a)}}},{key:"getTilePixelRatio",value:function(e){return this.hidpi_&&void 0!==this.serverType_?e:1}},{key:"getKeyForParams_",value:function(){var e=0,t=[];for(var r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}},{key:"updateV13_",value:function(){var e=this.params_.VERSION||t.DEFAULT_VERSION;this.v13_=(0,a.compareVersions)(e,"1.3")>=0}},{key:"tileUrlFunction",value:function(e,r,i){var s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(i)),!(s.getResolutions().length<=e[0])){1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var a=s.getResolution(e[0]),u=s.getTileCoordExtent(e,this.tmpExtent_),l=(0,n.toSize)(s.getTileSize(e[0]),this.tmpSize),c=this.gutter_;0!==c&&(l=(0,n.buffer)(l,c,this.tmpSize),u=(0,o.buffer)(u,a*c,u)),1!=r&&(l=(0,n.scale)(l,r,this.tmpSize));var f={SERVICE:"WMS",VERSION:t.DEFAULT_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(f,this.params_),this.getRequestUrl_(e,l,u,r,i,f)}}}]),v}(),j=O;exports.default=j;
},{"./TileImage.js":"rQ5G","./wms.js":"T2n1","../uri.js":"xJ6k","../asserts.js":"DVOE","../extent.js":"L0Vw","../size.js":"d9VJ","../reproj.js":"BOkO","../string.js":"nqHs","../proj.js":"VAQc","../math.js":"qAK2","../tilecoord.js":"NPSy"}],"agxc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CustomTile=void 0;var t=h(require("../events/EventType.js")),e=h(require("../Tile.js")),r=h(require("./Tile.js")),n=h(require("../TileState.js")),i=require("../extent.js"),o=require("../asserts.js"),s=require("../tileurlfunction.js"),a=require("../tilegrid.js"),u=require("../tilecoord.js"),l=require("../proj.js"),c=require("../events.js"),f=require("../net.js");function h(t){return t&&t.__esModule?t:{default:t}}function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_(n.key),n)}}function y(t,e,r){return e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _(t){var e=b(t,"string");return"symbol"===d(e)?e:String(e)}function b(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function j(t){var e=O();return function(){var r,n=S(t);if(e){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return T(this,r)}}function T(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return E(t)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(r){m(o,e.default);var i=j(o);function o(t,e,r,n,s,a){var u;return p(this,o),(u=i.call(this,t,e)).src_=r,u.extent_=n,u.preemptive_=s,u.grid_=null,u.keys_=null,u.data_=null,u.jsonp_=a,u}return y(o,[{key:"getImage",value:function(){return null}},{key:"getData",value:function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-r)*this.grid_.length)];if("string"!=typeof n)return null;var i=n.charCodeAt(Math.floor(e*n.length));i>=93&&i--,i>=35&&i--;var o=null;if((i-=32)in this.keys_){var s=this.keys_[i];o=this.data_&&s in this.data_?this.data_[s]:s}return o}},{key:"forDataAtCoordinate",value:function(e,r,i){var o=this;this.state==n.default.EMPTY&&!0===i?(this.state=n.default.IDLE,(0,c.listenOnce)(this,t.default.CHANGE,function(t){r(this.getData(e))},this),this.loadInternal_()):!0===i?setTimeout(function(){r(o.getData(e))},0):r(this.getData(e))}},{key:"getKey",value:function(){return this.src_}},{key:"handleError_",value:function(){this.state=n.default.ERROR,this.changed()}},{key:"handleLoad_",value:function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=n.default.LOADED,this.changed()}},{key:"loadInternal_",value:function(){if(this.state==n.default.IDLE)if(this.state=n.default.LOADING,this.jsonp_)(0,f.jsonp)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}},{key:"onXHRLoad_",value:function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r;try{r=JSON.parse(e.responseText)}catch(n){return void this.handleError_()}this.handleLoad_(r)}else this.handleError_()}},{key:"onXHRError_",value:function(t){this.handleError_()}},{key:"load",value:function(){this.preemptive_?this.loadInternal_():this.setState(n.default.EMPTY)}}]),o}();exports.CustomTile=k;var R=function(t){m(c,r.default);var e=j(c);function c(t){var r;if(p(this,c),(r=e.call(this,{projection:(0,l.get)("EPSG:3857"),state:"loading",zDirection:t.zDirection})).preemptive_=void 0===t.preemptive||t.preemptive,r.tileUrlFunction_=s.nullTileUrlFunction,r.template_=void 0,r.jsonp_=t.jsonp||!1,t.url)if(r.jsonp_)(0,f.jsonp)(t.url,r.handleTileJSONResponse.bind(E(r)),r.handleTileJSONError.bind(E(r)));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(E(r))),n.addEventListener("error",r.onXHRError_.bind(E(r))),n.open("GET",t.url),n.send()}else t.tileJSON?r.handleTileJSONResponse(t.tileJSON):(0,o.assert)(!1,51);return r}return y(c,[{key:"onXHRLoad_",value:function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r;try{r=JSON.parse(e.responseText)}catch(n){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}},{key:"onXHRError_",value:function(t){this.handleTileJSONError()}},{key:"getTemplate",value:function(){return this.template_}},{key:"forDataAtCoordinateAndResolution",value:function(t,e,r,n){if(this.tileGrid){var i=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,i);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,r,n)}else!0===n?setTimeout(function(){r(null)},0):r(null)}},{key:"handleTileJSONError",value:function(){this.setState("error")}},{key:"handleTileJSONResponse",value:function(t){var e,r=(0,l.get)("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var o=(0,l.getTransformFromProjections)(r,n);e=(0,i.applyTransform)(t.bounds,o)}var u=(0,a.extentFromProjection)(n),c=t.minzoom||0,f=t.maxzoom||22,h=(0,a.createXYZ)({extent:u,maxZoom:f,minZoom:c});this.tileGrid=h,this.template_=t.template;var d=t.grids;if(d){if(this.tileUrlFunction_=(0,s.createFromTemplates)(d,h),void 0!==t.attribution){var p=void 0!==e?e:u;this.setAttributions(function(e){return(0,i.intersects)(p,e.extent)?[t.attribution]:null})}this.setState("ready")}else this.setState("error")}},{key:"getTile",value:function(t,e,r,i,o){var s=(0,u.getKeyZXY)(t,e,r);if(this.tileCache.containsKey(s))return this.tileCache.get(s);var a=[t,e,r],l=this.getTileCoordForTileUrlFunction(a,o),c=this.tileUrlFunction_(l,i,o),f=new k(a,void 0!==c?n.default.IDLE:n.default.EMPTY,void 0!==c?c:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(s,f),f}},{key:"useTile",value:function(t,e,r){var n=(0,u.getKeyZXY)(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}]),c}(),x=R;exports.default=x;
},{"../events/EventType.js":"GUXn","../Tile.js":"iz3u","./Tile.js":"MN9s","../TileState.js":"FoaO","../extent.js":"L0Vw","../asserts.js":"DVOE","../tileurlfunction.js":"dZ35","../tilegrid.js":"gNrJ","../tilecoord.js":"NPSy","../proj.js":"VAQc","../events.js":"MGag","../net.js":"MPOK"}],"gaYW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromCapabilitiesMatrixSet=m,exports.default=void 0;var t=r(require("./TileGrid.js")),e=require("../proj.js");function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function u(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var e=c(t,"string");return"symbol"===n(e)?e:String(e)}function c(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=d();return function(){var r,n=b(t);if(e){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(e){s(n,t.default);var r=l(n);function n(t){var e;return i(this,n),(e=r.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})).matrixIds_=t.matrixIds,e}return u(n,[{key:"getMatrixId",value:function(t){return this.matrixIds_[t]}},{key:"getMatrixIds",value:function(){return this.matrixIds_}}]),n}(),v=h;function m(t,r,n){var i=[],o=[],u=[],f=[],c=[];n=void 0!==n?n:[];var s=t.SupportedCRS,a=(0,e.get)(s),l=a.getMetersPerUnit(),p="ne"==a.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(e){if(!(n.length>0)||n.find(function(r){return e.Identifier==r.TileMatrix||!e.Identifier.includes(":")&&t.Identifier+":"+e.Identifier===r.TileMatrix})){o.push(e.Identifier);var r=28e-5*e.ScaleDenominator/l,s=e.TileWidth,a=e.TileHeight;p?u.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):u.push(e.TopLeftCorner),i.push(r),f.push(s==a?s:[s,a]),c.push([e.MatrixWidth,e.MatrixHeight])}}),new h({extent:r,origins:u,resolutions:i,matrixIds:o,tileSizes:f,sizes:c})}exports.default=v;
},{"./TileGrid.js":"JVE6","../proj.js":"VAQc"}],"cSfn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.optionsFromCapabilities=S;var e=a(require("./TileImage.js")),t=require("../uri.js"),i=require("../extent.js"),r=require("../tilegrid/WMTS.js"),n=require("../tileurlfunction.js"),o=require("../proj.js");function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function c(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=p(e,"string");return"symbol"===s(t)?t:String(t)}function p(e,t){if("object"!==s(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=g();return function(){var i,r=T(e);if(t){var n=T(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return m(this,i)}}function m(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(i){d(o,e.default);var r=v(o);function o(e){var t;u(this,o);var i=void 0!==e.requestEncoding?e.requestEncoding:"KVP",a=e.tileGrid,s=e.urls;return void 0===s&&void 0!==e.url&&(s=(0,n.expandUrl)(e.url)),(t=r.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:a,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:s,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition,zDirection:e.zDirection})).version_=void 0!==e.version?e.version:"1.0.0",t.format_=void 0!==e.format?e.format:"image/jpeg",t.dimensions_=void 0!==e.dimensions?e.dimensions:{},t.layer_=e.layer,t.matrixSet_=e.matrixSet,t.style_=e.style,t.requestEncoding_=i,t.setKey(t.getKeyForDimensions_()),s&&s.length>0&&(t.tileUrlFunction=(0,n.createFromTileUrlFunctions)(s.map(t.createFromWMTSTemplate.bind(h(t))))),t}return c(o,[{key:"setUrls",value:function(e){this.urls=e;var t=e.join("\n");this.setTileUrlFunction((0,n.createFromTileUrlFunctions)(e.map(this.createFromWMTSTemplate.bind(this))),t)}},{key:"getDimensions",value:function(){return this.dimensions_}},{key:"getFormat",value:function(){return this.format_}},{key:"getLayer",value:function(){return this.layer_}},{key:"getMatrixSet",value:function(){return this.matrixSet_}},{key:"getRequestEncoding",value:function(){return this.requestEncoding_}},{key:"getStyle",value:function(){return this.style_}},{key:"getVersion",value:function(){return this.version_}},{key:"getKeyForDimensions_",value:function(){var e=this.urls?this.urls.slice(0):[];for(var t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}},{key:"updateDimensions",value:function(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}},{key:"createFromWMTSTemplate",value:function(e){var i=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==i&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e="KVP"==i?(0,t.appendParams)(e,r):e.replace(/\{(\w+?)\}/g,function(e,t){return t.toLowerCase()in r?r[t.toLowerCase()]:e});var n=this.tileGrid,o=this.dimensions_;return function(r,a,s){if(r){var u={TileMatrix:n.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};Object.assign(u,o);var l=e;return l="KVP"==i?(0,t.appendParams)(l,u):l.replace(/\{(\w+?)\}/g,function(e,t){return u[t]})}}}}]),o}(),x=b;function S(e,t){var n=e.Contents.Layer.find(function(e){return e.Identifier==t.layer});if(!n)return null;var a,s=e.Contents.TileMatrixSet;(a=n.TileMatrixSetLink.length>1?"projection"in t?n.TileMatrixSetLink.findIndex(function(e){var i=s.find(function(t){return t.Identifier==e.TileMatrixSet}).SupportedCRS,r=(0,o.get)(i),n=(0,o.get)(t.projection);return r&&n?(0,o.equivalent)(r,n):i==t.projection}):n.TileMatrixSetLink.findIndex(function(e){return e.TileMatrixSet==t.matrixSet}):0)<0&&(a=0);var u=n.TileMatrixSetLink[a].TileMatrixSet,l=n.TileMatrixSetLink[a].TileMatrixSetLimits,c=n.Format[0];"format"in t&&(c=t.format),(a=n.Style.findIndex(function(e){return"style"in t?e.Title==t.style:e.isDefault}))<0&&(a=0);var f=n.Style[a].Identifier,p={};"Dimension"in n&&n.Dimension.forEach(function(e,t,i){var r=e.Identifier,n=e.Default;void 0===n&&(n=e.Value[0]),p[r]=n});var d,y=e.Contents.TileMatrixSet.find(function(e){return e.Identifier==u}),v=y.SupportedCRS;if(v&&(d=(0,o.get)(v)),"projection"in t){var m=(0,o.get)(t.projection);m&&(d&&!(0,o.equivalent)(m,d)||(d=m))}var h=!1,g="ne"==d.getAxisOrientation().substr(0,2),T=y.TileMatrix[0],b={MinTileCol:0,MinTileRow:0,MaxTileCol:T.MatrixWidth-1,MaxTileRow:T.MatrixHeight-1};if(l){b=l[l.length-1];var x=y.TileMatrix.find(function(e){return e.Identifier===b.TileMatrix||y.Identifier+":"+e.Identifier===b.TileMatrix});x&&(T=x)}var S=28e-5*T.ScaleDenominator/d.getMetersPerUnit(),M=g?[T.TopLeftCorner[1],T.TopLeftCorner[0]]:T.TopLeftCorner,_=T.TileWidth*S,j=T.TileHeight*S,w=y.BoundingBox;w&&g&&(w=[w[1],w[0],w[3],w[2]]);var P=[M[0]+_*b.MinTileCol,M[1]-j*(1+b.MaxTileRow),M[0]+_*(1+b.MaxTileCol),M[1]-j*b.MinTileRow];if(void 0!==w&&!(0,i.containsExtent)(w,P)){var O=n.WGS84BoundingBox,C=(0,o.get)("EPSG:4326").getExtent();if(P=w,O)h=O[0]===C[0]&&O[2]===C[2];else{var E=(0,o.transformExtent)(w,y.SupportedCRS,"EPSG:4326");h=E[0]-1e-10<=C[0]&&E[2]+1e-10>=C[2]}}var R=(0,r.createFromCapabilitiesMatrixSet)(y,P,l),F=[],k=t.requestEncoding;if(k=void 0!==k?k:"","OperationsMetadata"in e&&"GetTile"in e.OperationsMetadata)for(var q=e.OperationsMetadata.GetTile.DCP.HTTP.Get,L=0,D=q.length;L<D;++L)if(q[L].Constraint){var I=q[L].Constraint.find(function(e){return"GetEncoding"==e.name}).AllowedValues.Value;if(""===k&&(k=I[0]),"KVP"!==k)break;I.includes("KVP")&&F.push(q[L].href)}else q[L].href&&(k="KVP",F.push(q[L].href));return 0===F.length&&(k="REST",n.ResourceURL.forEach(function(e){"tile"===e.resourceType&&(c=e.format,F.push(e.template))})),{urls:F,layer:t.layer,matrixSet:u,format:c,projection:d,requestEncoding:k,tileGrid:R,style:f,dimensions:p,wrapX:h,crossOrigin:t.crossOrigin}}exports.default=x;
},{"./TileImage.js":"rQ5G","../uri.js":"xJ6k","../extent.js":"L0Vw","../tilegrid/WMTS.js":"gaYW","../tileurlfunction.js":"dZ35","../proj.js":"VAQc"}],"Vrgk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"BingMaps",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"CartoDB",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Cluster",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"DataTile",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"GeoTIFF",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"IIIF",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"ImageArcGISRest",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"ImageCanvas",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"ImageMapGuide",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ImageStatic",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"ImageWMS",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"OSM",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Raster",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Source",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Stamen",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"TileArcGISRest",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"TileDebug",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"TileImage",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"TileJSON",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"TileWMS",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(exports,"UTFGrid",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"UrlTile",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"Vector",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(exports,"WMTS",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(exports,"XYZ",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(exports,"Zoomify",{enumerable:!0,get:function(){return v.default}}),exports.sourcesFromTileGrid=D;var e=R(require("./structs/LRUCache.js")),r=require("./extent.js"),t=R(require("./source/BingMaps.js")),u=R(require("./source/CartoDB.js")),n=R(require("./source/Cluster.js")),o=R(require("./source/DataTile.js")),i=R(require("./source/GeoTIFF.js")),s=R(require("./source/IIIF.js")),c=R(require("./source/Image.js")),a=R(require("./source/ImageArcGISRest.js")),f=R(require("./source/ImageCanvas.js")),l=R(require("./source/ImageMapGuide.js")),d=R(require("./source/ImageStatic.js")),p=R(require("./source/ImageWMS.js")),b=R(require("./source/OSM.js")),j=R(require("./source/Raster.js")),g=R(require("./source/Source.js")),m=R(require("./source/Stamen.js")),x=R(require("./source/Tile.js")),O=R(require("./source/TileArcGISRest.js")),y=R(require("./source/TileDebug.js")),q=R(require("./source/TileImage.js")),P=R(require("./source/TileJSON.js")),I=R(require("./source/TileWMS.js")),T=R(require("./source/UrlTile.js")),S=R(require("./source/UTFGrid.js")),M=R(require("./source/Vector.js")),G=R(require("./source/VectorTile.js")),F=R(require("./source/WMTS.js")),C=R(require("./source/XYZ.js")),v=R(require("./source/Zoomify.js"));function R(e){return e&&e.__esModule?e:{default:e}}function D(t,u){var n=new e.default(32),o=t.getExtent();return function(e,i){n.expireCache(),o&&(e=(0,r.getIntersection)(o,e));var s=t.getZForResolution(i),c=[];return t.forEachTileCoord(e,s,function(e){var r=e.toString();if(!n.containsKey(r)){var t=u(e);n.set(r,t)}c.push(n.get(r))}),c}}
},{"./structs/LRUCache.js":"UtOR","./extent.js":"L0Vw","./source/BingMaps.js":"QZ5i","./source/CartoDB.js":"O76m","./source/Cluster.js":"L7CC","./source/DataTile.js":"VF6g","./source/GeoTIFF.js":"bHRM","./source/IIIF.js":"DRde","./source/Image.js":"X7eW","./source/ImageArcGISRest.js":"ABAf","./source/ImageCanvas.js":"OQvd","./source/ImageMapGuide.js":"HHDy","./source/ImageStatic.js":"Fsb2","./source/ImageWMS.js":"eWqz","./source/OSM.js":"hU9v","./source/Raster.js":"xFSo","./source/Source.js":"AC87","./source/Stamen.js":"KYsR","./source/Tile.js":"MN9s","./source/TileArcGISRest.js":"UtyN","./source/TileDebug.js":"zFtQ","./source/TileImage.js":"rQ5G","./source/TileJSON.js":"Lic7","./source/TileWMS.js":"uIuF","./source/UrlTile.js":"P4LM","./source/UTFGrid.js":"agxc","./source/Vector.js":"v3xZ","./source/VectorTile.js":"EYMU","./source/WMTS.js":"cSfn","./source/XYZ.js":"DGMa","./source/Zoomify.js":"uHyH"}],"Focm":[function(require,module,exports) {
"use strict";require("ol/ol.css");var e=s(require("ol/Map")),r=s(require("ol/View")),o=s(require("ol/layer/VectorTile")),t=require("ol-mapbox-style"),a=require("ol/proj"),l=require("ol/layer"),u=s(require("ol/format/GeoJSON")),i=require("ol/source");function s(e){return e&&e.__esModule?e:{default:e}}var n=new o.default({declutter:!0});(0,t.applyStyle)(n,"mapbox://styles/mapbox/outdoors-v12",{accessToken:"pk.eyJ1IjoibXVzaGVyIiwiYSI6ImNsa3JvcHc5ZjF6eXYzZW12ajMzMXd0enQifQ.dZ2685AuaU8GY6wDr11Ipw"});var c=new l.Vector({source:new i.Vector({projection:"EPSG:3857",url:"./data/test.geojson",format:new u.default})}),d=new e.default({target:"footprintMap",layers:[n],view:new r.default({center:(0,a.transform)([120.14,30.3],"EPSG:4326","EPSG:3857"),zoom:15,projection:"EPSG:3857"})});d.addLayer(c);
},{"ol/ol.css":"vFY1","ol/Map":"ZXtR","ol/View":"rXL1","ol/layer/VectorTile":"g0oQ","ol-mapbox-style":"Pq51","ol/proj":"VAQc","ol/layer":"x523","ol/format/GeoJSON":"csgN","ol/source":"Vrgk"}],"DDDl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ungzip=exports.inflateRaw=exports.inflate=exports.gzip=exports.deflateRaw=exports.deflate=exports.default=exports.constants=exports.Inflate=exports.Deflate=void 0;const t=4,e=0,a=1,i=2;function n(t){let e=t.length;for(;--e>=0;)t[e]=0}const s=0,r=1,o=2,l=3,h=258,d=29,_=256,f=286,c=30,u=19,w=573,b=15,m=16,g=7,p=256,k=16,v=17,y=18,x=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),z=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),A=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),R=512,Z=new Array(576);n(Z);const U=new Array(60);n(U);const S=new Array(512);n(S);const D=new Array(256);n(D);const T=new Array(29);n(T);const O=new Array(30);function I(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}let F,L,N;function B(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}n(O);const C=t=>t<256?S[t]:S[256+(t>>>7)],M=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},H=(t,e,a)=>{t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,M(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},j=(t,e,a)=>{H(t,a[2*e],a[2*e+1])},K=(t,e)=>{let a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},P=t=>{16===t.bi_valid?(M(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)},Y=(t,e)=>{const a=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,d,_,f,c,u,w=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(a[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)(f=a[2*a[2*(d=t.heap[h])+1]+1]+1)>l&&(f=l,w++),a[2*d+1]=f,d>i||(t.bl_count[f]++,c=0,d>=o&&(c=r[d-o]),u=a[2*d],t.opt_len+=u*(f+c),s&&(t.static_len+=u*(n[2*d+1]+c)));if(0!==w){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,w-=2}while(w>0);for(f=l;0!==f;f--)for(d=t.bl_count[f];0!==d;)(_=t.heap[--h])>i||(a[2*_+1]!==f&&(t.opt_len+=(f-a[2*_+1])*a[2*_],a[2*_+1]=f),d--)}},G=(t,e,a)=>{const i=new Array(16);let n,s,r=0;for(n=1;n<=15;n++)r=r+a[n-1]<<1,i[n]=r;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=K(i[e]++,e))}},X=()=>{let t,e,a,i,n;const s=new Array(16);for(a=0,i=0;i<28;i++)for(T[i]=a,t=0;t<1<<x[i];t++)D[a++]=i;for(D[a-1]=i,n=0,i=0;i<16;i++)for(O[i]=n,t=0;t<1<<z[i];t++)S[n++]=i;for(n>>=7;i<30;i++)for(O[i]=n<<7,t=0;t<1<<z[i]-7;t++)S[256+n++]=i;for(e=0;e<=15;e++)s[e]=0;for(t=0;t<=143;)Z[2*t+1]=8,t++,s[8]++;for(;t<=255;)Z[2*t+1]=9,t++,s[9]++;for(;t<=279;)Z[2*t+1]=7,t++,s[7]++;for(;t<=287;)Z[2*t+1]=8,t++,s[8]++;for(G(Z,287,s),t=0;t<30;t++)U[2*t+1]=5,U[2*t]=K(t,5);F=new I(Z,x,257,286,15),L=new I(U,z,0,30,15),N=new I(new Array(0),A,0,19,7)},W=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},q=t=>{t.bi_valid>8?M(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},J=(t,e,a,i)=>{const n=2*e,s=2*a;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[a]},Q=(t,e,a)=>{const i=t.heap[a];let n=a<<1;for(;n<=t.heap_len&&(n<t.heap_len&&J(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!J(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i},V=(t,e,a)=>{let i,n,s,r,o=0;if(0!==t.sym_next)do{i=255&t.pending_buf[t.sym_buf+o++],i+=(255&t.pending_buf[t.sym_buf+o++])<<8,n=t.pending_buf[t.sym_buf+o++],0===i?j(t,n,e):(s=D[n],j(t,s+256+1,e),0!==(r=x[s])&&(n-=T[s],H(t,n,r)),s=C(--i),j(t,s,a),0!==(r=z[s])&&(i-=O[s],H(t,i,r)))}while(o<t.sym_next);j(t,256,e)},$=(t,e)=>{const a=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems;let r,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<s;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)a[2*(l=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[l]=0,t.opt_len--,n&&(t.static_len-=i[2*l+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)Q(t,a,r);l=s;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Q(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=o,a[2*l]=a[2*r]+a[2*o],t.depth[l]=(t.depth[r]>=t.depth[o]?t.depth[r]:t.depth[o])+1,a[2*r+1]=a[2*o+1]=l,t.heap[1]=l++,Q(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Y(t,e),G(a,h,t.bl_count)},tt=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=r,r=e[2*(i+1)+1],++o<l&&n===r||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4))},et=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),i=0;i<=a;i++)if(n=r,r=e[2*(i+1)+1],!(++o<l&&n===r)){if(o<h)do{j(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&(j(t,n,t.bl_tree),o--),j(t,16,t.bl_tree),H(t,o-3,2)):o<=10?(j(t,17,t.bl_tree),H(t,o-3,3)):(j(t,18,t.bl_tree),H(t,o-11,7));o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4)}},at=t=>{let e;for(tt(t,t.dyn_ltree,t.l_desc.max_code),tt(t,t.dyn_dtree,t.d_desc.max_code),$(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*E[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e},it=(t,e,a,i)=>{let n;for(H(t,e-257,5),H(t,a-1,5),H(t,i-4,4),n=0;n<i;n++)H(t,t.bl_tree[2*E[n]+1],3);et(t,t.dyn_ltree,e-1),et(t,t.dyn_dtree,a-1)},nt=t=>{let e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0};let st=!1;const rt=t=>{st||(X(),st=!0),t.l_desc=new B(t.dyn_ltree,F),t.d_desc=new B(t.dyn_dtree,L),t.bl_desc=new B(t.bl_tree,N),t.bi_buf=0,t.bi_valid=0,W(t)},ot=(t,e,a,i)=>{H(t,0+(i?1:0),3),q(t),M(t,a),M(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a},lt=t=>{H(t,2,3),j(t,256,Z),P(t)},ht=(t,e,a,i)=>{let n,s,r=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=nt(t)),$(t,t.l_desc),$(t,t.d_desc),r=at(t),n=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=n&&(n=s)):n=s=a+5,a+4<=n&&-1!==e?ot(t,e,a,i):4===t.strategy||s===n?(H(t,2+(i?1:0),3),V(t,Z,U)):(H(t,4+(i?1:0),3),it(t,t.l_desc.max_code+1,t.d_desc.max_code+1,r+1),V(t,t.dyn_ltree,t.dyn_dtree)),W(t),i&&q(t)},dt=(t,e,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(D[a]+256+1)]++,t.dyn_dtree[2*C(e)]++),t.sym_next===t.sym_end);var _t=rt,ft=ot,ct=ht,ut=dt,wt=lt,bt={_tr_init:_t,_tr_stored_block:ft,_tr_flush_block:ct,_tr_tally:ut,_tr_align:wt};const mt=(t,e,a,i)=>{let n=65535&t|0,s=t>>>16&65535|0,r=0;for(;0!==a;){a-=r=a>2e3?2e3:a;do{s=s+(n=n+e[i++]|0)|0}while(--r);n%=65521,s%=65521}return n|s<<16|0};var gt=mt;const pt=()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e},kt=new Uint32Array(pt()),vt=(t,e,a,i)=>{const n=kt,s=i+a;t^=-1;for(let r=i;r<s;r++)t=t>>>8^n[255&(t^e[r])];return-1^t};var yt=vt,xt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},zt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:At,_tr_stored_block:Et,_tr_flush_block:Rt,_tr_tally:Zt,_tr_align:Ut}=bt,{Z_NO_FLUSH:St,Z_PARTIAL_FLUSH:Dt,Z_FULL_FLUSH:Tt,Z_FINISH:Ot,Z_BLOCK:It,Z_OK:Ft,Z_STREAM_END:Lt,Z_STREAM_ERROR:Nt,Z_DATA_ERROR:Bt,Z_BUF_ERROR:Ct,Z_DEFAULT_COMPRESSION:Mt,Z_FILTERED:Ht,Z_HUFFMAN_ONLY:jt,Z_RLE:Kt,Z_FIXED:Pt,Z_DEFAULT_STRATEGY:Yt,Z_UNKNOWN:Gt,Z_DEFLATED:Xt}=zt,Wt=9,qt=15,Jt=8,Qt=29,Vt=256,$t=286,te=30,ee=19,ae=2*$t+1,ie=15,ne=3,se=258,re=262,oe=32,le=42,he=57,de=69,_e=73,fe=91,ce=103,ue=113,we=666,be=1,me=2,ge=3,pe=4,ke=3,ve=(t,e)=>(t.msg=xt[e],e),ye=t=>2*t-(t>4?9:0),xe=t=>{let e=t.length;for(;--e>=0;)t[e]=0},ze=t=>{let e,a,i,n=t.w_size;i=e=t.hash_size;do{a=t.head[--i],t.head[i]=a>=n?a-n:0}while(--e);i=e=n;do{a=t.prev[--i],t.prev[i]=a>=n?a-n:0}while(--e)};let Ae=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask,Ee=Ae;const Re=t=>{const e=t.state;let a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},Ze=(t,e)=>{Rt(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Re(t.strm)},Ue=(t,e)=>{t.pending_buf[t.pending++]=e},Se=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},De=(t,e,a,i)=>{let n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),a),1===t.state.wrap?t.adler=gt(t.adler,e,n,a):2===t.state.wrap&&(t.adler=yt(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)},Te=(t,e)=>{let a,i,n=t.max_chain_length,s=t.strstart,r=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,h=t.window,d=t.w_mask,_=t.prev,f=t.strstart+258;let c=h[s+r-1],u=h[s+r];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(a=e)+r]===u&&h[a+r-1]===c&&h[a]===h[s]&&h[++a]===h[s+1]){s+=2,a++;do{}while(h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&s<f);if(i=258-(f-s),s=f-258,i>r){if(t.match_start=e,r=i,i>=o)break;c=h[s+r-1],u=h[s+r]}}}while((e=_[e&d])>l&&0!=--n);return r<=t.lookahead?r:t.lookahead},Oe=t=>{const e=t.w_size;let a,i,n;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),ze(t),i+=e),0===t.strm.avail_in)break;if(a=De(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=a,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=Ee(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=Ee(t,t.ins_h,t.window[n+3-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},Ie=(t,e)=>{let a,i,n,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r=0,o=t.strm.avail_in;do{if(a=65535,n=t.bi_valid+42>>3,t.strm.avail_out<n)break;if(n=t.strm.avail_out-n,a>(i=t.strstart-t.block_start)+t.strm.avail_in&&(a=i+t.strm.avail_in),a>n&&(a=n),a<s&&(0===a&&e!==Ot||e===St||a!==i+t.strm.avail_in))break;r=e===Ot&&a===i+t.strm.avail_in?1:0,Et(t,0,0,r),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,Re(t.strm),i&&(i>a&&(i=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,a-=i),a&&(De(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(0===r);return(o-=t.strm.avail_in)&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?4:e!==St&&e!==Ot&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(n=t.window_size-t.strstart,t.strm.avail_in>n&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,n+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),n>t.strm.avail_in&&(n=t.strm.avail_in),n&&(De(t.strm,t.window,t.strstart,n),t.strstart+=n,t.insert+=n>t.w_size-t.insert?t.w_size-t.insert:n),t.high_water<t.strstart&&(t.high_water=t.strstart),n=t.bi_valid+42>>3,s=(n=t.pending_buf_size-n>65535?65535:t.pending_buf_size-n)>t.w_size?t.w_size:n,((i=t.strstart-t.block_start)>=s||(i||e===Ot)&&e!==St&&0===t.strm.avail_in&&i<=n)&&(a=i>n?n:i,r=e===Ot&&0===t.strm.avail_in&&a===i?1:0,Et(t,t.block_start,a,r),t.block_start+=a,Re(t.strm)),r?3:1)},Fe=(t,e)=>{let a,i;for(;;){if(t.lookahead<262){if(Oe(t),t.lookahead<262&&e===St)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=Ee(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-262&&(t.match_length=Te(t,a)),t.match_length>=3)if(i=Zt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Ee(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Ee(t,t.ins_h,t.window[t.strstart+1]);else i=Zt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(Ze(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===Ot?(Ze(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ze(t,!1),0===t.strm.avail_out)?1:2},Le=(t,e)=>{let a,i,n;for(;;){if(t.lookahead<262){if(Oe(t),t.lookahead<262&&e===St)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=Ee(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-262&&(t.match_length=Te(t,a),t.match_length<=5&&(t.strategy===Ht||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=Zt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=Ee(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(Ze(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=Zt(t,0,t.window[t.strstart-1]))&&Ze(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=Zt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===Ot?(Ze(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ze(t,!1),0===t.strm.avail_out)?1:2},Ne=(t,e)=>{let a,i,n,s;const r=t.window;for(;;){if(t.lookahead<=258){if(Oe(t),t.lookahead<=258&&e===St)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=r[n=t.strstart-1])===r[++n]&&i===r[++n]&&i===r[++n]){s=t.strstart+258;do{}while(i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&n<s);t.match_length=258-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=Zt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=Zt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(Ze(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Ot?(Ze(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ze(t,!1),0===t.strm.avail_out)?1:2},Be=(t,e)=>{let a;for(;;){if(0===t.lookahead&&(Oe(t),0===t.lookahead)){if(e===St)return 1;break}if(t.match_length=0,a=Zt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(Ze(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===Ot?(Ze(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(Ze(t,!1),0===t.strm.avail_out)?1:2};function Ce(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}const Me=[new Ce(0,0,0,0,Ie),new Ce(4,4,8,4,Fe),new Ce(4,5,16,8,Fe),new Ce(4,6,32,32,Fe),new Ce(4,4,16,16,Le),new Ce(8,16,32,32,Le),new Ce(8,16,128,128,Le),new Ce(8,32,128,256,Le),new Ce(32,128,258,1024,Le),new Ce(32,258,258,4096,Le)],He=t=>{t.window_size=2*t.w_size,xe(t.head),t.max_lazy_match=Me[t.level].max_lazy,t.good_match=Me[t.level].good_length,t.nice_match=Me[t.level].nice_length,t.max_chain_length=Me[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0};function je(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Xt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*ae),this.dyn_dtree=new Uint16Array(2*(2*te+1)),this.bl_tree=new Uint16Array(2*(2*ee+1)),xe(this.dyn_ltree),xe(this.dyn_dtree),xe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(ie+1),this.heap=new Uint16Array(2*$t+1),xe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*$t+1),xe(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ke=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||42!==e.status&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&113!==e.status&&666!==e.status?1:0},Pe=t=>{if(Ke(t))return ve(t,Nt);t.total_in=t.total_out=0,t.data_type=Gt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=-2,At(e),Ft},Ye=t=>{const e=Pe(t);return e===Ft&&He(t.state),e},Ge=(t,e)=>Ke(t)||2!==t.state.wrap?Nt:(t.state.gzhead=e,Ft),Xe=(t,e,a,i,n,s)=>{if(!t)return Nt;let r=1;if(e===Mt&&(e=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),n<1||n>9||a!==Xt||i<8||i>15||e<0||e>9||s<0||s>Pt||8===i&&1!==r)return ve(t,Nt);8===i&&(i=9);const o=new je;return t.state=o,o.strm=t,o.status=42,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=s,o.method=a,Ye(t)},We=(t,e)=>Xe(t,e,Xt,15,8,Yt),qe=(t,e)=>{if(Ke(t)||e>It||e<0)return t?ve(t,Nt):Nt;const a=t.state;if(!t.output||0!==t.avail_in&&!t.input||666===a.status&&e!==Ot)return ve(t,0===t.avail_out?Ct:Nt);const i=a.last_flush;if(a.last_flush=e,0!==a.pending){if(Re(t),0===t.avail_out)return a.last_flush=-1,Ft}else if(0===t.avail_in&&ye(e)<=ye(i)&&e!==Ot)return ve(t,Ct);if(666===a.status&&0!==t.avail_in)return ve(t,Ct);if(42===a.status&&0===a.wrap&&(a.status=113),42===a.status){let e=Xt+(a.w_bits-8<<4)<<8,i=-1;if(e|=(i=a.strategy>=jt||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(e|=32),Se(a,e+=31-e%31),0!==a.strstart&&(Se(a,t.adler>>>16),Se(a,65535&t.adler)),t.adler=1,a.status=113,Re(t),0!==a.pending)return a.last_flush=-1,Ft}if(57===a.status)if(t.adler=0,Ue(a,31),Ue(a,139),Ue(a,8),a.gzhead)Ue(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),Ue(a,255&a.gzhead.time),Ue(a,a.gzhead.time>>8&255),Ue(a,a.gzhead.time>>16&255),Ue(a,a.gzhead.time>>24&255),Ue(a,9===a.level?2:a.strategy>=jt||a.level<2?4:0),Ue(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(Ue(a,255&a.gzhead.extra.length),Ue(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=yt(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(Ue(a,0),Ue(a,0),Ue(a,0),Ue(a,0),Ue(a,0),Ue(a,9===a.level?2:a.strategy>=jt||a.level<2?4:0),Ue(a,3),a.status=113,Re(t),0!==a.pending)return a.last_flush=-1,Ft;if(69===a.status){if(a.gzhead.extra){let e=a.pending,i=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+i>a.pending_buf_size;){let n=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+n),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>e&&(t.adler=yt(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex+=n,Re(t),0!==a.pending)return a.last_flush=-1,Ft;e=0,i-=n}let n=new Uint8Array(a.gzhead.extra);a.pending_buf.set(n.subarray(a.gzindex,a.gzindex+i),a.pending),a.pending+=i,a.gzhead.hcrc&&a.pending>e&&(t.adler=yt(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=yt(t.adler,a.pending_buf,a.pending-i,i)),Re(t),0!==a.pending)return a.last_flush=-1,Ft;i=0}e=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,Ue(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=yt(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=yt(t.adler,a.pending_buf,a.pending-i,i)),Re(t),0!==a.pending)return a.last_flush=-1,Ft;i=0}e=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,Ue(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=yt(t.adler,a.pending_buf,a.pending-i,i))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(Re(t),0!==a.pending))return a.last_flush=-1,Ft;Ue(a,255&t.adler),Ue(a,t.adler>>8&255),t.adler=0}if(a.status=113,Re(t),0!==a.pending)return a.last_flush=-1,Ft}if(0!==t.avail_in||0!==a.lookahead||e!==St&&666!==a.status){let i=0===a.level?Ie(a,e):a.strategy===jt?Be(a,e):a.strategy===Kt?Ne(a,e):Me[a.level].func(a,e);if(3!==i&&4!==i||(a.status=666),1===i||3===i)return 0===t.avail_out&&(a.last_flush=-1),Ft;if(2===i&&(e===Dt?Ut(a):e!==It&&(Et(a,0,0,!1),e===Tt&&(xe(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),Re(t),0===t.avail_out))return a.last_flush=-1,Ft}return e!==Ot?Ft:a.wrap<=0?Lt:(2===a.wrap?(Ue(a,255&t.adler),Ue(a,t.adler>>8&255),Ue(a,t.adler>>16&255),Ue(a,t.adler>>24&255),Ue(a,255&t.total_in),Ue(a,t.total_in>>8&255),Ue(a,t.total_in>>16&255),Ue(a,t.total_in>>24&255)):(Se(a,t.adler>>>16),Se(a,65535&t.adler)),Re(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?Ft:Lt)},Je=t=>{if(Ke(t))return Nt;const e=t.state.status;return t.state=null,113===e?ve(t,Bt):Ft},Qe=(t,e)=>{let a=e.length;if(Ke(t))return Nt;const i=t.state,n=i.wrap;if(2===n||1===n&&42!==i.status||i.lookahead)return Nt;if(1===n&&(t.adler=gt(t.adler,e,a,0)),i.wrap=0,a>=i.w_size){0===n&&(xe(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(a-i.w_size,a),0),e=t,a=i.w_size}const s=t.avail_in,r=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Oe(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=Ee(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,Oe(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=r,t.input=o,t.avail_in=s,i.wrap=n,Ft};var Ve=We,$e=Xe,ta=Ye,ea=Pe,aa=Ge,ia=qe,na=Je,sa=Qe,ra="pako deflate (from Nodeca project)",oa={deflateInit:Ve,deflateInit2:$e,deflateReset:ta,deflateResetKeep:ea,deflateSetHeader:aa,deflate:ia,deflateEnd:na,deflateSetDictionary:sa,deflateInfo:ra};const la=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var ha=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const e in a)la(a,e)&&(t[e]=a[e])}}return t},da=t=>{let e=0;for(let i=0,n=t.length;i<n;i++)e+=t[i].length;const a=new Uint8Array(e);for(let i=0,n=0,s=t.length;i<s;i++){let e=t[i];a.set(e,n),n+=e.length}return a},_a={assign:ha,flattenChunks:da};let fa=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(_s){fa=!1}const ca=new Uint8Array(256);for(let fs=0;fs<256;fs++)ca[fs]=fs>=252?6:fs>=248?5:fs>=240?4:fs>=224?3:fs>=192?2:1;ca[254]=ca[254]=1;var ua=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,i,n,s,r=t.length,o=0;for(n=0;n<r;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<r&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),s=0,n=0;s<o;n++)55296==(64512&(a=t.charCodeAt(n)))&&n+1<r&&56320==(64512&(i=t.charCodeAt(n+1)))&&(a=65536+(a-55296<<10)+(i-56320),n++),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e};const wa=(t,e)=>{if(e<65534&&t.subarray&&fa)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a};var ba=(t,e)=>{const a=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,n;const s=new Array(2*a);for(n=0,i=0;i<a;){let e=t[i++];if(e<128){s[n++]=e;continue}let r=ca[e];if(r>4)s[n++]=65533,i+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&i<a;)e=e<<6|63&t[i++],r--;r>1?s[n++]=65533:e<65536?s[n++]=e:(e-=65536,s[n++]=55296|e>>10&1023,s[n++]=56320|1023&e)}}return wa(s,n)},ma=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let a=e-1;for(;a>=0&&128==(192&t[a]);)a--;return a<0?e:0===a?e:a+ca[t[a]]>e?a:e},ga={string2buf:ua,buf2string:ba,utf8border:ma};function pa(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ka=pa;const va=Object.prototype.toString,{Z_NO_FLUSH:ya,Z_SYNC_FLUSH:xa,Z_FULL_FLUSH:za,Z_FINISH:Aa,Z_OK:Ea,Z_STREAM_END:Ra,Z_DEFAULT_COMPRESSION:Za,Z_DEFAULT_STRATEGY:Ua,Z_DEFLATED:Sa}=zt;function Da(t){this.options=_a.assign({level:Za,method:Sa,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ua},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ka,this.strm.avail_out=0;let a=oa.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==Ea)throw new Error(xt[a]);if(e.header&&oa.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?ga.string2buf(e.dictionary):"[object ArrayBuffer]"===va.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(a=oa.deflateSetDictionary(this.strm,t))!==Ea)throw new Error(xt[a]);this._dict_set=!0}}function Ta(t,e){const a=new Da(e);if(a.push(t,!0),a.err)throw a.msg||xt[a.err];return a.result}function Oa(t,e){return(e=e||{}).raw=!0,Ta(t,e)}function Ia(t,e){return(e=e||{}).gzip=!0,Ta(t,e)}Da.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize;let n,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Aa:ya,"string"==typeof t?a.input=ga.string2buf(t):"[object ArrayBuffer]"===va.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(s===xa||s===za)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if((n=oa.deflate(a,s))===Ra)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=oa.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Ea;if(0!==a.avail_out){if(s>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},Da.prototype.onData=function(t){this.chunks.push(t)},Da.prototype.onEnd=function(t){t===Ea&&(this.result=_a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Fa=Da,La=Ta,Na=Oa,Ba=Ia,Ca=zt,Ma={Deflate:Fa,deflate:La,deflateRaw:Na,gzip:Ba,constants:Ca};const Ha=16209,ja=16191;var Ka=function(t,e){let a,i,n,s,r,o,l,h,d,_,f,c,u,w,b,m,g,p,k,v,y,x,z,A;const E=t.state;a=t.next_in,z=t.input,i=a+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),r=n+(t.avail_out-257),o=E.dmax,l=E.wsize,h=E.whave,d=E.wnext,_=E.window,f=E.hold,c=E.bits,u=E.lencode,w=E.distcode,b=(1<<E.lenbits)-1,m=(1<<E.distbits)-1;t:do{c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=u[f&b];e:for(;;){if(f>>>=p=g>>>24,c-=p,0===(p=g>>>16&255))A[n++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=u[(65535&g)+(f&(1<<p)-1)];continue e}if(32&p){E.mode=16191;break t}t.msg="invalid literal/length code",E.mode=16209;break t}k=65535&g,(p&=15)&&(c<p&&(f+=z[a++]<<c,c+=8),k+=f&(1<<p)-1,f>>>=p,c-=p),c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=w[f&m];a:for(;;){if(f>>>=p=g>>>24,c-=p,!(16&(p=g>>>16&255))){if(0==(64&p)){g=w[(65535&g)+(f&(1<<p)-1)];continue a}t.msg="invalid distance code",E.mode=16209;break t}if(v=65535&g,c<(p&=15)&&(f+=z[a++]<<c,(c+=8)<p&&(f+=z[a++]<<c,c+=8)),(v+=f&(1<<p)-1)>o){t.msg="invalid distance too far back",E.mode=16209;break t}if(f>>>=p,c-=p,v>(p=n-s)){if((p=v-p)>h&&E.sane){t.msg="invalid distance too far back",E.mode=16209;break t}if(y=0,x=_,0===d){if(y+=l-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}else if(d<p){if(y+=l+d-p,(p-=d)<k){k-=p;do{A[n++]=_[y++]}while(--p);if(y=0,d<k){k-=p=d;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}}else if(y+=d-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}for(;k>2;)A[n++]=x[y++],A[n++]=x[y++],A[n++]=x[y++],k-=3;k&&(A[n++]=x[y++],k>1&&(A[n++]=x[y++]))}else{y=n-v;do{A[n++]=A[y++],A[n++]=A[y++],A[n++]=A[y++],k-=3}while(k>2);k&&(A[n++]=A[y++],k>1&&(A[n++]=A[y++]))}break}}break}}while(a<i&&n<r);a-=k=c>>3,f&=(1<<(c-=k<<3))-1,t.next_in=a,t.next_out=n,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=n<r?r-n+257:257-(n-r),E.hold=f,E.bits=c};const Pa=15,Ya=852,Ga=592,Xa=0,Wa=1,qa=2,Ja=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Qa=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Va=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),$a=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ti=(t,e,a,i,n,s,r,o)=>{const l=o.bits;let h,d,_,f,c,u,w=0,b=0,m=0,g=0,p=0,k=0,v=0,y=0,x=0,z=0,A=null;const E=new Uint16Array(16),R=new Uint16Array(16);let Z,U,S,D=null;for(w=0;w<=15;w++)E[w]=0;for(b=0;b<i;b++)E[e[a+b]]++;for(p=l,g=15;g>=1&&0===E[g];g--);if(p>g&&(p=g),0===g)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(m=1;m<g&&0===E[m];m++);for(p<m&&(p=m),y=1,w=1;w<=15;w++)if(y<<=1,(y-=E[w])<0)return-1;if(y>0&&(0===t||1!==g))return-1;for(R[1]=0,w=1;w<15;w++)R[w+1]=R[w]+E[w];for(b=0;b<i;b++)0!==e[a+b]&&(r[R[e[a+b]]++]=b);if(0===t?(A=D=r,u=20):1===t?(A=Ja,D=Qa,u=257):(A=Va,D=$a,u=0),z=0,b=0,w=m,c=s,k=p,v=0,_=-1,f=(x=1<<p)-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){Z=w-v,r[b]+1<u?(U=0,S=r[b]):r[b]>=u?(U=D[r[b]-u],S=A[r[b]-u]):(U=96,S=0),h=1<<w-v,m=d=1<<k;do{n[c+(z>>v)+(d-=h)]=Z<<24|U<<16|S|0}while(0!==d);for(h=1<<w-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,b++,0==--E[w]){if(w===g)break;w=e[a+r[b]]}if(w>p&&(z&f)!==_){for(0===v&&(v=p),c+=m,y=1<<(k=w-v);k+v<g&&!((y-=E[k+v])<=0);)k++,y<<=1;if(x+=1<<k,1===t&&x>852||2===t&&x>592)return 1;n[_=z&f]=p<<24|k<<16|c-s|0}}return 0!==z&&(n[c+z]=w-v<<24|64<<16|0),o.bits=p,0};var ei=ti;const ai=0,ii=1,ni=2,{Z_FINISH:si,Z_BLOCK:ri,Z_TREES:oi,Z_OK:li,Z_STREAM_END:hi,Z_NEED_DICT:di,Z_STREAM_ERROR:_i,Z_DATA_ERROR:fi,Z_MEM_ERROR:ci,Z_BUF_ERROR:ui,Z_DEFLATED:wi}=zt,bi=16180,mi=16181,gi=16182,pi=16183,ki=16184,vi=16185,yi=16186,xi=16187,zi=16188,Ai=16189,Ei=16190,Ri=16191,Zi=16192,Ui=16193,Si=16194,Di=16195,Ti=16196,Oi=16197,Ii=16198,Fi=16199,Li=16200,Ni=16201,Bi=16202,Ci=16203,Mi=16204,Hi=16205,ji=16206,Ki=16207,Pi=16208,Yi=16209,Gi=16210,Xi=16211,Wi=852,qi=592,Ji=15,Qi=15,Vi=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function $i(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const tn=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<bi||e.mode>Xi?1:0},en=t=>{if(tn(t))return _i;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=bi,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,li},an=t=>{if(tn(t))return _i;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,en(t)},nn=(t,e)=>{let a;if(tn(t))return _i;const i=t.state;return e<0?(a=0,e=-e):(a=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_i:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,an(t))},sn=(t,e)=>{if(!t)return _i;const a=new $i;t.state=a,a.strm=t,a.window=null,a.mode=bi;const i=nn(t,e);return i!==li&&(t.state=null),i},rn=t=>sn(t,15);let on,ln,hn=!0;const dn=t=>{if(hn){on=new Int32Array(512),ln=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ei(1,t.lens,0,288,on,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ei(2,t.lens,0,32,ln,0,t.work,{bits:5}),hn=!1}t.lencode=on,t.lenbits=9,t.distcode=ln,t.distbits=5},_n=(t,e,a,i)=>{let n;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(a-s.wsize,a),0),s.wnext=0,s.whave=s.wsize):((n=s.wsize-s.wnext)>i&&(n=i),s.window.set(e.subarray(a-i,a-i+n),s.wnext),(i-=n)?(s.window.set(e.subarray(a-i,a),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0},fn=(t,e)=>{let a,i,n,s,r,o,l,h,d,_,f,c,u,w,b,m,g,p,k,v,y,x,z=0;const A=new Uint8Array(4);let E,R;const Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(tn(t)||!t.output||!t.input&&0!==t.avail_in)return _i;(a=t.state).mode===Ri&&(a.mode=16192),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,_=o,f=l,x=li;t:for(;;)switch(a.mode){case bi:if(0===a.wrap){a.mode=16192;break}for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(2&a.wrap&&35615===h){0===a.wbits&&(a.wbits=15),a.check=0,A[0]=255&h,A[1]=h>>>8&255,a.check=yt(a.check,A,2,0),h=0,d=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=Yi;break}if((15&h)!==wi){t.msg="unknown compression method",a.mode=Yi;break}if(d-=4,y=8+(15&(h>>>=4)),0===a.wbits&&(a.wbits=y),y>15||y>a.wbits){t.msg="invalid window size",a.mode=Yi;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=512&h?16189:Ri,h=0,d=0;break;case 16181:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.flags=h,(255&a.flags)!==wi){t.msg="unknown compression method",a.mode=Yi;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=Yi;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=yt(a.check,A,2,0)),h=0,d=0,a.mode=gi;case gi:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,a.check=yt(a.check,A,4,0)),h=0,d=0,a.mode=pi;case pi:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=yt(a.check,A,2,0)),h=0,d=0,a.mode=16184;case 16184:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=yt(a.check,A,2,0)),h=0,d=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&((c=a.length)>o&&(c=o),c&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(i.subarray(s,s+c),y)),512&a.flags&&4&a.wrap&&(a.check=yt(a.check,i,c,s)),o-=c,s+=c,a.length-=c),a.length))break t;a.length=0,a.mode=yi;case yi:if(2048&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=yt(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=yt(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.comment=null);a.mode=zi;case zi:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=Yi;break}h=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=Ri;break;case 16189:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}t.adler=a.check=Vi(h),h=0,d=0,a.mode=Ei;case Ei:if(0===a.havedict)return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,di;t.adler=a.check=1,a.mode=Ri;case Ri:if(e===ri||e===oi)break t;case 16192:if(a.last){h>>>=7&d,d-=7&d,a.mode=16206;break}for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}switch(a.last=1&h,d-=1,3&(h>>>=1)){case 0:a.mode=16193;break;case 1:if(dn(a),a.mode=Fi,e===oi){h>>>=2,d-=2;break t}break;case 2:a.mode=16196;break;case 3:t.msg="invalid block type",a.mode=Yi}h>>>=2,d-=2;break;case 16193:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=Yi;break}if(a.length=65535&h,h=0,d=0,a.mode=16194,e===oi)break t;case 16194:a.mode=Di;case Di:if(c=a.length){if(c>o&&(c=o),c>l&&(c=l),0===c)break t;n.set(i.subarray(s,s+c),r),o-=c,s+=c,l-=c,r+=c,a.length-=c;break}a.mode=Ri;break;case 16196:for(;d<14;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=Yi;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.lens[Z[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[Z[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,E={bits:a.lenbits},x=ei(0,a.lens,0,19,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid code lengths set",a.mode=Yi;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;m=(z=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,g=65535&z,!((b=z>>>24)<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(g<16)h>>>=b,d-=b,a.lens[a.have++]=g;else{if(16===g){for(R=b+2;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(h>>>=b,d-=b,0===a.have){t.msg="invalid bit length repeat",a.mode=Yi;break}y=a.lens[a.have-1],c=3+(3&h),h>>>=2,d-=2}else if(17===g){for(R=b+3;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}d-=b,y=0,c=3+(7&(h>>>=b)),h>>>=3,d-=3}else{for(R=b+7;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}d-=b,y=0,c=11+(127&(h>>>=b)),h>>>=7,d-=7}if(a.have+c>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=Yi;break}for(;c--;)a.lens[a.have++]=y}}if(a.mode===Yi)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=Yi;break}if(a.lenbits=9,E={bits:a.lenbits},x=ei(1,a.lens,0,a.nlen,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid literal/lengths set",a.mode=Yi;break}if(a.distbits=6,a.distcode=a.distdyn,E={bits:a.distbits},x=ei(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,E),a.distbits=E.bits,x){t.msg="invalid distances set",a.mode=Yi;break}if(a.mode=Fi,e===oi)break t;case Fi:a.mode=Li;case Li:if(o>=6&&l>=258){t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,Ka(t,f),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,a.mode===Ri&&(a.back=-1);break}for(a.back=0;m=(z=a.lencode[h&(1<<a.lenbits)-1])>>>16&255,g=65535&z,!((b=z>>>24)<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(m&&0==(240&m)){for(p=b,k=m,v=g;m=(z=a.lencode[v+((h&(1<<p+k)-1)>>p)])>>>16&255,g=65535&z,!(p+(b=z>>>24)<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=b,d-=b,a.back+=b,a.length=g,0===m){a.mode=Hi;break}if(32&m){a.back=-1,a.mode=Ri;break}if(64&m){t.msg="invalid literal/length code",a.mode=Yi;break}a.extra=15&m,a.mode=16201;case 16201:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=Bi;case Bi:for(;m=(z=a.distcode[h&(1<<a.distbits)-1])>>>16&255,g=65535&z,!((b=z>>>24)<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(0==(240&m)){for(p=b,k=m,v=g;m=(z=a.distcode[v+((h&(1<<p+k)-1)>>p)])>>>16&255,g=65535&z,!(p+(b=z>>>24)<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=b,d-=b,a.back+=b,64&m){t.msg="invalid distance code",a.mode=Yi;break}a.offset=g,a.extra=15&m,a.mode=16203;case 16203:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=Yi;break}a.mode=16204;case 16204:if(0===l)break t;if(c=f-l,a.offset>c){if((c=a.offset-c)>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=Yi;break}c>a.wnext?(c-=a.wnext,u=a.wsize-c):u=a.wnext-c,c>a.length&&(c=a.length),w=a.window}else w=n,u=r-a.offset,c=a.length;c>l&&(c=l),l-=c,a.length-=c;do{n[r++]=w[u++]}while(--c);0===a.length&&(a.mode=Li);break;case Hi:if(0===l)break t;n[r++]=a.length,l--,a.mode=Li;break;case 16206:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[s++]<<d,d+=8}if(f-=l,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?yt(a.check,n,f,r-f):gt(a.check,n,f,r-f)),f=l,4&a.wrap&&(a.flags?h:Vi(h))!==a.check){t.msg="incorrect data check",a.mode=Yi;break}h=0,d=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=Yi;break}h=0,d=0}a.mode=Pi;case Pi:x=hi;break t;case Yi:x=fi;break t;case Gi:return ci;case Xi:default:return _i}return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||f!==t.avail_out&&a.mode<Yi&&(a.mode<16206||e!==si))&&_n(t,t.output,t.next_out,f-t.avail_out),_-=t.avail_in,f-=t.avail_out,t.total_in+=_,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?yt(a.check,n,f,t.next_out-f):gt(a.check,n,f,t.next_out-f)),t.data_type=a.bits+(a.last?64:0)+(a.mode===Ri?128:0)+(a.mode===Fi||16194===a.mode?256:0),(0===_&&0===f||e===si)&&x===li&&(x=ui),x},cn=t=>{if(tn(t))return _i;let e=t.state;return e.window&&(e.window=null),t.state=null,li},un=(t,e)=>{if(tn(t))return _i;const a=t.state;return 0==(2&a.wrap)?_i:(a.head=e,e.done=!1,li)},wn=(t,e)=>{const a=e.length;let i,n,s;return tn(t)?_i:0!==(i=t.state).wrap&&i.mode!==Ei?_i:i.mode===Ei&&(n=gt(n=1,e,a,0))!==i.check?fi:(s=_n(t,e,a,a))?(i.mode=Gi,ci):(i.havedict=1,li)};var bn=an,mn=nn,gn=en,pn=rn,kn=sn,vn=fn,yn=cn,xn=un,zn=wn,An="pako inflate (from Nodeca project)",En={inflateReset:bn,inflateReset2:mn,inflateResetKeep:gn,inflateInit:pn,inflateInit2:kn,inflate:vn,inflateEnd:yn,inflateGetHeader:xn,inflateSetDictionary:zn,inflateInfo:An};function Rn(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Zn=Rn;const Un=Object.prototype.toString,{Z_NO_FLUSH:Sn,Z_FINISH:Dn,Z_OK:Tn,Z_STREAM_END:On,Z_NEED_DICT:In,Z_STREAM_ERROR:Fn,Z_DATA_ERROR:Ln,Z_MEM_ERROR:Nn}=zt;function Bn(t){this.options=_a.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ka,this.strm.avail_out=0;let a=En.inflateInit2(this.strm,e.windowBits);if(a!==Tn)throw new Error(xt[a]);if(this.header=new Zn,En.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ga.string2buf(e.dictionary):"[object ArrayBuffer]"===Un.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=En.inflateSetDictionary(this.strm,e.dictionary))!==Tn))throw new Error(xt[a])}function Cn(t,e){const a=new Bn(e);if(a.push(t),a.err)throw a.msg||xt[a.err];return a.result}function Mn(t,e){return(e=e||{}).raw=!0,Cn(t,e)}Bn.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let s,r,o;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Dn:Sn,"[object ArrayBuffer]"===Un.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(s=En.inflate(a,r))===In&&n&&((s=En.inflateSetDictionary(a,n))===Tn?s=En.inflate(a,r):s===Ln&&(s=In));a.avail_in>0&&s===On&&a.state.wrap>0&&0!==t[a.next_in];)En.inflateReset(a),s=En.inflate(a,r);switch(s){case Fn:case Ln:case In:case Nn:return this.onEnd(s),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||s===On))if("string"===this.options.to){let t=ga.utf8border(a.output,a.next_out),e=a.next_out-t,n=ga.buf2string(a.output,t);a.next_out=e,a.avail_out=i-e,e&&a.output.set(a.output.subarray(t,t+e),0),this.onData(n)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(s!==Tn||0!==o){if(s===On)return s=En.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},Bn.prototype.onData=function(t){this.chunks.push(t)},Bn.prototype.onEnd=function(t){t===Tn&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=_a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Hn=Bn,jn=Cn,Kn=Mn,Pn=Cn,Yn=zt,Gn={Inflate:Hn,inflate:jn,inflateRaw:Kn,ungzip:Pn,constants:Yn};const{Deflate:Xn,deflate:Wn,deflateRaw:qn,gzip:Jn}=Ma,{Inflate:Qn,inflate:Vn,inflateRaw:$n,ungzip:ts}=Gn;var es=Xn;exports.Deflate=es;var as=Wn;exports.deflate=as;var is=qn;exports.deflateRaw=is;var ns=Jn;exports.gzip=ns;var ss=Qn;exports.Inflate=ss;var rs=Vn;exports.inflate=rs;var os=$n;exports.inflateRaw=os;var ls=ts;exports.ungzip=ls;var hs=zt;exports.constants=hs;var ds={Deflate:es,deflate:as,deflateRaw:is,gzip:ns,Inflate:ss,inflate:rs,inflateRaw:os,ungzip:ls,constants:hs};exports.default=ds;
},{}],"Yi9z":[function(require,module,exports) {
module.exports=function(n){return new Promise(function(e,o){var r=document.createElement("script");r.async=!0,r.type="text/javascript",r.charset="utf-8",r.src=n,r.onerror=function(n){r.onerror=r.onload=null,o(n)},r.onload=function(){r.onerror=r.onload=null,e()},document.getElementsByTagName("head")[0].appendChild(r)})};
},{}],0:[function(require,module,exports) {
var b=require("TUK3");b.register("js",require("Yi9z"));
},{}]},{},[0,"Focm"], null)
//# sourceMappingURL=templates.1ae38ff1.js.map